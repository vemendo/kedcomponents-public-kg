var kedcomponents=function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],r[o]&&m.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);m.length;)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={6:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;return s.push([85,0]),n()}([function(e,t){e.exports=React},,function(e,t,n){"use strict";function a(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)<8192)return e.substr(0,t)+e[t].toLocaleUpperCase()+e.substr(t+1);return e}function r(e,t){return"object"!=typeof t?e:(Object.keys(t).forEach(function(n){e[n]=t[n]}),e)}function s(e,t){var n={};return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),t&&r(n,t),n}n.d(t,"d",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"k",function(){return i}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"n",function(){return m}),n.d(t,"m",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return v}),n.d(t,"j",function(){return g});var o=[].concat;function i(e){return o.apply([],e)}function l(e){return function(t,n){var a=t[e],r=n[e];return a>r?1:a<r?-1:0}}function c(e,t,n){return(e=Array.isArray(e)?e:[e]).map(function(e){return function(a,r){return function(e,a){return"string"==typeof e?e.localeCompare(a,t,n):e<a?-1:e>a?1:0}(a[e],r[e])}}).reduce(function(e,t){return function(n,a){return e(n,a)||t(n,a)}})}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e[0];return function(e,t){for(var n=e[0],a=1,r=e.length;a<r;++a)n+=t[a-1]+e[a];return n}(e,t)}function d(e,t){var n;return"string"==typeof t&&(n=/\/Date\((\d*)\)\//.exec(t))?new Date(+n[1]):t}function m(e){var t=new CustomEvent("info",{detail:e});window.dispatchEvent(t)}function p(e){var t="string"==typeof e?e:e.message,n=new CustomEvent("customerror",{detail:t});console.error(e),window.dispatchEvent(n)}function f(e,t){return e.length>t?e.substr(0,t-3)+"...":e}function h(e,t){for(var n={},a=0,r=e.length;a<r;++a){var s=e[a],o=t(s),i=n[o];i?i.push(s):n[o]=[s]}return n}function b(e,t){for(var n={},a=0,r=e.length;a<r;++a){var s=e[a];n[t(s)]=s}return n}function v(e,t){for(var n={},a=0,r=t;a<r.length;a++){var s=r[a];s in e&&(n[s]=e[s])}return n}function g(e,t){var n=b(e,t);return Object.keys(n).map(function(e){return n[e]})}},function(e,t,n){"use strict";var a="undefined"==typeof KED?{}:KED;"undefined"!=typeof window&&"undefined"==typeof KED&&(window.KED=a);var r=a;r.env||(r.env={});t.a=r.env},,,function(e,t,n){"use strict";var a=n(23);n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b}),n.d(t,"c",function(){return a.c}),n.d(t,"d",function(){return a.e}),n.d(t,"e",function(){return a.f}),n.d(t,"f",function(){return a.g})},function(e,t,n){"use strict";var a=n(1),r=n(29),s=n(3),o=n(5),i=n.n(o),l=n(33),c=function(){function e(e){"string"==typeof e?(this.user=e,this.lastWrite=Date.now(),this.weekDate=Object(l.a)().startOf("week").valueOf(),this.openCourses={}):Object.assign(this,e)}return e.load=function(t){return a.b(this,void 0,void 0,function(){var n,r,s;return a.d(this,function(a){return n=localStorage.getItem("WeekPlannerPersistedState2"),r=n&&JSON.parse(n),s=new e(t),r&&Object.assign(s,r),[2,s.user!==t||s.isExpired(i()())?new e(t):s]})})},e.prototype.save=function(){return a.b(this,void 0,void 0,function(){var e;return a.d(this,function(t){return this.lastWrite=Date.now(),e=JSON.stringify(this),localStorage.setItem("WeekPlannerPersistedState2",e),[2]})})},e.prototype.isExpired=function(t){return i()(this.lastWrite).isBefore(t.add(0-e.EXPIRATION_HOURS,"hours"))},e.EXPIRATION_HOURS=12,e.VERSION=2,e}(),u=n(6),d=n(26);n.d(t,"a",function(){return m});var m=s.a.userTasksRepo,p=function(e){function t(){var t=e.call(this,{getClient:function(){return s.a.kedBackendClient},optimistic:!0,table:"usertasks",user:s.a.currentUser?s.a.currentUser.mail:"",getQueryOptions:function(){return a.b(t,void 0,void 0,function(){var e,t,n,r,o;return a.d(this,function(a){switch(a.label){case 0:return e=s.a.currentUser?s.a.currentUser.mail:"",this.persistedState?[3,2]:(t=this,[4,c.load(e)]);case 1:t.persistedState=a.sent(),a.label=2;case 2:return n=this.persistedState.weekDate,r=i()(n).week(),[2,{from:(o=Object(d.a)(i()(n).year(),r)).notBefore,to:o.notAfter,role:"USER",include:["task","course"],flags:["includeIdsOnly"]}]}})})}})||this;return t.persistedState=null,t}return a.c(t,e),t.prototype.updatePersistedState=function(e){return a.b(this,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return Object.assign(this.persistedState,e),[4,this.persistedState.save()];case 1:return t.sent(),this.mem.notifySubscribers(),[2]}})})},t.prototype.setTaskDoneState=function(e,t){return a.b(this,void 0,void 0,function(){var n,r,s,o,l,c,u;return a.d(this,function(a){switch(a.label){case 0:return n=this.options,r=n.getClient,s=n.optimistic,n.table,o=r(),l=Object.assign({},e,{done:t}),s?[4,this.mem.update(Object.assign({},l,{$meta:"updating"}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[4,o.list("usertasks",{name:e.name,role:"USER",include:["task","course"],flags:["includeIdsOnly"],from:i()(this.persistedState.weekDate).add(-3,"weeks").valueOf(),to:i()(this.persistedState.weekDate).add(3,"weeks").valueOf()},{cache:"no-cache"})];case 3:return c=a.sent(),u=c.filter(function(t){return!(t.courseName!==e.courseName||t.learningGoal!==e.learningGoal||e.task&&t.task.map(function(e){return e.id}).join("")!==e.task.map(function(e){return e.id}).join("")||e.course&&t.course.map(function(e){return e.id}).join("")!==e.course.map(function(e){return e.id}).join(""))}),[4,this.update(u,function(e){return e.done=t})];case 4:return a.sent(),[2]}})})},t.prototype.setSubTaskDoneState=function(e,t,n){return a.b(this,void 0,void 0,function(){var r,s;return a.d(this,function(a){switch(a.label){case 0:return r=this.options,s=r.getClient,r.optimistic,r.table,s(),[4,this.update([e],function(e){return e.subTasks&&e.subTasks.filter(function(e){return e.id===t}).forEach(function(e){return e.done=n})})];case 1:return a.sent(),[2]}})})},t.prototype.setWeekPlannerBoxOpen=function(e,t){return a.b(this,void 0,void 0,function(){var n;return a.d(this,function(r){switch(r.label){case 0:return n=a.a({},this.persistedState.openCourses),t?n[e]=!0:delete n[e],[4,this.updatePersistedState({openCourses:n})];case 1:return r.sent(),[2]}})})},t.prototype.changeWeek=function(e){return a.b(this,void 0,void 0,function(){var t,n;return a.d(this,function(a){switch(a.label){case 0:return(t=this.persistedState)?[3,2]:[4,c.load(s.a.currentUser.mail)];case 1:t=a.sent(),a.label=2;case 2:return(n=new c(t)).weekDate=i()(e).startOf("week").valueOf(),n.save(),this.persistedState=n,[4,this.mem.refreshFromServer()];case 3:return a.sent(),[2]}})})},t.prototype.subscribe=function(e){var t=this,n=function(n){e(n.filter(function(e){return!e.weekTexts}),t.persistedState,n.filter(function(e){return!!e.weekTexts})[0]||{id:Object(u.e)(),dateTime:t.persistedState.weekDate,weekTexts:{assessment:"",strategy:""},acl:[new u.b("email",s.a.currentUser.mail,"S"),new u.b("schoolRole",s.a.currentUser.school+"/EMPLOYEE","R")].map(function(e){return e.toString()})})};n.subscriber=e,this.mem.subscribe(n)},t.prototype.unsubscribe=function(e){this.mem.subscribers=this.mem.subscribers.filter(function(t){return t.subscriber!==e})},t}(r.a);m||(m=s.a.userTasksRepo=new p).mem.ensureHasData()},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var a=n(21);a.a.cfg||(a.a.cfg={}),t.a=a.a.cfg},function(e,t,n){"use strict";function a(e,t){var n=(t||{}).toLower,a={};return e&&e.length>1&&e.substr(1).split("&").map(function(e){return e.split("=").map(function(e){return decodeURIComponent(e.trim())})}).forEach(function(e){var t=e[0],r=e[1];return a[n?t.toLowerCase():t]=r}),a}function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function s(e){return"?"+r(e)}function o(e){var t=e.indexOf("?");return t>=0?[e.substr(0,t),e.substr(t)]:[e,""]}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o})},,function(e,t,n){"use strict";var a=n(1),r=n(6);function s(e){return[{type:"email",value:e.mail},{type:"school",value:e.school}].concat(e.roles.map(function(e){return{type:"role",value:e}})).concat(e.roles.map(function(t){return{type:"schoolRole",value:e.school+"/"+t}}))}var o=n(3),i=n(10);n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,!1,function(){return s});var l=["user","role","school","debug","testVersion","testversion","schoolType","schooltype"];function c(e,t){var n=s(o.a.currentUser);return Object(r.f)(r.b.fromStringArray(e.acl||[]),n,t)}function u(e){return c(e,"W")}function d(e){var t=o.a.currentUser.roles.some(function(e){return"EMPLOYEE"===e||"ADMIN"===e}),n=(e||"").toLowerCase()===o.a.currentUser.school.toLowerCase();return t&&n}var m={actAs:function(e){var t=e.role,n=e.school,r=e.url,s=Object(i.b)(location.search),o=a.a({},s,{role:t,school:n}),l=Object(i.a)(o);r?location.href=""+r+l:(location.hash="#",location.search=l)}};function p(e){m.actAs(e)}function f(e,t){for(var n=Object(i.b)(location.search),r=a.a({},t),s=0,o=l;s<o.length;s++){var c=o[s];n[c]&&(r[c]=n[c])}return""+e+Object(i.a)(r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(0),r=function(){return a.createElement("span",null,a.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"})," ")}},function(e,t,n){"use strict";function a(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}function r(e){var t=null;return function(){return t||(t=e.apply(this,arguments).then(function(e){return t=null,e})),t}}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return l});var a=n(5),r=n.n(a);function s(e){return"AT"===e?[32,51]:[1,25]}function o(e){return e.month()>=7?[r()(new Date(e.year(),7,1)),r()(new Date(e.year(),11,31))]:[r()(new Date(e.year(),0,1)),r()(new Date(e.year(),6,31))]}function i(e){var t=e.year(),n=e.month()>=7,a=n?[t,t+1]:[t-1,t];return{academicYear:a[0]+"/"+a[1],term:n?"AT":"ST",week:e.week()}}function l(e,t){return e.split("/").map(function(e){return parseInt(e)+t}).map(function(e){return""+e}).join("/")}},,function(e,t,n){"use strict";var a=n(23),r=function(){function e(){}return e.prototype.save=function(e,t){sessionStorage.setItem("bearer-"+e,JSON.stringify(t))},e.prototype.load=function(e){try{var t=sessionStorage.getItem("bearer-"+e);return Promise.resolve(t?JSON.parse(t):{token:null,expires:0})}catch(e){return Promise.resolve({token:null,expires:0})}},e}(),s=n(14);function o(e){e.resources||(e.resources=[])}function i(e,t,n){switch(t){case"courses":!function(e,t){e.modules||(e.modules=[]),e.modules.forEach(function(e){e.resources||(e.resources=[]),e.taskIds||(e.taskIds=[])}),e.responsibleTeachers||(e.responsibleTeachers=[]),"resourses"in e&&!("resources"in e)&&(e.resources=e.resourses,delete e.resourses),e.resources||(e.resources=[]),t&&t.forEach(function(t){switch(t){case"tasks":e.tasks.forEach(function(e){return o(e)})}})}(e,n);break;case"tasks":o(e)}}var l,c=(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}l((a=a.apply(e,t||[])).next())})},d=function(e,t){var n,a,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=a[2&s[0]?"return":s[0]?"throw":"next"])&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[0,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};!function(e){if(!e.__migrator_mixed_in){e.__migrator_mixed_in=!0;var t=e.get,n=e.list;e.get=function(e,n,a){var r=a&&a.include;return t.apply(this,arguments).then(function(t){return i(t,e,r&&r.toString().split(",")),t})},e.list=function(e,t){var a=t&&t.include;return n.apply(this,arguments).then(function(t){return t.forEach(function(t){return i(t,e,a&&a.toString().split(","))}),t})}}}(a.d.prototype);var m=new r,p=Date.now(),f=function(){function e(e,t,n){this.tokenPath=e,this.tokenResponseMapper=t,this.tokenId=n,this.tokenInfo={token:null,expires:0},this.getBearer=Object(s.a)(this.getBearer.bind(this)),this.refreshBearer=Object(s.a)(this.refreshBearer.bind(this))}return e.prototype.getBearer=function(){return u(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.tokenInfo.token?[3,2]:this.tokenId?(e=this,[4,m.load(this.tokenId)]):[3,2];case 1:e.tokenInfo=t.sent(),t.label=2;case 2:return this.tokenInfo.expires<Date.now()?[4,this.refreshBearer()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2,this.tokenInfo]}})})},e.prototype.refreshBearer=function(){return u(this,void 0,void 0,function(){var e,t,n,a,r;return d(this,function(s){switch(s.label){case 0:return[4,fetch(this.tokenPath,{headers:{Accept:"text/plain; application/json"},redirect:"manual",cache:"no-cache",credentials:"same-origin"})];case 1:return(302===(e=s.sent()).status||!e.status&&"opaqueredirect"===e.type)&&Date.now()-p>6e4&&(this.wantsRedirect=!0,console.log("Redirect wanted. Reload page."),window.location.reload(!0)),200==e.status?[3,3]:(t=Error.bind,n="HTTP"+e.status+" ",[4,e.text()]);case 2:throw new(t.apply(Error,[void 0,n+s.sent()]));case 3:return a=this,r=this.tokenResponseMapper,[4,e.text()];case 4:return a.tokenInfo=r.apply(this,[s.sent()]),m.save(this.tokenId,this.tokenInfo),[2,this.tokenInfo]}})})},e}(),h={fetch:fetch.bind(self),btoa:btoa.bind(self)},b=function(e){function t(t,n,a){var r="string"!=typeof n?n:new f(n,a&&a.tokenResponseMapper||function(e){return{token:e,expires:Date.now()+212400}},a&&a.tokenId);return e.call(this,h,r,t)||this}return c(t,e),t}(a.d);n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return b})},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(14),r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}l((a=a.apply(e,t||[])).next())})},o=function(e,t){var n,a,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=a[2&s[0]?"return":s[0]?"throw":"next"])&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[0,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},i=function(){function e(e,t,n){this.isomorphic=e,this.baseUrl=t,this.options=n,this.fetchOptions={mode:"cors"},this.authHeader=n.bearer?"Bearer "+n.bearer:n.username?"Basic "+e.btoa(n.username+":"+(n.password||"")):null,this.bearerProvider=n.bearerProvider||null}return e.prototype.fetch=function(e,t,n,i,l){return s(this,void 0,void 0,function(){var s,c,u,d,m,p,f,h,b,v,g;return o(this,function(o){switch(o.label){case 0:return l&&"no-cache"===l.cache&&(i=r({},i,{nocache:Object(a.b)()})),s=i&&Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])}).join("&"),u=(c=this).authHeader,d=c.tokenInfo,m=c.bearerProvider,u||d||!m?[3,2]:(p=this,[4,m.getBearer()]);case 1:p.tokenInfo=d=o.sent(),o.label=2;case 2:return d?d.expires<Date.now()?(console.log("Token expired. Refresh it:"),f=this,[4,m.refreshBearer()]):[3,4]:[3,5];case 3:f.tokenInfo=d=o.sent(),o.label=4;case 4:u="Bearer "+d.token,o.label=5;case 5:return u&&(n.Authorization=u),h=this.baseUrl+e+(s?"?"+s:""),[4,this.isomorphic.fetch(h,r({},this.fetchOptions,{headers:n,method:t},l))];case 6:return 401==(b=o.sent()).status&&this.bearerProvider?(v=b.headers.get("www-authenticate"),console.log("Got "+b.status+" from "+(this.baseUrl+e)),v&&/Bearer/i.test(v)?(g=this,[4,this.bearerProvider.refreshBearer()]):[3,9]):[3,9];case 7:return g.tokenInfo=o.sent(),n.Authorization="Bearer "+this.tokenInfo.token,[4,this.isomorphic.fetch(h,r({},this.fetchOptions,{headers:n,method:t},l))];case 8:b=o.sent(),o.label=9;case 9:return[2,b]}})})},e.prototype.get=function(e,t,n){return this.fetch(e,"GET",{Accept:"application/json; text/plain"},t,n)},e.prototype.post=function(e,t,n){return this.fetch(e,"POST",{"Content-Type":"application/json",Accept:"application/json"},null,r({},n,{body:JSON.stringify(t)}))},e.prototype.delete=function(e,t,n,a){return this.fetch(e,"DELETE",{Accept:"application/json; text/plain"},t,r({},a,{body:n}))},e}()},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var a="undefined"==typeof KED?{}:KED;"undefined"!=typeof window&&"undefined"==typeof KED&&(window.KED=a),t.a=a},,function(e,t,n){"use strict";var a=n(19),r=n(14),s=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}l((a=a.apply(e,t||[])).next())})},o=function(e,t){var n,a,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=a[2&s[0]?"return":s[0]?"throw":"next"])&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[0,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},i=function(){function e(e,t,n,s,o,i,l){this.isomorphic=e,this.storage=t,this.tokenId=n,this.clientId=s,this.clientSecret=o,this.tokenUrl=i,this.tokenQuery=l,this.tokenInfo={token:null,expires:0},this.client=new a.a(e,"",{username:this.clientId,password:this.clientSecret}),this.getBearer=Object(r.a)(this.getBearer.bind(this)),this.refreshBearer=Object(r.a)(this.refreshBearer.bind(this))}return e.prototype.getBearer=function(){return s(this,void 0,void 0,function(){var e,t,n,a;return o(this,function(r){switch(r.label){case 0:if(e=this.tokenInfo,t=e.token,n=e.expires,t&&n>=Date.now())return[2,this.tokenInfo];r.label=1;case 1:return r.trys.push([1,4,,6]),a=this,[4,this.storage.load(this.clientId+"/"+this.tokenId)];case 2:return a.tokenInfo=r.sent(),this.tokenInfo.token&&this.tokenInfo.expires>=Date.now()?[2,this.tokenInfo]:[4,this.refreshBearer()];case 3:return r.sent(),[2,this.tokenInfo];case 4:return r.sent(),[4,this.refreshBearer()];case 5:return r.sent(),[2,this.tokenInfo];case 6:return[2]}})})},e.prototype.refreshBearer=function(){return s(this,void 0,void 0,function(){var e,t,n,a;return o(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<6?(console.log("Retrieving token for "+this.tokenId),[4,this.client.get(this.tokenUrl,this.tokenQuery,{cache:"reload"})]):[3,5];case 2:return 200!==(e=r.sent()).status?(console.warn("Got "+e.status+" "+e.statusText),[3,4]):(n=this,a={},[4,e.text()]);case 3:return n.tokenInfo=(a.token=r.sent(),a.expires=Date.now()+354e4,a),console.log("Got token for "+this.tokenId+": "+JSON.stringify(this.tokenInfo)),this.storage.save(this.clientId+"/"+this.tokenId,this.tokenInfo),[2,this.tokenInfo];case 4:return++t,[3,1];case 5:throw new Error("Failed to retrieve token for "+JSON.stringify(this.tokenId))}})})},e}(),l=function(){function e(e,t,n){this.accessClaimType=e,this.accessClaimValue=t,this.right=n}return e.fromString=function(t){if(!t)return null;var n=t.split(":");if(n.length<3)throw new Error("Invalid access string: "+t);var a=e.unescape(n[0]),r=e.unescape(n[1]),s=n[2];if("R"!==s&&"W"!==s&&"S"!==s)throw new Error("Invalid access string: "+t);return new e(a,r,s)},e.escape=function(e){return e.replace(/\%/g,"%25").replace(/\:/g,"%3A")},e.unescape=function(e){return e.replace(/\%3A/g,":").replace(/\%25/g,"%")},e.prototype.toString=function(){return e.escape(this.accessClaimType)+":"+e.escape(this.accessClaimValue)+":"+this.right},e.fromStringArray=function(t){return t.map(function(t){return e.fromString(t)}).filter(function(e){return e})},e.toStringArray=function(e){return e.map(function(e){return e.toString()})},e}();function c(e,t,n){return!!t.some(function(e){return"role"===e.type&&"ADMIN"===e.value})||e.some(function(e){return t.some(function(t){return e.accessClaimType===t.type&&e.accessClaimValue===t.value&&("R"===e.right&&"R"===n||"W"===e.right&&["R","W"].indexOf(n)>=0||"S"===e.right)})})}var u,d=(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){var a=e.call(this,"HTTP"+t+" "+n)||this;return a.code=t,a.message=n,a.name="http"+t,a}return d(t,e),t}(Error);n.d(t,"d",function(){return b}),n.d(t,"a",function(){return v}),n.d(t,"f",function(){return r.b}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return m});var p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}l((a=a.apply(e,t||[])).next())})},h=function(e,t){var n,a,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=a[2&s[0]?"return":s[0]?"throw":"next"])&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[0,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},b=function(){function e(e,t,n){this.http=new a.a(e,n,{bearerProvider:t})}return e.prototype.getMyClaims=function(e,t){return f(this,void 0,void 0,function(){var n,a,r;return h(this,function(s){switch(s.label){case 0:return[4,this.http.get("me/claims/"+(e||""),null,t)];case 1:return 200==(n=s.sent()).status?[3,3]:(a=m.bind,r=[void 0,n.status],[4,n.text()]);case 2:throw new(a.apply(m,r.concat([s.sent()])));case 3:return[4,n.json()];case 4:return[2,s.sent()]}})})},e.prototype.get=function(e,t,n,a){return f(this,void 0,void 0,function(){var r,s,o;return h(this,function(i){switch(i.label){case 0:return[4,this.http.get(e+"/"+t,n,a)];case 1:return 200==(r=i.sent()).status?[3,3]:(s=m.bind,o=[void 0,r.status],[4,r.text()]);case 2:throw new(s.apply(m,o.concat([i.sent()])));case 3:return[4,r.json()];case 4:return[2,i.sent()]}})})},e.prototype.list=function(e,t,n){return f(this,void 0,void 0,function(){var a,r,s;return h(this,function(o){switch(o.label){case 0:return[4,this.http.get(""+e,t,n)];case 1:return 200==(a=o.sent()).status?[3,3]:(r=m.bind,s=[void 0,a.status],[4,a.text()]);case 2:throw new(r.apply(m,s.concat([o.sent()])));case 3:return[4,a.json()];case 4:return[2,o.sent()]}})})},e.prototype.batch=function(e,t){return f(this,void 0,void 0,function(){var n,a,r;return h(this,function(s){switch(s.label){case 0:return e=e.slice().sort(function(e,t){return"add"===e.op?-1:"add"===t.op?1:"delete"===e.op?1:"delete"===t.op?-1:0}),[4,this.http.post("batch",e,t)];case 1:return 200==(n=s.sent()).status?[3,3]:(a=m.bind,r=[void 0,n.status],[4,n.text()]);case 2:throw new(a.apply(m,r.concat([s.sent()])));case 3:return[4,n.json()];case 4:return[2,s.sent()]}})})},e.prototype.do=function(e){return f(this,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return t=new v,e(t),[4,this.batch(t.mutationRequests)];case 1:return[2,n.sent()]}})})},e.prototype.deleteRealm=function(e){return f(this,void 0,void 0,function(){var t,n,a;return h(this,function(r){switch(r.label){case 0:return[4,this.http.delete("realms/"+e)];case 1:return 200==(t=r.sent()).status?[3,3]:(n=m.bind,a=[void 0,t.status],[4,t.text()]);case 2:throw new(n.apply(m,a.concat([r.sent()])));case 3:return[4,t.json()];case 4:return[2,r.sent()]}})})},e.prototype.add=function(e,t){return this.do(function(n){return n.add(e,t)})},e.prototype.put=function(e,t){return this.do(function(n){return n.put(e,t)})},e.prototype.delete=function(e,t){return this.do(function(n){return n.delete(e,t)})},e.prototype.share=function(e,t,n){return this.do(function(a){return a.share(e,t,n)})},e.prototype.unshare=function(e,t,n){return this.do(function(a){return a.unshare(e,t,n)})},e.prototype.link=function(e,t,n,a,r){return this.do(function(s){return s.link(e,t,n,a,r)})},e.prototype.link2=function(e,t,n,a){return this.do(function(r){return r.link2(e,t,a,n)})},e.prototype.unlink=function(e,t,n,a,r){return this.do(function(s){return s.unlink(e,t,n,a,r)})},e.prototype.unlink2=function(e,t,n,a){return this.do(function(r){return r.unlink2(e,t,a,n)})},e}(),v=function(){function e(){this.mutationRequests=[]}return e.prototype.add=function(e,t){return this.mutationRequests.push({op:"add",table:e,doc:t}),this},e.prototype.put=function(e,t){return delete(t=p({},t)).acl,this.mutationRequests.push({op:"put",table:e,doc:t}),this},e.prototype.delete=function(e,t){return this.mutationRequests.push({op:"delete",table:e,id:t}),this},e.prototype.share=function(e,t,n){return this.mutationRequests.push({op:"share",table:e,id:t,acl:n}),this},e.prototype.unshare=function(e,t,n){return this.mutationRequests.push({op:"unshare",table:e,id:t,acl:n}),this},e.prototype.link=function(e,t,n,a,r){return this.mutationRequests.push({op:"link",sourceTable:e,sourceId:t,targetTable:n,targetId:a,label:r}),this},e.prototype.link2=function(e,t,n,a){this.mutationRequests.push({op:"link",sourceTable:e,sourceId:t,targetId:a,label:n})},e.prototype.unlink=function(e,t,n,a,r){return this.mutationRequests.push({op:"unlink",sourceTable:e,sourceId:t,targetTable:n,targetId:a,label:r}),this},e.prototype.unlink2=function(e,t,n,a){return this.mutationRequests.push({op:"unlink",sourceTable:e,sourceId:t,targetId:a,label:n}),this},e}()},function(e,t,n){"use strict";var a=n(1),r=n(19),s=n(6),o=n(30),i=n(2),l=[{courseId:"2070d120-30ad-49e9-89c3-9c584a6cfa29",periodName:"HT2017",periodGoalGrade:"A",name:"Naturkunskap 1b",shortName:"XXX",courseSteps:[]},{courseId:"2070d120-30ad-49e9-89c3-9c584a6cfa2c",periodName:"VT2017",periodGoalGrade:"A",name:"Engelska",shortName:"EN",courseSteps:[{stepId:"61f02bc7-1a0d-4b80-9bf1-07b6280379db",name:"1. Lära känna varandra",shortName:"1",isCompleted:!0,completedDate:"/Date(1472111903600)/"},{stepId:"a34c07c7-3932-4f64-87f9-feb5646db3db",name:"10. En saga",shortName:"10",isCompleted:!0,completedDate:"/Date(1472111903740)/"},{stepId:"e931f2bb-5727-4d99-b9e5-1bababfbc2e9",name:"11. Det här är jag",shortName:"11",isCompleted:!0,completedDate:"/Date(1472111903757)/"},{stepId:"ab823339-90ac-4b7f-a895-869d25cef504",name:"12. Jag och min familj",shortName:"12",isCompleted:!0,completedDate:"/Date(1472111903770)/"},{stepId:"53e00313-4980-4ab2-84ff-abe80ecd72d2",name:"13. Jag och mina vänner",shortName:"13",isCompleted:!0,completedDate:"/Date(1472111903787)/"},{stepId:"828796e9-84ad-4496-aa78-7850dd5bb23a",name:"14. Jag och min fritid",shortName:"14",isCompleted:!0,completedDate:"/Date(1472111903803)/"},{stepId:"31e08f37-4ec5-4366-9af6-bca5b9070198",name:"15. The Blog",shortName:"15",isCompleted:!0,completedDate:"/Date(1472111904117)/"},{stepId:"4f88e9a3-9b36-47af-9686-d28b00ca98fc",name:"16. Sport",shortName:"16",isCompleted:!0,completedDate:"/Date(1474888651180)/"},{stepId:"abb57443-be68-48b7-a719-3454afbf3daa",name:"17. Musik",shortName:"17",isCompleted:!0,completedDate:"/Date(1477656328037)/"},{stepId:"964f7ac3-8cf7-4042-912f-58ffb6812ddb",name:"18. Vykort",shortName:"18",isCompleted:null,completedDate:null},{stepId:"3002e95c-8de0-4914-a754-0773a18606bf",name:"19. Läsa noveller",shortName:"19",isCompleted:null,completedDate:null},{stepId:"d8708a56-e4fb-4ad3-84ef-bb40481eaf80",name:"2. Veckans aktiviteter",shortName:"2",isCompleted:!0,completedDate:"/Date(1472111903613)/"},{stepId:"46915f18-288c-44df-b224-1852d221b6ca",name:"20. Summer camp",shortName:"20",isCompleted:null,completedDate:null},{stepId:"db22d300-0126-4a32-950d-aaf2f7142627",name:"21. Hus och hem",shortName:"21",isCompleted:null,completedDate:null},{stepId:"68111c18-e610-45c0-b290-9dd3cede1e48",name:"22. Sightseeing",shortName:"22",isCompleted:null,completedDate:null},{stepId:"4c84dd89-66f2-4ea1-bce8-3fde1724dcc9",name:"23. Vid matbordet",shortName:"23",isCompleted:!0,completedDate:"/Date(1488205880703)/"},{stepId:"75943640-f031-41da-8495-9d87b5804a3e",name:"24. Traditioner",shortName:"24",isCompleted:null,completedDate:null},{stepId:"72021bc2-0ea8-4d39-87fa-11cc976e9c9f",name:"25. Staying with a host family",shortName:"25",isCompleted:null,completedDate:null},{stepId:"574e1626-cad3-4220-8ba7-b443f03830b4",name:"26. Det engelska språket",shortName:"26",isCompleted:null,completedDate:null},{stepId:"50a3682e-057d-45b1-81b5-e2eaa8b6d16b",name:"27. Skolan och framtidsdrömmar",shortName:"27",isCompleted:null,completedDate:null},{stepId:"15a47a71-989a-4348-8fcb-a10683d263ec",name:"28. Identitet",shortName:"28",isCompleted:null,completedDate:null},{stepId:"5717f099-477f-433d-b10a-c2bf0dfe6f8e",name:"29. Att läsa en bok",shortName:"29",isCompleted:null,completedDate:null},{stepId:"0443638f-a546-40d8-a533-e2d12abef609",name:"3. Fira ett speciellt tillfälle",shortName:"3",isCompleted:!0,completedDate:"/Date(1472111903630)/"},{stepId:"54ff6488-f0ae-4fb6-b4e4-0f29d9274b23",name:"30. The World Today",shortName:"30",isCompleted:null,completedDate:null},{stepId:"2ab8a527-cd74-4847-97a6-79f629e22e84",name:"31. Entertainment",shortName:"31",isCompleted:null,completedDate:null},{stepId:"1b5d42ff-9615-439a-9ae2-89779040bf91",name:"32. Interview",shortName:"32",isCompleted:null,completedDate:null},{stepId:"29ffc098-d26d-4f3b-a295-b5f065923bf2",name:"33. Filmed books",shortName:"33",isCompleted:null,completedDate:null},{stepId:"4d5fe734-9af9-42b8-8c50-920c9a450bc1",name:"34. See the film",shortName:"34",isCompleted:null,completedDate:null},{stepId:"dd87c548-4a3a-4a62-9114-70ec7e713aee",name:"35. Write a bestseller",shortName:"35",isCompleted:null,completedDate:null},{stepId:"1fb5ce80-faf0-465c-9be8-c9bc722297bb",name:"36. The English-speaking World",shortName:"36",isCompleted:null,completedDate:null},{stepId:"f0007f75-0d1f-48c7-8f19-bb2e9f2c5377",name:"37. Poetry",shortName:"37",isCompleted:null,completedDate:null},{stepId:"addebfcc-5b3c-4360-b819-0de0269a5e2d",name:"38. Rhetoric",shortName:"38",isCompleted:null,completedDate:null},{stepId:"23c16db5-d435-49d3-8daa-c2b6433366b7",name:"39. An important issue",shortName:"39",isCompleted:null,completedDate:null},{stepId:"e4d22285-735a-4bab-8884-ca5b736ebb88",name:"4. Åka någonstans",shortName:"4",isCompleted:!0,completedDate:"/Date(1472111903647)/"},{stepId:"4c489a2b-ee79-4f89-9818-787632abfba8",name:"40. Write a speech",shortName:"40",isCompleted:null,completedDate:null},{stepId:"9667976c-83ab-4b9e-8a76-d330983c28f5",name:"41. Changing world",shortName:"41",isCompleted:null,completedDate:null},{stepId:"6bb14af9-9094-4938-be2d-2725a931895c",name:"42. An organization",shortName:"42",isCompleted:null,completedDate:null},{stepId:"fe313a1a-dc5c-4890-b11e-b8e109db689b",name:"43. The written word",shortName:"43",isCompleted:null,completedDate:null},{stepId:"f1a592ec-6095-4ae4-9b9e-ebd527c18a2a",name:"44. Communication",shortName:"44",isCompleted:null,completedDate:null},{stepId:"5f6a5e15-462b-40ab-981b-b93e5fc0ee22",name:"45. Giving a lecture",shortName:"45",isCompleted:null,completedDate:null},{stepId:"8c9b57c1-cf05-4465-84b2-68cf353b1075",name:"5. Min semester",shortName:"5",isCompleted:!0,completedDate:"/Date(1472111903660)/"},{stepId:"1bd11f36-6438-40b5-ad4c-4b02b6f481d0",name:"6. Låt oss prata om det",shortName:"6",isCompleted:!0,completedDate:"/Date(1472111903677)/"},{stepId:"d49c08ee-c0e6-4599-b79f-5efd811fe33c",name:"7. Jag är en turist",shortName:"7",isCompleted:!0,completedDate:"/Date(1472111903693)/"},{stepId:"2def3414-de65-46c0-8f48-f8aa18be7b7c",name:"8. Vänner över hela världen",shortName:"8",isCompleted:!0,completedDate:"/Date(1472111903707)/"},{stepId:"ea8ff1a0-4bad-43ac-b328-62dff3e4d08e",name:"9. Hjältar och kända personer",shortName:"9",isCompleted:!0,completedDate:"/Date(1472111903723)/"}]},{courseId:"9d129e6a-9557-4849-a53f-416725502895",periodName:"VT2017",periodGoalGrade:"C",name:"Matematik",shortName:"MA",courseSteps:[{stepId:"f1af6c2c-799a-4a3d-9985-c423940e91c0",name:"1. Tal och mönster",shortName:"1",isCompleted:!0,completedDate:"/Date(1474401815917)/"},{stepId:"4a34c53d-93d0-4247-ba19-9ce9dbed6de5",name:"10. Lägesmått och diagram",shortName:"10",isCompleted:!0,completedDate:"/Date(1474401816200)/"},{stepId:"0816a2b0-3aa7-41a9-bc39-971ccc7bd79c",name:"11. Räknesätt",shortName:"11",isCompleted:!0,completedDate:"/Date(1476103754013)/"},{stepId:"fdc90a9c-b06a-48b1-9781-606c230c425c",name:"12. Geometri",shortName:"12",isCompleted:!0,completedDate:"/Date(1481279716607)/"},{stepId:"bfd77c92-6636-45fa-9002-d813beaa56c3",name:"13. Rymdgeometri",shortName:"13",isCompleted:!0,completedDate:"/Date(1489669353170)/"},{stepId:"58a619a1-b99a-487b-bbd5-abd31a903e5a",name:"14. Räknemetoder och algebra",shortName:"14",isCompleted:null,completedDate:null},{stepId:"55b88760-22aa-452a-8a57-131346669aad",name:"15. Problemet",shortName:"15",isCompleted:null,completedDate:null},{stepId:"47f16476-ea47-40a2-a073-7ac4b36c4bf0",name:"16. Delen och det hela",shortName:"16",isCompleted:null,completedDate:null},{stepId:"704e3d5b-fce7-409b-b989-340b2d7b2e18",name:"17. Geometri och vinklar",shortName:"17",isCompleted:null,completedDate:null},{stepId:"db5693ea-48ef-44ce-8107-be9915ef5256",name:"18. Funktioner",shortName:"18",isCompleted:null,completedDate:null},{stepId:"f9250c97-d932-4bf6-989e-204c0ef582c9",name:"19. Proportionalitet",shortName:"19",isCompleted:null,completedDate:null},{stepId:"d0411b1d-c9b4-452f-9fb6-ea7206755ecd",name:"2. Längd och räknesätt",shortName:"2",isCompleted:!0,completedDate:"/Date(1474401815930)/"},{stepId:"616b742e-b175-45c3-a926-fda3e4d8af80",name:"20. Förflyttningsgraf",shortName:"20",isCompleted:null,completedDate:null},{stepId:"f8a9b467-6ba6-4d9a-8174-87e369062621",name:"21. Likformighet",shortName:"21",isCompleted:null,completedDate:null},{stepId:"8fe483d7-b78b-4d9d-9402-15d57da05832",name:"22. Bråk, sannolikhet och kombinatorik",shortName:"22",isCompleted:null,completedDate:null},{stepId:"7eb39090-6461-4ce4-b008-dd98f8a57679",name:"23. Negativa tal, procentsatser och förändringsfaktor",shortName:"23",isCompleted:null,completedDate:null},{stepId:"34cb3911-3a78-4773-a823-2f9054a9a925",name:"24. Algebra och ekvationer",shortName:"24",isCompleted:null,completedDate:null},{stepId:"49abad1a-dd4b-4b0b-8d1f-752796723ca1",name:"25. Lotteriet",shortName:"25",isCompleted:null,completedDate:null},{stepId:"6756d8bc-e31a-4139-8d95-8f47916a361b",name:"26. Geometriska samband",shortName:"26",isCompleted:null,completedDate:null},{stepId:"0f0efee5-e617-4bca-b84e-e50e32aac90b",name:"27. Rymdgeometri",shortName:"27",isCompleted:null,completedDate:null},{stepId:"de4e12d1-f678-4b1a-ac7b-5d62cdaeb52d",name:"28. Storheter och proportionella samband",shortName:"28",isCompleted:null,completedDate:null},{stepId:"80323de8-fe66-4750-bb2e-d0dbabbb3dac",name:"29. Funktioner och grafer",shortName:"29",isCompleted:null,completedDate:null},{stepId:"68894968-8a16-497a-8b97-711df61fca71",name:"3. Tal och enheter",shortName:"3",isCompleted:!0,completedDate:"/Date(1474401815947)/"},{stepId:"fa32d170-ab25-466d-91a8-a88f955cc5bc",name:"30. Förpackning",shortName:"30",isCompleted:null,completedDate:null},{stepId:"4c31e00f-aeda-409f-8583-9805c0bb4f7f",name:"31. Negativa tal och statistik",shortName:"31",isCompleted:null,completedDate:null},{stepId:"691bb48b-070d-4227-8fb6-2edce2fc6be4",name:"32. Bråk",shortName:"32",isCompleted:null,completedDate:null},{stepId:"320481da-e417-4c52-af23-0076b694794d",name:"33. Procent och förändringsfaktor",shortName:"33",isCompleted:null,completedDate:null},{stepId:"f3a4338d-504e-4092-9610-ef2775b5b411",name:"34. Potenser",shortName:"34",isCompleted:null,completedDate:null},{stepId:"f43d7931-158c-4759-b7be-b14cf68c939a",name:"35. Solsystemet",shortName:"35",isCompleted:null,completedDate:null},{stepId:"8931fc26-693a-41bd-8040-e01a6d22b2b5",name:"36. Ekvationer och algebra",shortName:"36",isCompleted:null,completedDate:null},{stepId:"94370d70-dcbd-4eef-baf1-e92f6680b966",name:"37. Funktioner och grafer",shortName:"37",isCompleted:null,completedDate:null},{stepId:"ab0535df-68cc-4c10-86eb-afba3e199d0a",name:"38. Geometri",shortName:"38",isCompleted:null,completedDate:null},{stepId:"4ba66c7a-7d8f-4576-aefa-c09397b99db0",name:"39. Sannolikhet",shortName:"39",isCompleted:null,completedDate:null},{stepId:"c4e12bc8-1428-4d1b-a273-e947fa0574f3",name:"4. Multiplikation och division",shortName:"4",isCompleted:!0,completedDate:"/Date(1474401815963)/"},{stepId:"0b75ce2b-89de-432a-9eee-d6a7b74b6f38",name:"40. Chokladfabriken",shortName:"40",isCompleted:null,completedDate:null},{stepId:"dba4a055-c143-4bd4-b436-3eb508ebe658",name:"41. Genrella lösningsmetoder",shortName:"41",isCompleted:null,completedDate:null},{stepId:"db193873-0a8c-4073-8618-99c5a56f710b",name:"42. Avancerad ekvationslösning",shortName:"42",isCompleted:null,completedDate:null},{stepId:"357ee123-1d77-4568-8fa1-78b5662e12b3",name:"43. Problemlösning",shortName:"43",isCompleted:null,completedDate:null},{stepId:"015cdd58-7b31-4a89-a9fe-cd0bb45e7434",name:"44. Avancerad problemlösning",shortName:"44",isCompleted:null,completedDate:null},{stepId:"785e12ac-4a71-4acf-bf40-27652faf20ff",name:"45. Vad är matematik?",shortName:"45",isCompleted:null,completedDate:null},{stepId:"6372cdb6-91cf-4f0f-ac9c-8578c00760ff",name:"5. Form och storlek",shortName:"5",isCompleted:!0,completedDate:"/Date(1474401815977)/"},{stepId:"c781e529-fefa-43ce-99fb-d232585a1e1a",name:"6. Tid och räknesätt",shortName:"6",isCompleted:!0,completedDate:"/Date(1474401815993)/"},{stepId:"5df2975c-f84e-4620-abe9-5c47ebcb0f90",name:"7. Bråk och decimaltal",shortName:"7",isCompleted:!0,completedDate:"/Date(1474401816007)/"},{stepId:"9cbb966f-32df-48cf-be77-5e00d466d63a",name:"8. Procent och bråk",shortName:"8",isCompleted:!0,completedDate:"/Date(1474401816023)/"},{stepId:"b1b59f38-63c6-428a-a512-220b7d838e5f",name:"9. Sannolikhet och bråk",shortName:"9",isCompleted:!0,completedDate:"/Date(1474401816040)/"}]},{courseId:"cfdc5bc0-ea41-4683-b941-d980de4e82a5",periodName:"VT2017",periodGoalGrade:"D",name:"Spanska, språkval",shortName:"M2SP",courseSteps:[{stepId:"16bb0ce6-60ac-4937-8e60-dd633cd7c5f0",name:"1. Första mötet",shortName:"1",isCompleted:!0,completedDate:"/Date(1476255771933)/"},{stepId:"f3504ab6-386c-42d2-882b-668719f329b5",name:"10. Turist",shortName:"10",isCompleted:null,completedDate:null},{stepId:"d2de4e01-44dd-4ba7-a69f-075450c627a7",name:"11. Skolan",shortName:"11",isCompleted:null,completedDate:null},{stepId:"58e4d577-05f5-4071-8745-a41571df3019",name:"12. Fritiden",shortName:"12",isCompleted:null,completedDate:null},{stepId:"d8a079f9-3fef-4fbc-b868-6b050e3832d1",name:"13. Stämma träff",shortName:"13",isCompleted:null,completedDate:null},{stepId:"d62f63a1-3806-4650-b6a9-354eccd056b9",name:"14. Sport och musik",shortName:"14",isCompleted:null,completedDate:null},{stepId:"b475dc9d-e694-4eb9-8c78-b150494dfe84",name:"15. Presentera dig själv",shortName:"15",isCompleted:null,completedDate:null},{stepId:"009c68f6-db7e-44a3-bc5c-d1e2e78d327c",name:"16. När och fjärran",shortName:"16",isCompleted:null,completedDate:null},{stepId:"a124f250-2fb7-4b57-b2bc-b72e0e8fd21a",name:"17. Mat och traditioner",shortName:"17",isCompleted:null,completedDate:null},{stepId:"ec6ccef4-58b5-4111-b152-8a7a7f546bb8",name:"18. Planera en resa",shortName:"18",isCompleted:null,completedDate:null},{stepId:"ec96d506-112e-4b38-8946-6f19130bd741",name:"19. Etikett och regler",shortName:"19",isCompleted:null,completedDate:null},{stepId:"0b52b5e6-bbc7-4c78-815c-efc30fa984af",name:"2. Min familj",shortName:"2",isCompleted:!0,completedDate:"/Date(1488368769260)/"},{stepId:"e05c674b-1097-4646-ac47-1d8c4342a343",name:"20. Resan",shortName:"20",isCompleted:null,completedDate:null},{stepId:"f6f8cffb-69ae-4148-81fa-35e1f984f836",name:"21. Boende",shortName:"21",isCompleted:null,completedDate:null},{stepId:"aee9167c-2f65-4f8d-a94b-684458c300bc",name:"22. Familjeliv",shortName:"22",isCompleted:null,completedDate:null},{stepId:"115f28de-fe33-435e-a7fb-36fea0a37cce",name:"23. Bostadsläge",shortName:"23",isCompleted:null,completedDate:null},{stepId:"d5e8b9e2-b84e-4af7-8b20-e37896dec41d",name:"24. Min stad",shortName:"24",isCompleted:null,completedDate:null},{stepId:"c2f15857-a682-4b02-8d00-ec042858e799",name:"25. Presentera någon annan",shortName:"25",isCompleted:null,completedDate:null},{stepId:"1bc87327-1e3f-42f6-b839-e9b385200149",name:"26. Media",shortName:"26",isCompleted:null,completedDate:null},{stepId:"36f23967-f30b-4cbc-a69c-4191094e182d",name:"27. En tv-kväll",shortName:"27",isCompleted:null,completedDate:null},{stepId:"32ead07a-fa58-4770-ac20-3a31f27069cf",name:"28. Tidningar",shortName:"28",isCompleted:null,completedDate:null},{stepId:"598d7b7e-97b6-4ff3-b7a7-8f5c45c164cd",name:"29. Film",shortName:"29",isCompleted:null,completedDate:null},{stepId:"12e8d03b-7d80-434c-9201-7f852f5c114c",name:"3. Fler siffror, månader och väder",shortName:"3",isCompleted:null,completedDate:null},{stepId:"98f0825e-e200-43f4-9f4b-866bb50d28dd",name:"30. Tidningen",shortName:"30",isCompleted:null,completedDate:null},{stepId:"956757b9-979f-4d12-be01-8b30970b603e",name:"31. Min framtid",shortName:"31",isCompleted:null,completedDate:null},{stepId:"c2003358-0ce9-409b-82fa-e7a0bff891fc",name:"32. Ung i framtiden",shortName:"32",isCompleted:null,completedDate:null},{stepId:"1c1ca040-f96d-46af-862b-a978698e2745",name:"33. Insändare",shortName:"33",isCompleted:null,completedDate:null},{stepId:"64f620bb-8c77-4de2-88e2-feaa21f4c41e",name:"34. På gymnasiet",shortName:"34",isCompleted:null,completedDate:null},{stepId:"4c3c19eb-0447-47cf-bb72-8d1176118c71",name:"35. Framtiden",shortName:"35",isCompleted:null,completedDate:null},{stepId:"c3779788-030e-46f3-89a7-a15015931a51",name:"4. Det här är jag",shortName:"4",isCompleted:null,completedDate:null},{stepId:"a6628c06-443a-481d-96fc-c019800e8e4e",name:"5. Boken",shortName:"5",isCompleted:null,completedDate:null},{stepId:"f34e1dee-1dd3-4bcd-89b4-f0ba6638c65c",name:"6. På café",shortName:"6",isCompleted:null,completedDate:null},{stepId:"9ffb3665-0e3a-423a-af93-c5006a2a4839",name:"7. Att handla",shortName:"7",isCompleted:null,completedDate:null},{stepId:"63e62432-ba1e-4f96-911c-52bd756c803e",name:"8. I staden",shortName:"8",isCompleted:null,completedDate:null},{stepId:"3c93cf1d-2e82-452b-9333-16b336fdda6d",name:"9. På hotellet",shortName:"9",isCompleted:null,completedDate:null}]},{courseId:"3cc7c710-63fb-49bd-8dc5-b95be6374122",periodName:"VT2017",periodGoalGrade:"C",name:"Svenska",shortName:"SV",courseSteps:[{stepId:"379585a4-f602-4086-920d-d506d2e93fed",name:"1. Min bästa sak",shortName:"1",isCompleted:!0,completedDate:"/Date(1472559179490)/"},{stepId:"5d90747a-d5ff-4c12-818c-d301e4cf2405",name:"10. Quizkampen",shortName:"10",isCompleted:!0,completedDate:"/Date(1472559179630)/"},{stepId:"fb271830-5368-43dc-b911-3d65af082e26",name:"11. Ta kontakt",shortName:"11",isCompleted:!0,completedDate:"/Date(1472559179647)/"},{stepId:"bf7a93a6-24af-4d01-8839-aa4f3f6b438d",name:"12. Samla fakta och presentera",shortName:"12",isCompleted:!0,completedDate:"/Date(1472559179660)/"},{stepId:"2a712108-e5d7-4ffb-a55f-80ff195ea946",name:"13. Påverka och uttrycka åsikter",shortName:"13",isCompleted:!0,completedDate:"/Date(1472559179943)/"},{stepId:"94b5abaa-0471-4ab4-be3c-c0b0d4098609",name:"14. Språk i Sverige",shortName:"14",isCompleted:!0,completedDate:"/Date(1475049857367)/"},{stepId:"e0169353-8ac0-4fcd-8a45-4cfffc5fe55e",name:"15. Min förebild",shortName:"15",isCompleted:!0,completedDate:"/Date(1480951054357)/"},{stepId:"e12c8fa6-8aaa-4598-8e6f-5c6d318163db",name:"16. Förstå, minnas och lära",shortName:"16",isCompleted:!0,completedDate:"/Date(1490605558217)/"},{stepId:"1a19c53b-36f0-4309-adfd-26a307b43dbd",name:"17. Använda språket i olika sammanhang",shortName:"17",isCompleted:null,completedDate:null},{stepId:"31aa5b91-59d0-41db-ab2e-0bdec6342dfe",name:"18. Sammanfatta och presentera",shortName:"18",isCompleted:null,completedDate:null},{stepId:"48747057-835d-40fd-811f-dde4fd48f3a0",name:"19. Den moderna ungdomen",shortName:"19",isCompleted:null,completedDate:null},{stepId:"4708aedf-3b7d-4ec0-80c9-769de4cdda9b",name:"2. Författare",shortName:"2",isCompleted:!0,completedDate:"/Date(1472559179507)/"},{stepId:"4258123d-d122-4058-8120-9de7d1fb3d66",name:"20. Att vara ungdom idag",shortName:"20",isCompleted:null,completedDate:null},{stepId:"3d94e56d-9d38-4d3c-a3cb-d4f2d13814c9",name:"21. Upplysningstiden och romantiken",shortName:"21",isCompleted:null,completedDate:null},{stepId:"5d8c3d70-e996-4236-9326-982ed128340c",name:"22. Realismen och modernismen",shortName:"22",isCompleted:null,completedDate:null},{stepId:"02037ab3-ffdf-4fe2-a172-26de404c58bc",name:"23. Våga utanför ramarna",shortName:"23",isCompleted:null,completedDate:null},{stepId:"7c376d37-0170-49ac-865d-5479d82ce806",name:"24. Modern litteratur",shortName:"24",isCompleted:null,completedDate:null},{stepId:"7131b28d-89d1-40f6-8d87-80fd0c15486d",name:"25. Budskapet",shortName:"25",isCompleted:null,completedDate:null},{stepId:"30c876a6-48a7-4fc7-a49f-ad44bac3d4bb",name:"26. Övertyga och påverka",shortName:"26",isCompleted:null,completedDate:null},{stepId:"97b328ea-3342-41d6-a1c5-91e9c1d17a08",name:"27. Språkbruk genom tiderna",shortName:"27",isCompleted:null,completedDate:null},{stepId:"e4ec472d-b31c-4d20-886c-0162e1159e55",name:"28. Tidningstexter",shortName:"28",isCompleted:null,completedDate:null},{stepId:"47ccf40e-28a1-4432-91ed-f3013eb97aa8",name:"29. Samtala om texter",shortName:"29",isCompleted:null,completedDate:null},{stepId:"6c89c307-adff-46b8-9d75-2ecb1fc714ce",name:"3. Leka med ord",shortName:"3",isCompleted:!0,completedDate:"/Date(1472559179520)/"},{stepId:"2145d4aa-60db-42f9-918b-49f3bf714786",name:"30. Språkets möjligheter",shortName:"30",isCompleted:null,completedDate:null},{stepId:"c211ba3d-b8fa-4c5c-bbe1-bcfea2a243b5",name:"31. Dikt och diktanalys",shortName:"31",isCompleted:null,completedDate:null},{stepId:"fbeb356a-5c9d-4114-9a4b-9ac2325913d0",name:"32. Berättarteknik i skönlitteratur",shortName:"32",isCompleted:null,completedDate:null},{stepId:"4446df13-5bb8-4cf1-beb4-4d2b43bf97b8",name:"33. Utveckla ditt skönlitterära skrivande",shortName:"33",isCompleted:null,completedDate:null},{stepId:"47e0c5bf-2898-4cc3-8119-2346d4c6c78f",name:"34. Noveller",shortName:"34",isCompleted:null,completedDate:null},{stepId:"3b072a72-9f2c-4439-b095-33edb5ae3276",name:"35. Det fria ordet - En skönlitterär djupdykning",shortName:"35",isCompleted:null,completedDate:null},{stepId:"56a2b991-63f5-4f1c-8e48-1bc1f83fa9a9",name:"36. Debatt och retorik",shortName:"36",isCompleted:null,completedDate:null},{stepId:"7b0e633b-65b5-407d-8bdd-d77673d1be1f",name:"37. Argumenterande texter",shortName:"37",isCompleted:null,completedDate:null},{stepId:"d76356c9-2fdd-4845-aa7a-1bf54547a34e",name:"38. Analysera tal",shortName:"38",isCompleted:null,completedDate:null},{stepId:"eb312838-f59b-4815-987f-d7f11973a95f",name:"39. Tal",shortName:"39",isCompleted:null,completedDate:null},{stepId:"48559f29-37cb-451f-8f40-354101a413af",name:"4. Skrivarskola",shortName:"4",isCompleted:!0,completedDate:"/Date(1472559179537)/"},{stepId:"a054f1e2-b296-4185-b9b7-dac94f600ab3",name:"40. Muntlig argumentation",shortName:"40",isCompleted:null,completedDate:null},{stepId:"2e5ff9f3-ac8e-4fea-abe2-a7534e64e25f",name:"41. Modern lyrik",shortName:"41",isCompleted:null,completedDate:null},{stepId:"ceed4cee-dd38-40b9-af97-43b0af244a41",name:"42. Nobelpriset i litteratur",shortName:"42",isCompleted:null,completedDate:null},{stepId:"2df27363-1a57-4129-96dc-5e2a26dc0209",name:"43. Analysmetod i akademiska uppsatser",shortName:"43",isCompleted:null,completedDate:null},{stepId:"71062f38-2874-4d6a-96b9-8128a10e3559",name:"44. Litteratur som väckt debatt genom tiderna",shortName:"44",isCompleted:null,completedDate:null},{stepId:"d0e40b55-4638-45fd-b9f3-924c68c673cc",name:"45. Analysera vetenskapligt",shortName:"45",isCompleted:null,completedDate:null},{stepId:"5954c057-cdc2-4293-bb9e-8b96ec27e04c",name:"5. Min bästa sak på äventyr",shortName:"5",isCompleted:!0,completedDate:"/Date(1472559179553)/"},{stepId:"5b9e5c30-c9de-4092-b7e6-0dbb4e3513ff",name:"6. Faktatext",shortName:"6",isCompleted:!0,completedDate:"/Date(1472559179567)/"},{stepId:"2b823257-8dad-4f6b-8f2b-539e4dae0bd4",name:"7. Tal- och skriftspråk",shortName:"7",isCompleted:!0,completedDate:"/Date(1472559179583)/"},{stepId:"28e73fd2-c40a-4319-8b93-ec0f1b658c81",name:"8. Dikter",shortName:"8",isCompleted:!0,completedDate:"/Date(1472559179600)/"},{stepId:"35a5926a-8cb3-4c9d-a7ef-714761935755",name:"9. Olika texttyper",shortName:"9",isCompleted:!0,completedDate:"/Date(1472559179613)/"}]}],c={assessments:[{publishDateTime:"2017-08-28T09:05:43.16",text:"Testbedömning Engelsa 5",gradeName:"C",courseUnitName:"1. Ready, steady, go!"},{publishDateTime:"2017-08-28T08:59:21.253",text:"Testbedömning...\r\n/ Kim test",gradeName:"C",courseUnitName:"Tema 1"},{publishDateTime:"2017-08-10T09:43:36.797",text:"Test",gradeName:"D",courseUnitName:"Block 1"}]},u={StudyPlans:[{courseUnitName:"Hem- och konsumentkunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Historia",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Fysik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Geografi",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Matematik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Samhällskunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Engelska",finalGoalGrade:"A",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"A"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Religionskunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Idrott och hälsa",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Biologi",finalGoalGrade:"D",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Svenska",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Teknik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Bild",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Spanska, språkval",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:""}]},{courseUnitName:"Kemi",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Slöjd",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Musik",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"D"}]}]},d=n(3);function m(){return{user:d.a.currentUser.mail}}n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var p=function(){function e(e,t,n){this.http=new r.a(e,t,{bearerProvider:n}),this.getActiveCourses=b(this.getActiveCourses),this.getLatestAssessments=b(this.getLatestAssessments),this.getStudentGoals=b(this.getStudentGoals),this.getStudentFutureAbilities=b(this.getStudentFutureAbilities)}return e.prototype.getActiveCourses=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,o,l;return a.d(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),t=m(),e&&(e.courseCode&&(t.CourseCode=e.courseCode),e.periodName&&(t.PeriodName=e.periodName)),[4,this.http.get("studentactivecourses",t)];case 1:return 200==(n=c.sent()).status?[3,3]:(r=s.c.bind,o=[void 0,n.status],[4,n.text()]);case 2:throw new(r.apply(s.c,o.concat([c.sent()])));case 3:return[4,n.json()];case 4:return[2,c.sent().courses];case 5:throw l=c.sent(),console.error("Error from EDS: "+l),new Error(Object(i.a)(h||(h=a.e(["Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare..."],["Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare..."]))));case 6:return[2]}})})},e.prototype.getLatestAssessments=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,o;return a.d(this,function(a){switch(a.label){case 0:return t=m(),isNaN(e)||(t.Count=e),[4,this.http.get("studentassessments",t)];case 1:return 200==(n=a.sent()).status?[3,3]:(r=s.c.bind,o=[void 0,n.status],[4,n.text()]);case 2:throw new(r.apply(s.c,o.concat([a.sent()])));case 3:return[4,n.json()];case 4:return[2,a.sent().assessments]}})})},e.prototype.getStudentGoals=function(){return a.b(this,void 0,void 0,function(){var e,t,n;return a.d(this,function(a){switch(a.label){case 0:return[4,this.http.get("studentgoals",m())];case 1:return 200==(e=a.sent()).status?[3,3]:(t=s.c.bind,n=[void 0,e.status],[4,e.text()]);case 2:throw new(t.apply(s.c,n.concat([a.sent()])));case 3:return[4,e.json()];case 4:return[2,a.sent().studentGoals]}})})},e.prototype.getStudentFutureAbilities=function(){return a.b(this,void 0,void 0,function(){var e,t,n;return a.d(this,function(a){switch(a.label){case 0:return[4,this.http.get("studentFutureAbilities",m())];case 1:return 200==(e=a.sent()).status?[3,3]:(t=s.c.bind,n=[void 0,e.status],[4,e.text()]);case 2:throw new(t.apply(s.c,n.concat([a.sent()])));case 3:return[4,e.json()];case 4:return[2,a.sent().studentFutureAbilities]}})})},e}(),f=function(){function e(e){if("string"==typeof e){if(this.period=e,this.term=this.period.startsWith("HT")?"AT":"ST",this.year=parseInt(this.period.substr(2)),isNaN(this.year))throw new Error("Invalid period: "+this.period)}else{var t=new o.a(e);this.period=("AT"===t.term?"HT":"VT")+t.year,this.term=t.term,this.year=t.year}}return Object.defineProperty(e.prototype,"schoolTerm",{get:function(){return new o.a({academicYear:"AT"===this.term?this.year+"/"+(this.year+1):this.year-1+"/"+this.year,term:this.term})},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.period},e.prototype.valueOf=function(){return this.year+":"+("ST"===this.term?"1":"2")},e}();var h;!function(){function e(){this.http=null}e.prototype.getActiveCourses=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){return t=l,e&&(e.courseCode&&(t=t.filter(function(t){return t.shortName===e.courseCode})),e.periodName&&(t=t.filter(function(t){return t.periodName===e.periodName}))),[2,t]})})},e.prototype.getLatestAssessments=function(e){return a.b(this,void 0,void 0,function(){return a.d(this,function(t){return[2,e?c.assessments.slice(0,e):c.assessments]})})},e.prototype.getStudentGoals=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){return[2,u.StudyPlans]})})},e.prototype.getStudentFutureAbilities=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){return[2,[]]})})}}();function b(e){var t={};return function(){var n=JSON.stringify([].slice.call(arguments));return t[n]||(t[n]=e.apply(this,arguments).then(function(e){return delete t[n],e})),t[n]}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(1),r=n(0),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={headerOpen:t.headerOpen||!1},n}return a.c(t,e),t.prototype.componentWillReceiveProps=function(e){e.headerOpen!==this.props.headerOpen&&this.setState({headerOpen:e.headerOpen})},t.prototype.render=function(){var e=this,t=this.props,n=t.title,a=t.className,s=t.children,o=t.headerClassName,i=t.contentClassName,l=this.state.headerOpen;return r.createElement("div",{className:(a||"")+" openClose"+(l?" open":"")},r.createElement("div",{className:"openHeader"+(o?" "+o:""),onClick:function(){e.props.onOpenClose&&e.props.onOpenClose(!e.state.headerOpen),e.setState({headerOpen:!e.state.headerOpen})}},n),r.createElement("div",{className:"openContent"+(i?" "+i:"")},s))},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var a=n(5),r=n.n(a);function s(e,t){var n=r()(new Date(e,1,1)).locale("sv").week(t);return{year:e,week:t,notBefore:n.clone().startOf("week").add(-2,"days").toDate().getTime(),notAfter:n.clone().startOf("week").add(5,"days").toDate().getTime()}}function o(e){e.clone().locale("sv");return e.weekday()>=5?e.week()+1:e.week()}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),r=n(0),s=n(8),o=n.n(s),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={editMode:!1,runtimeStyle:null,text:t.text||""},n}return a.c(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.text!==e.text&&this.setState({text:e.text||""})},t.prototype.render=function(){var e=this,t=this.state.text||"";return r.createElement("div",{className:"renameable-text"+(t?"":" unnamed")+(this.props.readOnly?" disabled":""),tabIndex:!this.state.editMode&&0,onFocus:function(t){e.rename()},style:{width:"100%"}},r.createElement("div",{ref:function(t){return e.label=t},style:{display:this.state.editMode?"none":""}},t||this.props.clickAdvertiseText),"textarea"===this.props.tag?r.createElement("textarea",{ref:function(t){return e.input=t},maxLength:this.props.maxChars,style:a.a({},this.state.runtimeStyle,{display:this.state.editMode?"":"none"}),onFocus:function(e){return o()(e.target).select()},onBlur:this.onBlur.bind(this),value:t,onKeyDown:this.onKeyDown.bind(this),onChange:this.onChange.bind(this),tabIndex:this.state.editMode&&0,placeholder:this.props.placeholder}):r.createElement("input",{ref:function(t){return e.input=t},type:"text",maxLength:this.props.maxChars,style:a.a({},this.state.runtimeStyle,{display:this.state.editMode?"":"none"}),onFocus:function(e){return o()(e.target).select()},onBlur:this.onBlur.bind(this),value:t,onKeyDown:this.onKeyDown.bind(this),onChange:this.onChange.bind(this),tabIndex:this.state.editMode?0:void 0,placeholder:this.props.placeholder}))},t.prototype.onKeyDown=function(e){27===e.keyCode?(this.input.value=this.props.text||"",this.input.blur(),e.stopPropagation()):13===e.keyCode&&(this.propagateOnChange(this.input.value),this.setState({editMode:!1,text:this.input.value}))},t.prototype.onBlur=function(e){this.propagateOnChange(this.input.value),this.setState({editMode:!1,text:this.input.value})},t.prototype.propagateOnChange=function(e){this.propagatedOnChange!=e&&(this.propagatedOnChange=e,this.props.onChange(e))},t.prototype.onChange=function(e){this.setState({text:this.input.value}),this.props.eager&&this.propagateOnChange(this.input.value)},t.prototype.rename=function(e){var t=this;if(!this.state.editMode&&!this.props.readOnly){e=e||this.state.text||"";var n=o()(this.label);this.setState({text:e,editMode:!0,runtimeStyle:{textAlign:n.css("textAlign"),fontSize:n.css("font-size"),paddingTop:n.css("paddingTop"),paddingBottom:n.css("paddingBottom"),paddingLeft:n.css("paddingLeft"),paddingRight:n.css("paddingRight"),marginTop:n.css("marginTop"),marginBottom:n.css("marginBottom"),marginLeft:n.css("marginLeft"),marginRight:n.css("marginRight"),borderRadius:n.css("borderRadius"),backgroundColor:n.css("backgroundColor"),lineHeight:n.css("lineHeight"),fontWeight:n.css("fontWeight"),outLine:0,borderStyle:"none",height:"100%",width:"100%",boxSizing:"border-box"}},function(){return o()(t.input).focus()})}},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(1),r=n(29),s=n(3),o=n(2),i=n(6),l=n(24),c=n(15),u=n(5),d=n.n(u),m=s.a.hiddenCoursesRepo,p=function(){function e(){var e=this;this.result=null,this.subscribers=[],this.fullCourse=!1,this.notifySubscriber=function(t,n){try{t(n.fullCourse?e.result:e.result.filter(function(e){return e.visible}))}catch(e){console.error(e)}},this.kedRepo=new r.a({getClient:function(){return s.a.kedBackendClient},optimistic:!0,table:"userhiddencourses",user:s.a.currentUser?s.a.currentUser.mail:"",getQueryOptions:function(){return a.b(e,void 0,void 0,function(){return a.d(this,function(e){return[2,{role:"USER"}]})})}});var t=this.init();Promise.all([t,this.kedCoursesPromise,this.edsCoursesPromise]).catch(function(e){return Object(o.m)(e)})}return e.prototype.init=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r=this;return a.d(this,function(o){switch(o.label){case 0:return e=s.a.bearerProvider?s.a.bearerProvider.getBearer():Promise.resolve({}),this.kedCoursesPromise=e.then(function(){return r.listKedCourses()}),this.edsCoursesPromise=e.then(function(){return r.listEDSCourses()}),n=!1,this.userHiddenCoursesPromise=new Promise(function(e){return t=function(t){n?r.userHiddenCoursesPromise=Promise.resolve(t):(n=!0,e(t))}}),[4,e];case 1:return o.sent(),this.kedRepo.mem.subscribe(function(e){return a.b(r,void 0,void 0,function(){var n,r,s,o,i=this;return a.d(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.kedCoursesPromise,this.edsCoursesPromise])];case 1:return n=a.sent(),r=n[0],s=n[1],o=this,[4,this.createCoursesList(s,e,r)];case 2:return o.result=a.sent(),this.subscribers.forEach(function(e){return i.notifySubscriber(e.subscriber,e.options)}),t(e),[2]}})})}),[2]}})})},e.prototype.listKedCourses=function(){return a.b(this,void 0,void 0,function(){var e,t;return a.d(this,function(n){switch(n.label){case 0:return e=this.fullCourse,console.log("FullCourse: "+e),[4,s.a.kedBackendClient.list("schools",{role:"USER",name:s.a.currentUser.school,include:"activeCourses",flags:e?[]:["includeIdsAndNamesOnly"],cacheBust:s.a.currentUser.username})];case 1:return t=n.sent(),[2,Object(o.k)(t.map(function(e){return e.activeCourses})).sort(Object(o.g)("name"))]}})})},e.prototype.listEDSCourses=function(){var e=new l.a(Object(c.c)(d()())).period;return-1===s.a.currentUser.roles.indexOf("EMPLOYEE")?s.a.edsClient.getActiveCourses({periodName:e}):null},e.prototype.createCoursesList=function(e,t,n){return a.b(this,void 0,void 0,function(){var r,i,l,c,u=this;return a.d(this,function(d){switch(d.label){case 0:return r=Object(o.c)(t.filter(function(e){return!e.show}),function(e){return e.name}),i=Object(o.c)(t.filter(function(e){return e.show}),function(e){return e.name}),l=s.a.currentUser.roles.some(function(e){return"STUDENT"===e}),c=e?Object(o.c)(e,function(e){return e.name.substr(0,20)}):{},[4,Promise.all(n.map(function(e){var t=e.id,n=e.name,o=e.description,d=e.modifiedBy;return a.b(u,void 0,void 0,function(){var e,u,m,p;return a.d(this,function(a){switch(a.label){case 0:return e=c[n.substr(0,20)],m=(u=!l||null!=e)?!r[t]:!!i[t],!this.fullCourse&&n.length>=20?e?(n=e.name,[3,3]):[3,1]:[3,3];case 1:return m?[4,s.a.kedBackendClient.get("courses",t)]:[3,3];case 2:p=a.sent(),n=p.name,a.label=3;case 3:return d&&d.name&&!o&&(o=d.name+"s version"),[2,{id:t,name:n,description:o,visible:m,defaultVisible:u}]}})})}))];case 1:return[2,d.sent()]}})})},e.prototype.hideCourse=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=this.kedRepo.mem.items.filter(function(t){return t.name===e.id}),e.defaultVisible?[4,this.kedRepo.insert([{id:Object(i.e)(),name:e.id}])]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.kedRepo.delete(t.map(function(e){return e.id}))];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.showCourse=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=this.kedRepo.mem.items.filter(function(t){return t.name===e.id}),e.defaultVisible?[4,this.kedRepo.delete(t.map(function(e){return e.id}))]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.kedRepo.insert([{id:Object(i.e)(),name:e.id,show:!0}])];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.subscribe=function(e,t){return a.b(this,void 0,void 0,function(){var n,r,s,o,i;return a.d(this,function(a){switch(a.label){case 0:return this.fullCourse||!t.fullCourse?[3,3]:(this.fullCourse=t.fullCourse,this.kedCoursesPromise=this.listKedCourses(),[4,Promise.all([this.kedCoursesPromise,this.edsCoursesPromise,this.userHiddenCoursesPromise])]);case 1:return n=a.sent(),r=n[0],s=n[1],o=n[2],i=this,[4,this.createCoursesList(s,o,r)];case 2:i.result=a.sent(),a.label=3;case 3:return[4,this.userHiddenCoursesPromise];case 4:return a.sent(),this.notifySubscriber(e,t),this.subscribers.push({subscriber:e,options:t}),[2]}})})},e.prototype.unsubscribe=function(e){this.subscribers=this.subscribers.filter(function(t){return t.subscriber!==e})},e}();m||(m=s.a.hiddenCoursesRepo=new p)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),r=n(37),s=n(6),o=function(){function e(e){var t=this,n=e.table,s=e.getClient,o=e.getQueryOptions;this.mem=new r.a({query:function(){return a.b(t,void 0,void 0,function(){var e;return a.d(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return e=t.sent(),[4,s().list(n,a.a({},e,{cacheBust:this.getCacheBust()}))];case 2:return[2,t.sent()]}})})}}),this.options=e}return e.prototype.getCacheBust=function(){var e=this.options,t=e.table,n=e.user;return localStorage.getItem("cache-bust-"+t+"-"+n)||this.regenerateCacheBust()},e.prototype.regenerateCacheBust=function(){var e=this.options,t=e.table,n=e.user,a=Object(s.e)();return localStorage.setItem("cache-bust-"+t+"-"+n,a),a},e.prototype.upsert=function(e,t){return a.b(this,void 0,void 0,function(){var n,r=this;return a.d(this,function(a){switch(a.label){case 0:return e.$etag?[3,2]:(n=Object.assign({},e),t(n),[4,this.insert([n])]);case 1:return[2,a.sent()];case 2:return[4,this.update([e],t).catch(function(n){if("http404"===n.name||"http403"===n.name){var a=Object.assign({},e);return t(a),r.insert([a])}return Promise.reject(n)})];case 3:a.sent(),a.label=4;case 4:return[2]}})})},e.prototype.update=function(e,t){return a.b(this,void 0,void 0,function(){var n,r,s,o,i,l,c,u=this;return a.d(this,function(a){switch(a.label){case 0:return n=this.options,r=n.getClient,s=n.optimistic,o=n.table,i=r(),l=e.map(function(e){var n=u.mem.items.find(function(t){return t.id===e.id});return e=Object.assign({},n||e),t(e),e}),s?[4,this.mem.update(l.map(function(e){return Object.assign({},e,{$meta:"updating"})}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[4,i.do(function(e){return l.forEach(function(t){return e.put(o,t)})}).catch(function(n){return"http409"===n.name?i.list(o,{ids:e.map(function(e){return e.id})},{cache:"no-cache"}).then(function(e){var n=e.map(function(e){var n=Object.assign({},e);return t(n),n});return i.do(function(e){return n.forEach(function(t){return e.put(o,t)})})}):Promise.resolve(s&&u.mem.update(e)).then(function(){return Promise.reject(n)})})];case 3:return c=a.sent(),this.regenerateCacheBust(),l.forEach(function(e){e.$etag=c.newEtags[e.id],e.$meta=void 0}),[4,this.mem.update(l)];case 4:return a.sent(),[2]}})})},e.prototype.stripGraphs=function(e,t){return e.map(function(e){var n=Object.assign({},e);return t.forEach(function(t){e[t]&&(n[t]=e[t].map(function(e){return{id:e.id}}))}),n})},e.prototype.insert=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,o,i,l,c,u,d,m,p,f,h,b,v,g=this;return a.d(this,function(a){switch(a.label){case 0:return t=this.options,n=t.getClient,r=t.optimistic,o=t.table,i=t.getQueryOptions,l=n(),[4,i()];case 1:return c=a.sent(),u=[].concat(c.include),e=e.map(function(e){return e.id?e:Object.assign({},e,{id:Object(s.e)()})}),d=this.stripGraphs(e,u),r?[4,this.mem.insert(d.map(function(e){return Object.assign({},e,{$meta:"adding"})}))]:[3,3];case 2:a.sent(),a.label=3;case 3:for(m=new s.a,p=function(e){for(var t=function(t){var n=e[t];n&&n.forEach(function(n){m.link2(o,e.id,t,n.id)})},n=0,a=u;n<a.length;n++){t(a[n])}m.add(o,e)},f=0,h=d;f<h.length;f++)b=h[f],p(b);return[4,l.batch(m.mutationRequests).catch(function(t){return r&&g.mem.delete(e.map(function(e){return e.id})),Promise.reject(t)})];case 4:return v=a.sent(),this.regenerateCacheBust(),e.forEach(function(e){return e.$etag=v.newEtags[e.id]}),r?[4,this.mem.update(e)]:[3,6];case 5:return a.sent(),[3,8];case 6:return[4,this.mem.insert(e)];case 7:a.sent(),a.label=8;case 8:return[2]}})})},e.prototype.delete=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,s,o,i=this;return a.d(this,function(l){switch(l.label){case 0:return t=this.options,n=t.getClient,r=t.optimistic,s=t.table,o=n(),r?[4,this.mem.update(e.map(function(e){return i.mem.items.find(function(t){return t.id===e})}).filter(function(e){return e}).map(function(e){return Object.assign({},e,{$meta:"deleting"})}))]:[3,2];case 1:l.sent(),l.label=2;case 2:return[4,o.do(function(t){return e.forEach(function(e){return t.delete(s,e)})}).catch(function(t){return a.b(i,void 0,void 0,function(){var n=this;return a.d(this,function(a){switch(a.label){case 0:return r?[4,this.mem.update(e.map(function(e){return n.mem.items.find(function(t){return t.id===e})}).filter(function(e){return e}).map(function(e){return delete(e=Object.assign({},e)).$meta,e}))]:[3,2];case 1:a.sent(),a.label=2;case 2:throw t}})})})];case 3:return l.sent(),this.regenerateCacheBust(),[4,this.mem.delete(e)];case 4:return l.sent(),[2]}})})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(5),r=n.n(a),s=n(15);var o=function(){function e(e){var t="academicYear"in e?e:Object(s.c)(r()(e));this.academicYear=t.academicYear,this.term=t.term}return Object.defineProperty(e.prototype,"year",{get:function(){return parseInt(this.academicYear.split("/")["AT"===this.term?0:1])},enumerable:!0,configurable:!0}),e.prototype.nextTerm=function(){return new e("AT"===this.term?{term:"ST",academicYear:this.academicYear}:{term:"AT",academicYear:Object(s.a)(this.academicYear,1)})},e.prototype.prevTerm=function(){return new e("AT"===this.term?{term:"ST",academicYear:Object(s.a)(this.academicYear,-1)}:{term:"AT",academicYear:this.academicYear})},e.prototype.toLocaleString=function(e,t){var n="AT"===this.term?this.academicYear.split("/")[0]:this.academicYear.split("/")[1];t&&(n=n.substr(2));for(var a=0,r=e;a<r.length;a++){switch(r[a].split("-")[0].split("_")[0].toLowerCase()){case"en":return("AT"===this.term?"AT":"ST")+" "+n;case"sv":return("AT"===this.term?"HT":"VT")+" "+n}}},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a,r=n(1),s=n(0),o=n(2),i=function(e){var t=e.onClick,n=e.className,i=e.style,l=e.title;return s.createElement("div",{title:l||Object(o.a)(a||(a=r.e(["Radera"],["Radera"]))),className:"removeItem "+(n||""),onClick:t,style:i})}},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(5),r=n.n(a);r.a.updateLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}});var s=function(){return r.a.apply(this,arguments).locale("sv")}},function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(3),o=n(5),i=n.n(o),l=n(6),c=n(7),u=n(2);function d(e){return r.createElement("div",{className:"confirmation-box "+e.className+(e.visible?" visible":"")},r.createElement("p",null,e.text),r.createElement("button",{onClick:function(){return e.onConfirm()}},"OK"),r.createElement("button",{onClick:function(){return e.onCancel()}},"Avbryt"))}n.d(t,"a",function(){return v});var m,p,f,h,b,v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTasks:[],weekDate:Date.now(),confirmations:[]},n.onChange=n.onChange.bind(n),n}return a.c(t,e),t.prototype.onChange=function(e,t){t.weekDate!==this.state.weekDate&&this.setState({confirmations:[]}),this.setState({userTasks:e,weekDate:t.weekDate})},t.prototype.componentDidMount=function(){c.a.subscribe(this.onChange)},t.prototype.componentWillUnmount=function(){c.a.unsubscribe(this.onChange)},t.prototype.toggleTask=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,o;return a.d(this,function(a){switch(a.label){case 0:return t=this.state.userTasks.filter(function(t){return e.task?t.task&&t.task.some(function(t){return t.id===e.id}):t.siteVisionPageId===e.id}),n=this.state.weekDate,0!==t.length?[3,2]:(r=Math.max.apply(Math.max,[n].concat(this.state.userTasks.map(function(e){return e.dateTime}))),o={id:Object(l.e)(),courseName:e.courseName,dateTime:r+2e3,learningGoal:e.learningGoal,name:e.name,url:e.url,acl:[new l.b("email",s.a.currentUser.mail,"S"),new l.b("schoolRole",s.a.currentUser.school+"/EMPLOYEE","R")].map(function(e){return e.toString()})},e.task&&e.task.deadline&&(o.deadline=e.task.deadline),e.task&&e.course?(o.task=[e.task],o.course=[e.course]):o.siteVisionPageId=e.id,e.step&&(o.step=e.step),[4,Promise.all([c.a.setWeekPlannerBoxOpen(e.courseName,!0),c.a.insert([o])])]);case 1:return a.sent(),[3,4];case 2:return[4,c.a.delete(t.map(function(e){return e.id}))];case 3:a.sent(),a.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props.learningTasks,n=Object(u.c)(this.state.userTasks,function(e){return e.task&&e.task.length>0?e.task.map(function(e){return e.id})[0]:e.siteVisionPageId?e.siteVisionPageId:e.url}),s=this.state.confirmations,o=i()(this.state.weekDate).week(),l=i()().week(),c=o===l?"":o===l+1?Object(u.a)(m||(m=a.e(["för nästa vecka (v",")"],["för nästa vecka (v",")"])),o):o===l-1?Object(u.a)(p||(p=a.e(["för förra veckan (v",")"],["för förra veckan (v",")"])),o):Object(u.a)(f||(f=a.e(["för vecka ",""],["för vecka ",""])),o);return r.createElement("div",{className:"taskContainer"},t.map(function(t,i){var m=t.id,p=n[m]||{$meta:"deleted"},f="adding"===p.$meta||"deleting"===p.$meta,v="deleted"!==p.$meta&&"deleting"!==p.$meta,g=v?Object(u.a)(h||(h=a.e(["Ta bort uppgiften från egen veckoplanering ",""],["Ta bort uppgiften från egen veckoplanering ",""])),c):Object(u.a)(b||(b=a.e(["Lägg till uppgiften i egen veckoplanering ",""],["Lägg till uppgiften i egen veckoplanering ",""])),c),k=s.some(function(e){return m===e});return r.createElement("div",{key:t.id},r.createElement("div",{key:m,className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement("div",{className:"selectedBox"+(v?" selected":""),style:f?{opacity:.5}:{},onClick:function(){return f||o!==l?k?e.setState({confirmations:s.filter(function(e){return e!==m})}):e.setState({confirmations:s.slice().concat(m)}):e.toggleTask(t)},title:g})),r.createElement("div",{className:"horizontalItem top"},r.createElement("a",{href:t.url},t.name))),r.createElement(d,{visible:k,text:g,onConfirm:function(){e.toggleTask(t),e.setState({confirmations:s.filter(function(e){return e!==m})})},onCancel:function(){e.setState({confirmations:s.filter(function(e){return e!==m})})}}))}))},t}(r.Component)},,function(e,t,n){"use strict";var a=n(10),r=n(3),s=function(){return function(){var e=r.a.currentUser,t=Object(a.b)(location.search,{toLower:!0});(t.features||"").split(",").map(function(e){return e.toLowerCase()}),this.EditUserTasksViaPenOnly="Grundskolor"!==e.schoolType&&"Grundskolor"!==t.schooltype,this.SubTasks="Grundskolor"!==e.schoolType&&"Grundskolor"!==t.schooltype,this.AssignmentTasks=!!t.testversion}}();n.d(t,"a",function(){return s})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),r=function(){function e(e){this.comm=e,this.listPromise=null,this.items=null,this.subscribers=[]}return e.prototype.subscribe=function(e){var t=this;return this.ensureHasData().then(function(){e(t.items),t.subscribers.push(e)})},e.prototype.unsubscribe=function(e){this.subscribers=this.subscribers.filter(function(t){return t!==e})},e.prototype.notifySubscribers=function(){var e=this;this.subscribers.forEach(function(t){return t(e.items)})},e.prototype.ensureHasData=function(){return this.listPromise||this.refreshFromServer(),this.listPromise},e.prototype.refreshFromServer=function(){var e=this;return this.listPromise=this.comm.query().then(function(t){e.items=t,e.notifySubscribers()}),this.listPromise},e.prototype.update=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return[4,this.ensureHasData()];case 1:return n.sent(),t=Array.isArray(e)?e:[e],this.items=this.items.map(function(e){var n=t.find(function(t){var n=t.id;return e.id===n});return n?Object.assign({},n):e}),this.notifySubscribers(),[2]}})})},e.prototype.insert=function(e){var t=this;return this.ensureHasData().then(function(){t.items=t.items.concat(e),t.notifySubscribers()})},e.prototype.delete=function(e){var t=this,n=Array.isArray(e)?e:[e];return this.ensureHasData().then(function(){t.items=t.items.filter(function(e){return!n.some(function(t){return e.id===t})}),t.notifySubscribers()})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),r=n(0),s=n(31),o=n(20),i=n(8),l=n.n(i),c=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.componentDidUpdate=function(e){null!==this.lastDiv&&e.dialogs.length>this.props.dialogs.length&&l()(Object(o.findDOMNode)(this.lastDiv)).find(":input").first().focus()},t.prototype.render=function(){var e=this;this.lastDiv=null;var t=this.props,n=t.dialogs,a=t.popDialog;return l()("body").attr("aria-disabled",n.length>0),l()("body").css("overflow",n.length>0?"hidden":"auto"),n.length>0&&r.createElement("div",null,n.map(function(t,i){var c;return r.createElement("div",{key:i},r.createElement("div",{className:"darken"}),r.createElement("div",{className:"modal-page-wrap"},r.createElement("div",{className:"modal-page",ref:function(t){c=t,i===n.length-1&&(e.lastDiv=t)},tabIndex:0,"aria-disabled":i<n.length-1,onKeyPress:function(e){13!==e.which||e.target&&"TEXTAREA"===e.target.tagName||l()(Object(o.findDOMNode)(c)).find(".btn-default").click(),e.stopPropagation()},onKeyDown:function(e){if(27===e.which)return a(),void e.stopPropagation();if(83===e.which&&(e.ctrlKey||e.metaKey)){var t=Object(o.findDOMNode)(c);e.preventDefault(),l()(t).find(".btn-default").click(),e.stopPropagation()}}},t,r.createElement(s.a,{onClick:a}),r.createElement("div",{className:"stopFloats"}))))}))},t}(r.Component)},function(e,t,n){"use strict";function a(e,t){return""+e+t.substr(0,3).toLowerCase()}n.d(t,"a",function(){return a})},,function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(25),o=n(2),i=n(12),l=n(39);function c(e){return e.course&&e.task&&e.course.length>0&&e.task.length>0?"courseBuilderTask":e.siteVisionPageId?"siteVisionTask":"customTask"}var u,d,m=n(5),p=n.n(m),f=n(36),h=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.courseName,m=t.learningGoals,h=!!this.props.openCourses[n],b=new f.a;return r.createElement(s.a,{title:r.createElement("h5",null,n||Object(o.a)(u||(u=a.e(["Egna lärandemål"],["Egna lärandemål"])))),headerOpen:h,className:n&&Object(l.a)("wp-course-",n),onOpenClose:function(t){return e.props.setIsOpen(n,t)}},m.map(function(t){return r.createElement("div",{key:t.name,className:"learningGoalContainer"},t.step&&r.createElement("div",{className:"stepIndicator"},t.step),r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"learningGoalText horizontalItem top"},t.name),r.createElement("div",{className:"horizontalItem"}," ",r.createElement("a",{className:"trash",href:"#",title:"Ta bort lärandemålet och dess uppgifter",onClick:function(n){n.preventDefault(),e.props.removeLearningGoal(t)}},r.createElement("i",{className:"fa fa-trash"})))),r.createElement("div",{className:"learningGoalTasks"},r.createElement("div",{className:"taskContainer"},t.tasks.map(function(t){var n="adding"===t.$meta||"deleting"===t.$meta||"updating"===t.$meta,a=c(t),s=p()(t.deadline).startOf("day")<p()().startOf("day");return r.createElement("div",{key:t.id,style:n?{opacity:.5}:{}},r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement("div",{className:"checkBox"+(t.done?" checked":""),onClick:function(a){return!n&&e.props.setTaskDone(t,!t.done)}})),r.createElement("div",{className:"horizontalItem top"},"courseBuilderTask"===a?r.createElement("a",{href:function(e,t){if(e.course&&e.course.length>0&&e.task&&e.task.length>0){var n=Object(i.e)(t,{courseId:e.course[0].id});return n+"#/task/"+e.task[0].id}return e.url}(t,e.props.viewCourseUrl)},t.name):"siteVisionTask"===a?r.createElement("a",{href:t.url},t.name):r.createElement("a",{className:b.EditUserTasksViaPenOnly&&!t.url?"link-less":"",onClick:b.EditUserTasksViaPenOnly?void 0:function(n){n.preventDefault(),e.props.editTask(t)},href:t.url,target:(t.url+"").toLowerCase().startsWith(location.host.toLowerCase())?"_self":"_blank"},t.name),t.deadline&&r.createElement("div",{className:"dateSet"+(s?" expired":"")},r.createElement("i",{title:p()(t.deadline).format("YYYY-MM-DD"),className:"fa fa-calendar","aria-hidden":"true",onClick:function(){}}))),b.EditUserTasksViaPenOnly?r.createElement("div",{className:"horizontalItem top taskEdit"},r.createElement("a",{className:"editItem",onClick:function(){return e.props.editTask(t)}})):void 0),t.subTasks&&r.createElement("div",{className:"subtasks"},t.subTasks.map(function(a){return r.createElement("div",{key:a.id},r.createElement("div",{className:"horizontalItem top"},r.createElement("div",{className:"checkBox"+(a.done?" checked":""),onClick:function(r){return!n&&e.props.setSubTaskDone(t,a,!a.done)}})),r.createElement("div",{className:"horizontalItem top"},r.createElement("a",{href:a.url||void 0,target:(t.url+"").toLowerCase().startsWith(location.host.toLowerCase())?"_self":"_blank",className:a.url?void 0:"link-less"},a.name)),r.createElement("div",{className:"horizontalItem top taskEdit"},r.createElement("a",{className:"editItem",onClick:function(){return e.props.editSubTask(t,a)}})))})))}))),r.createElement("div",{className:"learningGoalTools"},r.createElement("div",{className:"btn addOwnGoal",onClick:function(){return e.props.addOwnTask(e.props.courseName,t.name)}},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," ",Object(o.a)(d||(d=a.e(["Eget arbetsmål"],["Eget arbetsmål"]))))),r.createElement("br",null))}))},t}(r.Component);var b=n(6);var v=n(3),g=n(7),k=n(38),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={learningGoal:t.learningGoal||""},n}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.state.learningGoal,n=this.props.onSave;return r.createElement("div",null,r.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},r.createElement("h2",null,"Lägg till eget lärandemål"),r.createElement("hr",null),r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},"Mål:"),r.createElement("div",{className:"horizontalItem top"},r.createElement("input",{type:"text",tabIndex:1,size:50,autoFocus:!0,value:t,onChange:function(t){return e.setState({learningGoal:t.target.value})}})),r.createElement("div",{className:"horizontalItem top spaced"})),r.createElement("br",null)),r.createElement("div",{className:"sv-html-portlet sv-portlet"},r.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return n(t)}},"Spara")))},t}(r.Component);var E,N,C,w,D,T,S,I,O=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){return r.createElement(r.Fragment,null,r.createElement("label",{className:"kclabel",htmlFor:(e=this.props.children,t=new Set,function e(n){if("string"==typeof n)return null;if(!t.has(n)){if(t.add(n),n.props)return n.props.id?n.props.id:n.props.children?e(n.props.children):void 0;if(n.length)for(var a=0;a<n.length;++a){var r=n[a];if(r){var s=e(r);if(s)return s}}}}(e))},this.props.label),this.props.children);var e,t},t}(r.Component),x=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){var e=this;return r.createElement(O,{label:this.props.label},r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement("input",{type:"text",autoFocus:this.props.autoFocus,id:this.props.id,size:35,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:this.props.placeholder})),!!this.props.children&&r.createElement("div",{className:"horizontalItem"},this.props.children)))},t}(r.Component),j=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){var e=this;return r.createElement(O,{label:this.props.label},r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement("textarea",{autoFocus:this.props.autoFocus,id:this.props.id,cols:35,rows:this.props.rows||5,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:this.props.placeholder})),!!this.props.children&&r.createElement("div",{className:"horizontalItem"},this.props.children)))},t}(r.Component),P=function(e){function t(t){var n=e.call(this,t)||this;return n.state={name:"",description:"",url:""},n}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.name,a=t.description,s=t.url,o=this.props,i=(o.isTask,o.onSave);return r.createElement("div",null,r.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},r.createElement("h2",null,"Lägg till eget arbetsmål"),r.createElement("hr",null),r.createElement(x,{label:"Namn",id:"AddCustomTask:name",placeholder:"Ange namn...",value:n,autoFocus:!0,onChange:function(t){return e.setState({name:t})}}),r.createElement(j,{rows:7,label:"Beskrivning",id:"AddCustomTask:description",placeholder:"Lägg till en beskrivning...",value:a,onChange:function(t){return e.setState({description:t})}}),r.createElement(x,{label:"Länk",id:"AddCustomTask:url",placeholder:"http://www...",value:s,onChange:function(t){return e.setState({url:s})}})),r.createElement("div",{className:"sv-html-portlet sv-portlet"},r.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return i(n,a,s)}},"Spara")))},t}(r.Component),M=n(48),G=(n(33),function(e){function t(t){var n=e.call(this,t)||this;if("edit"===t.mode){var a=t.subTask;n.state={name:a.name||"",description:a.description||"",url:a.url||""}}else n.state={name:"",description:"",url:""};return n}return a.c(t,e),t.prototype.save=function(){var e=this.props,t=e.userTask,n=e.closeDialog,r=this.state,s=r.name,o=r.description,i=r.url;if("edit"===e.mode)g.a.update([t],function(t){var n=t.subTasks;n&&(t.subTasks=n.map(function(t){return t.id===e.subTask.id?a.a({},t,{name:s,description:o,url:i}):a.a({},t)}))});else{var l={id:Object(b.e)(),name:s,description:o,url:i};g.a.update([t],function(e){e.subTasks||(e.subTasks=[]),e.subTasks=e.subTasks.concat(l)})}n()},t.prototype.delete=function(){var e=this.props;if("edit"!==e.mode)throw new Error("Can only delete in edit mode");g.a.update([e.userTask],function(t){t.subTasks&&(t.subTasks=t.subTasks.filter(function(t){return t.id!==e.subTask.id}))}),e.closeDialog()},t.prototype.render=function(){var e=this,t=this.state,n=(t.name,t.description,t.url,this.props),a="edit"===n.mode;return r.createElement(r.Fragment,null,r.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},r.createElement("h2",null,a?"Redigera underuppgift":"Lägg till underuppgift"),r.createElement("hr",null),r.createElement(x,{autoFocus:!0,label:"Underuppgiftens namn",id:"AddUserSubTask:name",placeholder:"",value:this.state.name,onChange:function(t){return e.setState({name:t})}}),r.createElement(j,{label:"Beskrivning",id:"AddUserSubTask:description",rows:7,placeholder:"",value:this.state.description,onChange:function(t){return e.setState({description:t})}}),r.createElement(x,{label:"Länk",id:"AddUserSubTask:url",placeholder:"",value:this.state.url,onChange:function(t){return e.setState({url:t})}}),r.createElement("br",null)),r.createElement("div",{className:"sv-html-portlet sv-portlet"},"edit"===n.mode&&r.createElement("button",{className:"btn btn-warning btn-large pull-right",onClick:function(t){return e.delete()}},"Ta bort underuppgift"),r.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return e.save()}},"Spara")))},t}(r.Component)),L=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTask:t.userTask,name:t.userTask.name,description:t.userTask.description,url:t.userTask.url,deadline:t.userTask.deadline,subTasks:t.userTask.subTasks},n.onUserTasksChanged=n.onUserTasksChanged.bind(n),n}return a.c(t,e),t.prototype.componentDidMount=function(){g.a.subscribe(this.onUserTasksChanged)},t.prototype.onUserTasksChanged=function(e){var t=this,n=e.find(function(e){return e.id===t.props.userTask.id});n?this.setState({userTask:n,subTasks:n.subTasks}):this.props.closeDialog()},t.prototype.componentWillUnmount=function(){g.a.unsubscribe(this.onUserTasksChanged)},t.prototype.isModified=function(){var e=this.state,t=e.deadline,n=e.description,a=e.name,r=e.url,s=e.userTask;return t!==s.deadline||n!==s.description||a!==s.name||r!==s.url},t.prototype.addSubTask=function(){this.props.openDialog(r.createElement(G,{mode:"add",userTask:this.state.userTask,closeDialog:this.props.closeDialog}))},t.prototype.editSubTask=function(e){this.props.openDialog(r.createElement(G,{mode:"edit",subTask:e,userTask:this.state.userTask,closeDialog:this.props.closeDialog}))},t.prototype.render=function(){var e=this,t=this.state,n=t.name,a=t.description,s=t.url,o=t.deadline,i=t.subTasks,l=t.showCalendar,u=t.userTask,d=u.id,m=(u.courseName,this.props),f=m.onUpdate,h=m.onDelete,b=this.isModified(),v="customTask"===c(u),g=p()(u.deadline)<p()();return r.createElement("div",{className:"editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer"},r.createElement("h2",null,v?"Redigera arbetsmål":"Redigera uppgift"),r.createElement("hr",null),r.createElement(x,{autoFocus:!0,label:v?"Arbetsmålets namn":"Uppgiftens namn",id:"EditUserTask:name",placeholder:v?"Vad ska du göra?":"Ange uppgiftens namn...",value:n,onChange:function(t){return e.setState({name:t})}}),v&&r.createElement(r.Fragment,null,r.createElement(j,{rows:5,label:"Beskrivning",id:"EditUserTask:description",placeholder:"Lägg till en beskrivning...",value:a,onChange:function(t){return e.setState({description:t})}}),r.createElement(x,{label:"Länk",id:"EdutUserTask:url",placeholder:"http(s)://...",value:s,onChange:function(t){return e.setState({url:t})}})),r.createElement(O,{label:"Ange deadline"},o||l?r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement(M.a,{ref:function(t){return e.datePicker=t},id:"EditUserTask:deadline",selected:o&&p()(o),autoFocus:l,dateFormat:"YYYY-MM-DD",className:g?"expired":void 0,locale:"sv",popperPlacement:v?"top-start":"bottom-start",onBlur:function(){return e.setState({showCalendar:!1})},onChange:function(t){e.setState({deadline:t&&t.format("YYYY-MM-DD"),showCalendar:!1})}})),r.createElement("div",{className:"horizontalItem top"},r.createElement("a",{className:"deleteDate",href:"#",title:"Ta bort deadline",onClick:function(t){t.preventDefault(),e.setState({deadline:null,showCalendar:!1})}}))):r.createElement("div",{className:"top",ref:function(){e.datePicker=null}},r.createElement("a",{className:"btn",onClick:function(t){e.datePicker&&e.datePicker.setOpen(!0),e.setState({showCalendar:!0})}},r.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"})," Ange deadline..."))),r.createElement(O,{label:"Underuppgifter"},r.createElement("div",{className:"learningGoalTasks"},r.createElement("div",{className:"taskContainer"},i&&i.map(function(t){return r.createElement("div",{key:t.id,className:"align-horizontal"},r.createElement("div",{className:"horizontalItem top"},r.createElement("a",{onClick:function(){return e.editSubTask(t)},href:"#"},t.name)))}))),r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"top"},r.createElement("button",{id:"EditUserTask:addSubTask",className:"btn",onClick:function(){return e.addSubTask()}},r.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," Lägg till underuppgift")))),r.createElement("div",{className:"divider large"}),r.createElement("div",{className:"align-horizontal"},r.createElement("div",{className:"horizontalButton top"},r.createElement("button",{tabIndex:1,className:"btn btn-default",onClick:function(){b?f(function(e){e.name=n,e.description=a,e.url=s,e.deadline=o}):e.props.closeDialog()}}," Spara ")),r.createElement("div",{className:"horizontalButton top"},r.createElement("button",{tabIndex:1,className:"btn",onClick:function(){e.props.closeDialog()}}," Avbryt ")),r.createElement("div",{className:"confirm top pull-right"},r.createElement("button",{tabIndex:1,className:"btn btn-warning",onClick:function(){h(d)}},v?" Ta bort arbetsmål":" Ta bort den här uppgiften"))))},t}(r.Component),A=n(13),U=function(){function e(e){this.timeoutId=null,this.cancelled=!1,this.pending=!1,this.isJobExecuting=!1,this.jobCallback=e}return e.prototype.triggerChange=function(e){var t=this;this.cancelled||(this.pending=!0,null!==this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){return t.launchJob()},e))},e.prototype.stop=function(){null!==this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null,this.cancelled=!0},e.prototype.launchJob=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:if(this.cancelled)return[2];if(!this.pending)return[2];if(this.isJobExecuting)return[2];this.timeoutId=null,e.label=1;case 1:return e.trys.push([1,,3,4]),this.isJobExecuting=!0,this.pending=!1,[4,this.jobCallback()];case 2:return e.sent(),[3,4];case 3:return this.isJobExecuting=!1,[7];case 4:return this.pending?[4,this.launchJob()]:[3,6];case 5:e.sent(),e.label=6;case 6:return[2]}})})},e}(),_=n(26),B=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTasks:[],weekDate:Date.now(),openCourses:{},dialogs:[],saving:!1,weekTextsUT:null,isLoading:!0},n.onChange=n.onChange.bind(n),n.weekTextsSavingJob=new U(function(){return n.saveWeekTexts()}),n}return a.c(t,e),t.prototype.componentDidMount=function(){g.a.subscribe(this.onChange)},t.prototype.componentWillUnmount=function(){g.a.unsubscribe(this.onChange),this.weekTextsSavingJob.stop()},t.prototype.onChange=function(e,t,n){var a={userTasks:e,weekDate:t.weekDate,openCourses:t.openCourses,weekTextsUT:n,isLoading:!1};this.state.weekTextsUT&&n.dateTime===this.state.weekTextsUT.dateTime||(a.strategy=n.weekTexts.strategy,a.assessment=n.weekTexts.assessment),this.setState(a)},t.prototype.isWeekTextsEdited=function(){var e=this.state,t=e.strategy,n=e.assessment,a=e.weekTextsUT;return!!a&&(t!==a.weekTexts.strategy||n!==a.weekTexts.assessment)},t.prototype.saveWeekTexts=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r;return a.d(this,function(a){switch(a.label){case 0:return console.log("Saving texts..."),e=this.state,t=e.strategy,n=e.assessment,r=e.weekTextsUT,this.isWeekTextsEdited()?[4,g.a.upsert(r,function(e){e.weekTexts={strategy:t,assessment:n}})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.prevWeek=function(){g.a.changeWeek(p()(this.state.weekDate).add(-1,"week").toDate())},t.prototype.nextWeek=function(){g.a.changeWeek(p()(this.state.weekDate).add(1,"week").toDate())},t.prototype.openDialog=function(e){this.setState({dialogs:this.state.dialogs.concat([e])})},t.prototype.openAddGoalDialog=function(){var e=this;this.openDialog(r.createElement(y,{onSave:function(t){return a.b(e,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:if(!t)throw new Error(Object(o.a)(E||(E=a.e(["Lärandemålet kan inte vara tomt"],["Lärandemålet kan inte vara tomt"]))));if(this.state.saving)return[3,5];this.setState({saving:!0}),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,this.addCustomGoal(t)];case 2:return e.sent(),[3,4];case 3:return this.setState({saving:!1}),[7];case 4:this.closeDialog(),e.label=5;case 5:return[2]}})})}}))},t.prototype.openAddOwnTaskDialog=function(e,t){var n=this;this.openDialog(r.createElement(P,{isTask:!e,onSave:function(r,s,i){return a.b(n,void 0,void 0,function(){return a.d(this,function(n){switch(n.label){case 0:if(!r)throw new Error(Object(o.a)(N||(N=a.e(["Namnet kan inte vara tomt"],["Namnet kan inte vara tomt"]))));if(this.state.saving)return[3,5];this.setState({saving:!0}),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.addCustomTask(e,t,r,s,i)];case 2:return n.sent(),[3,4];case 3:return this.setState({saving:!1}),[7];case 4:this.closeDialog(),n.label=5;case 5:return[2]}})})}}))},t.prototype.editTask=function(e){var t=this;this.openDialog(r.createElement(L,{userTask:e,onUpdate:function(n){return a.b(t,void 0,void 0,function(){var t;return a.d(this,function(r){switch(r.label){case 0:if(t=a.a({},e),n(t),!t.name)throw new Error(Object(o.a)(C||(C=a.e(["Namnet får inte vara tomt"],["Namnet får inte vara tomt"]))));return this.closeDialog(),[4,g.a.update([e],n)];case 1:return r.sent(),[2]}})})},onDelete:function(e){return a.b(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return this.closeDialog(),[4,g.a.delete([e])];case 1:return t.sent(),[2]}})})},openDialog:function(e){return t.openDialog(e)},closeDialog:function(){return t.closeDialog()}}))},t.prototype.editSubTask=function(e,t){var n=this;this.openDialog(r.createElement(G,{mode:"edit",userTask:e,subTask:t,closeDialog:function(){return n.closeDialog()}}))},t.prototype.closeDialog=function(){this.setState({dialogs:this.state.dialogs.slice(0,this.state.dialogs.length-1)})},t.prototype.addCustomGoal=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=Math.max.apply(Math.max,[this.state.weekDate].concat(this.state.userTasks.map(function(e){return e.dateTime}))),[4,g.a.insert([{id:Object(b.e)(),learningGoal:e,dateTime:t+2e3}])];case 1:return n.sent(),[4,g.a.setWeekPlannerBoxOpen("",!0)];case 2:return n.sent(),[2]}})})},t.prototype.removeLearningGoal=function(e){return a.b(this,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return e.tasks.length>0&&!confirm("Ta bort lärandemål samt "+e.tasks.length+" uppgifter?")?[2]:[4,g.a.delete(e.allTasks.map(function(e){return e.id}))];case 1:return t.sent(),[2]}})})},t.prototype.addCustomTask=function(e,t,n,r,s){return a.b(this,void 0,void 0,function(){var o;return a.d(this,function(a){switch(a.label){case 0:return o=Math.max.apply(Math.max,[this.state.weekDate].concat(this.state.userTasks.map(function(e){return e.dateTime}))),[4,g.a.insert([{id:Object(b.e)(),dateTime:o+2e3,courseName:e,learningGoal:t,name:n,description:r,url:s}])];case 1:return a.sent(),[2]}})})},t.prototype.setIsOpen=function(e,t){g.a.setWeekPlannerBoxOpen(e,t)},t.prototype.setTaskDone=function(e,t){return a.b(this,void 0,void 0,function(){return a.d(this,function(n){switch(n.label){case 0:return[4,g.a.setTaskDoneState(e,t)];case 1:return n.sent(),[2]}})})},t.prototype.setSubTaskDone=function(e,t,n){return a.b(this,void 0,void 0,function(){return a.d(this,function(a){switch(a.label){case 0:return[4,g.a.setSubTaskDoneState(e,t.id,n)];case 1:return a.sent(),[2]}})})},t.prototype.copyFromPreviousWeek=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,s,i,l,c;return a.d(this,function(u){switch(u.label){case 0:return e=this.state,t=e.userTasks,e.openCourses,n=e.weekDate,r=Object(_.b)(p()(n).add(-1,"week")),s=Object(_.a)(p()(n).year(),r),[4,v.a.kedBackendClient.list("usertasks",{from:s.notBefore,to:s.notAfter,role:"USER",include:["task","course","acl"],flags:["includeIdsOnly"]})];case 1:return i=(i=u.sent()).filter(function(e){return!e.done}).filter(function(e){return!!e.name}).filter(function(e){return!t.some(function(t){return t.name===e.name&&t.learningGoal===e.learningGoal&&t.courseName===e.courseName})}),l=Math.max.apply(Math.max,[n].concat(t.map(function(e){return e.dateTime}))),c=i.sort(Object(o.g)("dateTime")).map(function(e){var t=a.a({},e,{dateTime:l+=1e3});return t.id=Object(b.e)(),t.subTasks&&(t.subTasks=t.subTasks.filter(function(e){return!e.done})),delete t.$etag,t}),[4,g.a.insert(c)];case 2:return u.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=p()(this.state.weekDate).week(),n=p()().week(),i=function(e){for(var t=[],n=Object(o.b)(e,function(e){return e.courseName||""}),a=0,r=Object.keys(n).sort().filter(function(e){return e}).concat(n[""]?[""]:[]);a<r.length;a++){for(var s=r[a],i=n[s]||n[""],l=Object(o.b)(i,function(e){return e.learningGoal}),c=[],u=0,d=Object.keys(l);u<d.length;u++){var m=d[u],p=l[m].sort(Object(o.g)("dateTime")),f=p.filter(function(e){return null==e.name})[0],h=f&&f.url;c.push({name:m,allTasks:p,url:h,step:p.map(function(e){return e.step}).filter(function(e){return e})[0],tasks:p.filter(function(e){return e.name})})}t.push({courseName:s,learningGoals:c})}return t}(this.state.userTasks),l=this.state,c=l.dialogs,u=l.weekTextsUT,d=l.strategy,m=l.assessment,f=l.isLoading,b=u&&("adding"===u.$meta||"updating"===u.$meta),v=!!u&&d!==u.weekTexts.strategy,g=!!u&&m!==u.weekTexts.assessment,y=!b&&(v||g);return r.createElement("div",null,r.createElement("div",{className:"ked_boxed weekPlanner"+(t===n?" currentWeek":""),onKeyDown:function(t){83===t.which&&t.ctrlKey&&(t.preventDefault(),!b&&e.isWeekTextsEdited()&&e.weekTextsSavingJob.triggerChange(0))}},r.createElement("div",{className:"weekSelect"},r.createElement("div",{className:"horizontalItem"},r.createElement("p",null,Object(o.a)(w||(w=a.e(["Vecka ",""],["Vecka ",""])),t))),r.createElement("div",{className:"horizontalItem"},r.createElement("div",{className:"btn-group"},r.createElement("button",{className:"btn",onClick:function(){return e.prevWeek()}},r.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.createElement("button",{className:"btn",onClick:function(){return e.nextWeek()}},r.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}))))),r.createElement("h4",null,Object(o.a)(D||(D=a.e(["Loggbok"],["Loggbok"])))),i.length>0&&r.createElement("hr",null),i.map(function(t){return r.createElement(h,a.a({key:t.courseName},t,{courseName:t.courseName,learningGoals:t.learningGoals,viewCourseUrl:e.props.viewCourseUrl,openCourses:e.state.openCourses,addOwnTask:function(t,n){return e.openAddOwnTaskDialog(t,n)},setIsOpen:e.setIsOpen.bind(e),setTaskDone:e.setTaskDone.bind(e),setSubTaskDone:e.setSubTaskDone.bind(e),editTask:function(t){return e.editTask(t)},editSubTask:function(t,n){return e.editSubTask(t,n)},removeLearningGoal:function(t){return e.removeLearningGoal(t)}}))}),r.createElement("hr",null),f?r.createElement(A.a,null):r.createElement("div",null,r.createElement("div",{className:"btn",onClick:function(t){return e.openAddGoalDialog()}},r.createElement("i",{className:"fa fa-list-alt","aria-hidden":"true"})," ",Object(o.a)(T||(T=a.e(["Eget lärandemål"],["Eget lärandemål"])))),r.createElement("div",{className:"btn",onClick:function(t){return e.copyFromPreviousWeek()}},r.createElement("i",{className:"fa fa-clone","aria-hidden":"true"})," ",Object(o.a)(S||(S=a.e(["Kopiera ej klara från föregående vecka"],["Kopiera ej klara från föregående vecka"])))),r.createElement(s.a,{title:r.createElement("h5",null,Object(o.a)(I||(I=a.e(["Strategi & Utvärdering"],["Strategi & Utvärdering"])))),headerOpen:this.state.openCourses.StratUtv,onOpenClose:function(t){return e.setIsOpen("StratUtv",t)}},r.createElement("h3",null,"Strategi"),r.createElement("p",null,"Hur jag ska göra för att lära mig."),r.createElement("hr",null),r.createElement("textarea",{className:"weekplanner-textarea",value:d,onChange:function(t){e.setState({strategy:t.target.value}),e.weekTextsSavingJob.triggerChange(500)}}),r.createElement("h3",null,"Utvärdering"),r.createElement("p",null,"Reflektion kring din arbetsinsats och dina valda strategier under veckan. Utvärdera i förhållande till dina mål."),r.createElement("hr",null),r.createElement("textarea",{className:"weekplanner-textarea",value:m,onChange:function(t){e.setState({assessment:t.target.value}),e.weekTextsSavingJob.triggerChange(500)}}),r.createElement("div",{className:"btn",tabIndex:0,style:y?{}:{opacity:.5},onClick:function(){return!b&&e.weekTextsSavingJob.triggerChange(0)}},r.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"}),y?" Spara":" Sparad")))),r.createElement(k.a,{dialogs:c,popDialog:function(){e.setState(function(e){var t=e.dialogs;return{dialogs:t.slice(0,t.length-1)}})}}))},t}(r.Component);n.d(t,"a",function(){return B})},,,,,,,,function(e,t,n){"use strict";var a=n(3),r=n(9),s=n(17);a.a.kedBackendClient=new s.a(r.a.KED_API_URL,a.a.bearerProvider)},function(e,t,n){"use strict";var a=n(1),r=n(10),s=n(17),o=n(6),i=n(9),l=n(3),c=n(12),u=n(2);function d(e,t,n){var s=Object(r.b)(t),o=Object(u.e)(s,c.a),i=Object(r.c)(e),l=i[0],d=i[1],m=Object(r.b)(d);return l+Object(r.a)(a.a({},m,o,{scopes:n.join(",")}))}function m(e,t){return e+"/"+t}function p(e,t,n){return new o.d(s.c,s.d,e+t.mail+location.search,i.a.KED_CLIENT_ID,i.a.KED_CLIENT_SECRET,e,{email:t.mail.toLowerCase(),roles:t.roles,school:t.school,schoolType:t.schoolType,scopes:n})}var f,h,b=l.a.currentUser&&l.a.currentUser.mail;if(b)if(i.a.KED_TOKEN_PATH){var v=d(i.a.KED_TOKEN_PATH,location.search,["kedbackend","EDS"]);l.a.bearerProvider=function(e,t){var n=m(e,t);return new s.b(e,function(e){var t=JSON.parse(e);if(!t.ok)throw new Error(t.error);return t.user&&function(e,t){l.a.currentUser=e,sessionStorage.setItem("userInfo"+t,JSON.stringify(e))}(t.user,n),{token:t.token,expires:Date.now()+354e4}},n)}(v,b),f=m(v,b),(h=sessionStorage.getItem("userInfo"+f))&&(l.a.currentUser=JSON.parse(h));var g=d(i.a.KED_TOKEN_PATH,location.search,["https://www.googleapis.com/auth/calendar.readonly"]);l.a.googleTokenProvider=function(e,t){var n=m(e,t);return new s.b(e,function(e){var t=JSON.parse(e);if(!t.ok)throw new Error(t.error);return{token:t.token,expires:Date.now()+354e4}},n)}(g,b)}else{if(!(i.a.KED_TOKEN_URL&&i.a.KED_CLIENT_ID&&i.a.KED_CLIENT_SECRET))throw new Error("Missing configuration parameter KED_TOKEN_PATH");l.a.bearerProvider=p(i.a.KED_TOKEN_URL,l.a.currentUser,["kedbackend","EDS"]),l.a.googleTokenProvider=p(i.a.KED_TOKEN_URL+"/google",l.a.currentUser,["https://www.googleapis.com/auth/calendar.readonly"])}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a,r,s=n(1),o=n(0),i=n(2),l=n(13),c=n(10),u=n(12),d=n(28),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!0,courses:[],headerOpen:!1},n.updateHiddenCourses=n.updateHiddenCourses.bind(n),n}return s.c(t,e),t.prototype.componentWillMount=function(){d.a.subscribe(this.updateHiddenCourses,{fullCourse:!0})},t.prototype.componentWillUnmount=function(){d.a.unsubscribe(this.updateHiddenCourses)},t.prototype.updateHiddenCourses=function(e){this.setState({courses:e,isLoading:!1})},t.prototype.hideCourse=function(e){return s.b(this,void 0,void 0,function(){return s.d(this,function(t){switch(t.label){case 0:return Object(i.n)(Object(i.a)(a||(a=s.e(["Sparar..."],["Sparar..."])))),[4,d.a.hideCourse(e)];case 1:return t.sent(),Object(i.n)(""),[2]}})})},t.prototype.showCourse=function(e){return s.b(this,void 0,void 0,function(){return s.d(this,function(t){switch(t.label){case 0:return Object(i.n)(Object(i.a)(r||(r=s.e(["Sparar..."],["Sparar..."])))),[4,d.a.showCourse(e)];case 1:return t.sent(),Object(i.n)(""),[2]}})})},t.prototype.render=function(){var e=this;if(this.state.isLoading)return o.createElement(l.a,null);var t=this.state.courses,n=t.filter(function(e){return e.visible}),a=t.filter(function(e){return!e.visible}),r=Object(c.b)(location.search),i=this.props.viewCourseUrl||"";return o.createElement("div",{className:"ked_boxed"},o.createElement("h3",null,"Skolans kurser"),o.createElement("div",{className:"taskContainer odd-even"},n.map(function(t){return o.createElement("div",{className:"studentCourse",key:t.id},o.createElement("div",{className:"align-horizontal"},o.createElement("div",{className:"horizontalItem top pull-right"},o.createElement("a",{className:"hideItem",onClick:function(){return e.hideCourse(t)}})),o.createElement("div",{className:"horizontalItem top"},o.createElement("a",{href:Object(u.e)(i,{courseId:t.id})},t.name))),o.createElement("div",{className:"horizontalItem top"},o.createElement("p",{className:"small"},t.description)))})),o.createElement("div",{className:"openClose"+(this.state.headerOpen?" open":"")},o.createElement("div",{className:"openHeader",onClick:function(){return e.setState({headerOpen:!e.state.headerOpen})}},o.createElement("h5",null,"Dolda kurser")),o.createElement("div",{className:"openContent"},o.createElement("div",{className:"taskContainer odd-even"},a.map(function(t){return o.createElement("div",{className:"studentCourse",key:t.id},o.createElement("div",{className:"align-horizontal"},o.createElement("div",{className:"horizontalItem top pull-right"},o.createElement("a",{className:"showItem",onClick:function(){return e.showCourse(t)}})),o.createElement("a",{href:Object(c.a)(s.a({},r,{courseId:t.id}))},t.name)),o.createElement("div",{className:"horizontalItem top"},o.createElement("p",{className:"small"},t.description)))})))))},t}(o.Component)},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),r=n(0),s=n(34),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.commonTasks,n=e.learningGoals;return r.createElement("div",null,n.map(function(e){return r.createElement("div",{key:e.name},r.createElement("h5",null,e.name),r.createElement(s.a,{learningTasks:e.learningTasks}))}),t.length>0&&r.createElement("div",null,n.length>0&&r.createElement("h5",null,"Övergripande"),r.createElement(s.a,{learningTasks:t})))},t}(r.Component)},,function(e,t,n){"use strict";var a=n(3),r=n(9),s=n(17),o=n(24);a.a.edsClient=new o.b(s.c,r.a.EDS_API_URL,a.a.bearerProvider)},,,function(e,t,n){var a={"./en-au":47,"./en-au.js":47,"./en-ca":46,"./en-ca.js":46,"./en-gb":45,"./en-gb.js":45,"./en-ie":44,"./en-ie.js":44,"./en-nz":43,"./en-nz.js":43,"./sv":42,"./sv.js":42};function r(e){var t=s(e);return n(t)}function s(e){var t=a[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=58},,,function(e,t,n){"use strict";var a=n(1),r=n(0);var s=n(53);n.d(t,"a",function(){return o});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:null},n}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e;return a.d(this,function(t){switch(t.label){case 0:return[4,function(e,t){return a.b(this,void 0,void 0,function(){return a.d(this,function(n){switch(n.label){case 0:return[4,fetch(e+"?nodeID="+t,{credentials:"same-origin"})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}})})}(this.props.apiPath,this.props.pageId)];case 1:return e=t.sent(),this.setState({data:e}),[2]}})})},t.prototype.render=function(){if(!this.state.data)return r.createElement("div",null);var e=this.state.data,t=e.moduleName,n=e.subject,a=e.commonTasks,o=e.learningGoals,i=e.step,l=a.map(function(e){return{id:e.id,name:e.name,url:e.url,courseName:n.name,learningGoal:i&&o.length>0?t+" - övergripande":t}}),c=o.map(function(e){return{name:e.name,learningTasks:e.tasks.map(function(t){return{id:t.id,name:t.name,url:t.url,courseName:n.name,learningGoal:e.name}})}});return i&&(l.forEach(function(e){return e.step=i}),c.forEach(function(e){return e.learningTasks.forEach(function(e){return e.step=i})})),r.createElement(s.a,{commonTasks:l,learningGoals:c})},t}(r.Component)},function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(3),o=n(24),i=n(15),l=n(5),c=n.n(l),u=n(13),d=n(38),m=new(function(e){function t(){var t=this,n=Date.now(),r=Object(i.d)(c()(n)),o=r[0],l=r[1];return t=e.call(this,{getClient:function(){return s.a.kedBackendClient},optimistic:!0,table:"weekplans",user:s.a.currentUser?s.a.currentUser.mail:"",getQueryOptions:function(){return a.b(t,void 0,void 0,function(){return a.d(this,function(e){return[2,{from:o.valueOf(),to:l.valueOf(),role:"USER"}]})})}})||this}return a.c(t,e),t}(n(29).a)),p=n(6),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={description:t.note?t.note.description:"",color:t.note?t.note.color:"yellow"},n}return a.c(t,e),t.prototype.delete=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,s;return a.d(this,function(a){switch(a.label){case 0:return e=this.props,e.weekNumber,e.weekDate,t=e.courseName,n=e.weekPlan,e.note,r=e.closeDialog,s=this.state,s.description,s.color,r(),1!==Object.keys(n.plans).length?[3,2]:[4,m.delete([n.id])];case 1:return a.sent(),[3,4];case 2:return[4,m.update([n],function(e){delete e.plans[t]})];case 3:a.sent(),a.label=4;case 4:return[2]}})})},t.prototype.save=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,s,o,i,l,c;return a.d(this,function(a){switch(a.label){case 0:return e=this.props,e.weekNumber,t=e.weekDate,n=e.courseName,r=e.weekPlan,e.note,s=e.closeDialog,o=this.state,i=o.description,l=o.color,s(),r?[4,m.update([r],function(e){return e.plans[n]={description:i,color:l}})]:[3,2];case 1:return a.sent(),[3,4];case 2:return(c={})[n]={description:i,color:l},[4,m.insert([{id:Object(p.e)(),dateTime:t,plans:c}])];case 3:a.sent(),a.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.weekNumber,a=t.courseName,s=(t.weekPlan,t.note),o=this.state,i=o.description,l=o.color;return r.createElement("div",null,r.createElement("div",null,r.createElement("h2",null,"Händelse för vecka ",n," och ",a),r.createElement("hr",null),r.createElement("div",{className:"align-table"},r.createElement("div",null,"Beskrivning:"),r.createElement("div",{className:"fullWidth"},r.createElement("textarea",{autoFocus:!0,value:i,onChange:function(t){return e.setState({description:t.target.value})}}))),r.createElement("div",{className:"align-table"},r.createElement("div",null,"Färg:"),r.createElement("div",null,r.createElement("select",{value:l,onChange:function(t){return e.setState({color:t.target.value})}},r.createElement("option",{value:"yellow"},"Gul"),r.createElement("option",{value:"yellowLight"},"Ljusgul"),r.createElement("option",{value:"cyan"},"Grön"),r.createElement("option",{value:"cyanLight"},"Ljusgrön"),r.createElement("option",{value:"purple"},"Lila"),r.createElement("option",{value:"purpleLight"},"Ljuslila"),r.createElement("option",{value:"red"},"Röd"),r.createElement("option",{value:"redLight"},"Rosa"))))),r.createElement("div",null,r.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return e.save()}},"Spara"),s&&r.createElement("a",{tabIndex:1,className:"btn btn-warning btn-large pull-right",onClick:function(){return e.delete()}},"Ta bort")))},t}(r.Component),h=n(2),b=n(26);n.d(t,"a",function(){return v});var v=function(e){function t(t){var n=e.call(this,t)||this,a=new Date;return n.state={now:a,courses:[],weekPlans:[],isLoadingCourses:!0,isLoadingWeekPlans:!0,dialogs:[]},n.updateWeekPlans=n.updateWeekPlans.bind(n),n}return a.c(t,e),t.prototype.componentDidMount=function(){this.loadEDSCourses(),m.mem.subscribe(this.updateWeekPlans)},t.prototype.componentWillUnmount=function(){m.mem.unsubscribe(this.updateWeekPlans)},t.prototype.updateWeekPlans=function(e){this.setState({weekPlans:e,isLoadingWeekPlans:!1})},t.prototype.loadEDSCourses=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r;return a.d(this,function(a){switch(a.label){case 0:return a.trys.push([0,,2,3]),e=Object(i.c)(c()(this.state.now)),t=new o.a(e).period,r=h.j,[4,s.a.edsClient.getActiveCourses({periodName:t})];case 1:return n=r.apply(void 0,[a.sent(),function(e){return e.name}]),this.setState({courses:n}),[3,3];case 2:return this.setState({isLoadingCourses:!1}),[7];case 3:return[2]}})})},t.prototype.onNoteClick=function(e,t,n,a,s){var o=this;this.openDialog(r.createElement(f,{weekNumber:e,weekDate:t,courseName:n,weekPlan:a,note:s,closeDialog:function(){return o.closeDialog()}}))},t.prototype.openDialog=function(e){this.setState({dialogs:this.state.dialogs.concat([e])})},t.prototype.closeDialog=function(){this.setState({dialogs:this.state.dialogs.slice(0,this.state.dialogs.length-1)})},t.prototype.render=function(){for(var e=this,t=this.state,n=t.courses,a=t.now,s=t.isLoadingCourses,o=t.isLoadingWeekPlans,l=t.weekPlans,m=t.dialogs,p=s||o,f=[],h=Object(i.c)(c()(a)),v=Object(i.d)(c()(a)),g=v[0],k=v[1],y=Object(i.b)(h.term),E=y[0],N=y[1],C=function(e){var t=e.week(),n=Object(b.a)(e.year(),t);if(t>=E&&t<=N){var a=l.filter(function(e){return e.dateTime>=n.notBefore&&e.dateTime<=n.notAfter})[0];f.push({weekNumber:t,weekDate:e.clone().startOf("week").valueOf(),weekPlan:a})}},w=g.clone().startOf("week");w.valueOf()<k.valueOf();w=w.clone().add(1,"week").startOf("week"))C(w);return r.createElement("div",{className:"ked_boxed termPlanContainer"},r.createElement("h4",null,"Terminsplanering"),r.createElement("hr",null),p?r.createElement(u.a,null):0===n.length?r.createElement("div",null,"Terminsplaneraren aktiveras när du skrivits in på dina kurser"):r.createElement("table",{className:"smallFont"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"nowrap"},"Vecka"),n.map(function(e,t){return r.createElement("th",{key:t,className:"termCourseHeader"},r.createElement("div",{className:"termCourseText"},e.name))}))),r.createElement("tbody",null,f.map(function(t,a){return r.createElement("tr",{key:a,className:a%2&&"tableOdd"},r.createElement("td",null,t.weekNumber),n.map(function(n,a){var s=t.weekPlan&&t.weekPlan.plans[n.name];return r.createElement("td",{key:a,className:"courseNote",title:s&&s.description,onClick:function(){return e.onNoteClick(t.weekNumber,t.weekDate,n.name,t.weekPlan,s)}},r.createElement("div",{className:"note"+(s?" noted note-color-"+s.color:"")}))}))})),r.createElement("tfoot",null,r.createElement("tr",null,r.createElement("th",{key:"points"},"Poäng"),n.map(function(e,t){return r.createElement("th",{key:t,className:"stepCell"},e.credits)})),r.createElement("tr",null,r.createElement("th",null,"Betygsmål"),n.map(function(e,t){return r.createElement("th",{key:t,className:"stepCell"},e.periodGoalGrade)})))),r.createElement(d.a,{dialogs:m,popDialog:function(){return e.setState({dialogs:m.slice(0,m.length-1)})}}))},t}(r.Component)},function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(2),o=n(24),i=function(){return function(e){this.subjects=e.map(function(e){var t=e.periodGoals.map(function(e){return{period:new o.a(e.periodName),goal:e.gradeName}});return{name:e.courseUnitName,atGoal:t.filter(function(e){return"AT"===e.period.term}).map(function(e){return e.goal})[0],stGoal:t.filter(function(e){return"ST"===e.period.term}).map(function(e){return e.goal})[0],finalGoal:e.finalGoalGrade,strategies:e.strategyText}})}}(),l=n(3),c=function(){return function(e){var t={};e.forEach(function(e){return e.capabilities.forEach(function(e){return t[e.formName]=!0})});var n=Object.keys(t);this.columnHeaders=[{name:"Framtidsförmåga",type:"header"},{name:"Område",type:"header"}].concat(n.map(function(e){return{name:e,type:"year"}})),this.vtHts=Object(s.k)(n.map(function(e){return["HT","VT"]}));var a=[];e.forEach(function(e){var t=[{type:"ability",name:e.abilityName}],n={};e.capabilities.forEach(function(e){var r=[{type:"term",selected:!1!==e.htHasValue},{type:"term",selected:!1!==e.vtHasValue}];n[e.capabilityName]?t&&r.forEach(function(e){return t.push(e)}):(t.length>1&&(a.push(t),t=[]),n[e.capabilityName]=!0,t.push({type:"capability",name:e.capabilityName}),r.forEach(function(e){return t.push(e)}))}),t&&a.push(t)}),this.capabRows=a}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loading:!1,data:[],error:null},n}return a.c(t,e),t.prototype.componentWillMount=function(){this.load()},t.prototype.load=function(){return a.b(this,void 0,void 0,function(){var e,t;return a.d(this,function(n){switch(n.label){case 0:this.setState({loading:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l.a.edsClient.getStudentFutureAbilities()];case 2:return e=n.sent(),this.setState({data:e}),[3,4];case 3:return t=n.sent(),this.setState({error:t}),[3,4];case 4:return this.setState({loading:!1}),[2]}})})},t.prototype.render=function(){var e=new c(this.state.data),t=e.columnHeaders,n=e.vtHts,a=e.capabRows;return r.createElement("div",null,r.createElement("h5",null,"Framtidsförmågor"),r.createElement("div",{className:"partialEditStudyPlanViewMode"},r.createElement("table",{style:{width:"100%"},className:"smallFont"},r.createElement("thead",null,r.createElement("tr",null,t.map(function(e,t){var n=e.name;return"header"===e.type?r.createElement("th",{key:t,rowSpan:2},n):r.createElement("th",{key:t,colSpan:2},n)})),r.createElement("tr",{className:"header"},n.map(function(e,t){return r.createElement("th",{key:t},e)}))),r.createElement("tbody",null,a.map(function(e,t){return r.createElement("tr",{key:t,className:Math.floor(t/3)%2&&"tableOdd"},e.map(function(e,t){return"ability"===e.type?r.createElement("td",{key:t,rowSpan:3,className:"goalsSubject"},e.name):"capability"===e.type?r.createElement("td",{key:t,className:"goalsSubject"},e.name):e.selected?r.createElement("td",{key:t,className:"edsSelected"},r.createElement("div",{className:"markedItem"})):r.createElement("td",{key:t})}))})))))},t}(r.Component);n.d(t,"a",function(){return v});var d,m,p,f,h,b,v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loadingStudyPlans:!1,studyPlans:[],error:null},n}return a.c(t,e),t.prototype.componentWillMount=function(){this.load()},t.prototype.load=function(){return a.b(this,void 0,void 0,function(){var e,t;return a.d(this,function(n){switch(n.label){case 0:this.setState({loadingStudyPlans:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l.a.edsClient.getStudentGoals()];case 2:return e=n.sent(),this.setState({studyPlans:e}),[3,4];case 3:return t=n.sent(),this.setState({error:t}),[3,4];case 4:return this.setState({loadingStudyPlans:!1}),[2]}})})},t.prototype.render=function(){var e=new i(this.state.studyPlans),t="gymnasium"!==(""+l.a.currentUser.schoolType).toLowerCase();return r.createElement("div",{className:"ked_boxed"},r.createElement("h4",null,Object(s.a)(d||(d=a.e(["Mål"],["Mål"])))),r.createElement("hr",null),r.createElement("table",{className:"smallFont"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,Object(s.a)(m||(m=a.e(["Ämne"],["Ämne"])))),t&&r.createElement("th",null,Object(s.a)(p||(p=a.e(["HT"],["HT"])))),t&&r.createElement("th",null,Object(s.a)(f||(f=a.e(["VT"],["VT"])))),r.createElement("th",null,Object(s.a)(h||(h=a.e(["Slutmål"],["Slutmål"])))),r.createElement("th",null,Object(s.a)(b||(b=a.e(["Strategier"],["Strategier"])))))),r.createElement("tbody",null,e.subjects.map(function(e,n){return r.createElement("tr",{key:e.name,className:n%2&&"tableOdd"},r.createElement("td",{className:"goalsSubject"},e.name),t&&r.createElement("td",{className:"goalsTerm"},e.atGoal),t&&r.createElement("td",{className:"goalsTerm"},e.stGoal),r.createElement("td",{className:"goalsEnd"},e.finalGoal),r.createElement("td",null,e.strategies))}))),r.createElement("div",{className:"divider"}),r.createElement(u,null))},t}(r.Component)},function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(30),o=n(8),i=n.n(o),l=n(2),c=n(24);var u=28,d=52;function m(e){var t=e.shortName;return"MA"===t?"Ma":"EN"===t?"Eng":t.startsWith("SV")?"Sv/SvA":t.startsWith("M")?"M.spr":null}var p=n(15),f=n(5),h=n.n(f),b=n(6),v=n(29),g=n(3),k=new(function(e){function t(){var t=e.call(this,{getClient:function(){return g.a.kedBackendClient},optimistic:!0,table:"weekplans-ks",user:g.a.currentUser?g.a.currentUser.mail:"",getQueryOptions:function(){return a.b(t,void 0,void 0,function(){var e,t,n;return a.d(this,function(a){return e=Object(p.d)(h()(this.now||Date.now())),t=e[0],n=e[1],[2,{from:t.valueOf(),to:n.valueOf(),role:"USER"}]})})}})||this;return t.now=Date.now(),t}return a.c(t,e),t.prototype.nextTerm=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.now=h()(this.now).add(6,"months").valueOf(),[4,this.mem.refreshFromServer()];case 1:return e.sent(),[2]}})})},t.prototype.prevTerm=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return this.now=h()(this.now).add(-6,"months").valueOf(),[4,this.mem.refreshFromServer()];case 1:return e.sent(),[2]}})})},t}(v.a)),y=n(26),E=function(){return function(e,t){var n=h()(k.now),r=Object(p.c)(n),s=Object(p.d)(n),o=s[0],i=s[1],l=Object(p.b)(r.term),c=l[0],f=l[1];this.year=o.year(),this.weekPlans=[];for(var v=function(t){var n=t.week();if(n>=c&&n<=f){var r=Object(y.a)(t.year(),n),s=e.filter(function(e){return e.dateTime>=r.notBefore&&e.dateTime<=r.notAfter})[0];g.weekPlans.push(a.a({},s||{},{id:s?s.id:Object(b.e)(),dateTime:s?s.dateTime:t.valueOf(),cellValues:s?s.cellValues:{},weekNumber:n}))}},g=this,E=o.clone().startOf("week");E.valueOf()<i.valueOf();E=E.clone().add(1,"week").startOf("week"))v(E);var N=c>u?d:u,C=Object(y.a)(o.year(),N);this.lastSteps=e.filter(function(e){return e.dateTime>=C.notBefore&&e.dateTime<=C.notAfter})[0]||{id:Object(b.e)(),dateTime:h()(n).clone().week(N).startOf("week").valueOf(),cellValues:{},weekNumber:N},this.completedSteps={},this.termGoals={};for(var w=0,D=t;w<D.length;w++){for(var T=D[w],S=m(T),I=0,O=T.courseSteps;I<O.length;I++){var x=O[I];x.isCompleted&&(this.completedSteps[S+x.shortName]=!0)}this.termGoals[S]=T.periodGoalGrade}}}();var N=n(27);n.d(t,"a",function(){return G});var C,w,D,T,S,I,O,x,j,P,M,G=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schoolTerm:new s.a(t.initialDate),activeCourses:[],weekPlans:[],error:null,loadingActiveCourses:!1,loadingWeekPlans:!1},n.flowId=1,n.updateWeekPlans=n.updateWeekPlans.bind(n),n}return a.c(t,e),t.prototype.componentWillMount=function(){this.load(this.state.schoolTerm)},t.prototype.componentDidMount=function(){var e;e=i()(this.table),i()(e).keydown(function(t){var n=i()(t.target);if(13!==t.which||n.is("textarea")){if(38==t.which||40==t.which){var a,r=38==t.which,s=n.closest("td,th"),o=s.closest("tr"),l=o.children().toArray().indexOf(s[0]),c=i()(e).find("tr").toArray(),u=c.indexOf(o[0]);r&&u>0&&(!n.is("textarea")||0===n[0].selectionStart)?a=i()(c[u-1]):!r&&u>-1&&u<c.length-1&&(!n.is("textarea")||n[0].selectionEnd===n.val().length)&&(a=i()(c[u+1])),a&&(a.children().eq(l).find("[tabIndex=0]").focus(),t.stopPropagation(),t.preventDefault())}else if((37===t.which||39===t.which)&&n.is(":input")){var d,m,p=n[0],f=p.selectionStart,h=p.selectionEnd,b=p.value;if(f===h)if(-1!==(m=(d=i()(e).find("[tabIndex=0]:visible:not([type=checkbox])").toArray()).indexOf(t.target))&&m>0&&37===t.which&&0===f){var v=d[m-1];i()(v).focus(),t.stopPropagation(),t.preventDefault()}else if(-1!==m&&m<d.length-1&&39===t.which&&h===b.length){var g=d[m+1];i()(g).focus(),t.stopPropagation(),t.preventDefault()}}}else if(-1!==(m=(d=i()(e).find("[tabIndex=0]:visible:not([type=checkbox])").toArray()).indexOf(t.target))){var k=d[(m+1)%d.length];i()(k).focus()}}),k.mem.subscribe(this.updateWeekPlans)},t.prototype.componentWillUnmount=function(){k.mem.unsubscribe(this.updateWeekPlans)},t.prototype.updateWeekPlans=function(e){this.setState({weekPlans:e,loadingWeekPlans:!1})},t.prototype.load=function(e){var t=this,n=++this.flowId;this.setState({schoolTerm:e,loadingActiveCourses:!0}),this.loadActiveCourses(e).then(function(e){t.flowId===n&&t.setState({activeCourses:e,loadingActiveCourses:!1})}).catch(function(e){t.flowId===n&&t.setState({loadingActiveCourses:!1,error:e})})},t.prototype.loadActiveCourses=function(e){return a.b(this,void 0,void 0,function(){var t;return a.d(this,function(n){switch(n.label){case 0:return t=new c.a(e).period,[4,g.a.edsClient.getActiveCourses({periodName:t})];case 1:return[2,n.sent()]}})})},t.prototype.updateCell=function(e,t,n){return a.b(this,void 0,void 0,function(){var r;return a.d(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e.cellValues[t]=n,[4,k.upsert(e,function(e){return e.cellValues[t]=n})];case 1:return[2,s.sent()];case 2:return r=s.sent(),console.error(r.stack||r),this.setState({error:Object(l.a)(C||(C=a.e(["För tillfället problem att spara data. Dina ändringar sparades inte."],["För tillfället problem att spara data. Dina ändringar sparades inte."])))}),[3,3];case 3:return[2]}})})},t.prototype.render=function(){var e=this,t=new E(this.state.weekPlans,this.state.activeCourses),n=t.completedSteps,s=t.lastSteps,o=t.termGoals,i=(t.weekPlans,[]);return r.createElement("div",{className:"termplanner"+(this.state.loadingWeekPlans?" loading-weekplans":"")+(this.state.loadingActiveCourses?" loading-courses":"")},r.createElement("div",{className:"ked_boxed"},r.createElement("div",{className:"weekSelect"},r.createElement("div",{className:"horizontalItem"},r.createElement("p",null,this.state.schoolTerm.toLocaleString([this.props.locale],!0))),r.createElement("div",{className:"horizontalItem"},r.createElement("div",{className:"btn-group"},r.createElement("button",{className:"btn",onClick:function(){e.load(e.state.schoolTerm.prevTerm()),k.prevTerm()}},r.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.createElement("button",{className:"btn",onClick:function(){e.load(e.state.schoolTerm.nextTerm()),k.nextTerm()}},r.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}))))),r.createElement("h4",null,Object(l.a)(w||(w=a.e(["Terminsplanering"],["Terminsplanering"])))),r.createElement("hr",null),r.createElement("table",{className:"smallFont termplanner-table",ref:function(t){return e.table=t},style:{}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"nowrap"},Object(l.a)(D||(D=a.e(["Vecka"],["Vecka"])))),r.createElement("th",{className:"nowrap"},Object(l.a)(T||(T=a.e(["M.spr"],["M.spr"])))),r.createElement("th",{className:"nowrap"},Object(l.a)(S||(S=a.e(["Ma"],["Ma"])))),r.createElement("th",{className:"nowrap"},Object(l.a)(I||(I=a.e(["Sv/SvA"],["Sv/SvA"])))),r.createElement("th",{className:"nowrap"},Object(l.a)(O||(O=a.e(["Eng"],["Eng"])))),r.createElement("th",{className:"nowrap"},Object(l.a)(x||(x=a.e(["Kurs"],["Kurs"])))),r.createElement("th",null,Object(l.a)(j||(j=a.e(["Kommentar"],["Kommentar"])))))),r.createElement("tbody",null,t.weekPlans.map(function(a,s){var o=a.cellValues,i=(a.dateTime,a.weekNumber),l=[];return r.createElement("tr",{key:t.year+":"+i,className:s%2?"tableOdd":""},r.createElement("td",null,i),r.createElement("td",{className:"stepCell"+(n["M.spr"+o["M.spr"]]?" completedStep":""),onClick:function(){return l[0].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},tag:"input",text:o["M.spr"],onChange:e.updateCell.bind(e,a,"M.spr"),readOnly:e.state.loadingWeekPlans})),r.createElement("td",{className:"stepCell"+(n["Ma"+o.Ma]?" completedStep":""),onClick:function(){return l[1].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},text:o.Ma,onChange:e.updateCell.bind(e,a,"Ma"),readOnly:e.state.loadingWeekPlans})),r.createElement("td",{className:"stepCell"+(n["Sv/SvA"+o["Sv/SvA"]]?" completedStep":""),onClick:function(){return l[2].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},text:o["Sv/SvA"],onChange:e.updateCell.bind(e,a,"Sv/SvA"),readOnly:e.state.loadingWeekPlans})),r.createElement("td",{className:"stepCell"+(n["Eng"+o.Eng]?" completedStep":""),onClick:function(){return l[3].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},text:o.Eng,onChange:e.updateCell.bind(e,a,"Eng"),readOnly:e.state.loadingWeekPlans})),r.createElement("td",{className:"courseCell",onClick:function(){return l[4].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},text:o.Kurs,onChange:e.updateCell.bind(e,a,"Kurs"),readOnly:e.state.loadingWeekPlans})),r.createElement("td",{onClick:function(){return l[5].rename()}},r.createElement(N.a,{ref:function(e){return l.push(e)},text:o.Kommentar,tag:"textarea",onChange:e.updateCell.bind(e,a,"Kommentar")})))})),r.createElement("tfoot",null,r.createElement("tr",null,r.createElement("th",null,Object(l.a)(P||(P=a.e(["Slutsteg"],["Slutsteg"])))),r.createElement("th",{className:"stepCell",onClick:function(){return i[0].rename()}},r.createElement(N.a,{ref:function(e){return i.push(e)},text:s.cellValues["M.spr"],onChange:this.updateCell.bind(this,t.lastSteps,"M.spr"),readOnly:this.state.loadingWeekPlans})),r.createElement("th",{className:"stepCell",onClick:function(){return i[1].rename()}},r.createElement(N.a,{ref:function(e){return i.push(e)},text:s.cellValues.Ma,onChange:this.updateCell.bind(this,t.lastSteps,"Ma"),readOnly:this.state.loadingWeekPlans})),r.createElement("th",{className:"stepCell",onClick:function(){return i[2].rename()}},r.createElement(N.a,{ref:function(e){return i.push(e)},text:s.cellValues["Sv/SvA"],onChange:this.updateCell.bind(this,t.lastSteps,"Sv/SvA"),readOnly:this.state.loadingWeekPlans})),r.createElement("th",{className:"stepCell",onClick:function(){return i[3].rename()}},r.createElement(N.a,{ref:function(e){return i.push(e)},text:s.cellValues.Eng,onChange:this.updateCell.bind(this,t.lastSteps,"Eng"),readOnly:this.state.loadingWeekPlans})),r.createElement("th",null,"-"),r.createElement("th",null)),r.createElement("tr",null,r.createElement("th",null,Object(l.a)(M||(M=a.e(["Terminsmål"],["Terminsmål"])))),r.createElement("th",{className:"stepCell"},o["M.spr"]),r.createElement("th",{className:"stepCell"},o.Ma),r.createElement("th",{className:"stepCell"},o["Sv/SvA"]),r.createElement("th",{className:"stepCell"},o.Eng),r.createElement("th",null,"-"),r.createElement("th",null,this.state.error&&r.createElement("p",{className:"error"},""+this.state.error)))))))},t}(r.Component)},function(e,t,n){"use strict";var a=n(1),r=n(0),s=n(5),o=n.n(s);const i=6e4;var l,c=n(2);function u(e){e.id;var t=e.dayStart,n=e.startMoment,s=e.endMoment,u=e.text,d=e.location,m=e.description,p=e.width,f=e.pos,h=e.locale,b=e.zoom,v=e.htmlLink,g=e.className,k=o()(n).diff(t)/i*b,y=o()(s).diff(n)/i*b,E={hour:"numeric",minute:"2-digit"},N=n.toDate().toLocaleTimeString(h,E),C=s.toDate().toLocaleTimeString(h,E);return r.createElement("div",{className:"dayviewevent "+g,style:{position:"absolute",boxSizing:"border-box",top:k,left:(f||0)+"%",width:(p||100)+"%",height:y,maxHeight:y,overflow:"hidden"},title:N+" - "+C+" "+u+(d?"\n"+Object(c.a)(l||(l=a.e(["Plats: ",""],["Plats: ",""])),d):"")+(m?"\n"+m:"")},r.createElement("a",{className:"event-title",href:v,target:"calendar-event"},u),r.createElement("p",{className:"event-period"},N," - ",C),d&&r.createElement("p",{className:"event-location"},d),m&&r.createElement("p",{className:"event-description"},m))}function d(e){for(var t=e.dayStart,n=e.dayEnd,a=60*e.zoom,s=o()(t).hour(),i=o()(n).hour(),l=[],c=s;c<=i;++c)l.push(c);return r.createElement("div",null,l.map(function(e){return r.createElement("div",{key:e,className:"timeline",style:{width:"100%",boxSizing:"border-box",margin:a/2+"px 0 0 0",height:a/2}})}))}function m(e){var t=e.dayStart,n=e.dayEnd,s=e.events,l=e.locale,m=e.zoom,p=(e.isLastCall,o()(n).diff(t)/i*m),f=function(e,t){var n=[];return e.forEach(function(e,t){var r,s=n.filter(function(t){return t.startMoment&&t.endMoment&&t.startMoment<=e.startMoment&&t.endMoment>e.startMoment}),o=s.concat(Object(c.k)(s.map(function(e){return e.prevOverlaps})));(o=Object(c.j)(o,function(e){return e.index})).sort(Object(c.g)("startMoment"));var i=0;o.forEach(function(e,t){t%4==0&&(r=Math.max(25,Math.round(100/Math.max(o.length-t+1,1))),i=0),e.width=r,e.className=(e.className||"").split(" ").filter(function(e){return"splitted"!==e}).concat("splitted").join(" "),e.pos=i,i+=r}),n.push(a.a({},e,{index:t,pos:i,width:r,className:r<100?e.className?e.className+" splitted":"splitted":e.className,prevOverlaps:o}))}),n}(s);return r.createElement("div",{className:"dayview",style:{top:0,height:p,maxHeight:p,position:"relative",overflow:"hidden"}},r.createElement(d,{dayStart:t,dayEnd:n,zoom:m}),f.map(function(e){return r.createElement(u,{key:e.id,id:e.id,className:e.className,dayStart:t,startMoment:e.startMoment,endMoment:e.endMoment,text:e.text,location:e.location,description:e.description,width:e.width,pos:e.pos,locale:l,zoom:m,htmlLink:e.htmlLink})}))}function p(e){for(var t=e.startHour,n=e.endHour,a=e.locale,s=60*e.zoom,i=[],l=t;l<=n;++l)i.push(l);return r.createElement("div",{className:"hourmarker",style:{position:"relative",left:0,top:0,overflow:"visible",height:(n-t)*s}},i.map(function(e,t){var n=t*s;return r.createElement("span",{key:e},r.createElement("div",{style:{position:"absolute",left:0,top:n,marginTop:"-4px",padding:0}},o()().hour(e).minute(0).toDate().toLocaleString(a,{hour:"2-digit",minute:"2-digit"})))}))}function f(e){var t=e.status,n=e.error;return t||n?r.createElement("div",{className:"statusbar"},n?r.createElement("p",{className:"error"},""+n):r.createElement("p",{className:"status"},t)):null}var h,b,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){for(var e=this.props,t=e.firstDay,n=e.startHour,s=e.endHour,i=e.numDays,l=e.events,u=e.locale,d=e.zoom,v=e.status,g=e.error,k=[],y=o()(t),E=function(e){var t=o()(y).hour(n),a=o()(y).hour(s),r=o()(y).format("YYYY-MM-DD"),i=o()(t).startOf("day").valueOf()===o()().startOf("day").valueOf();k.push({name:Object(c.d)(t.toDate().toLocaleString(u,{weekday:"long",day:"numeric",month:"short"})),dayStart:t,dayEnd:a,isToday:i,events:l.filter(function(e){return e.start&&e.end&&e.start.dateTime&&e.end.dateTime&&(o()(e.start.dateTime).isBetween(t,a)||o()(e.end.dateTime).isBetween(t,a))}).map(function(e){return Object(c.f)(e,{startMoment:o()(e.start.dateTime),endMoment:o()(e.end.dateTime)})}).sort(function(e,t){return e.startMoment.valueOf>t.startMoment.valueOf?1:e.startMoment<t.startMoment?-1:0}),fullDayEvents:l.filter(function(e){return e.start&&e.end&&e.start.date&&e.end.date&&e.start.date<=r&&e.end.date>r}).map(function(e){return Object(c.f)(e,{startDate:e.start.date,endDate:e.end.date})})}),y=o()(y).add(1,"days")},N=0;N<i;++N)E();return r.createElement("div",{className:"vemendo-weekview"},r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:0}}),k.map(function(e){return r.createElement("td",{key:e.dayStart.toISOString(),className:e.isToday?"today":null},r.createElement("p",{className:"dayname"},e.name))})),r.createElement("tr",null,r.createElement("td",{style:{border:0}},r.createElement("p",{className:"week-number"},Object(c.a)(h||(h=a.e(["V",""],["V",""])),o()(t).week()))),k.map(function(e){return r.createElement("td",{key:e.dayStart.toISOString(),className:e.isToday?"today":null},e.fullDayEvents.map(function(e){var t=e.id,n=e.text,s=e.location,o=e.description,i=e.htmlLink,l=e.className;return r.createElement("div",{key:t,className:"dayviewevent full-day "+l,title:n+(s?"\n"+Object(c.a)(b||(b=a.e(["Plats: ",""],["Plats: ",""])),s):"")+(o?"\n"+o:"")},r.createElement("a",{className:"event-title",href:i,target:"calendar-event"},n),s&&r.createElement("p",{className:"event-location"},s),o&&r.createElement("p",{className:"event-description"},o))}))})),r.createElement("tr",null,r.createElement("td",{style:{border:0}},r.createElement(p,{startHour:n,endHour:s,locale:u,zoom:d})),k.map(function(e){return r.createElement("td",{key:e.dayStart.toISOString(),className:e.isToday?"today":null},r.createElement(m,{key:e.dayStart.toISOString(),dayStart:e.dayStart,dayEnd:e.dayEnd,events:e.events,locale:u,zoom:d,isLastCall:""==v})," ")})),(v||g)&&(!g||"UnauthorizedError"!==g.name)&&r.createElement("tr",null,r.createElement("td",{style:{border:0}}),r.createElement("td",{style:{border:0},colSpan:i},r.createElement(f,{status:v,error:g}))))))},t}(r.Component),g=n(3),k=function(){function e(){}return e.prototype.ensureInited=function(){return a.b(this,void 0,void 0,function(){var e;return a.d(this,function(t){switch(t.label){case 0:return"undefined"!=typeof gapi?[3,2]:[4,this.loadGapi()];case 1:t.sent(),t.label=2;case 2:return!this.tokenExpiration||this.tokenExpiration<new Date?[4,g.a.googleTokenProvider.getBearer()]:[3,4];case 3:e=t.sent(),this.tokenExpiration=new Date(e.expires),gapi.auth.setToken({access_token:e.token,error:null,expires_in:""+(e.expires-Date.now()),state:"https://www.googleapis.com/auth/calendar.readonly"}),t.label=4;case 4:return[4,gapi.client.load("calendar","v3")];case 5:return t.sent(),[2]}})})},e.prototype.loadGapi=function(){return new Promise(function(e,t){if("undefined"!=typeof gapi)return e();var n=document.createElement("script");n.src="https://apis.google.com/js/client.js?onload=gaapi_loaded",document.getElementsByTagName("head")[0].appendChild(n),window.gaapi_loaded=e})},e.prototype.listCalendars=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.ensureInited()];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,gapi.client.calendar.calendarList.list({})];case 3:return[2,e.sent().result.items];case 4:throw e.sent().error;case 5:return[2]}})})},e.prototype.listEvents=function(e){var t=e.calendarId,n=e.timeMin,r=e.timeMax;return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.ensureInited()];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,gapi.client.calendar.events.list({calendarId:t||"primary",timeMin:n&&new Date(n).toISOString(),timeMax:r&&new Date(r).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:2500,orderBy:"startTime"})];case 3:return[2,e.sent().result.items];case 4:throw e.sent().error;case 5:return[2]}})})},e}(),y=n(39);var E=n(33);n.d(t,"a",function(){return C});var N,C=function(e){function t(t){var n=e.call(this,t)||this,a=Object(E.a)().startOf("week").weekday(0),r=n.props,s=r.initialStartHour,o=r.initialEndHour,i=r.initialZoom;return n.state={firstDay:a,startHour:s,endHour:o,zoom:i,calendars:{},calendarsBeingLoaded:[],status:"Loading calendars... (authenticating...)",error:null},n.gcal=new k,n.gcal.ensureInited().then(function(){return n.loadData(a)}).catch(function(e){n.handleError(e)}),n}return a.c(t,e),t.prototype.handleError=function(e){e||(e="Unknown error"),this.setState({error:e}),console.error(e.stack||e)},t.prototype.loadData=function(e){var t=this,n=this.props.numDays;return this.setState({firstDay:e,calendars:{},calendarsBeingLoaded:[],error:null,status:"Loading calendars... (listing...)"}),this.gcal.listCalendars().then(function(a){return a=a.filter(function(e){return function(e){var t=e.summary||"",n=!!e.primary,a=/classroom/gi.test(e.id),r=/holiday/gi.test(e.id);return n||a||r||/schema/gi.test(t)}(e)}),t.setState({calendarsBeingLoaded:a.map(function(e){return e.id}),status:"Load calendar events..."}),Promise.all(a.map(function(a){return t.gcal.listEvents({calendarId:a.id,timeMin:o()(e).startOf("day"),timeMax:o()(e).add(n,"days").endOf("day")}).then(function(e){var n=t.state.calendarsBeingLoaded.filter(function(e){return e!==a.id}),r=Object(c.f)(t.state.calendars);r[a.id]={calendar:a,events:e},t.setState({calendars:r,calendarsBeingLoaded:n,status:0===n.length?"":"Load calendar events..."})})}))})},t.prototype.navigateToPreviousWeek=function(){var e=this;this.loadData(o()(this.state.firstDay).add(-1,"week")).catch(function(t){e.handleError(t)})},t.prototype.navigateToNextWeek=function(){var e=this;this.loadData(o()(this.state.firstDay).add(1,"week")).catch(function(t){e.handleError(t)})},t.prototype.render=function(){var e=this,t=this.props,n=t.numDays,s=t.locale,i=this.state,l=i.firstDay,u=i.startHour,d=i.endHour,m=i.zoom,p=i.calendars,f=i.status,h=i.error,b=Object.keys(p).map(function(e){return p[e]}).map(function(e){var t=e.calendar,n=e.events,a="Skolschema"===t.summary&&"Synchronized"===t.description,r=/holiday/.test(t.id),s=(/classroom/.test(t.id),[]);return t.colorId&&s.push("gcal-palette-"+t.colorId),a&&s.push("course-event"),r&&s.push("holiday-event"),n.map(function(e){return{id:e.id,start:e.start,end:e.end,text:e.summary,location:e.location,description:e.description,htmlLink:e.htmlLink,className:(a&&e.summary?s.concat(Object(y.a)("course-event-",e.summary)):s).join(" ")}})}),g=Object(c.k)(b);return r.createElement("div",{style:{position:"relative",top:0,left:0}},r.createElement("div",{className:"btn-toolbar week-navigation"},r.createElement("div",{className:"btn-group"},r.createElement("button",{className:"btn",onClick:function(){return e.navigateToPreviousWeek()}},r.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.createElement("button",{className:"btn",onClick:function(){return e.navigateToNextWeek()}},r.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}))),r.createElement("div",{className:"btn-group"},Object(c.a)(N||(N=a.e(["Vecka ",", ",""],["Vecka ",", ",""])),o()(l).week(),o()(l).year()))),r.createElement(v,{locale:s,firstDay:l,startHour:u,endHour:d,numDays:n,zoom:m,events:g,status:f,error:h}))},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),r=n(0),s=n(28),o=n(12),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={courses:[],isLoading:!0},n.updateHiddenCoursesState=n.updateHiddenCoursesState.bind(n),n}return a.c(t,e),t.prototype.componentDidMount=function(){s.a.subscribe(this.updateHiddenCoursesState,{fullCourse:!1})},t.prototype.updateHiddenCoursesState=function(e){this.setState({courses:e,isLoading:!1})},t.prototype.componentWillUnmount=function(){s.a.unsubscribe(this.updateHiddenCoursesState)},t.prototype.getCourseUrl=function(e){return Object(o.e)(this.props.viewCourseUrl,{courseId:e})},t.prototype.render=function(){var e=this,t=(this.props.viewCourseUrl,this.state),n=t.isLoading,a=t.error,s=(t.courses,this.state.courses.filter(function(e){return e.visible}));return r.createElement(r.Fragment,null,n?r.createElement("li",{className:"lvl2 header"},r.createElement("a",null,"Laddar...")):a?r.createElement("li",{className:"lv12"},r.createElement("a",null,"Kunde inte ladda kurser.")):s.map(function(t){var n=t.name,a=t.id;return r.createElement("li",{key:a,className:"lvl2"},r.createElement("a",{href:e.getCourseUrl(a)},n))}))},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a,r,s,o,i,l,c=n(1),u=n(0),d=n(2),m=n(3),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={assessments:[],error:null,loading:!1},n}return c.c(t,e),t.prototype.componentWillMount=function(){this.load()},t.prototype.load=function(){return c.b(this,void 0,void 0,function(){var e,t;return c.d(this,function(n){switch(n.label){case 0:this.setState({loading:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.a.edsClient.getLatestAssessments(this.props.limit)];case 2:return e=n.sent(),this.setState({assessments:e}),[3,4];case 3:return t=n.sent(),this.setState({error:t}),[3,4];case 4:return this.setState({loading:!1}),[2]}})})},t.prototype.render=function(){var e=this.state.assessments.some(function(e){return!!e.gradeName});return u.createElement("div",{className:"ked_boxed"},u.createElement("div",{className:"weekSelect"},u.createElement("div",{className:"horizontalItem"}),u.createElement("div",{className:"horizontalItem"})),u.createElement("h4",null,Object(d.a)(a||(a=c.e(["Senaste bedömningar"],["Senaste bedömningar"])))),u.createElement("hr",null),u.createElement("table",{className:"smallFont"},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",{className:"nowrap"},Object(d.a)(r||(r=c.e(["Datum"],["Datum"])))),u.createElement("th",{className:"nowrap"},Object(d.a)(s||(s=c.e(["Kurs"],["Kurs"])))),u.createElement("th",{className:"nowrap"},Object(d.a)(o||(o=c.e(["Del"],["Del"])))),e&&u.createElement("th",{className:"nowrap"},Object(d.a)(i||(i=c.e(["Betyg"],["Betyg"])))),u.createElement("th",{className:"nowrap",colSpan:2},Object(d.a)(l||(l=c.e(["Bedömningar"],["Bedömningar"])))))),u.createElement("tbody",null,this.state.assessments.map(function(t,n){return u.createElement("tr",{key:n,className:n%2&&"tableOdd"},u.createElement("td",null,t.publishDateTime.substr(0,10)),u.createElement("td",{className:"amneCell"},t.courseName),u.createElement("td",{className:"delCell"},t.courseUnitName),e&&u.createElement("td",null,t.gradeName),u.createElement("td",null,u.createElement("pre",null,t.text)))}))))},t}(u.Component)},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a={};n.d(a,"Calendar",function(){return i.a}),n.d(a,"WeekPlanner",function(){return l.a}),n.d(a,"LatestAssessments",function(){return c.a}),n.d(a,"LearningTasks",function(){return u.a}),n.d(a,"KGTermPlanner",function(){return d.a}),n.d(a,"ListCourses",function(){return m.a}),n.d(a,"KSTermPlanner",function(){return p.a}),n.d(a,"KSGoals",function(){return f.a}),n.d(a,"MyCourses",function(){return h.a});var r=n(1),s=n(21),o=n(3),i=(n(50),n(49),n(55),n(65)),l=n(41),c=n(67),u=n(61),d=n(62),m=n(51),p=n(64),f=n(63),h=n(66);o.a.bearerProvider.getBearer(),o.a.googleTokenProvider.getBearer(),s.a.components=r.a({},s.a.components,a)}]);
//# sourceMappingURL=kedcomponents.min.js.map