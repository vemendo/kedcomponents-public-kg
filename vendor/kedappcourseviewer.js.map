{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/../kedbackend/js/ked-backend-client-web/bearer-storage-sessionstorage.ts","webpack://[name]/../kedbackend/js/ked-backend-client-web/index.ts","webpack://[name]/../kedbackend/js/ked-backend-client/access-control.ts","webpack://[name]/../kedbackend/js/ked-backend-client/http-error.ts","webpack://[name]/../kedbackend/js/ked-backend-client/index.ts","webpack://[name]/../kedbackend/js/ked-backend-client/ked-bearer-provider.ts","webpack://[name]/../kedbackend/js/ked-backend-client/restclient.ts","webpack://[name]/../kedbackend/js/ked-backend-client/utils.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/index.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate-course.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate-task.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate.ts","webpack://[name]/./node_modules/moment/locale sync sv|en","webpack://[name]/./src/access-control/get-user-claims.ts","webpack://[name]/./src/access-control/index.ts","webpack://[name]/./src/apis/eds-stubdata/ActiveCourses.ts","webpack://[name]/./src/apis/eds-stubdata/LatestAssessments.ts","webpack://[name]/./src/apis/eds-stubdata/StudentGoals.ts","webpack://[name]/./src/apis/edsclient.ts","webpack://[name]/./src/components/calendar/course-name-to-css-class.ts","webpack://[name]/./src/components/course-builder/sub-components/remove-item.tsx","webpack://[name]/./src/components/course-builder/sub-components/spinner.tsx","webpack://[name]/./src/components/course-builder/utils.ts","webpack://[name]/./src/components/course-viewer/course-page/course-banner.tsx","webpack://[name]/./src/components/course-viewer/course-page/course-module-page.tsx","webpack://[name]/./src/components/course-viewer/course-page/get-customized-task.ts","webpack://[name]/./src/components/course-viewer/course-page/index.tsx","webpack://[name]/./src/components/course-viewer/course-page/run-up-page.tsx","webpack://[name]/./src/components/course-viewer/course-page/task-assignments.tsx","webpack://[name]/./src/components/course-viewer/course-page/task-page.tsx","webpack://[name]/./src/components/course-viewer/index.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/abilities-box.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/central-content-box.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/confirmation.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/learning-goals-list.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/resource-list.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/task-list.tsx","webpack://[name]/./src/components/course-viewer/utils/get-included-ids.ts","webpack://[name]/./src/components/course-viewer/utils/manual-scroll-restoration.ts","webpack://[name]/./src/components/list-courses/list-courses-page.tsx","webpack://[name]/./src/components/list-courses/list-courses.tsx","webpack://[name]/./src/components/utility-components/dialogs.tsx","webpack://[name]/./src/components/utility-components/form-field-text-input.tsx","webpack://[name]/./src/components/utility-components/form-field-textarea.tsx","webpack://[name]/./src/components/utility-components/form-field.tsx","webpack://[name]/./src/components/utility-components/open-close-box.tsx","webpack://[name]/./src/components/weekplanner/add-custom-goal.tsx","webpack://[name]/./src/components/weekplanner/add-custom-task.tsx","webpack://[name]/./src/components/weekplanner/add-or-edit-sub-task.tsx","webpack://[name]/./src/components/weekplanner/edit-user-task.tsx","webpack://[name]/./src/components/weekplanner/get-task-type.ts","webpack://[name]/./src/components/weekplanner/index.ts","webpack://[name]/./src/components/weekplanner/refiner.ts","webpack://[name]/./src/components/weekplanner/user-tasks-box.tsx","webpack://[name]/./src/components/weekplanner/weekplanner-persisted-state.ts","webpack://[name]/./src/components/weekplanner/weekplanner.tsx","webpack://[name]/./src/elements/KEDAppCourseViewer/app.courseviewer.client.tsx","webpack://[name]/./src/elements/KEDAppCourseViewer/webpack-entry.ts","webpack://[name]/./src/features/features.ts","webpack://[name]/./src/features/index.ts","webpack://[name]/./src/global-setters/set-bearer-providers.ts","webpack://[name]/./src/global-setters/set-eds-client.ts","webpack://[name]/./src/global-setters/set-ked-backend-client.ts","webpack://[name]/./src/globals/KED.cfg.ts","webpack://[name]/./src/globals/KED.env.ts","webpack://[name]/./src/globals/KED.ts","webpack://[name]/./src/globals/ked.ts","webpack://[name]/./src/globals/moment-sv-locale.ts","webpack://[name]/./src/repos/hidden-courses-repo.ts","webpack://[name]/./src/repos/ked-repo.ts","webpack://[name]/./src/repos/repo.ts","webpack://[name]/./src/repos/user-tasks-repo.ts","webpack://[name]/./src/utils/error-success-feedback.tsx","webpack://[name]/./src/utils/pending-job.ts","webpack://[name]/./src/utils/query-string.ts","webpack://[name]/./src/utils/school-moment.ts","webpack://[name]/./src/utils/school-term.ts","webpack://[name]/./src/utils/utils.ts","webpack://[name]/./src/utils/weekutil.ts","webpack://[name]/external \"jQuery\"","webpack://[name]/external \"React\"","webpack://[name]/external \"ReactDOM\""],"names":[],"mappings":"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","file":"kedappcourseviewer.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"kedappcourseviewer\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp_name_\"] = window[\"webpackJsonp_name_\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/elements/KEDAppCourseViewer/webpack-entry.ts\",\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import {BearerPersistentStorage, BearerTokenInfo} from '../ked-backend-client';\n\nexport class BearerStorageSessionStorage implements BearerPersistentStorage {\n    save(id: string, tokenInfo: BearerTokenInfo) {\n        sessionStorage.setItem(\"bearer-\" + id, JSON.stringify(tokenInfo));\n    }\n\n    load(id: string): Promise<BearerTokenInfo> {\n        try {\n            const json = sessionStorage.getItem(\"bearer-\" + id);\n            return Promise.resolve(json ? JSON.parse(json) : {token: null, expires: 0});\n        } catch (ex) {\n            return Promise.resolve({token: null, expires: 0});\n        }\n    }\n}\n","import { KedBackendClient, BearerProvider, BearerTokenInfo, IsomorphicEnv } from '../ked-backend-client';\nimport { BearerStorageSessionStorage } from \"./bearer-storage-sessionstorage\";\nimport { avoidSimultanousCalls } from '../ked-backend-client/utils';\nimport { KedModelMigratorMixin } from '../ked-model-migrator';\nKedModelMigratorMixin(KedBackendClient.prototype);\n\nexport const storage = new BearerStorageSessionStorage();\n\nconst timeOfPageLoad = Date.now();\n\nexport class WebServerBearerProvider implements BearerProvider {\n    tokenInfo: BearerTokenInfo;\n    wantsRedirect: boolean;\n\n    constructor (\n        public tokenPath: string,\n        public tokenResponseMapper: (responseText: string) => BearerTokenInfo,\n        public tokenId: string)\n    {\n        this.tokenInfo = {token: null, expires: 0};\n        this.getBearer = avoidSimultanousCalls(this.getBearer.bind(this));\n        this.refreshBearer = avoidSimultanousCalls(this.refreshBearer.bind(this));\n    }\n\n    async getBearer() {\n        if (!this.tokenInfo.token) {\n            if (this.tokenId) this.tokenInfo = await storage.load(this.tokenId);\n        }\n        if (this.tokenInfo.expires < Date.now()) {\n            await this.refreshBearer();\n        }\n        return this.tokenInfo;\n    }\n\n    async refreshBearer() {\n        const res = await fetch(this.tokenPath, {\n            headers: {Accept: \"text/plain; application/json\"},\n            redirect: 'manual',\n            cache: 'no-cache',\n            credentials: \"same-origin\"\n        });\n        if (res.status === 302 || (!res.status && res.type === \"opaqueredirect\")) {\n            // User session timed out and server wants to redirect entire page to login page\n            // Time to reload current page to force a redirect of the entire page instead for\n            // just redirecting to /api/token or whatever.\n            if (Date.now() - timeOfPageLoad > 60000) {// prohibit endless loop of reloading self.\n                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.\n                console.log(\"Redirect wanted. Reload page.\")\n                window.location.reload(true);\n            }\n        }\n        if (res.status != 200) throw new Error(\"HTTP\"+res.status + \" \" + await res.text());\n        this.tokenInfo = this.tokenResponseMapper(await res.text());\n        storage.save(this.tokenId, this.tokenInfo);\n        return this.tokenInfo;\n    }\n}\n\nexport const isomorphic = {fetch: fetch.bind(self), btoa: btoa.bind(self)};\n\nexport class KedBackendClientWeb extends KedBackendClient {\n    constructor(\n        apiBaseUrl: string,\n        providerOrTokenPath: string | BearerProvider,\n        options?: {\n            tokenResponseMapper?: (responseText: string) => BearerTokenInfo,\n            tokenId?: string\n        })\n    {\n        const bearerProvider = typeof providerOrTokenPath !== 'string' ?\n            providerOrTokenPath :\n            new WebServerBearerProvider(\n                providerOrTokenPath,\n                (options && options.tokenResponseMapper) || (x=>({token: x, expires: Date.now() + 59 * 60 * 60})),\n                options && options.tokenId);\n        super(isomorphic, bearerProvider, apiBaseUrl);\n    }\n}\n","export interface AccessClaim {\n  type: string;\n  value: string;\n}\n\nexport type AccessRight = 'R' | 'W' | 'S';\n\nexport class DocumentAccess {\n  constructor(\n    public accessClaimType: string,\n    public accessClaimValue: string,\n    public right: AccessRight\n  ) { }\n\n  static fromString(ac: string) {\n    if (!ac) return null;\n    var split = ac.split(':');\n    if (split.length < 3) throw new Error(\"Invalid access string: \" + ac);\n    var claimType = DocumentAccess.unescape(split[0]);\n    var claimValue = DocumentAccess.unescape(split[1]);\n    var right = split[2];\n    if (right !== 'R' && right !== 'W' && right !== 'S')\n      throw new Error(\"Invalid access string: \" + ac);\n    return new DocumentAccess(\n      claimType,\n      claimValue,\n      right);\n  }\n\n  static escape(accessComponent: string) {\n    return accessComponent.replace(/\\%/g, \"%25\").replace(/\\:/g, \"%3A\");\n  }\n\n  static unescape(accessComponent: string) {\n    return accessComponent.replace(/\\%3A/g, \":\").replace(/\\%25/g, \"%\");\n  }\n\n  toString() {\n    return DocumentAccess.escape(this.accessClaimType) + \":\" +\n      DocumentAccess.escape(this.accessClaimValue) + \":\" +\n      this.right;\n  }\n\n  static fromStringArray(acl: string[]) {\n    return acl\n      .map(ac => DocumentAccess.fromString(ac))\n      .filter(ac => ac);\n  }\n\n  static toStringArray(acl: DocumentAccess[]) {\n    return acl.map(ac => ac.toString());\n  }\n}\n\nexport function hasAccess(acl: DocumentAccess[], userClaims: AccessClaim[], requestedRight: AccessRight) {\n  if (userClaims.some(claim => claim.type === 'role' && claim.value === \"ADMIN\"))\n    return true;\n\n  return acl.some(a =>\n    userClaims.some(c =>\n      a.accessClaimType === c.type &&\n      a.accessClaimValue === c.value && (\n        (a.right === 'R' && requestedRight === 'R') ||\n        (a.right === 'W' && ['R','W'].indexOf(requestedRight) >= 0) ||\n        (a.right === 'S'))));\n}\n","\nexport class HttpError extends Error {\n    constructor (public code: number, public message: string) {\n      super(\"HTTP\" + code + \" \" + message)\n      this.name = \"http\" + code;\n    }\n}\n","import {RestClient, BearerProvider, BearerTokenInfo} from './restclient';\nexport {BearerProvider, BearerTokenInfo};\nexport {BearerPersistentStorage} from './ked-bearer-provider';\nexport {createUUID} from './utils';\nexport {KedBearerProvider} from './ked-bearer-provider';\nimport {IsomorphicEnv} from './isomorphic-env';\nexport {IsomorphicEnv};\nexport {TokenQuery} from './token-query';\nexport * from './access-control';\nimport {HttpError} from './http-error';\nexport {HttpError}\n\nexport interface ListOptions {\n    from?: number,\n    to?: number,\n    include?: string | string[],\n    role?: string | string[],\n    hasEdgesTo?: string | string[],\n    hasEdgesFrom?: string | string[],\n    ids?: string[],\n    name?: string,\n    tags?: string | string[],\n    flags?: QueryFlag[],\n    cacheBust?: string | number\n};\n\nexport type QueryFlag = 'idsOnly' | 'includeIdsOnly' | 'idsAndNamesOnly' | 'includeIdsAndNamesOnly'; // | 'otherFlag' | 'thirdFlag';...\n\nexport class KedBackendClient {\n    http: RestClient;\n\n    constructor (\n        isomorphic: IsomorphicEnv,\n        bearerProvider: BearerProvider,\n        baseUrl: string)\n    {\n        this.http = new RestClient(\n            isomorphic,\n            baseUrl,\n            {bearerProvider});\n    }\n\n    async getMyClaims(table?: string, fetchOptions?: RequestInit) : Promise<any> // TODO: Specify what you get here\n    {\n        const res = await this.http.get(\"me/claims/\" + (table ||\"\"), null, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async get<T = any>(table, id, options?: {include?: string | string[]}, fetchOptions?: RequestInit) : Promise<T> {\n        const res = await this.http.get(`${table}/${id}`, options, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }    \n\n    async list<T = any>(table: string, options?: ListOptions, fetchOptions?: RequestInit) : Promise<T[]>\n    {\n        const res = await this.http.get(`${table}`, options, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async batch(reqs: MutationRequest[], fetchOptions?: RequestInit) : Promise<BatchResponse> {\n        // Reorder operations so that 'add's come first and 'delete's come last:\n        reqs = reqs.slice().sort((req1, req2) =>\n            req1.op === 'add' ? -1 : req2.op === 'add' ? 1 : \n            req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0);\n        const res = await this.http.post(`batch`, reqs, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async do(scopeFn: (r:BatchRunner)=>void) : Promise<BatchResponse> {\n        const runner = new BatchRunner();\n        scopeFn(runner);\n        return await this.batch(runner.mutationRequests);\n    }\n\n    async deleteRealm(realm: string) : Promise<number> {\n        const res = await this.http.delete(\"realms/\" + realm);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    add(table:string, doc) {\n        return this.do(r=>r.add(table, doc));\n    }\n    put(table:string, doc) {\n        return this.do(r=>r.put(table, doc));\n    }\n    delete (table:string, id:string) {\n        return this.do(r=>r.delete(table, id));\n    }\n    share(table:string, id:string, acl: string[]) {\n        return this.do(r=>r.share(table, id, acl));\n    }\n    unshare (table:string, id:string, acl: string[]) {\n        return this.do(r=>r.unshare(table, id, acl));\n    }\n    link (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        return this.do(r=>r.link(sourceTable, sourceId, targetTable, targetId, label));\n    }\n    link2 (sourceTable:string, sourceId:string, targetId:string, label:string) {\n        return this.do(r=>r.link2(sourceTable, sourceId, label, targetId));\n    } \n    unlink (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        return this.do(r=>r.unlink(sourceTable, sourceId, targetTable, targetId, label));\n    }\n    unlink2 (sourceTable:string, sourceId:string, targetId:string, label:string) {\n        return this.do(r=>r.unlink2(sourceTable, sourceId, label, targetId));\n    }\n}\n\nexport class BatchRunner {\n    mutationRequests: MutationRequest[];\n\n    constructor() {\n        this.mutationRequests = [];\n    }\n\n    add (table:string, doc) {\n        this.mutationRequests.push({op: 'add', table, doc});\n        return this;\n    }\n    put (table:string, doc) {\n        doc = {...doc};\n        delete doc.acl; // Forbidden to send acl with put() calls.\n        this.mutationRequests.push({op: 'put', table, doc});\n        return this;\n    }\n    delete (table:string, id:string) {\n        this.mutationRequests.push({op: 'delete', table, id});\n        return this;\n    }\n    share (table:string, id:string, acl:string[]) {\n        this.mutationRequests.push({op: 'share', table, id, acl});\n        return this;\n    }\n    unshare (table:string, id:string, acl:string[]) {\n        this.mutationRequests.push({op: 'unshare', table, id, acl});\n        return this;\n    }\n    link (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        this.mutationRequests.push({op: 'link', sourceTable, sourceId, targetTable, targetId, label});\n        return this;\n    }\n    link2 (sourceTable:string, sourceId:string, label:string, targetId:string) {\n        this.mutationRequests.push({op: 'link', sourceTable, sourceId, targetId, label});\n    }\n    unlink (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        this.mutationRequests.push({op: 'unlink', sourceTable, sourceId, targetTable, targetId, label});\n        return this;\n    }\n    unlink2 (sourceTable:string, sourceId:string, label:string, targetId:string) {\n        this.mutationRequests.push({op: 'unlink', sourceTable, sourceId, targetId, label});\n        return this;\n    }\n}\n\nexport interface AddRequest {\n    op: 'add';\n    table: string;\n    doc: {id?: string, acl?: string[], name?: string, dateTime?: number};\n}\n\nexport interface PutRequest {\n    op: 'put';\n    table: string;\n    doc: {id: string, name?: string, dateTime?: number};\n}\n\nexport interface DeleteRequest {\n    op: 'delete';\n    table: string;\n    id: string;\n}\n\nexport interface ShareRequest {\n    op: 'share';\n    table: string;\n    id: string;\n    acl: string[];\n}\n\nexport interface UnshareRequest {\n    op: 'unshare';\n    table: string;\n    id: string;\n    acl: string[];\n}\n\nexport interface LinkRequest {\n    op: 'link';\n    sourceTable: string;\n    sourceId: string;\n    targetTable?: string;\n    targetId: string;\n    label: string;\n}\n\nexport interface UnlinkRequest {\n    op: 'unlink';\n    sourceTable: string;\n    sourceId: string;\n    targetTable?: string;\n    targetId: string;\n    label: string;\n}\n\nexport type MutationRequest =\n    AddRequest |\n    PutRequest |\n    DeleteRequest |\n    ShareRequest |\n    UnshareRequest |\n    LinkRequest |\n    UnlinkRequest;\n\nexport interface BatchResponse {\n    newEtags: {[id:string] : string};\n}\n\n","import {BearerProvider, RestClient, BearerTokenInfo} from './restclient';\nimport {IsomorphicEnv} from './isomorphic-env';\nimport {TokenQuery} from './token-query';\nimport {avoidSimultanousCalls} from './utils';\n\nexport interface BearerPersistentStorage {\n    save(id: string, tokenInfo: BearerTokenInfo);\n    load(id: string) : Promise<BearerTokenInfo>;\n}\n\nexport class KedBearerProvider implements BearerProvider {\n    tokenInfo: BearerTokenInfo;\n    client: RestClient;\n    \n    constructor (\n        public isomorphic: IsomorphicEnv,\n        public storage: BearerPersistentStorage,\n        public tokenId:string,\n        public clientId: string,\n        public clientSecret: string,\n        public tokenUrl: string,\n        public tokenQuery: TokenQuery)\n    {\n        this.tokenInfo = {token: null, expires: 0};\n        this.client = new RestClient(isomorphic, \"\", {\n            username: this.clientId,\n            password: this.clientSecret\n        });\n        this.getBearer = avoidSimultanousCalls(this.getBearer.bind(this));\n        this.refreshBearer = avoidSimultanousCalls(this.refreshBearer.bind(this));\n    }\n\n    async getBearer(): Promise<BearerTokenInfo> {\n        const {token, expires} = this.tokenInfo;\n        if (token && expires >= Date.now()) return this.tokenInfo;\n        try {\n            this.tokenInfo = await this.storage.load(this.clientId + \"/\" + this.tokenId);\n            if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now()) return this.tokenInfo;\n            await this.refreshBearer();\n            return this.tokenInfo;\n        } catch (e) {\n            await this.refreshBearer();\n            return this.tokenInfo;\n        }\n    }\n\n    async refreshBearer(): Promise<BearerTokenInfo> {\n        let res: Response;\n        for (let retries=0;retries<6;++retries) {\n            console.log(`Retrieving token for ${this.tokenId}`);\n            res = await this.client.get(this.tokenUrl, this.tokenQuery, {cache: 'reload'});\n            if (res.status !== 200) {\n                console.warn(`Got ${res.status} ${res.statusText}`);\n                continue;\n            }\n            this.tokenInfo = {token: await res.text(), expires: Date.now() + 59 * 60 * 1000};\n            console.log(`Got token for ${this.tokenId}: ${JSON.stringify(this.tokenInfo)}`);\n            this.storage.save(this.clientId + \"/\" + this.tokenId, this.tokenInfo);\n            return this.tokenInfo;\n        }\n        throw new Error(\"Failed to retrieve token for \" + JSON.stringify(this.tokenId));\n    }\n}\n","/*\ndeclare var Buffer; // node built-in\n\n\nfunction basicAuthHeader(username, password) {\n    return \"Basic \" + new Buffer(username + \":\" + password).toString(\"base64\");\n}\n*/\n\nimport {IsomorphicEnv} from './isomorphic-env';\nimport { createUUID } from \"./utils\";\n\nexport interface BearerTokenInfo {\n    token: string;\n    expires: number;\n}\n\nexport interface BearerProvider {\n    getBearer(): Promise<BearerTokenInfo>;\n    refreshBearer(): Promise<BearerTokenInfo>;\n    wantsRedirect?: boolean;\n}\n\nexport class RestClient {\n    authHeader?: string;\n    tokenInfo?: BearerTokenInfo;\n    bearerProvider?: BearerProvider;\n    fetchOptions: RequestInit;\n\n    constructor(\n        public isomorphic: IsomorphicEnv,\n        public baseUrl: string,\n        public options: {\n            username?,\n            password?,\n            bearer?,\n            bearerProvider?: BearerProvider\n        },\n    ) {\n        this.fetchOptions = {mode: 'cors'};\n        this.authHeader = options.bearer ?\n            \"Bearer \" + options.bearer :\n            options.username ?\n                \"Basic \" + isomorphic.btoa(options.username + \":\" + (options.password || \"\")) :\n                null;\n        this.bearerProvider = options.bearerProvider || null;\n    }\n\n    async fetch(path: string, method: string, headers, query?, fetchOptions?: RequestInit): Promise<Response> {\n        if (fetchOptions && fetchOptions.cache === 'no-cache') {\n            // Workaround for back-button not respecting cache control in Chrome/Opera.\n            // Append a query parameter to force a cache entry\n            query = {...query, nocache: createUUID()}\n        }\n        const queryStr = query && Object.keys(query).map(key =>\n            encodeURIComponent(key) +\n            \"=\" +\n            encodeURIComponent(query[key]))\n            .join('&');\n\n        let {authHeader, tokenInfo, bearerProvider} = this;\n\n        // {username, password or bearer} not specified in options, but bearerProvider specified:\n        if (!authHeader && !tokenInfo && bearerProvider) {\n            this.tokenInfo = tokenInfo = await bearerProvider.getBearer();\n        }\n        // Either because we've just specified bearerProvider in options, OR, we've got a 401\n        // in earlier response with www-authenticate: Bearer, and we had a BearerProvider,\n        // so we saved the tokenInfo. Now use it regardless of whether username,password or bearer was given\n        // to options in constructor:\n        if (tokenInfo) {\n            if (tokenInfo.expires < Date.now()) {\n                console.log(\"Token expired. Refresh it:\");\n                this.tokenInfo = tokenInfo = await bearerProvider.refreshBearer();\n            }\n            authHeader = \"Bearer \" + tokenInfo.token;            \n        }\n\n        // In one way or another, we've concluded an Authorization header to use:\n        if (authHeader) {\n            headers.Authorization = authHeader;\n        }\n\n        const url = this.baseUrl + path + (queryStr ? \"?\" + queryStr : \"\");\n        let res: Response = await this.isomorphic.fetch(url, { ...this.fetchOptions, headers, method, ...fetchOptions });\n        if (res.status == 401 && this.bearerProvider) {\n            const wwwauth = res.headers.get(\"www-authenticate\");\n            console.log(`Got ${res.status} from ${this.baseUrl + path}`);\n            if (wwwauth && /Bearer/i.test(wwwauth)) {\n                this.tokenInfo = await this.bearerProvider.refreshBearer();\n                headers.Authorization = \"Bearer \" + this.tokenInfo.token;\n                res = await this.isomorphic.fetch(url, { ...this.fetchOptions, headers, method, ...fetchOptions });\n            }\n        }\n        return res;\n    }\n\n    get(path: string, query?, fetchOptions?: RequestInit) {\n        return this.fetch(path, \"GET\", { Accept: \"application/json; text/plain\" }, query, fetchOptions);\n    }\n\n    post(path: string, data, fetchOptions?: RequestInit): Promise<Response> {\n        return this.fetch(path, \"POST\", {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }, null, {...fetchOptions, body: JSON.stringify(data)});\n    }\n\n    delete(path: string, query?, body?, fetchOptions?: RequestInit) {\n        return this.fetch(path, \"DELETE\", { Accept: \"application/json; text/plain\" }, query, {...fetchOptions, body});\n    }\n}\n","\nexport function createUUID() {\n  // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n  var d = Date.now();\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n  });\n  return uuid;\n}\n\nexport function avoidSimultanousCalls<T,A>(method: (...args:A[])=>Promise<T>) : (...args:A[])=>Promise<T> {\n  let ongoingPromise: Promise<T> = null;\n  return function() {\n      if (!ongoingPromise) {\n          ongoingPromise = method.apply(this, arguments).then(result=>{\n              ongoingPromise = null;\n              return result;\n          });\n      }\n      return ongoingPromise;\n  }\n}\n","import { KedBackendClient } from '../ked-backend-client';\nimport migrate from './migrate';\n\nexport const KedModelMigratorMixin = (client: KedBackendClient) => {\n    if ((client as any).__migrator_mixed_in) return;\n    (client as any).__migrator_mixed_in = true;\n    \n    const get = client.get;\n    const list = client.list;\n\n    client.get = function (table, id, options) {\n        const include = options && options.include;\n        return get.apply(this, arguments).then(result => {\n            migrate(result, table, include && include.toString().split(','));\n            return result;\n        });\n    }\n\n    client.list = function (table, options) {\n        const include = options && options.include;\n        return list.apply(this, arguments).then(result => {\n            result.forEach(doc => migrate(doc, table, include && include.toString().split(',')));\n            return result;\n        });\n    }\n\n    return client;\n}\n\n","import { Course } from '../../KED.Backend.API/schema';\nimport migrateTask from './migrate-task';\n\nexport default function migrateCourse(course: Course, graphs?: string[]) {\n  if (!course.modules) course.modules = [];\n  course.modules.forEach(module => {\n    if (!module.resources) {\n      module.resources = [];\n    }\n    if (!module.taskIds) {\n      module.taskIds = [];\n    }\n  });\n\n  if (!course.responsibleTeachers) {\n    course.responsibleTeachers = []\n  }\n\n  // Earlier wrong spelling of resources\n  if ('resourses' in (course as any) && !('resources' in (course as any))) {\n    course.resources = (course as any).resourses;\n    delete (course as any).resourses;\n  }\n  if (!course.resources) {\n    course.resources = [];\n  }\n\n  if (graphs) {\n    graphs.forEach(label => {\n      switch (label) {\n        case 'tasks':\n          course.tasks.forEach(task => migrateTask(task));\n          break;\n      }\n    });\n  }\n}\n","import { Task } from '../../KED.Backend.API/schema';\n\nexport default function migrateTask(task: Task) {\n    if (!task.resources) task.resources = [];\n}\n","import * as model from '../../KED.Backend.API/schema';\nimport migrateCourse from './migrate-course';\nimport migrateTask from './migrate-task';\n\nexport default function migrate(doc, table: string, graphs?: string[]) {\n  switch (table) {\n    case \"courses\":\n      migrateCourse(doc, graphs);\n      break;\n    case \"tasks\":\n      migrateTask(doc);\n      break;\n  }\n}\n","var map = {\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tvar module = __webpack_require__(id);\n\treturn module;\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive sv|en\";","import { User } from \"../contracts/ked-models\";\n\nexport default function getUserClaims (user: User) {\n  return [{\n    type: \"email\",\n    value: user.mail\n  },{\n    type: \"school\",\n    value: user.school\n  }].concat(user.roles.map(role => ({\n    type: \"role\",\n    value: role\n  }))).concat(user.roles.map(role => ({\n    type: \"schoolRole\",\n    value: user.school + \"/\" + role\n  })));\n}\n","import { AccessClaim, DocumentAccess, hasAccess as _hasAccess, AccessRight } from 'kedbackend/client';\nimport { Document } from 'kedbackend/models';\nimport getUserClaims from './get-user-claims';\nimport env from '../globals/KED.env';\nimport { parseQueryString, generateQueryString } from \"../utils/query-string\";\nexport { getUserClaims };\n\nexport const IMPERSONATION_QUERY_PARAMS = [\"user\",\"role\",\"school\",\"debug\",\"testVersion\",\"testversion\",\"schoolType\",\"schooltype\"];\n\nexport function hasAccess(doc: Document, requestedRight: AccessRight) {\n  var claims = getUserClaims(env.currentUser);\n  var result = _hasAccess(DocumentAccess.fromStringArray(doc.acl || []), claims, requestedRight);\n  //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);\n  return result;\n}\n\nexport function hasReadAccess(doc: Document) {\n  return hasAccess(doc, 'R');\n}\n\nexport function hasWriteAccess(doc: Document) {\n  return hasAccess(doc, 'W');\n}\n\nexport function hasShareAccess(doc: Document) {\n  return hasAccess(doc, 'S');\n}\n\nexport function isTeacherAtSchool(school: string) {\n  const isTeacher = env.currentUser.roles.some(role => role === 'EMPLOYEE' || role === 'ADMIN');\n  const belongsToSchool = (school||\"\").toLowerCase() === env.currentUser.school.toLowerCase();\n  return (isTeacher && belongsToSchool);\n}\n\nexport const impersonationEnv = {\n  actAs (options: {role, school, url?}) {\n    const {role, school, url} = options;\n    const currentQuery = parseQueryString(location.search);\n    const newQuery = {...currentQuery, role, school};\n    const newQueryString = generateQueryString(newQuery);\n    if (url) {\n      location.href = `${url}${newQueryString}`;\n    } else {\n      location.hash = \"#\";\n      location.search = newQueryString;\n    }\n  }\n}\n\nexport function actAs(options: {role, school, url?}) {\n  impersonationEnv.actAs(options);\n}\n\nexport function preserveImpersonationQuery (url: string, query: {[name: string] : string}) {\n  const currentQuery = parseQueryString(location.search);\n  const newQuery = {...query};\n  for (const param of IMPERSONATION_QUERY_PARAMS) {\n    if (currentQuery[param]) newQuery[param] = currentQuery[param];\n  }\n  const newQueryString = generateQueryString(newQuery);\n  return `${url}${newQueryString}`;\n}\n","import {EDSCourse} from '../../contracts/eds';\n\nexport const courses: {courses: EDSCourse[]} =\n\n{\n    \"courses\": [\n        // Test data for Gymnasium students (made-up!)\n        {\n            \n            \"courseId\": \"2070d120-30ad-49e9-89c3-9c584a6cfa29\",\n            \"periodName\": \"HT2017\",\n            \"periodGoalGrade\": \"A\",\n            \"name\": \"Naturkunskap 1b\",\n            \"shortName\": \"XXX\",\n            \"courseSteps\": []\n        },\n        // Test data once retrieved from EDS test API for ground-school students:\n        {\n            \"courseId\": \"2070d120-30ad-49e9-89c3-9c584a6cfa2c\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"A\",\n            \"name\": \"Engelska\",\n            \"shortName\": \"EN\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"61f02bc7-1a0d-4b80-9bf1-07b6280379db\",\n                    \"name\": \"1. Lära känna varandra\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903600)\\/\"\n                },\n                {\n                    \"stepId\": \"a34c07c7-3932-4f64-87f9-feb5646db3db\",\n                    \"name\": \"10. En saga\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903740)\\/\"\n                },\n                {\n                    \"stepId\": \"e931f2bb-5727-4d99-b9e5-1bababfbc2e9\",\n                    \"name\": \"11. Det här är jag\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903757)\\/\"\n                },\n                {\n                    \"stepId\": \"ab823339-90ac-4b7f-a895-869d25cef504\",\n                    \"name\": \"12. Jag och min familj\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903770)\\/\"\n                },\n                {\n                    \"stepId\": \"53e00313-4980-4ab2-84ff-abe80ecd72d2\",\n                    \"name\": \"13. Jag och mina vänner\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903787)\\/\"\n                },\n                {\n                    \"stepId\": \"828796e9-84ad-4496-aa78-7850dd5bb23a\",\n                    \"name\": \"14. Jag och min fritid\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903803)\\/\"\n                },\n                {\n                    \"stepId\": \"31e08f37-4ec5-4366-9af6-bca5b9070198\",\n                    \"name\": \"15. The Blog\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111904117)\\/\"\n                },\n                {\n                    \"stepId\": \"4f88e9a3-9b36-47af-9686-d28b00ca98fc\",\n                    \"name\": \"16. Sport\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474888651180)\\/\"\n                },\n                {\n                    \"stepId\": \"abb57443-be68-48b7-a719-3454afbf3daa\",\n                    \"name\": \"17. Musik\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1477656328037)\\/\"\n                },\n                {\n                    \"stepId\": \"964f7ac3-8cf7-4042-912f-58ffb6812ddb\",\n                    \"name\": \"18. Vykort\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3002e95c-8de0-4914-a754-0773a18606bf\",\n                    \"name\": \"19. Läsa noveller\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d8708a56-e4fb-4ad3-84ef-bb40481eaf80\",\n                    \"name\": \"2. Veckans aktiviteter\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903613)\\/\"\n                },\n                {\n                    \"stepId\": \"46915f18-288c-44df-b224-1852d221b6ca\",\n                    \"name\": \"20. Summer camp\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db22d300-0126-4a32-950d-aaf2f7142627\",\n                    \"name\": \"21. Hus och hem\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"68111c18-e610-45c0-b290-9dd3cede1e48\",\n                    \"name\": \"22. Sightseeing\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c84dd89-66f2-4ea1-bce8-3fde1724dcc9\",\n                    \"name\": \"23. Vid matbordet\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1488205880703)\\/\"\n                },\n                {\n                    \"stepId\": \"75943640-f031-41da-8495-9d87b5804a3e\",\n                    \"name\": \"24. Traditioner\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"72021bc2-0ea8-4d39-87fa-11cc976e9c9f\",\n                    \"name\": \"25. Staying with a host family\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"574e1626-cad3-4220-8ba7-b443f03830b4\",\n                    \"name\": \"26. Det engelska språket\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"50a3682e-057d-45b1-81b5-e2eaa8b6d16b\",\n                    \"name\": \"27. Skolan och framtidsdrömmar\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"15a47a71-989a-4348-8fcb-a10683d263ec\",\n                    \"name\": \"28. Identitet\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5717f099-477f-433d-b10a-c2bf0dfe6f8e\",\n                    \"name\": \"29. Att läsa en bok\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0443638f-a546-40d8-a533-e2d12abef609\",\n                    \"name\": \"3. Fira ett speciellt tillfälle\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903630)\\/\"\n                },\n                {\n                    \"stepId\": \"54ff6488-f0ae-4fb6-b4e4-0f29d9274b23\",\n                    \"name\": \"30. The World Today\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2ab8a527-cd74-4847-97a6-79f629e22e84\",\n                    \"name\": \"31. Entertainment\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1b5d42ff-9615-439a-9ae2-89779040bf91\",\n                    \"name\": \"32. Interview\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"29ffc098-d26d-4f3b-a295-b5f065923bf2\",\n                    \"name\": \"33. Filmed books\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4d5fe734-9af9-42b8-8c50-920c9a450bc1\",\n                    \"name\": \"34. See the film\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"dd87c548-4a3a-4a62-9114-70ec7e713aee\",\n                    \"name\": \"35. Write a bestseller\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1fb5ce80-faf0-465c-9be8-c9bc722297bb\",\n                    \"name\": \"36. The English-speaking World\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f0007f75-0d1f-48c7-8f19-bb2e9f2c5377\",\n                    \"name\": \"37. Poetry\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"addebfcc-5b3c-4360-b819-0de0269a5e2d\",\n                    \"name\": \"38. Rhetoric\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"23c16db5-d435-49d3-8daa-c2b6433366b7\",\n                    \"name\": \"39. An important issue\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"e4d22285-735a-4bab-8884-ca5b736ebb88\",\n                    \"name\": \"4. Åka någonstans\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903647)\\/\"\n                },\n                {\n                    \"stepId\": \"4c489a2b-ee79-4f89-9818-787632abfba8\",\n                    \"name\": \"40. Write a speech\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"9667976c-83ab-4b9e-8a76-d330983c28f5\",\n                    \"name\": \"41. Changing world\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6bb14af9-9094-4938-be2d-2725a931895c\",\n                    \"name\": \"42. An organization\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"fe313a1a-dc5c-4890-b11e-b8e109db689b\",\n                    \"name\": \"43. The written word\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f1a592ec-6095-4ae4-9b9e-ebd527c18a2a\",\n                    \"name\": \"44. Communication\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5f6a5e15-462b-40ab-981b-b93e5fc0ee22\",\n                    \"name\": \"45. Giving a lecture\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8c9b57c1-cf05-4465-84b2-68cf353b1075\",\n                    \"name\": \"5. Min semester\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903660)\\/\"\n                },\n                {\n                    \"stepId\": \"1bd11f36-6438-40b5-ad4c-4b02b6f481d0\",\n                    \"name\": \"6. Låt oss prata om det\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903677)\\/\"\n                },\n                {\n                    \"stepId\": \"d49c08ee-c0e6-4599-b79f-5efd811fe33c\",\n                    \"name\": \"7. Jag är en turist\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903693)\\/\"\n                },\n                {\n                    \"stepId\": \"2def3414-de65-46c0-8f48-f8aa18be7b7c\",\n                    \"name\": \"8. Vänner över hela världen\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903707)\\/\"\n                },\n                {\n                    \"stepId\": \"ea8ff1a0-4bad-43ac-b328-62dff3e4d08e\",\n                    \"name\": \"9. Hjältar och kända personer\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903723)\\/\"\n                }\n            ]\n        },\n        {\n            \"courseId\": \"9d129e6a-9557-4849-a53f-416725502895\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"C\",\n            \"name\": \"Matematik\",\n            \"shortName\": \"MA\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"f1af6c2c-799a-4a3d-9985-c423940e91c0\",\n                    \"name\": \"1. Tal och mönster\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815917)\\/\"\n                },\n                {\n                    \"stepId\": \"4a34c53d-93d0-4247-ba19-9ce9dbed6de5\",\n                    \"name\": \"10. Lägesmått och diagram\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816200)\\/\"\n                },\n                {\n                    \"stepId\": \"0816a2b0-3aa7-41a9-bc39-971ccc7bd79c\",\n                    \"name\": \"11. Räknesätt\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1476103754013)\\/\"\n                },\n                {\n                    \"stepId\": \"fdc90a9c-b06a-48b1-9781-606c230c425c\",\n                    \"name\": \"12. Geometri\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1481279716607)\\/\"\n                },\n                {\n                    \"stepId\": \"bfd77c92-6636-45fa-9002-d813beaa56c3\",\n                    \"name\": \"13. Rymdgeometri\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1489669353170)\\/\"\n                },\n                {\n                    \"stepId\": \"58a619a1-b99a-487b-bbd5-abd31a903e5a\",\n                    \"name\": \"14. Räknemetoder och algebra\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"55b88760-22aa-452a-8a57-131346669aad\",\n                    \"name\": \"15. Problemet\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47f16476-ea47-40a2-a073-7ac4b36c4bf0\",\n                    \"name\": \"16. Delen och det hela\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"704e3d5b-fce7-409b-b989-340b2d7b2e18\",\n                    \"name\": \"17. Geometri och vinklar\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db5693ea-48ef-44ce-8107-be9915ef5256\",\n                    \"name\": \"18. Funktioner\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f9250c97-d932-4bf6-989e-204c0ef582c9\",\n                    \"name\": \"19. Proportionalitet\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d0411b1d-c9b4-452f-9fb6-ea7206755ecd\",\n                    \"name\": \"2. Längd och räknesätt\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815930)\\/\"\n                },\n                {\n                    \"stepId\": \"616b742e-b175-45c3-a926-fda3e4d8af80\",\n                    \"name\": \"20. Förflyttningsgraf\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f8a9b467-6ba6-4d9a-8174-87e369062621\",\n                    \"name\": \"21. Likformighet\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8fe483d7-b78b-4d9d-9402-15d57da05832\",\n                    \"name\": \"22. Bråk, sannolikhet och kombinatorik\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7eb39090-6461-4ce4-b008-dd98f8a57679\",\n                    \"name\": \"23. Negativa tal, procentsatser och förändringsfaktor\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"34cb3911-3a78-4773-a823-2f9054a9a925\",\n                    \"name\": \"24. Algebra och ekvationer\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"49abad1a-dd4b-4b0b-8d1f-752796723ca1\",\n                    \"name\": \"25. Lotteriet\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6756d8bc-e31a-4139-8d95-8f47916a361b\",\n                    \"name\": \"26. Geometriska samband\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0f0efee5-e617-4bca-b84e-e50e32aac90b\",\n                    \"name\": \"27. Rymdgeometri\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"de4e12d1-f678-4b1a-ac7b-5d62cdaeb52d\",\n                    \"name\": \"28. Storheter och proportionella samband\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"80323de8-fe66-4750-bb2e-d0dbabbb3dac\",\n                    \"name\": \"29. Funktioner och grafer\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"68894968-8a16-497a-8b97-711df61fca71\",\n                    \"name\": \"3. Tal och enheter\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815947)\\/\"\n                },\n                {\n                    \"stepId\": \"fa32d170-ab25-466d-91a8-a88f955cc5bc\",\n                    \"name\": \"30. Förpackning\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c31e00f-aeda-409f-8583-9805c0bb4f7f\",\n                    \"name\": \"31. Negativa tal och statistik\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"691bb48b-070d-4227-8fb6-2edce2fc6be4\",\n                    \"name\": \"32. Bråk\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"320481da-e417-4c52-af23-0076b694794d\",\n                    \"name\": \"33. Procent och förändringsfaktor\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f3a4338d-504e-4092-9610-ef2775b5b411\",\n                    \"name\": \"34. Potenser\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f43d7931-158c-4759-b7be-b14cf68c939a\",\n                    \"name\": \"35. Solsystemet\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8931fc26-693a-41bd-8040-e01a6d22b2b5\",\n                    \"name\": \"36. Ekvationer och algebra\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"94370d70-dcbd-4eef-baf1-e92f6680b966\",\n                    \"name\": \"37. Funktioner och grafer\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ab0535df-68cc-4c10-86eb-afba3e199d0a\",\n                    \"name\": \"38. Geometri\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4ba66c7a-7d8f-4576-aefa-c09397b99db0\",\n                    \"name\": \"39. Sannolikhet\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c4e12bc8-1428-4d1b-a273-e947fa0574f3\",\n                    \"name\": \"4. Multiplikation och division\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815963)\\/\"\n                },\n                {\n                    \"stepId\": \"0b75ce2b-89de-432a-9eee-d6a7b74b6f38\",\n                    \"name\": \"40. Chokladfabriken\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"dba4a055-c143-4bd4-b436-3eb508ebe658\",\n                    \"name\": \"41. Genrella lösningsmetoder\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db193873-0a8c-4073-8618-99c5a56f710b\",\n                    \"name\": \"42. Avancerad ekvationslösning\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"357ee123-1d77-4568-8fa1-78b5662e12b3\",\n                    \"name\": \"43. Problemlösning\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"015cdd58-7b31-4a89-a9fe-cd0bb45e7434\",\n                    \"name\": \"44. Avancerad problemlösning\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"785e12ac-4a71-4acf-bf40-27652faf20ff\",\n                    \"name\": \"45. Vad är matematik?\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6372cdb6-91cf-4f0f-ac9c-8578c00760ff\",\n                    \"name\": \"5. Form och storlek\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815977)\\/\"\n                },\n                {\n                    \"stepId\": \"c781e529-fefa-43ce-99fb-d232585a1e1a\",\n                    \"name\": \"6. Tid och räknesätt\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815993)\\/\"\n                },\n                {\n                    \"stepId\": \"5df2975c-f84e-4620-abe9-5c47ebcb0f90\",\n                    \"name\": \"7. Bråk och decimaltal\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816007)\\/\"\n                },\n                {\n                    \"stepId\": \"9cbb966f-32df-48cf-be77-5e00d466d63a\",\n                    \"name\": \"8. Procent och bråk\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816023)\\/\"\n                },\n                {\n                    \"stepId\": \"b1b59f38-63c6-428a-a512-220b7d838e5f\",\n                    \"name\": \"9. Sannolikhet och bråk\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816040)\\/\"\n                }\n            ]\n        },\n        {\n            \"courseId\": \"cfdc5bc0-ea41-4683-b941-d980de4e82a5\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"D\",\n            \"name\": \"Spanska, språkval\",\n            \"shortName\": \"M2SP\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"16bb0ce6-60ac-4937-8e60-dd633cd7c5f0\",\n                    \"name\": \"1. Första mötet\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1476255771933)\\/\"\n                },\n                {\n                    \"stepId\": \"f3504ab6-386c-42d2-882b-668719f329b5\",\n                    \"name\": \"10. Turist\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d2de4e01-44dd-4ba7-a69f-075450c627a7\",\n                    \"name\": \"11. Skolan\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"58e4d577-05f5-4071-8745-a41571df3019\",\n                    \"name\": \"12. Fritiden\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d8a079f9-3fef-4fbc-b868-6b050e3832d1\",\n                    \"name\": \"13. Stämma träff\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d62f63a1-3806-4650-b6a9-354eccd056b9\",\n                    \"name\": \"14. Sport och musik\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"b475dc9d-e694-4eb9-8c78-b150494dfe84\",\n                    \"name\": \"15. Presentera dig själv\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"009c68f6-db7e-44a3-bc5c-d1e2e78d327c\",\n                    \"name\": \"16. När och fjärran\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"a124f250-2fb7-4b57-b2bc-b72e0e8fd21a\",\n                    \"name\": \"17. Mat och traditioner\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ec6ccef4-58b5-4111-b152-8a7a7f546bb8\",\n                    \"name\": \"18. Planera en resa\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ec96d506-112e-4b38-8946-6f19130bd741\",\n                    \"name\": \"19. Etikett och regler\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0b52b5e6-bbc7-4c78-815c-efc30fa984af\",\n                    \"name\": \"2. Min familj\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1488368769260)\\/\"\n                },\n                {\n                    \"stepId\": \"e05c674b-1097-4646-ac47-1d8c4342a343\",\n                    \"name\": \"20. Resan\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f6f8cffb-69ae-4148-81fa-35e1f984f836\",\n                    \"name\": \"21. Boende\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"aee9167c-2f65-4f8d-a94b-684458c300bc\",\n                    \"name\": \"22. Familjeliv\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"115f28de-fe33-435e-a7fb-36fea0a37cce\",\n                    \"name\": \"23. Bostadsläge\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d5e8b9e2-b84e-4af7-8b20-e37896dec41d\",\n                    \"name\": \"24. Min stad\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c2f15857-a682-4b02-8d00-ec042858e799\",\n                    \"name\": \"25. Presentera någon annan\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1bc87327-1e3f-42f6-b839-e9b385200149\",\n                    \"name\": \"26. Media\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"36f23967-f30b-4cbc-a69c-4191094e182d\",\n                    \"name\": \"27. En tv-kväll\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"32ead07a-fa58-4770-ac20-3a31f27069cf\",\n                    \"name\": \"28. Tidningar\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"598d7b7e-97b6-4ff3-b7a7-8f5c45c164cd\",\n                    \"name\": \"29. Film\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"12e8d03b-7d80-434c-9201-7f852f5c114c\",\n                    \"name\": \"3. Fler siffror, månader och väder\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"98f0825e-e200-43f4-9f4b-866bb50d28dd\",\n                    \"name\": \"30. Tidningen\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"956757b9-979f-4d12-be01-8b30970b603e\",\n                    \"name\": \"31. Min framtid\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c2003358-0ce9-409b-82fa-e7a0bff891fc\",\n                    \"name\": \"32. Ung i framtiden\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1c1ca040-f96d-46af-862b-a978698e2745\",\n                    \"name\": \"33. Insändare\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"64f620bb-8c77-4de2-88e2-feaa21f4c41e\",\n                    \"name\": \"34. På gymnasiet\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c3c19eb-0447-47cf-bb72-8d1176118c71\",\n                    \"name\": \"35. Framtiden\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c3779788-030e-46f3-89a7-a15015931a51\",\n                    \"name\": \"4. Det här är jag\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"a6628c06-443a-481d-96fc-c019800e8e4e\",\n                    \"name\": \"5. Boken\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f34e1dee-1dd3-4bcd-89b4-f0ba6638c65c\",\n                    \"name\": \"6. På café\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"9ffb3665-0e3a-423a-af93-c5006a2a4839\",\n                    \"name\": \"7. Att handla\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"63e62432-ba1e-4f96-911c-52bd756c803e\",\n                    \"name\": \"8. I staden\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3c93cf1d-2e82-452b-9333-16b336fdda6d\",\n                    \"name\": \"9. På hotellet\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                }\n            ]\n        },\n        {\n            \"courseId\": \"3cc7c710-63fb-49bd-8dc5-b95be6374122\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"C\",\n            \"name\": \"Svenska\",\n            \"shortName\": \"SV\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"379585a4-f602-4086-920d-d506d2e93fed\",\n                    \"name\": \"1. Min bästa sak\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179490)\\/\"\n                },\n                {\n                    \"stepId\": \"5d90747a-d5ff-4c12-818c-d301e4cf2405\",\n                    \"name\": \"10. Quizkampen\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179630)\\/\"\n                },\n                {\n                    \"stepId\": \"fb271830-5368-43dc-b911-3d65af082e26\",\n                    \"name\": \"11. Ta kontakt\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179647)\\/\"\n                },\n                {\n                    \"stepId\": \"bf7a93a6-24af-4d01-8839-aa4f3f6b438d\",\n                    \"name\": \"12. Samla fakta och presentera\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179660)\\/\"\n                },\n                {\n                    \"stepId\": \"2a712108-e5d7-4ffb-a55f-80ff195ea946\",\n                    \"name\": \"13. Påverka och uttrycka åsikter\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179943)\\/\"\n                },\n                {\n                    \"stepId\": \"94b5abaa-0471-4ab4-be3c-c0b0d4098609\",\n                    \"name\": \"14. Språk i Sverige\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1475049857367)\\/\"\n                },\n                {\n                    \"stepId\": \"e0169353-8ac0-4fcd-8a45-4cfffc5fe55e\",\n                    \"name\": \"15. Min förebild\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1480951054357)\\/\"\n                },\n                {\n                    \"stepId\": \"e12c8fa6-8aaa-4598-8e6f-5c6d318163db\",\n                    \"name\": \"16. Förstå, minnas och lära\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1490605558217)\\/\"\n                },\n                {\n                    \"stepId\": \"1a19c53b-36f0-4309-adfd-26a307b43dbd\",\n                    \"name\": \"17. Använda språket i olika sammanhang\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"31aa5b91-59d0-41db-ab2e-0bdec6342dfe\",\n                    \"name\": \"18. Sammanfatta och presentera\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"48747057-835d-40fd-811f-dde4fd48f3a0\",\n                    \"name\": \"19. Den moderna ungdomen\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4708aedf-3b7d-4ec0-80c9-769de4cdda9b\",\n                    \"name\": \"2. Författare\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179507)\\/\"\n                },\n                {\n                    \"stepId\": \"4258123d-d122-4058-8120-9de7d1fb3d66\",\n                    \"name\": \"20. Att vara ungdom idag\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3d94e56d-9d38-4d3c-a3cb-d4f2d13814c9\",\n                    \"name\": \"21. Upplysningstiden och romantiken\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5d8c3d70-e996-4236-9326-982ed128340c\",\n                    \"name\": \"22. Realismen och modernismen\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"02037ab3-ffdf-4fe2-a172-26de404c58bc\",\n                    \"name\": \"23. Våga utanför ramarna\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7c376d37-0170-49ac-865d-5479d82ce806\",\n                    \"name\": \"24. Modern litteratur\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7131b28d-89d1-40f6-8d87-80fd0c15486d\",\n                    \"name\": \"25. Budskapet\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"30c876a6-48a7-4fc7-a49f-ad44bac3d4bb\",\n                    \"name\": \"26. Övertyga och påverka\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"97b328ea-3342-41d6-a1c5-91e9c1d17a08\",\n                    \"name\": \"27. Språkbruk genom tiderna\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"e4ec472d-b31c-4d20-886c-0162e1159e55\",\n                    \"name\": \"28. Tidningstexter\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47ccf40e-28a1-4432-91ed-f3013eb97aa8\",\n                    \"name\": \"29. Samtala om texter\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6c89c307-adff-46b8-9d75-2ecb1fc714ce\",\n                    \"name\": \"3. Leka med ord\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179520)\\/\"\n                },\n                {\n                    \"stepId\": \"2145d4aa-60db-42f9-918b-49f3bf714786\",\n                    \"name\": \"30. Språkets möjligheter\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c211ba3d-b8fa-4c5c-bbe1-bcfea2a243b5\",\n                    \"name\": \"31. Dikt och diktanalys\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"fbeb356a-5c9d-4114-9a4b-9ac2325913d0\",\n                    \"name\": \"32. Berättarteknik i skönlitteratur\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4446df13-5bb8-4cf1-beb4-4d2b43bf97b8\",\n                    \"name\": \"33. Utveckla ditt skönlitterära skrivande\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47e0c5bf-2898-4cc3-8119-2346d4c6c78f\",\n                    \"name\": \"34. Noveller\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3b072a72-9f2c-4439-b095-33edb5ae3276\",\n                    \"name\": \"35. Det fria ordet - En skönlitterär djupdykning\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"56a2b991-63f5-4f1c-8e48-1bc1f83fa9a9\",\n                    \"name\": \"36. Debatt och retorik\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7b0e633b-65b5-407d-8bdd-d77673d1be1f\",\n                    \"name\": \"37. Argumenterande texter\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d76356c9-2fdd-4845-aa7a-1bf54547a34e\",\n                    \"name\": \"38. Analysera tal\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"eb312838-f59b-4815-987f-d7f11973a95f\",\n                    \"name\": \"39. Tal\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"48559f29-37cb-451f-8f40-354101a413af\",\n                    \"name\": \"4. Skrivarskola\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179537)\\/\"\n                },\n                {\n                    \"stepId\": \"a054f1e2-b296-4185-b9b7-dac94f600ab3\",\n                    \"name\": \"40. Muntlig argumentation\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2e5ff9f3-ac8e-4fea-abe2-a7534e64e25f\",\n                    \"name\": \"41. Modern lyrik\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ceed4cee-dd38-40b9-af97-43b0af244a41\",\n                    \"name\": \"42. Nobelpriset i litteratur\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2df27363-1a57-4129-96dc-5e2a26dc0209\",\n                    \"name\": \"43. Analysmetod i akademiska uppsatser\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"71062f38-2874-4d6a-96b9-8128a10e3559\",\n                    \"name\": \"44. Litteratur som väckt debatt genom tiderna\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d0e40b55-4638-45fd-b9f3-924c68c673cc\",\n                    \"name\": \"45. Analysera vetenskapligt\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5954c057-cdc2-4293-bb9e-8b96ec27e04c\",\n                    \"name\": \"5. Min bästa sak på äventyr\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179553)\\/\"\n                },\n                {\n                    \"stepId\": \"5b9e5c30-c9de-4092-b7e6-0dbb4e3513ff\",\n                    \"name\": \"6. Faktatext\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179567)\\/\"\n                },\n                {\n                    \"stepId\": \"2b823257-8dad-4f6b-8f2b-539e4dae0bd4\",\n                    \"name\": \"7. Tal- och skriftspråk\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179583)\\/\"\n                },\n                {\n                    \"stepId\": \"28e73fd2-c40a-4319-8b93-ec0f1b658c81\",\n                    \"name\": \"8. Dikter\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179600)\\/\"\n                },\n                {\n                    \"stepId\": \"35a5926a-8cb3-4c9d-a7ef-714761935755\",\n                    \"name\": \"9. Olika texttyper\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179613)\\/\"\n                }\n            ]\n        }\n    ]\n}\n","import {EDSAssessment} from '../../contracts/eds';\n\nexport const assessments: {assessments: EDSAssessment[]} =\n\n{\n    \"assessments\": [\n      {\n        \"publishDateTime\": \"2017-08-28T09:05:43.16\",\n        \"text\": \"Testbedömning Engelsa 5\",\n        \"gradeName\": \"C\",\n        \"courseUnitName\": \"1. Ready, steady, go!\"\n      },\n      {\n        \"publishDateTime\": \"2017-08-28T08:59:21.253\",\n        \"text\": \"Testbedömning...\\r\\n/ Kim test\",\n        \"gradeName\": \"C\",\n        \"courseUnitName\": \"Tema 1\"\n      },\n      {\n        \"publishDateTime\": \"2017-08-10T09:43:36.797\",\n        \"text\": \"Test\",\n        \"gradeName\": \"D\",\n        \"courseUnitName\": \"Block 1\"\n      }\n    ]\n  }","import {EDSStudyPlan} from '../../contracts/eds';\n\nexport const studyPlans: {StudyPlans: EDSStudyPlan[]} =\n\n{\n    \"StudyPlans\": [\n        {\n            \"courseUnitName\": \"Hem- och konsumentkunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Historia\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Fysik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Geografi\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Matematik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Samhällskunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Engelska\",\n            \"finalGoalGrade\": \"A\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"A\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Religionskunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Idrott och hälsa\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Biologi\",\n            \"finalGoalGrade\": \"D\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Svenska\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Teknik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Bild\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Spanska, språkval\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Kemi\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Slöjd\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Musik\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        }\n    ]\n}","import { EDSCourse, EDSAssessment, EDSStudyPlan, EDSStudentFutureAbility } from '../contracts/eds';\nimport { RestClient } from 'kedbackend/js/dist/ked-backend-client/restclient';\nimport { IsomorphicEnv, BearerProvider, HttpError } from 'kedbackend/client';\nimport { SchoolMoment } from '../utils/school-moment';\nimport { SchoolTerm } from '../utils/school-term';\nimport { dateTimeReviver, L } from '../utils/utils';\nimport { courses } from './eds-stubdata/ActiveCourses';\nimport { assessments } from './eds-stubdata/LatestAssessments';\nimport { studyPlans } from './eds-stubdata/StudentGoals';\nimport env from '../globals/KED.env';\n//Gamla: const API_URL = \"https://test-dev-eds-cs.cloudapp.net/WebAPI/\";\n//NYA: const API_URL = \"https://edsportalowinapi.azurewebsites.net/api/\";\n\nfunction privatizingCacheBust () {\n  return {user: env.currentUser.mail};\n}\nexport class EdsClient {\n  http: RestClient;\n\n  constructor (\n    isomorphic: IsomorphicEnv,\n    baseUrl: string,\n    bearerProvider: BearerProvider\n  ) {\n    this.http = new RestClient (isomorphic, baseUrl, {bearerProvider});\n    this.getActiveCourses = avoidSimultanousCalls(this.getActiveCourses);\n    this.getLatestAssessments = avoidSimultanousCalls(this.getLatestAssessments);\n    this.getStudentGoals = avoidSimultanousCalls(this.getStudentGoals);\n    this.getStudentFutureAbilities = avoidSimultanousCalls(this.getStudentFutureAbilities);\n  }\n\n/**\n   * Retrieve active courses for current logged in student.\n   *\n   * @param courseCode Short-name of the course. Optional.\n   */\n  async getActiveCourses(q: {courseCode?: string, periodName: string}) {\n    try {\n      const query:any = privatizingCacheBust();\n      if (q) {\n        if (q.courseCode) query.CourseCode = q.courseCode;\n        if (q.periodName) query.PeriodName = q.periodName;\n      }\n      const res = await this.http.get(\"studentactivecourses\", query);\n      if (res.status != 200) throw new HttpError(res.status, await res.text());\n      const json = await res.json();\n      return json.courses as EDSCourse[];\n    } catch (ex) {\n      console.error(\"Error from EDS: \" + ex);\n      throw new Error(L`Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare...`);\n    }\n  }\n\n  /**\n   * Retrieve latest assessments for current logged in user.\n   * \n   * @param limit Optional limit\n   */\n  async getLatestAssessments(limit?: number) {\n    const query:any = privatizingCacheBust();\n    if (!isNaN(limit)) query.Count = limit;\n    const res = await this.http.get(\"studentassessments\", query);\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.assessments as EDSAssessment[];    \n  }\n\n  /**\n   * Retrieve studyplans for current logged-in user\n   */\n  async getStudentGoals() {\n    const res = await this.http.get(\"studentgoals\", privatizingCacheBust());\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.studentGoals as EDSStudyPlan[];    \n  }\n\n  async getStudentFutureAbilities() {\n    const res = await this.http.get(\"studentFutureAbilities\", privatizingCacheBust());\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.studentFutureAbilities as EDSStudentFutureAbility[];\n  }\n}\n\nexport class EDSPeriod {\n  period: string;\n  term: 'AT' | 'ST';\n  year: number;\n  constructor (periodStringOrSchoolTerm: string | SchoolMoment) {\n    if (typeof periodStringOrSchoolTerm === 'string') {\n      this.period = periodStringOrSchoolTerm;\n      this.term = this.period.startsWith('HT') ? 'AT' : 'ST';\n      this.year = parseInt(this.period.substr(2));\n      if (isNaN(this.year)) throw new Error (`Invalid period: ${this.period}`);\n    } else {\n      const schoolTerm = new SchoolTerm(periodStringOrSchoolTerm);\n      this.period = (schoolTerm.term === 'AT' ? \"HT\" : \"VT\") + schoolTerm.year;\n      this.term = schoolTerm.term;\n      this.year = schoolTerm.year;\n    }\n  }\n\n  get schoolTerm () : SchoolTerm {\n    return new SchoolTerm({\n      academicYear: this.term === 'AT' ?\n        `${this.year}/${this.year + 1}` :\n        `${this.year-1}/${this.year}`,\n      term: this.term\n    });\n  }\n\n  toString() {\n    return this.period;\n  }\n\n  valueOf() {\n    return this.year + \":\" + (this.term === 'ST' ? \"1\" : \"2\");\n  }\n}\n\nexport function parseJsonDate_old (jsonDateStr: string) : Date {\n  const date = dateTimeReviver(\"\", jsonDateStr);\n  if (!(date instanceof Date)) throw new Error(\"Invalid JSON date string: \" + jsonDateStr);\n  return date;\n}\n\nexport class StubEdsClient implements EdsClient {\n  http: RestClient;\n\n  constructor () {\n    this.http = null;\n  }\n\n  async getActiveCourses(q?: { courseCode?: string; periodName?: string; }) {\n    let result = courses.courses;\n      if (q) {\n        if (q.courseCode) result = result.filter (c => c.shortName === q.courseCode);\n        if (q.periodName) result = result.filter(c => c.periodName === q.periodName);\n      }\n      return result;\n  }\n\n  async getLatestAssessments(limit?: number) {\n    return limit ?\n        assessments.assessments.slice(0, limit) :\n        assessments.assessments;\n  }\n\n  async getStudentGoals() {\n    return studyPlans.StudyPlans;\n  }\n\n  async getStudentFutureAbilities() {\n    return [] as EDSStudentFutureAbility[];\n  }  \n}\n\nfunction avoidSimultanousCalls<T,A>(method: (...args:A[])=>Promise<T>) : (...args:A[])=>Promise<T> {\n  let ongoingPromises: {[argsJson: string]: Promise<T>} = {};\n  return function() {\n    const argsJson = JSON.stringify([].slice.call(arguments));\n    if (!ongoingPromises[argsJson]) {\n      ongoingPromises[argsJson] = method.apply(this, arguments).then(result=>{\n        delete ongoingPromises[argsJson];\n        return result;\n      });\n    }\n    return ongoingPromises[argsJson];\n  }\n}\n","export function courseNameToCssClass(cssPrefix: string, courseName: string) {\n  return `${cssPrefix}${courseName.substr(0,3).toLowerCase()}`;\n}\n","import * as React from 'react';\nimport { L } from \"../../../utils/utils\";\n\ninterface Props {\n  onClick,\n  className?,\n  style?,\n  title?\n};\n\nexport const RemoveItem = ({ onClick, className, style, title }: Props) =>\n\n  <div\n    title={title || L`Radera`}\n    className={\"removeItem \" + (className || \"\")}\n    onClick={onClick} style={style} />\n","import * as React from 'react';\n\nexport const Spinner = ()=> <span><i className=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>&nbsp;</span>;\n","import moment from 'moment';\nimport { L } from '../../utils/utils';\nimport { Document, Resource, ModificationTracked, Course, Task } from 'kedbackend/models';\nimport { BatchRunner, createUUID } from 'kedbackend/client';\nimport update from 'react-addons-update';\nimport { User } from '../../contracts/ked-models';\nimport $ from 'jquery';\nimport env from '../../globals/KED.env';\n\nexport function updateDocumentGraphs(oldDoc, newDoc, table: string, graphs: { [label: string]: string }, batch: BatchRunner) {\n  const docUpdates = {};\n  const docId = newDoc.id;\n  for (let navProp of Object.keys(graphs)) {\n    const foreignTable = graphs[navProp];\n    const oldList: Document[] = oldDoc[navProp] || [];\n    const newList: Document[] = newDoc[navProp];\n    if (!newList) continue;\n    const tuples = newList\n      .map((doc, idx)=>({doc, idx})); // Create tubles of {doc, array-index} so we can update result\n    const added = tuples.filter(tuple => !oldList.some(o => o.id === tuple.doc.id)); // Find added items\n\n    for (let a of added) {\n      const mutatedSubDoc = {...a.doc};\n      const meta = mutatedSubDoc.$meta;\n      delete mutatedSubDoc.$meta; // Delete $meta so that \"add\" or \"update\" does not persiste to next state.\n      if (meta === 'add') {\n        if (!mutatedSubDoc.id) mutatedSubDoc.id = createUUID(); // Generate ID if not done yet.\n        // Now put an 'add' mutation in the batch queue.\n        batch.add(foreignTable, mutatedSubDoc);\n      } else if (meta === 'update') {\n        batch.put(foreignTable, mutatedSubDoc);\n      }\n      batch.link(table, docId, foreignTable, mutatedSubDoc.id, navProp);\n\n      // Update result so that state is reflected after succesful POST to server.\n      if (!docUpdates[navProp]) docUpdates[navProp] = {};\n      docUpdates[navProp][a.idx] = {$set: mutatedSubDoc};\n    }\n    const removed = oldList.filter(o => !newList.some(n => n.id === o.id));\n    for (let r of removed) {\n      batch.unlink(table, docId, foreignTable, r.id, navProp);\n    }\n    const updated = tuples.filter(tuple => oldList.some(o => o.id === tuple.doc.id && tuple.doc.$meta === 'update'));\n    for (let u of updated) {\n      const mutatedSubDoc = {...u.doc};\n      delete mutatedSubDoc.$meta;\n      batch.put(foreignTable, mutatedSubDoc);\n\n      // Update result so that $meta is removed from navigation prop after successful POST to server.\n      if (!docUpdates[navProp]) docUpdates[navProp] = {};\n      docUpdates[navProp][u.idx] = {$set: mutatedSubDoc};\n    }\n  }\n  return update(newDoc, docUpdates);\n}\n\nexport function dtFormat(dateTime: number | Date | moment.Moment) {\n  return moment(dateTime).format('YYMMDD HH:mm');\n}\n\nexport function shortDateFormat(dateTime: number | Date | moment.Moment) {\n  return moment(dateTime).format('YYMMDD');\n}\n\nexport function updateModificationStamp (now: number, obj: ModificationTracked, user: User) {\n  return update(obj, {\n    dateTime: {$set: now}, // For queries...\n    modifiedDate: {$set: now},\n    modifiedBy: {\n      $set: {\n        name: user.displayName,\n        url: \"mailto:\" + user.mail\n      }\n    }\n  });\n}\n\nexport function updateCreationStamp (now: number, obj: ModificationTracked, user: User) {\n  return update(obj, {\n    createdDate: {$set: Date.now()},\n    createdBy: {\n      $set: {\n        name: user.displayName,\n        url: \"mailto:\" + user.mail\n      }\n    }\n  });\n}\n\nexport function updateModificationAndCreationStamps(obj: ModificationTracked, user: User) {\n  const now = Date.now();\n  obj = updateModificationStamp(now, obj, user);\n  if (!obj.createdBy) obj = updateCreationStamp(now, obj, user);\n  return obj;\n}\n\nexport function applyEtags(doc: Document, newEtags: {[id: string]: string}, graphs: string[]) {\n  const res = {...doc};\n  const etag = newEtags[doc.id];\n  if (etag)\n    res.$etag = etag;\n  for (let label of graphs) {\n    const newList = doc[label].map(d => applyEtags(d, newEtags, []));\n    res[label] = newList;\n  }\n  return res;\n}\n\nexport function readBlob(blob: Blob, m: (r:FileReader)=>void) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = ev => resolve((ev.target as any).result);\n    reader.onabort = ev => reject(new Error(\"file read aborted\"));\n    reader.onerror = ev => reject((ev.target as any).error);\n    m(reader);\n  });\n}\n\nexport function readBlobAsText (blob: Blob) {\n  return readBlob(blob, r=>r.readAsText(blob));\n}\n\nexport function readBlobAsDataUrl (blob: Blob) {\n  return readBlob(blob, r=>r.readAsDataURL(blob));\n}\n\nexport function allowCopy(e: React.DragEvent<HTMLDivElement>) {\n  e.stopPropagation();\n  e.preventDefault();\n  e.dataTransfer.dropEffect = 'copy';\n}\n\nexport function updateCourseBuilderStatus(status: 'unsaved' | 'saved' | 'error' | '') {\n  const div = $('div.course-builder')[0];\n  if (div) div.className = \"course-builder\" + (status ? \" status \" + status : \"\");\n}\n\nexport async function loadCourse(id: string, options?: {\n    includeTemplateChain?: boolean\n  }): Promise<Course>\n{\n  const client = env.kedBackendClient;\n  const includeTemplateChain = options && options.includeTemplateChain;\n  const [course, courseTasks, templateChain] = (await Promise.all([\n    client.get(\"courses\", id, {\n      include: [\n        \"centralContent\",\n        \"knowledgeRequirements\",\n        \"abilities\",\n        \"images\",\n        \"acl\" // Don't include tasks here...\n      ]\n    }),\n    // ... but include tasks here instead so that we can load the graphs for the\n    // tasks as well!\n    client.list(\"tasks\", {\n      hasEdgesFrom: id,\n      include: ['knowledgeRequirements', 'centralContent', 'abilities', 'acl'],\n      flags: ['includeIdsOnly'] // Don't need redundant info that's already on course\n    }),\n    includeTemplateChain && client.list(\"courses\", {\n      hasEdgesFrom: id,\n      flags: ['idsOnly']\n    })\n  ])) as [Course, Task[], Course[]];\n  course.tasks = courseTasks;\n\n  // Correct the order of KnowledgeRequirements\n  if (course.knowledgeRequirementsOrder) {\n    course.knowledgeRequirements = course.knowledgeRequirementsOrder.map(id =>\n      course.knowledgeRequirements.find(c => c.id === id));\n  }\n\n  // Correct the order of CentralContent\n  if (course.centralContentOrder) {\n    course.centralContent = course.centralContentOrder.map(id =>\n      course.centralContent.find(cc => cc.id === id));\n  }\n  \n  // Include template chain if requested.\n  if (includeTemplateChain) course.templateChain = templateChain;\n  return course;\n}\n\n","import * as React from 'react';\nimport { Course } from 'kedbackend/models';\n\ntype Callback = ()=>void;\n\ninterface Props {\n  title: string,\n  backgroundImage: string,\n  tabs: {name: string | JSX.Element, key?: string, link: string}[],\n  activeTab: string\n}\n\nexport const CourseBanner = (props: Props) => {\n  const { title, backgroundImage, tabs, activeTab } = props;\n\n  return <div className=\"sv-row sv-layout sv-skip-spacer\">\n    <div className=\"sv-layout sv-skip-spacer sv-column-12\">\n      <div className=\"sv-script-portlet sv-portlet sv-skip-spacer\">\n        {backgroundImage && <style>{`\n        .pageHeader {\n          background-image: url('${backgroundImage}') !important;\n        }\n      `}</style>}\n        <div className=\"pageHeader\">\n          <a>\n            <h1>{title}</h1>\n          </a>\n          <div className=\"buttonsField\">\n            <div className=\"buttonsContainer\">\n              <div className=\"align-horizontal\"></div>\n              <div className='horizontalMenu'>\n                <ul>\n                  {tabs.map(({name, key, link}, idx) => {\n                    const isActive = activeTab === link;\n                    return <li key={key || (typeof name === 'string' ? name : idx)} className={isActive ? \"activePage\" : \"\"}>\n                      <a href={link}>{name}</a>\n                    </li>\n                  })}\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n}\n","import * as React from 'react';\nimport { L, arrayToLookup } from '../../../utils/utils';\nimport { Course, CourseModule, Task } from 'kedbackend/models';\nimport { KnowledgeRequirementsTable } from \"../subcomponents/knowledge-requirements-table\";\nimport getIncludedIds from '../utils/get-included-ids';\nimport { AbilitiesBox } from \"../subcomponents/abilities-box\";\nimport { CentralContentBox } from \"../subcomponents/central-content-box\";\nimport { LearningGoalsList } from '../subcomponents/learning-goals-list';\nimport { TaskList } from '../subcomponents/task-list';\nimport { getCustomizedTask } from './get-customized-task';\n\n// Views\n\ninterface Props {\n  course: Course;\n  module: CourseModule;\n}\n\ninterface State {\n}\n\nexport class CourseModulePage extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  render() {\n    const { module, course } = this.props;\n    const incluedIds = getIncludedIds(module, course);\n    const learningTasks = module.taskIds\n      .map(id => course.tasks.find(t => t.id === id))\n      .filter(task => !!task)\n      .map(task => ({\n        id: task.id,\n        task: getCustomizedTask(module, task),\n        course,\n        name: task.name,\n        url: `#${encodeURIComponent(module.name.trim())}/${task.id}`, // Försättsbladets URL\n        courseName: course.name,\n        learningGoal: task.learningGoal || module.name,\n      }));\n    const assignmentTasks = learningTasks.filter(t => t.task && t.task.assignment);\n    const nonAssignmentTasks = learningTasks.filter(t => !t.task || !t.task.assignment);\n    const commonTasks = nonAssignmentTasks.filter(t => !t.task.learningGoal);\n    const learningGoals = arrayToLookup(\n      nonAssignmentTasks.filter(t => !!t.task.learningGoal),\n      t => t.learningGoal);\n    return <div>\n      <div className=\"sv-text-portlet sv-use-margins sv-skip-spacer\">\n        <div className=\"sv-text-portlet-content\">\n          <h1 className=\"h1\">{module.name}</h1>\n        </div>\n      </div>\n      <div className=\"sv-vertical sv-layout\">\n        <div dangerouslySetInnerHTML={{ __html: module.mandatoryContent }}>\n        </div>\n      </div>\n\n      <div className=\"sv-html-portlet sv-portlet\">\n        <div className=\"ked_boxed\">\n          <h3>Modulens kunskapskrav, förmågor och centrala innehåll</h3>\n          {(!!module.startWeek || !!module.endWeek) && <div className=\"week-period-div\">\n            <div>Startvecka</div>\n            <div>{module.startWeek || \"--\"}</div>\n            <div>Slutvecka</div>\n            <div>{module.endWeek || \"--\"}</div>\n            <br />\n          </div>}\n          <hr />\n\n          <KnowledgeRequirementsTable\n            title=\"I den här modulen bedöms följande kunskapskrav\"\n            requirements={course.knowledgeRequirements}\n            includedIds={incluedIds} />\n\n          <AbilitiesBox\n            title=\"Den här modulen behandlar följande förmågor\"\n            abilities={course.abilities.filter(a => incluedIds[a.id])} />\n\n          <CentralContentBox\n            title=\"Den här modulen behandlar följande centrala innehåll\"\n            centralContent={course.centralContent.filter(c => incluedIds[c.id])} />\n\n        </div>\n      </div>\n\n      {module.taskIds.length > 0 && <div className=\"sv-script-portlet sv-portlet\">\n        <div className=\"ked_boxed\">\n          {assignmentTasks.length === 0 ? undefined : <>\n            <h2>Inlämningsuppgifter</h2>\n            <hr />\n            <TaskList learningTasks={assignmentTasks} />\n          </>}\n          {nonAssignmentTasks.length === 0 ? undefined : <>\n            <h2>Uppgifter</h2>\n            <hr />\n            <LearningGoalsList\n              commonTasks={commonTasks}\n              learningGoals={Object.keys(learningGoals).map(learningGoal => ({\n                name: learningGoal,\n                learningTasks: learningGoals[learningGoal]\n              }))} />\n            </>}\n        </div>\n      </div>}\n      {module.resources.length > 0 && <div className=\"sv-html-portlet sv-portlet\">\n        <div className=\"ked_boxed\">\n          <h2>Resurser</h2>\n          <hr />\n          <div className=\"taskContainer\">{module.resources.map((r, idx) =>\n            <div className=\"align-horizontal\" key={idx}>\n              <div className=\"horizontalItem top\">\n                <a href={r.url}>{r.name}</a>\n              </div>\n            </div>)}\n          </div>\n        </div>\n      </div>}\n    </div>\n  }\n}\n","import { CourseModule, Task } from \"kedbackend/models\";\n\nexport function getCustomizedTask(module: CourseModule, task: Task) {\n  return module.taskCustomizations ?\n    {...task, ...module.taskCustomizations[task.id]} :\n    task;\n}\n","import * as React from 'react';\nimport { L, showError } from '../../../utils/utils';\nimport { CourseBanner } from \"./course-banner\";\nimport { Course, CourseModule, Task } from 'kedbackend/models';\nimport { parseHashQueryString } from \"../../../utils/query-string\";\nimport { CourseModulePage } from './course-module-page';\nimport { RunUpPage } from './run-up-page';\nimport { initManualScrollRestoration, restoreScrollPosition } from '../utils/manual-scroll-restoration';\nimport { hasWriteAccess, preserveImpersonationQuery } from '../../../access-control';\nimport { WeekPlanner } from \"../../weekplanner\";\nimport { TaskPage } from \"./task-page\";\nimport { getCustomizedTask } from './get-customized-task';\n\ninterface Props {\n  course: Course;\n  courseBuilderUrl: string;\n}\n\ninterface State {\n  module: CourseModule | null;\n  task: Task | null;\n}\n\n\ninitManualScrollRestoration();\n\nexport class CoursePage extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.onHashChange = this.onHashChange.bind(this);\n    const {module, task} = this.getModuleAndTaskFromHash();\n    this.state = {\n      module,\n      task\n    };\n  }\n\n  getModuleAndTaskFromHash() {\n    let split = (location.hash.substr(1) || \"\").split('/');\n    if (split.length > 0 && !split[0]) split = split.slice(1); // Allow leading slash #/module/task\n    const [moduleName, taskId] = split.map(part => decodeURIComponent(part));\n    let module = this.props.course.modules\n      .filter(m => (m.name || \"\")\n        .trim().toLowerCase() === (moduleName || \"\").trim().toLowerCase())[0] || null;\n    let task = taskId ?\n      this.props.course.tasks.find(t => t.id === taskId) || null :\n      null;\n    if (task && !module) {\n      // Resolve module by finding the module that holds the task:\n      module = this.getOrderedModules()\n        .filter(m => m.taskIds\n          .some(taskId => task.id === taskId))[0];\n    }\n    if (task && module) {\n      task = getCustomizedTask(module, task);\n    }\n    return {module, task};\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', this.onHashChange);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('hashchange', this.onHashChange);\n  }\n\n  onHashChange() {\n    const {module, task} = this.getModuleAndTaskFromHash();\n    this.setState({\n      module,\n      task\n    }, ()=>{\n      \n      let fallbackScrollPosition = undefined;\n      if (task) {\n        const taskAnchor = document.getElementById('ked-task-anchor');\n        if (taskAnchor) fallbackScrollPosition = (window.pageYOffset + taskAnchor.getBoundingClientRect().top);\n        else fallbackScrollPosition = 0;\n      }\n      restoreScrollPosition({fallbackScrollPosition});\n    });\n  }\n\n  getOrderedModules() {\n    const { course } = this.props;\n    const moduleOrder = course.moduleOrder || course.modules.map(m => m.id);\n    return moduleOrder\n      // Map ordered id to module\n      .map(id => course.modules.find(m => m.id === id))\n      // Ignore entries that only exists in moduleOrder but not in modules\n      .filter(m => !!m)\n      // Append modules at end that are not listed in moduleOrder\n      .concat (course.modules.filter(m => !moduleOrder.find(id => m.id === id)));\n  }  \n\n  render() {\n    const {course, courseBuilderUrl} = this.props;\n    const {module, task} = this.state;\n    const orderedModules = this.getOrderedModules();\n    return <div>\n      <CourseBanner\n        title={course.name + \" - \" + course.points + \"p\"}\n        backgroundImage={(course.images.find(img => img.id === course.imageId) || {url:''}).url}\n        tabs={[{name: \"Upptakt\" as string | JSX.Element, link: \"#\", key: \"Upptakt\"}]\n          .concat(orderedModules.map(({ name }) => ({ name, link: \"#\" + encodeURIComponent(name), key: name })))\n          .concat(course.workFlowLink ? [{\n            name: \"Arbetsgång\",\n            key: \"workflow\",\n            link: course.workFlowLink\n          }] : [])\n          .concat(hasWriteAccess(course) ? [{\n            name: <span><i className=\"fa fa-pencil\" aria-hidden=\"true\"></i> Redigera denna kurs</span>,\n            key: \"edit\",\n            link: `${preserveImpersonationQuery(courseBuilderUrl, {})}#/courses/${course.id}/edit`}] : [])\n\n        }\n        activeTab={module ? \"#\"+encodeURIComponent(module.name) : \"#\"}\n      />\n      <div className=\"sv-row sv-layout\"\n        //id=\"ked-task-anchor\" // For window.scrollTo to position here!. Skipping this. scroll to top instead!\n      >\n        <div className=\"sv-layout sv-skip-spacer sv-column-12\">\n          <div className=\"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer\">\n            <div className=\"pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer\">\n              <div className=\"sv-row sv-layout sv-skip-spacer\">\n                <div className=\"sv-layout sv-skip-spacer sv-column-7\">\n                  {task ?\n                    <TaskPage task={task} course={course} /> :\n                   module ?\n                    <CourseModulePage course={course} module={module} /> :\n                    <RunUpPage course={course} />}\n                </div>\n                <div className=\"sv-layout sv-column-5\">\n                  <div className=\"sv-vertical sv-layout sv-skip-spacer\">\n                    <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n                      <WeekPlanner viewCourseUrl={''} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { L } from '../../../utils/utils';\nimport { Course, CourseModule } from 'kedbackend/models';\nimport env from '../../../globals/KED.env';\n// Views\nimport { AbilitiesBox } from '../subcomponents/abilities-box';\nimport { CentralContentBox } from '../subcomponents/central-content-box';\nimport { KnowledgeRequirementsTable } from '../subcomponents/knowledge-requirements-table';\nimport { ResourceList } from '../subcomponents/resource-list';\n\ninterface Props {\n  course: Course;\n}\n\ninterface State {\n}\n\nexport class RunUpPage extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {}\n  }\n\n  render() {\n    const { course } = this.props;\n    return <div>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n          {course.runUpText && <div>\n            <h1>Upptakt</h1>\n            <p className=\"normal\" dangerouslySetInnerHTML={{__html: course.runUpText}} />\n          </div>}\n          {course.responsibleTeachers && course.responsibleTeachers.length > 0 && <div>\n            <h2>Lärare</h2>\n            {course.responsibleTeachers.map((teacher, i) =>\n              <p key={i}><a href={interpretTeacherUrl(teacher.url)}>{teacher.name}</a></p>\n            )}\n          </div>}\n          {course.workFlowLink && <a className=\"btn\" href={course.workFlowLink}>Arbetsgång</a>}\n          <br />\n          <br />\n          <AbilitiesBox\n            title=\"Ämnets förmågor\"\n            subTitle=\"Förmågor\"\n            abilities={course.abilities}\n            className=\"larger\" />\n\n          <CentralContentBox\n            title=\"Kursens centrala innehåll\"\n            subTitle=\"Centralt innehåll\"\n            centralContent={course.centralContent}\n            className=\"larger\" />\n\n          <KnowledgeRequirementsTable\n            title=\"Kursens kunskapskrav\"\n            requirements={course.knowledgeRequirements}\n            className=\"larger\" />\n\n        </div>\n        {course.resources.length > 0 && <div className=\"sv-html-portlet sv-portlet\">\n          <div className=\"ked_boxed\">\n            <h2>Resurser</h2>\n            <hr />\n            <ResourceList resources={course.resources} />\n          </div>\n        </div>}\n      </div>\n  }\n}\n\nfunction interpretTeacherUrl(url: string) {\n  if (url.indexOf(':') === -1 && url.indexOf('@') >= 0) return \"mailto:\" + url;\n  return url;\n}\n","import * as React from 'react';\nimport env from '../../../globals/KED.env';\nimport { Assignment } from 'kedbackend/models';\nimport { showError, compareProp, compareProps } from '../../../utils/utils';\nimport { Spinner } from '../../course-builder/sub-components/spinner';\nimport moment from 'moment';\nimport { HttpError } from 'kedbackend/client';\nimport { hasWriteAccess, isTeacherAtSchool } from '../../../access-control';\nimport download from 'downloadjs';\n\nconst MAX_FILE_SIZE_MB = 10;\nconst ALLOWED_EXTENSIONS = [\n  \".pdf\",\n  \".odt\",\n  \".docx\"\n];\n\ninterface Props {\n  courseId: string;\n  taskId: string;\n  school: string;\n}\n\ninterface State {\n  assignments: Assignment[];\n  loading: boolean;\n  uploadingFile?: File;\n  error?: string;\n}\n\nexport class TaskAssignments extends React.Component<Props, State> {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      assignments: [],\n      loading: true\n    };\n  }\n\n  setStatePromised(cb: (prevState: Readonly<State>, props: Props) => Partial<State>) {\n    return new Promise(resolve => super.setState(cb as any, resolve));\n  }  \n\n  componentDidMount() {\n    this.load();\n  }\n\n  async componentWillReceiveProps(nextProps: Props) {\n    try {\n      if (nextProps.taskId !== this.props.taskId ||\n          nextProps.courseId !== this.props.courseId)\n      {\n        await this.setStatePromised(()=>({\n          assignments: [],\n          loading: true\n        }));\n        await this.load();\n      }\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  async load() {\n    try {\n      const client = env.kedBackendClient.http;\n      const {courseId, taskId, school} = this.props;\n      const teacherAtSchool = isTeacherAtSchool(school);\n      const res = await (teacherAtSchool ?\n        client.get(`assignments/${courseId}/${taskId}`) :\n        client.get(`assignments/${courseId}/${taskId}/${env.currentUser.mail}`));\n      if (res.status !== 200) {\n        throw new HttpError(res.status, await res.text());\n      }\n\n      const assignments = await res.json() as Assignment[];\n      this.setState({\n        error: null,\n        loading: false,\n        assignments\n      });\n    } catch (error) {\n      this.setState({\n        loading: false,\n        error: `Kunde inte ladda inlämningsuppgifter`,\n        assignments: []\n      });\n      console.error(error);\n    }\n  }\n\n  onDrag (ev: React.DragEvent<HTMLDivElement>) {\n    ev.stopPropagation();\n    ev.preventDefault();\n    ev.dataTransfer.dropEffect = 'copy';\n  }\n  \n  async onDrop(ev: React.DragEvent<HTMLDivElement>) {\n    try {\n      ev.stopPropagation();\n      ev.preventDefault();\n      const file = ev.dataTransfer.files[0];\n      if (this.state.assignments.some(a =>\n        a.user === env.currentUser.mail &&\n        a.filename === file.name))\n      {\n        if (!confirm(`Ersätta befintlig fil (${file.name})?`)) {\n          return;\n        }\n      }\n      if (this.props.school.toLowerCase() !== env.currentUser.school.toLowerCase()) {\n        if (!confirm(`Uppgiften tillhör en annan skola (${this.props.school}).\\n`+\n          `Vill du ändå lämna in ditt arbete här?`))\n        {\n          return;\n        }\n      }\n      this.setState({uploadingFile: file});\n      await this.upload(file);\n      await this.load();\n      this.setState({\n        uploadingFile: null\n      });\n    } catch (error) {\n      this.setState({\n        error: \"Kunde inte ladda upp filen. \" + (error.message || error),\n        uploadingFile: null\n      });\n      console.error(error);\n    }\n  }\n  \n  async upload(file: File) {\n    const client = env.kedBackendClient.http;\n    const {courseId, taskId} = this.props;\n    const {mail} = env.currentUser;\n    if (file.size > MAX_FILE_SIZE_MB * 1024 * 1024) {\n      throw new Error(`Filen får inte vara större än ${MAX_FILE_SIZE_MB} MB`);\n    }\n    const lowerFilename = file.name.toLowerCase();\n    if (!ALLOWED_EXTENSIONS.some(ext => lowerFilename.endsWith(ext))) {\n      throw new Error(`Filens ändelse måste vara ${ALLOWED_EXTENSIONS.join(' / ')}`);\n    }\n    const body = new FormData();\n    body.append('files', file);\n    const res = await env.kedBackendClient.http.fetch(\n      `assignments/${courseId}/${taskId}/${mail}`,\n      'put',\n      {},\n      {userDisplayName: env.currentUser.displayName},\n      {\n        body\n      });\n    if (res.status !== 200) {\n      throw new HttpError(res.status, await res.text());\n    }\n  }\n\n  async download(file: Assignment) {\n    try {\n      const res = await env.kedBackendClient.http.fetch(file.mediaLink, 'get', {});\n      if (res.status >= 400) {\n        throw new HttpError(res.status, await res.text());\n      }\n      const blob = await res.blob();\n      download(blob, file.filename, file.contentType);\n    } catch (err) {\n      this.setState({error: \"Kunde inte ladda ned filen. \" + (err.message || err)});\n      console.error(err);\n    }    \n  }\n\n  async delete(url: string) {\n    try {\n      await this.setStatePromised(({assignments}) => ({assignments: assignments.map(a => a.mediaLink === url ?\n        {...a, metadata: {...a.metadata, $meta: 'delete'}} : {...a})}));\n      const res = await env.kedBackendClient.http.fetch(url, 'delete', {});\n      if (res.status >= 400) {\n        throw new HttpError(res.status, await res.text());\n      }\n      await this.load();\n    } catch (err) {\n      this.setState({error: \"Kunde inte ta bort filen. \" + (err.message || err)});\n      console.error(err);\n    }\n  }\n\n  render() {\n    const {courseId, taskId, school} = this.props;\n    const {loading, assignments, error, uploadingFile} = this.state;\n    const teacherAtThisSchool = isTeacherAtSchool(school);\n    let files = [...assignments];\n    if (uploadingFile) {\n      const virtualFile: Assignment = {\n        courseId,\n        taskId,\n        filename: uploadingFile.name,\n        size: uploadingFile.size,\n        user: env.currentUser.mail,\n        contentType: uploadingFile.type,\n        uploadDate: Date.now(),\n        mediaLink: `assignments/${courseId}/${taskId}/${env.currentUser.mail}/${uploadingFile.name}`,\n        metadata: {$meta: 'add'} as {[key: string]: string}\n      };\n      files = files.filter(file => file.mediaLink !== virtualFile.mediaLink);\n      files = [...files, virtualFile];\n    }\n    files = files.sort(compareProps([\"user\", \"filename\"], [\"sv\", \"en\"], {sensitivity: 'base'}));\n    \n    return (\n      <div onDragOver={ev => this.onDrag(ev)} onDrop={ev=>this.onDrop(ev)}>\n        {error ? <>\n          <p className=\"error\">{error}</p>\n        </>: undefined}\n        {loading ? <>\n          <Spinner /> Laddar inlämnade filer...\n        </> : files.length === 0 ?\n          teacherAtThisSchool ?\n            <p>Ingen elev har lämnat in något arbete ännu.</p> :\n            undefined\n        : <>\n          <table className=\"task-assignments-table\"><thead><tr>\n            {teacherAtThisSchool ? <th>Elev</th> : undefined}\n            <th>Filnamn</th>\n            <th>Inlämnat den</th>\n            <th>Status</th>\n            <th />\n          </tr></thead><tbody>{\n            files.map(file => <tr\n              key={file.mediaLink}\n              style={file.metadata.$meta ? {opacity: 0.5}: {}}\n            >\n              {teacherAtThisSchool ? <td>\n                <a href={`mailto:${file.user}`}>\n                  {file.metadata.userDisplayName || file.user}\n                </a>\n              </td> : undefined}\n              <td><a href=\"#\" onClick={ev => {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.download(file);\n              }}>{file.filename}</a></td>\n              <td>{moment(file.uploadDate).format('YYYY-MM-DD HH:mm')}</td>\n              <td>{file.metadata.$meta === 'add' ?\n                <><Spinner /> Laddar upp...</>:\n                file.metadata.$meta === 'delete' ?\n                <><Spinner /> Tar bort...</> :\n                <><i className=\"fa fas fa-check\" /> Inlämnad</>\n              }</td>\n              <td>{!file.metadata.$meta && file.user === env.currentUser.mail &&\n                <a href=\"#\" onClick={ev => {\n                  ev.stopPropagation();\n                  ev.preventDefault();\n                  this.delete(file.mediaLink);\n                }}><i className=\"fa fa-trash\"/></a>}</td>\n            </tr>)\n          }</tbody></table>\n        </>}\n        {teacherAtThisSchool ? undefined : <div className=\"drop-zone task-assignment-drop-zone\">\n            Droppa ditt färdiga arbete här<br/>\n            <b>(.pdf, .docx, .odt)</b>)\n          </div>}\n      </div>\n    );\n\n  }\n}","import * as React from 'react';\nimport { Task, Course, UserTask } from 'kedbackend/models';\nimport { AbilitiesBox } from \"../subcomponents/abilities-box\";\nimport { CentralContentBox } from \"../subcomponents/central-content-box\";\nimport { KnowledgeRequirementsTable } from \"../subcomponents/knowledge-requirements-table\";\nimport { userTasksRepo } from '../../../repos/user-tasks-repo';\nimport { L } from '../../../utils/utils';\nimport { createUUID, DocumentAccess } from 'kedbackend/client';\nimport env from '../../../globals/KED.env';\nimport moment from 'moment';\nimport { TaskAssignments } from './task-assignments';\nimport { isTeacherAtSchool } from '../../../access-control';\n\ninterface Props {\n  task: Task\n  course: Course\n}\n\ninterface State {\n  userTask: UserTask | null | undefined;\n  weekPlannerWeek: number;\n}\n\nexport class TaskPage extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTask: undefined,\n      weekPlannerWeek: moment().week()\n    };\n    this.onUserTasksChanged = this.onUserTasksChanged.bind(this);\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onUserTasksChanged);\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onUserTasksChanged);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.task.id !== this.props.task.id) {\n      const userTask = userTasksRepo.mem.items.find(ut => ut.task && ut.task.length > 0 && ut.task[0].id === nextProps.task.id) || null;\n      this.setState({\n        userTask,\n        weekPlannerWeek: moment(userTasksRepo.persistedState.weekDate).week()\n      });\n    }\n  }\n\n  onUserTasksChanged(userTasks: UserTask[]) {\n    const userTask = userTasks.find(ut => ut.task && ut.task.length > 0 && ut.task[0].id === this.props.task.id) || null;\n    this.setState({\n      userTask,\n      weekPlannerWeek: moment(userTasksRepo.persistedState.weekDate).week()\n    });\n  }\n\n  async toggleTask () {\n    const { weekDate } = userTasksRepo.persistedState;\n    const { userTask } = this.state;\n    const { course, task } = this.props;\n    const module = course.modules.find(m => m.taskIds.some(id => id === task.id));\n    if (!module) return; // Oh uh!\n    if (userTask === undefined) return; // Not yet loaded.\n    if (!userTask) {\n      let latestTimeStamp = Math.max.apply(\n        Math.max,\n        [weekDate].concat(userTasksRepo.mem.items.map(t => t.dateTime)));\n\n      const userTask: UserTask = {\n        id: createUUID(),\n        courseName: course.name,\n        dateTime: latestTimeStamp + 2000,\n        learningGoal: task.learningGoal || module.name,\n        name: task.name,\n        url: task.url,\n        task: [task],\n        course: [course],\n        acl: [\n          // Default ACL: Let user self have full control over this item:\n          new DocumentAccess(\"email\", env.currentUser.mail, \"S\"),\n          // Additional ACL: Let employees on same school have read access to it.\n          // This currently only applies to tasks that refer to course tasks (not own tasks!)\n          new DocumentAccess(\"schoolRole\", `${env.currentUser.school}/EMPLOYEE`, \"R\")\n        ].map(ac => ac.toString())\n      };\n      if (task.deadline) {\n        userTask.deadline = task.deadline;\n      }\n      await Promise.all([\n        userTasksRepo.setWeekPlannerBoxOpen(this.props.course.name, true),\n        userTasksRepo.insert([userTask])]);\n    } else {\n      await userTasksRepo.delete([userTask.id]);\n    }\n  }\n\n  render() {\n    const { task, course } = this.props;\n    const { userTask, weekPlannerWeek } = this.state;\n    const abilities = task.abilities.map(a => course.abilities.find(ab => ab.id === a.id)).filter(a => !!a);\n    const centralContent = task.centralContent.map(c => course.centralContent.find(cc => cc.id == c.id)).filter(c => !!c);\n    const requirements = task.knowledgeRequirements.map(k => course.knowledgeRequirements.find(kr => kr.id === k.id)).filter(k => !!k);\n    const isWorking = userTask && (userTask.$meta === 'adding' || userTask.$meta === 'deleting');\n    const currentWeek = moment().week();\n    const forWeekString = weekPlannerWeek === currentWeek ? \"loggboken\" :\n      weekPlannerWeek === currentWeek + 1 ? L`vald vecka (nästa vecka)` :\n      weekPlannerWeek === currentWeek - 1 ? L`vald vecka (förra veckan)` :\n      L`vald vecka (v ${weekPlannerWeek})`;\n    const deadlineTooLate = task.deadline && moment(task.deadline).endOf('day') < moment();\n\n    return <div>\n      <div className=\"sv-text-portlet sv-use-margins sv-skip-spacer\">\n        <div className=\"sv-text-portlet-content\">\n          <h1 className=\"h1\">{task.name}</h1>\n        </div>\n      </div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        {task.content && <>\n          <div dangerouslySetInnerHTML={{__html: task.content}} />\n        </>}\n        {task.learningGoal && <div><h2>Uppgiftens lärandemål</h2>\n          <p>{task.learningGoal}</p>\n        </div>}\n        {task.url && <a href={task.url} className=\"btn btn-large\">Gå till uppgiften</a>}\n      </div>\n      <br/>\n      {task.assignment ? <>\n        <h2>Inlämningsuppgift</h2>\n        {isTeacherAtSchool(course.school) ?\n          <p>Här kan du som lärare se elevernas inlämnade arbeten.\n          </p> : <>\n            <p>Det här är en inlämningsuppgift. Lämna in ditt arbete som en pdf, doc eller odt fil\n              genom att dra det till fältet under.\n            </p>\n            {task.deadline ? <p><b>\n              Den här uppgiften {deadlineTooLate ? 'skulle varit inlämnad ' : 'skall vara inlämnad '}\n              {moment(task.deadline).format('YYYY MM DD')}\n            </b></p> : undefined}\n            </>}\n          <TaskAssignments\n            courseId={course.id}\n            taskId={task.id}\n            school={course.school}\n           />\n        <br/>\n      </> : undefined}\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n        {abilities.length > 0 && <AbilitiesBox\n            title=\"Den här uppgiften behandlar följande förmågor\"\n            className=\"larger\"\n            headerOpen={false}\n            abilities={abilities} />}\n\n        {centralContent.length > 0 && <CentralContentBox\n            title=\"Den här uppgiften behandlar följande centrala innehåll\"\n            className=\"larger\"\n            headerOpen={false}\n            centralContent={centralContent} />}\n\n        {requirements.length > 0 && <KnowledgeRequirementsTable\n          title=\"I den här uppgiften bedöms följande kunskapskrav\"\n          className=\"larger\"\n          headerOpen={true}\n          requirements={requirements}\n          />}\n      </div>      \n      <hr/>\n      {userTask !== undefined && <div className=\"taskContainer\">\n          <div className=\"align-horizontal\">\n            <div className=\"horizontalItem top\">\n                <div\n                  className={`selectedBox${userTask && userTask.$meta !== 'deleting' ? ' selected' : ''}`}\n                  style={isWorking ? {opacity: 0.5}: {}}\n                  onClick={()=>!isWorking && this.toggleTask()}>\n                </div>\n            </div>\n            <div className=\"horizontalItem top\">\n              {userTask ?\n                L`Ta bort uppgiften från ${forWeekString}`:\n                L`Lägg till uppgiften i ${forWeekString}`}\n            </div>\n          </div>\n        </div>}\n      <hr/>\n      {task.resources && task.resources.length > 0 && <div className=\"sv-html-portlet sv-portlet\">\n        <h2>Resurser kopplade till uppgiften</h2>\n        <div className=\"taskContainer\">\n          {task.resources.map((r, idx) =>\n            <div key={idx} className=\"align-horizontal\">\n              <div className=\"horizontalItem top\">\n                <a href={r.url}>{r.name}</a>\n              </div>\n            </div>\n          )}\n        </div>\n        <br />\n      </div>}\n\n \n      <br /><br /><br /><br /><br /><br /><br /><br /><br />\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { L, showError } from '../../utils/utils';\nimport { ErrorSuccessFeedback } from '../../utils/error-success-feedback';\nimport env from '../../globals/KED.env';\nimport { Course } from 'kedbackend/models';\nimport { loadCourse } from \"../course-builder/utils\";\nimport { Spinner } from \"../course-builder/sub-components/spinner\";\nimport { CoursePage } from \"./course-page\";\nimport { parseQueryString } from \"../../utils/query-string\";\nimport { ListCoursesPage } from '../list-courses/list-courses-page';\n\ninterface Props {\n  courseBuilderUrl?: string;\n}\n\ninterface State {\n  course: Course | null,\n  isLoading: boolean\n}\n\nexport class CourseViewer extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      course: null,\n      isLoading: true\n    }\n  }\n\n  componentWillMount() {\n    this.load().catch(showError)\n      .then(()=>this.setState({isLoading: false}));\n  }\n\n  async load() {\n    const courseId = parseQueryString(location.search)[\"courseId\"];\n    const course = courseId ? await loadCourse (courseId) : null;\n    this.setState({course});\n  }\n\n  render() {\n    return <div className=\"course-viewer\">\n      {this.state.isLoading ?\n        <Spinner /> :\n        this.state.course ?\n          <CoursePage\n            course={this.state.course} \n            courseBuilderUrl={this.props.courseBuilderUrl} /> :\n          <ListCoursesPage />\n      }\n      <ErrorSuccessFeedback />\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { Ability } from 'kedbackend/models';\n\ninterface Props {\n  title: string;\n  subTitle?: string;\n  abilities: Ability[];\n  className?: string;\n  headerOpen?: boolean;\n}\n\ninterface State {\n  headerOpen: boolean;\n}\n\nexport class AbilitiesBox extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      headerOpen: props.headerOpen || false\n    };\n  }\n\n  render() {\n    const { title, subTitle, abilities, className } = this.props;\n    const { headerOpen } = this.state;\n\n    return <div className={(className||'') + \" openClose\" + (headerOpen ? \" open\" : \"\")}>\n      <div className=\"openHeader\" onClick={() => this.setState({ headerOpen: !this.state.headerOpen })}>\n        <p>{title}</p>\n      </div>\n      <div className=\"openContent\">\n        <div className=\"abilityList\">\n          {subTitle && <div className=\"contentHeader\">\n            <h5>{subTitle}</h5>\n          </div>}\n          {abilities.map(a =>\n            <div key={a.id} className=\"contentPart\">\n              <div className=\"contentText\">\n                <p dangerouslySetInnerHTML={{__html: a.name}} />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>;\n  }\n}\n","import * as React from 'react';\nimport { CentralContent } from 'kedbackend/models';\n\ninterface Props {\n  title: string;\n  subTitle?: string;\n  centralContent: CentralContent[];\n  className?: string;\n  headerOpen?: boolean;\n}\n\ninterface State {\n  headerOpen: boolean;\n}\n\nexport class CentralContentBox extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      headerOpen: props.headerOpen || false\n    };\n  }\n\n  render() {\n    const { title, subTitle, centralContent, className } = this.props;\n    const { headerOpen } = this.state;\n\n    return <div className={(className || '') + \" openClose\" + (headerOpen ? \" open\" : \"\")}>\n      <div className=\"openHeader\" onClick={() => this.setState({ headerOpen: !this.state.headerOpen })}>\n        <p>{title}</p>\n      </div>\n      <div className=\"openContent\">\n        <div className=\"abilityList\">\n          {subTitle && <div className=\"contentHeader\">\n            <h5>{subTitle}</h5>\n          </div>}\n          {centralContent.map(cc =>\n            <div key={cc.id} className=\"contentPart\">\n              <div className=\"contentText\">\n                <p dangerouslySetInnerHTML={{__html: cc.name}} />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>;\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  visible: boolean;\n  text: string;\n  className?: string;\n  onConfirm: ()=>void;\n  onCancel: ()=>void;\n}\n\nexport function Confirmation (props: Props) {\n  return <div\n    className={`confirmation-box ${props.className}${props.visible ? \" visible\" : \"\"}`}>\n    <p>{props.text}</p>\n    <button onClick={()=>props.onConfirm()}>OK</button>\n    <button onClick={()=>props.onCancel()}>Avbryt</button>\n  </div>;\n}\n","import * as React from 'react';\nimport { KnowledgeRequirement } from 'kedbackend/models';\nimport { OpenCloseBox } from \"../../utility-components/open-close-box\";\n\ninterface Props {\n  title: string;\n  className?: string;\n  requirements: KnowledgeRequirement[];\n  includedIds?: {[id: string] : true};\n  headerOpen?: boolean;\n}\n\ninterface State {\n}\n\nexport class KnowledgeRequirementsTable extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const { title, requirements, className, includedIds, headerOpen } = this.props;\n\n    const columns = [\"E\", \"C\", \"A\"];\n    const rows: KnowledgeRequirement[][] = [];\n    const reqs = requirements.slice();\n    let row: KnowledgeRequirement[] | null = null;\n    while (true) {\n      row = columns.map(grade => {\n        const pNext = reqs.findIndex(r => r.gradeStep.toUpperCase() === grade);\n        if (pNext < 0) return null;\n        const rv = reqs[pNext];\n        reqs.splice(pNext, 1);\n        return includedIds ?\n          (includedIds[rv.id] ? rv : undefined) :\n          rv;\n      });\n      if (row.every(r => r === null))\n        break;\n      if (!row.every(r => !r)) {\n        rows.push(row);\n      }\n    }\n\n    return <OpenCloseBox title={<p>{title}</p>} className={className} headerOpen={headerOpen}>\n      <table>\n        <thead>\n          <tr>\n            {columns.map(c => <th key={c}>{c}</th>)}\n          </tr>\n        </thead>\n        <tbody>\n          {rows.map((row,i) =>\n            <tr key={i}>\n              {row.map((column,j) =>\n                <td key={j} dangerouslySetInnerHTML={{__html: column ? column.name : \"\"}} />\n              )}\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </OpenCloseBox>\n  }\n}\n","import * as React from 'react';\nimport { LearningModuleTask, TaskList } from './task-list';\n\ninterface Props {\n  commonTasks: LearningModuleTask[]\n  learningGoals: LearningGoal[]\n}\n\nexport interface LearningGoal {\n  name: string;\n  learningTasks: LearningModuleTask[];\n}\n\nexport class LearningGoalsList extends React.Component<Props> {\n  render() {\n    const {commonTasks, learningGoals} = this.props;\n    return <div>{learningGoals.map(lg => <div key={lg.name}>\n      <h5>{lg.name}</h5>\n      <TaskList learningTasks={lg.learningTasks} />\n    </div>)}\n    {commonTasks.length > 0 && <div>\n      {learningGoals.length > 0 && <h5>Övergripande</h5>}\n      <TaskList learningTasks={commonTasks} />\n    </div>}\n    </div>;\n  }\n}","import * as React from 'react';\nimport {Resource} from 'kedbackend/models';\n\ninterface Props {\n  resources: Resource[];\n}\n\nexport class ResourceList extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n  }\n\n  render() {\n    const {resources} = this.props;\n    return <div>\n      <div className=\"taskContainer\">\n        {resources.map((resource, idx) => \n          <div className=\"align-horizontal\" key={idx}>\n            <div className=\"horizontalItem top\">\n              <a href={resource.url}>{resource.name}</a>\n            </div>\n          </div>)}\n     </div>\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { Course, CourseModule, Task, UserTask } from 'kedbackend/models';\nimport env from '../../../globals/KED.env';\nimport { WeekPlannerPersistedState } from \"../../weekplanner/weekplanner-persisted-state\";\nimport moment from 'moment';\nimport { createUUID, BatchRunner, DocumentAccess } from 'kedbackend/client';\nimport { userTasksRepo } from '../../../repos/user-tasks-repo';\nimport { arrayToMap, L } from '../../../utils/utils';\nimport { Spinner } from '../../course-builder/sub-components/spinner';\nimport { Confirmation } from './confirmation';\n\ninterface Props {\n  learningTasks: LearningModuleTask[]\n}\n\ninterface State {\n  weekDate: number;\n  userTasks: UserTask[];\n  confirmations: string[];\n}\n\nexport interface LearningModuleTask {\n  id: string;\n  name: string;\n  url: string;\n  /** courseName\n   * For KG: courseName\n   * For KS: Subject name\n   */\n  courseName: string;\n  /** learningGoal\n   * For KG: module name or learning goal of the task\n   * For KS/step-course: course name\n   * For KS/theme-course: learning goal\n   */\n  learningGoal: string;\n  /** Step\n   * Only present in KS/step-course\n   */\n  step?: number;\n  /** task\n   * Only for courses built by coursebuilder\n   */\n  task?: Task;\n  /** course\n   * Only for courses built by coursebuilder\n   */\n  course?: Course;\n}\n\nexport class TaskList extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTasks: [],\n      weekDate: Date.now(),\n      confirmations: []\n    }\n    this.onChange = this.onChange.bind(this);    \n  }\n\n  onChange (userTasks: UserTask[], persisted: WeekPlannerPersistedState) {\n    if (persisted.weekDate !== this.state.weekDate) {\n      this.setState({\n        confirmations: []\n      })\n    }\n    this.setState({\n      userTasks,\n      weekDate: persisted.weekDate\n    });\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onChange);\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onChange);\n  }\n\n  async toggleTask (learningTask: LearningModuleTask) {\n    const userTasks = this.state.userTasks.filter(ut => {\n      return learningTask.task ?\n        ut.task && ut.task.some(t => t.id === learningTask.id) :\n        ut.siteVisionPageId === learningTask.id;\n    });\n    const {weekDate} = this.state;\n    \n    if (userTasks.length === 0) {\n      // No task matches this learningModuleTask - not present in weekplanner.\n      let latestTimeStamp = Math.max.apply(\n        Math.max,\n        [weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n      const userTask: UserTask = {\n        id: createUUID(),\n        courseName: learningTask.courseName,\n        dateTime: latestTimeStamp + 2000,\n        learningGoal: learningTask.learningGoal,\n        name: learningTask.name,\n        url: learningTask.url,\n        acl: [\n          // Default ACL: Let user self have full control over this item:\n          new DocumentAccess(\"email\", env.currentUser.mail, \"S\"),\n          // Additional ACL: Let employees on same school have read access to it.\n          // This currently only applies to tasks that refer to course tasks (not custom tasks!)\n          new DocumentAccess(\"schoolRole\", `${env.currentUser.school}/EMPLOYEE`, \"R\")\n        ].map(ac => ac.toString())\n      };\n      if (learningTask.task && learningTask.task.deadline) {\n        userTask.deadline = learningTask.task.deadline;\n      }\n      if (learningTask.task && learningTask.course) {\n        userTask.task = [learningTask.task];\n        userTask.course = [learningTask.course];\n      } else {\n        userTask.siteVisionPageId = learningTask.id;\n      }\n      if (learningTask.step) {\n        userTask.step = learningTask.step;\n      }\n      await Promise.all([\n        userTasksRepo.setWeekPlannerBoxOpen(learningTask.courseName, true),\n        userTasksRepo.insert([userTask])]);\n    } else {\n      // Already present in weekplanner. It's time to delete those that matched us.\n      await userTasksRepo.delete(userTasks.map(t => t.id));\n    }\n    \n  }\n\n  render() {\n    const {learningTasks} = this.props;\n    const userTasks = arrayToMap(this.state.userTasks, ut => ut.task && ut.task.length > 0 ?\n      ut.task.map(t => t.id)[0] : // course-builder tasks looked up by id\n      ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks\n      ut.url);\n    const {confirmations} = this.state;\n    const weekPlannerWeek = moment(this.state.weekDate).week();\n    const currentWeek = moment().week();\n    const forWeekString = weekPlannerWeek === currentWeek ? \"\" :\n    weekPlannerWeek === currentWeek + 1 ? L`för nästa vecka (v${weekPlannerWeek})` :\n    weekPlannerWeek === currentWeek - 1 ? L`för förra veckan (v${weekPlannerWeek})` :\n    L`för vecka ${weekPlannerWeek}`;\n\n    return <div className=\"taskContainer\">\n      {learningTasks.map((learningTask, idx) => {\n        const taskLookupId = learningTask.id;\n        const userTask = userTasks[taskLookupId] || {$meta: 'deleted'} as Partial<UserTask>; // No exist = $meta: 'deleted'\n        const isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';\n        const selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';\n        const describedAction = selected ?\n                  L`Ta bort uppgiften från egen veckoplanering ${forWeekString}` :\n                  L`Lägg till uppgiften i egen veckoplanering ${forWeekString}`;\n        const confirmationVisible =\n          confirmations.some(tid => taskLookupId === tid);\n\n        return <div key={learningTask.id}><div key={taskLookupId} className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n              <div\n                className={`selectedBox${selected ? ' selected' : ''}`}\n                style={isWorking ? {opacity: 0.5}: {}}\n                onClick={()=>!isWorking && weekPlannerWeek === currentWeek ?\n                  this.toggleTask(learningTask) :\n                  confirmationVisible ? \n                    this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)}) :\n                    this.setState({confirmations: [...confirmations].concat(taskLookupId)})}\n                title={describedAction}>\n              </div>\n          </div>\n          <div className=\"horizontalItem top\">\n            <a href={learningTask.url}>{learningTask.name}</a>\n          </div>\n        </div>\n        <Confirmation\n            visible={confirmationVisible}\n            text={describedAction}\n            onConfirm={()=>{\n              this.toggleTask(learningTask);\n              this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)});\n            }}\n            onCancel={()=>{\n              this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)});\n            }} />\n        </div>\n        }\n      )}\n    </div>\n  }\n}\n","import {CourseModule, Course} from 'kedbackend/models';\n\nexport default function getIncludedIds (module: CourseModule, course: Course) {\n  const result = {};\n  course.tasks.filter(t => module.taskIds.indexOf(t.id) !== -1).forEach(task => {\n    task.abilities.forEach(({id}) => result[id] = true);\n    task.centralContent.forEach(({id}) => result[id] = true);\n    task.knowledgeRequirements.forEach(({id}) => result[id] = true);\n  });\n  return result;\n}\n","let initialized = false;\n\nexport function initManualScrollRestoration() {\n  if (!initialized) {\n    initialized = true;\n    document.documentElement.addEventListener('click', ev => {\n      const target = ev.target as HTMLElement;\n      if (target && target.tagName === 'A') {\n        history.replaceState({ pageYOffset: window.pageYOffset }, null, null);\n      }\n    });\n    if (history.scrollRestoration) history.scrollRestoration = 'manual';\n  }\n}\n\nexport function restoreScrollPosition ({fallbackScrollPosition}) {\n  if (history.state && history.state.pageYOffset !== undefined) {\n    window.scrollTo(0, history.state.pageYOffset);\n  } else if (fallbackScrollPosition !== undefined) {\n    window.scrollTo(0, fallbackScrollPosition);\n  }\n}\n\n","import * as React from 'react';\nimport { CourseBanner } from \"../course-viewer/course-page/course-banner\";\nimport { ListCourses } from './list-courses';\nimport { L } from \"../../utils/utils\";\nimport env from '../../globals/KED.env';\n\nexport function ListCoursesPage() {\n  return <div className=\"sv-html-portlet sv-portlet\">\n    <CourseBanner\n      title={env.currentUser.school}\n      backgroundImage=\"\"\n      tabs={[{ name: \"Skolans kurser\", link: \"#\" }]}\n      activeTab={\"#\"}\n    />\n    <div className=\"sv-row sv-layout\">\n      <div className=\"sv-layout sv-skip-spacer sv-column-12\">\n        <div className=\"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer\">\n          <ListCourses />\n        </div>\n      </div>\n    </div>\n  </div>\n}","import * as React from 'react';\nimport { Course, School, UserHiddenCourse } from 'kedbackend/models';\nimport env from '../../globals/KED.env';\nimport { showError, flatten, compareProp, showInfo, L } from \"../../utils/utils\";\nimport { createUUID } from 'kedbackend/client';\nimport { Spinner } from \"../course-builder/sub-components/spinner\";\nimport { parseQueryString, generateQueryString } from \"../../utils/query-string\";\nimport { preserveImpersonationQuery } from '../../access-control/index';\nimport { hiddenCoursesRepo, CourseWithHiddenState } from '../../repos/hidden-courses-repo';\n\ninterface Props {\n  viewCourseUrl?: string;\n}\n\ninterface State {\n  isLoading: boolean\n  courses: CourseWithHiddenState[]\n  headerOpen: boolean\n}\n\nexport class ListCourses extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      courses: [],\n      headerOpen: false\n    };\n    this.updateHiddenCourses = this.updateHiddenCourses.bind(this);\n  }\n\n  componentWillMount() {\n    hiddenCoursesRepo.subscribe(this.updateHiddenCourses, {fullCourse: true});\n  }\n\n  componentWillUnmount() {\n    hiddenCoursesRepo.unsubscribe(this.updateHiddenCourses);\n  }\n\n  updateHiddenCourses(courses: CourseWithHiddenState[]) {\n    this.setState({courses, isLoading: false});\n  }\n\n  async hideCourse(course: CourseWithHiddenState) {\n    showInfo(L`Sparar...`);\n    await hiddenCoursesRepo.hideCourse(course);\n    showInfo(\"\");\n  }\n\n  async showCourse(course: CourseWithHiddenState) {\n    showInfo(L`Sparar...`);\n    await hiddenCoursesRepo.showCourse(course);\n    showInfo(\"\");\n  }\n\n  render() {\n    if (this.state.isLoading) return <Spinner />;\n    const {courses} = this.state;\n    const visibleCourses = courses.filter(course => course.visible);\n    const hiddenCourses = courses.filter(course => !course.visible);\n    const query = parseQueryString(location.search);\n    const viewCourseUrl = this.props.viewCourseUrl || \"\";\n\n    return <div className=\"ked_boxed\">\n      <h3>Skolans kurser</h3>\n      <div className=\"taskContainer odd-even\">\n        {visibleCourses.map(course =>\n          <div className=\"studentCourse\" key={course.id}>\n            <div className=\"align-horizontal\">\n              <div className=\"horizontalItem top pull-right\">\n                <a className=\"hideItem\" onClick={() => this.hideCourse(course)} />\n              </div>\n              <div className=\"horizontalItem top\">\n                <a href={preserveImpersonationQuery(viewCourseUrl, {courseId: course.id})}>{course.name}</a>\n              </div>\n            </div>\n            <div className=\"horizontalItem top\">\n              <p className=\"small\">{course.description}</p>\n            </div>\n          </div>)}\n      </div>\n\n      <div className={\"openClose\" + (this.state.headerOpen ? \" open\" : \"\")}>\n        <div className=\"openHeader\" onClick={() => this.setState({ headerOpen: !this.state.headerOpen })}>\n          <h5>Dolda kurser</h5>\n        </div>\n        <div className=\"openContent\">\n          <div className=\"taskContainer odd-even\">\n            {hiddenCourses.map(course => \n            <div className=\"studentCourse\" key={course.id}>\n              <div className=\"align-horizontal\">\n                <div className=\"horizontalItem top pull-right\">\n                  <a className=\"showItem\" onClick={() => this.showCourse(course)}></a>\n                </div>\n                <a href={generateQueryString({...query, courseId: course.id})}>{course.name}</a>\n              </div>\n              <div className=\"horizontalItem top\">\n                <p className=\"small\">{course.description}</p>\n              </div>\n            </div>)}\n          </div>\n        </div>\n      </div>\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { RemoveItem } from '../course-builder/sub-components/remove-item';\nimport { findDOMNode } from 'react-dom';\nimport $ from 'jquery';\n\ninterface Props {\n  dialogs: React.Component[];\n  popDialog: ()=>void;\n}\n\nexport class Dialogs extends React.Component<Props> {\n  lastDiv: HTMLDivElement | null;\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {\n      // A dialog was closed. Now focus the last dialog:\n      $(findDOMNode(this.lastDiv)).find(':input').first().focus();\n    }\n  }\n\n  render () {\n    this.lastDiv = null;\n    const {dialogs, popDialog} = this.props;\n    $('body').attr('aria-disabled', dialogs.length > 0);\n    $('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');\n\n    return dialogs.length > 0 && <div>\n      {dialogs.map((dialog, idx) => {\n        let div: HTMLDivElement;\n        function onKeyPress(ev: React.KeyboardEvent<HTMLDivElement>) {\n          if (ev.which === 13 && (!ev.target || (ev.target as HTMLElement).tagName !== 'TEXTAREA')) {\n            $(findDOMNode(div)).find('.btn-default').click();\n          }\n          ev.stopPropagation();\n        }\n        function onKeyDown(ev) {\n          if (ev.which === 27) { // Escape\n            popDialog();\n            ev.stopPropagation();\n            return;\n          }\n          if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S\n            const domNode = findDOMNode(div);\n            ev.preventDefault();\n            const defaultButton = $(domNode).find('.btn-default');\n            defaultButton.click();\n            ev.stopPropagation();\n          }\n        }\n        return <div key={idx}>\n      <div className=\"darken\" />\n      <div className=\"modal-page-wrap\">\n        <div className=\"modal-page\" ref={elem => {\n          div = elem;\n          if (idx === dialogs.length - 1) this.lastDiv = elem;\n        }}\n            tabIndex={0}\n            aria-disabled={idx < dialogs.length - 1}\n            onKeyPress={onKeyPress}\n            onKeyDown={onKeyDown}>\n          {dialog}\n          <RemoveItem onClick={popDialog} />\n          <div className=\"stopFloats\"></div>\n        </div>\n      </div>\n    </div>})}\n  </div>;\n  }\n}\n","import * as React from 'react';\nimport { FormField } from './form-field';\n\ninterface Props {\n  label: any;\n  id: string;\n  value: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  children?;\n  onChange: (value: string) => void;\n}\n\nexport class TextInput extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <FormField label={this.props.label}>\n        <div className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n            <input type=\"text\" autoFocus={this.props.autoFocus} id={this.props.id} size={35} value={this.props.value}\n              onChange={ev => this.props.onChange(ev.target.value)}\n              placeholder={this.props.placeholder} />\n          </div>\n          {!!this.props.children && <div className=\"horizontalItem\">\n            {this.props.children}\n          </div>}\n        </div>\n      </FormField>\n    );\n  }\n}\n\n","import * as React from 'react';\nimport { FormField } from './form-field';\n\ninterface Props {\n  label: any;\n  id: string;\n  value: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  rows?: number;\n  children?;\n  onChange: (value: string) => void;\n}\n\nexport class TextAreaFormField extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <FormField label={this.props.label}>\n        <div className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n            <textarea autoFocus={this.props.autoFocus} id={this.props.id} cols={35} rows={this.props.rows || 5} value={this.props.value}\n              onChange={ev => this.props.onChange(ev.target.value)}\n              placeholder={this.props.placeholder} />\n          </div>\n          {!!this.props.children && <div className=\"horizontalItem\">\n            {this.props.children}\n          </div>}\n        </div>\n      </FormField>\n    );\n  }\n}\n\n","import * as React from 'react';\n\ninterface Props {\n  label: any;\n  children: any;\n}\n\nfunction findId(node) {\n  const recucheck = new Set();\n  return (function findId(node){\n    if (typeof node === 'string') return null;\n    if (recucheck.has(node)) {\n      debugger;\n      return;\n    }\n    recucheck.add(node);\n    if (node.props) {\n      if (node.props.id) return node.props.id;\n      if (node.props.children) {\n        return findId(node.props.children);\n      }\n      return;\n    }\n    if (node.length) {\n      for (let i=0;i<node.length; ++i) {\n        const child = node[i];\n        if (child) {\n          const childId = findId(child);\n          if (childId) return childId;\n          //console.log(child);\n        }\n      }\n    }\n  })(node);\n}\n\nexport class FormField extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return <>\n        <label className=\"kclabel\" htmlFor={findId(this.props.children)}>{this.props.label}</label>\n        {this.props.children}\n    </>\n  }\n}\n","/* REFACTOR: Move this component outside coursebuilder!\n   This is a general-purpose component\n*/\n\nimport * as React from 'react';\n\ninterface Props {\n  title: string | JSX.Element;\n  className?: string;\n  headerClassName?: string;\n  contentClassName?: string;\n  headerOpen?: boolean;\n  onOpenClose?: (becameOpen: boolean) => void;\n  children;\n}\n\ninterface State {\n  headerOpen: boolean;\n}\n\nexport class OpenCloseBox extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      headerOpen: props.headerOpen || false\n    };\n  }\n\n  componentWillReceiveProps (nextProps: Props) {\n    if (nextProps.headerOpen !== this.props.headerOpen) {\n      this.setState({headerOpen: nextProps.headerOpen});\n    }\n  }\n\n  render() {\n    const { title, className, children, headerClassName, contentClassName } = this.props;\n    const { headerOpen } = this.state;\n\n    return <div className={(className||'') + \" openClose\" + (headerOpen ? \" open\" : \"\")}>\n      <div className={\"openHeader\" + (headerClassName ? \" \" + headerClassName : \"\")}\n        onClick={() => {\n          if (this.props.onOpenClose) this.props.onOpenClose(!this.state.headerOpen);\n          this.setState({ headerOpen: !this.state.headerOpen });\n        }} >\n        {title}\n      </div>\n      <div className={\"openContent\" + (contentClassName ? \" \" + contentClassName : \"\")}>\n        {children}\n      </div>\n    </div>;\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  learningGoal?: string;\n  onSave: (learningGoal: string) => void;\n}\n\ninterface State {\n  learningGoal: string;\n}\n\nexport class AddCustomGoal extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props)\n    this.state = {\n      learningGoal: props.learningGoal || ''\n    }\n  }\n\n  render() {\n    const {learningGoal} = this.state;\n    const {onSave} = this.props;\n\n    return <div>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n          <h2>Lägg till eget lärandemål</h2>\n          <hr />\n          <div className=\"align-horizontal\">\n            <div className=\"horizontalItem top\">Mål:</div>\n            <div className=\"horizontalItem top\">\n              <input type=\"text\" tabIndex={1} size={50} autoFocus\n                value={learningGoal}\n                onChange={e => this.setState({learningGoal: e.target.value})} />\n            </div>\n            <div className=\"horizontalItem top spaced\" />\n          </div>\n          <br /></div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={()=>onSave(learningGoal)}>Spara</button>\n      </div>\n    </div>\n  }\n}\n\n","import * as React from 'react';\nimport { TextInput } from '../utility-components/form-field-text-input';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\n\ninterface Props {\n  isTask: boolean\n  onSave: (name: string, description: string, url: string) => void;\n}\n\ninterface State {\n  name: string;\n  description: string;\n  url: string;\n}\n\nexport class AddCustomTask extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props)\n    this.state = {\n      name: '',\n      description: '',\n      url: ''\n    }\n  }\n\n  render() {\n    const { name, description, url } = this.state;\n    const { isTask, onSave } = this.props;\n\n    return <div>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n        <h2>Lägg till eget arbetsmål</h2>\n        <hr />\n        <TextInput\n          label=\"Namn\"\n          id=\"AddCustomTask:name\"\n          placeholder=\"Ange namn...\"\n          value={name}\n          autoFocus\n          onChange={name => this.setState({name})} />\n\n        <TextAreaFormField\n          rows={7}\n          label=\"Beskrivning\"\n          id=\"AddCustomTask:description\"\n          placeholder=\"Lägg till en beskrivning...\"\n          value={description}\n          onChange={description=>this.setState({description})} />\n\n        <TextInput\n          label=\"Länk\"\n          id=\"AddCustomTask:url\"\n          placeholder=\"http://www...\"\n          value={url}\n          onChange={name => this.setState({url})} />\n\n      </div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={() => onSave(name, description, url)}>Spara</button>\n      </div>\n    </div>\n  }\n}\n\n","import * as React from 'react';\nimport { TextInput } from '../utility-components/form-field-text-input';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { createUUID } from 'kedbackend/client';\n\ntype Props = {\n  // Edit Mode\n  mode: 'add';\n  userTask: UserTask;\n  closeDialog;\n} | {\n  mode: 'edit';\n  userTask: UserTask;\n  subTask: UserSubTask;\n  closeDialog: ()=>void;\n}\n\ninterface State {\n  name: string;\n  description: string;\n  url: string;\n}\n\nexport class AddOrEditSubTask extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props);\n    if (props.mode === 'edit') {\n      const {subTask} = props;\n      this.state = {\n        name: subTask.name || '',\n        description: subTask.description || '',\n        url: subTask.url || ''\n      };\n    } else {  \n      this.state = {\n        name: '',\n        description: '',\n        url: ''\n      };\n    }\n  }\n\n  save() {\n    // Update repo:\n    const {props} = this;\n    const {userTask, closeDialog} = props;\n    const {name, description, url} = this.state;\n    if (props.mode === 'edit') {\n      // Edit existing:\n      userTasksRepo.update([userTask], ut => {\n        const {subTasks} = ut;\n        if (subTasks) {\n          ut.subTasks = subTasks.map(st =>\n            st.id === props.subTask.id ? {...st, name, description, url} :\n            {...st}\n          );\n        }\n      });\n    } else {\n      // Create new task\n      const newSubTask = {\n        id: createUUID(),\n        name,\n        description,\n        url\n      };\n\n      // Update repo:\n      userTasksRepo.update([userTask], ut => {\n        if (!ut.subTasks) {\n          ut.subTasks = [];\n        }\n        ut.subTasks = ut.subTasks.concat(newSubTask);\n      });\n    }\n\n    // Close dialog\n    closeDialog();    \n  }\n\n  delete() {\n    // Update repo:\n    const props = this.props;  \n    if (props.mode !== 'edit') {\n      throw new Error(\"Can only delete in edit mode\");\n    }\n    userTasksRepo.update([props.userTask], ut => {\n      if (ut.subTasks) {\n        ut.subTasks = ut.subTasks.filter(t => t.id !== props.subTask.id);\n      }\n    });\n\n    // Close dialog:\n    props.closeDialog();\n  }\n\n  render() {\n    const {name, description, url} = this.state;\n    const {props} = this;\n    const isEditMode = props.mode === 'edit';\n    \n    return <>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n        <h2>{isEditMode ? 'Redigera underuppgift' : 'Lägg till underuppgift'}</h2>\n        <hr />\n        <TextInput\n          autoFocus\n          label=\"Underuppgiftens namn\"\n          id=\"AddUserSubTask:name\"\n          placeholder=\"\"\n          value={this.state.name}\n          onChange={name => this.setState({name})}\n            />\n        <TextAreaFormField\n          label=\"Beskrivning\"\n          id=\"AddUserSubTask:description\"\n          rows={7}\n          placeholder=\"\"\n          value={this.state.description}\n          onChange={description => this.setState({description})}\n            />\n        <TextInput\n          label=\"Länk\"\n          id=\"AddUserSubTask:url\"\n          placeholder=\"\"\n          value={this.state.url}\n          onChange={url => this.setState({url})}\n            />\n        <br />\n      </div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        {\n          props.mode === 'edit' && <button className=\"btn btn-warning btn-large pull-right\"\n          onClick={ev => this.delete()}>\n          {\"Ta bort underuppgift\"}</button>}\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={()=>this.save()}>Spara</button>\n      </div>\n    </>\n  }\n}\n\n","import * as React from 'react';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { RenameableText } from '../utility-components/renameable-text';\nimport { L } from '../../utils/utils';\nimport { getTaskType } from './get-task-type';\nimport ReactDatePicker, { ReactDatePickerProps } from 'react-datepicker';\nimport '../../globals/moment-sv-locale';\nimport {TextInput} from '../utility-components/form-field-text-input';\nimport moment from 'moment';\nimport { FormField } from '../utility-components/form-field';\nimport { AddOrEditSubTask } from './add-or-edit-sub-task';\nimport { createUUID } from 'kedbackend/client';\nimport update from 'react-addons-update';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\n\ninterface Props {\n  userTask: UserTask;\n  onUpdate: (updater: (userTask: UserTask) => void) => void;\n  onDelete: (userTaskId: string) => void;\n  openDialog: (dialog) => void;\n  closeDialog: ()=>void;\n}\n\ninterface State {\n  userTask: UserTask;\n  name: string;\n  description?: string;\n  deadline?: string;\n  url: string;\n  subTasks?: UserSubTask[];\n  showCalendar?: boolean;\n}\n\nexport class EditUserTask extends React.Component<Props,State> {\n  datePicker: any;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTask: props.userTask,\n      name: props.userTask.name,\n      description: props.userTask.description,\n      url: props.userTask.url,\n      deadline: props.userTask.deadline,\n      subTasks: props.userTask.subTasks\n    }\n    this.onUserTasksChanged = this.onUserTasksChanged.bind(this);\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onUserTasksChanged);\n  }\n\n  onUserTasksChanged(userTasks: UserTask[]) {\n    const myUserTask = userTasks.find(ut => ut.id === this.props.userTask.id);\n    if (!myUserTask) {\n      this.props.closeDialog();\n      return;\n    }\n    this.setState({\n      userTask: myUserTask,\n      subTasks: myUserTask.subTasks\n    });\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onUserTasksChanged);\n  }\n\n  isModified() {\n    // Don't count subtask changes! They live their own life and is maintained\n    // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks\n    // to be persisted right away. May click away this dialog.\n    // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner\n    // when clicking the subtask for example!\n\n    const {deadline, description, name, url, userTask} = this.state;\n    return (\n      deadline !== userTask.deadline ||\n      description !== userTask.description ||\n      name !== userTask.name ||\n      url !== userTask.url);\n  }\n\n  addSubTask(): any {\n    this.props.openDialog(<AddOrEditSubTask\n      mode=\"add\"\n      userTask={this.state.userTask}\n      closeDialog={this.props.closeDialog}\n    />);\n  }\n\n  editSubTask(subTask: UserSubTask) {\n    this.props.openDialog(<AddOrEditSubTask\n      mode=\"edit\"\n      subTask={subTask}\n      userTask={this.state.userTask}\n      closeDialog={this.props.closeDialog}\n    />);\n  }\n  \n  render() {\n    const { name, description, url, deadline, subTasks, showCalendar, userTask } = this.state;\n    const { id, courseName } = userTask;\n    const { onUpdate, onDelete } = this.props;\n    const isModified = this.isModified();\n\n    const taskType = getTaskType(userTask);\n    const isCustomTask = taskType === 'customTask';\n    const expired = moment(userTask.deadline) < moment();\n\n    return <div className=\"editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer\">\n      <h2>{isCustomTask ? `Redigera arbetsmål` : `Redigera uppgift`}</h2>\n      <hr />\n      <TextInput\n        autoFocus\n        label={isCustomTask ? \"Arbetsmålets namn\" : \"Uppgiftens namn\"}\n        id=\"EditUserTask:name\"\n        placeholder={isCustomTask ? \"Vad ska du göra?\" : \"Ange uppgiftens namn...\"}\n        value={name}\n        onChange={name => this.setState({name})} />\n      \n      {isCustomTask && <>\n        <TextAreaFormField\n          rows={5}\n          label=\"Beskrivning\"\n          id=\"EditUserTask:description\"\n          placeholder=\"Lägg till en beskrivning...\"\n          value={description}\n          onChange={description=>this.setState({description})} />\n\n        <TextInput\n          label=\"Länk\"\n          id=\"EdutUserTask:url\"\n          placeholder=\"http(s)://...\"\n          value={url}\n          onChange={url => this.setState({url})} >\n\n        </TextInput></>}\n\n        <FormField label=\"Ange deadline\">\n          {(deadline || showCalendar) ?\n            <div className=\"align-horizontal\">\n              <div className=\"horizontalItem top\">\n                <ReactDatePicker ref={elem => this.datePicker = elem}\n                  id=\"EditUserTask:deadline\"\n                  selected={deadline && moment(deadline)}\n                  autoFocus={showCalendar}\n                  dateFormat=\"YYYY-MM-DD\"\n                  className={expired ? \"expired\" : undefined}\n                  locale={\"sv\"}\n                  popperPlacement={isCustomTask ? \"top-start\" : \"bottom-start\"}\n                  onBlur={()=>this.setState({showCalendar: false})}\n                  onChange={value=>{\n                    this.setState({\n                      deadline: value && value.format(\"YYYY-MM-DD\"),\n                      showCalendar: false\n                    });\n                  }}\n                />\n              </div>\n              <div className=\"horizontalItem top\">\n                <a className=\"deleteDate\" href=\"#\" title=\"Ta bort deadline\" onClick={ev=>{\n                  ev.preventDefault();\n                  this.setState({deadline: null, showCalendar: false});\n                }}></a>\n              </div>\n            </div> :\n            <div className=\"top\" ref={()=>{this.datePicker = null}}>\n                <a className=\"btn\" onClick={ev => {\n                  if (this.datePicker) {\n                    this.datePicker.setOpen(true);\n                  }\n                  this.setState({\n                    showCalendar: true\n                  });\n                }}>\n                <i className=\"fa fa-calendar\" aria-hidden=\"true\"></i> Ange deadline...\n              </a>              \n            </div>}\n        </FormField>\n      <FormField label=\"Underuppgifter\">\n        <div className=\"learningGoalTasks\">\n          <div className=\"taskContainer\">\n\n              {subTasks && subTasks.map(subTask => <div key={subTask.id} className=\"align-horizontal\">\n                <div className=\"horizontalItem top\"><a\n                  onClick={()=>this.editSubTask(subTask)}\n                  href=\"#\">{subTask.name}</a></div>\n              </div>)}\n          </div>\n        </div>\n        <div className=\"align-horizontal\">\n          <div className=\"top\">\n            <button id=\"EditUserTask:addSubTask\" className=\"btn\"\n              onClick={()=>this.addSubTask()}>\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i> Lägg till underuppgift\n            </button>\n          </div>\n        </div>\n      </FormField>\n      <div className=\"divider large\" />\n      <div className=\"align-horizontal\">\n        <div className=\"horizontalButton top\">\n          <button tabIndex={1}\n            className=\"btn btn-default\"\n            onClick={()=>{\n              isModified ? onUpdate(userTask => {\n                userTask.name = name;\n                userTask.description = description;\n                userTask.url = url;\n                userTask.deadline = deadline;\n              }) : this.props.closeDialog();\n            }}> Spara </button>\n        </div>\n        <div className=\"horizontalButton top\">\n          <button tabIndex={1}\n            className=\"btn\"\n            onClick={()=>{\n              this.props.closeDialog();\n            }}> Avbryt </button>\n        </div>\n        <div className=\"confirm top pull-right\">\n          <button\n            tabIndex={1}\n            className=\"btn btn-warning\"\n            onClick={()=>{\n              onDelete(id);\n            }}>{isCustomTask ?\n              \" Ta bort arbetsmål\" :\n              \" Ta bort den här uppgiften\"\n          }</button>\n        </div>\n      </div>\n                  \n      {/*<div className=\"btn btn-warning btn-large pull-right\" onClick={ev => onDelete(id)}>\n        {L`Ta bort arbetsmål`}</div>\n      {isModified &&\n        <div\n          className=\"btn btn-large btn-default\"\n          tabIndex={0}\n          onClick={()=>onUpdate(userTask => {\n            userTask.name = name;\n            userTask.description = description;\n            userTask.url = url;\n          })}> Spara</div>}*/}\n    </div>\n  }\n}\n\n","import { UserTask } from \"kedbackend/models\";\n\nexport function getTaskType (userTask: UserTask) : 'courseBuilderTask' | 'siteVisionTask' | 'customTask' {\n  return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?\n    'courseBuilderTask' :\n    userTask.siteVisionPageId ?\n      'siteVisionTask' :\n      'customTask';\n}\n","export {WeekPlanner} from './weekplanner';\n","import { UserTask } from 'kedbackend/models';\nimport { UserTasksBoxProps } from './user-tasks-box';\nimport { arrayToMap, arrayToLookup, compareProp, L } from \"../../utils/utils\";\n\nexport interface VirtualLearningGoal {\n  name: string;\n  allTasks: UserTask[];\n  step?: number;\n  url?: string;\n  tasks: UserTask[];\n}\n\nexport function refine(tasks: UserTask[]) {\n  const result = [] as Partial<UserTasksBoxProps>[];\n  const mapper = {} as { [name: string]: UserTasksBoxProps };\n  const tasksPerCourse = arrayToLookup(tasks, t => t.courseName || '');\n  for (const courseName of Object.keys(tasksPerCourse).sort().filter(x => x).concat(tasksPerCourse[''] ?\n    [''] : [])) {\n    const courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];\n    const tasksPerLearningGoal = arrayToLookup(courseTasks, t => t.learningGoal);\n    const resultLearningGoals: VirtualLearningGoal[] = [];\n    for (const learningGoal of Object.keys(tasksPerLearningGoal)) {\n      const lgTasks = tasksPerLearningGoal[learningGoal].sort(compareProp(\"dateTime\"));\n      const learningGoalTask = lgTasks\n        .filter(t => t.name == null) // If name is undefined or null, this represents a learning goal\n        [0];\n      const url = learningGoalTask && learningGoalTask.url;\n      resultLearningGoals.push({\n        name: learningGoal,\n        allTasks: lgTasks,\n        url,\n        step: lgTasks.map(t => t.step).filter(step => step)[0],\n        tasks: lgTasks.filter(t => t.name)\n      });\n    }\n    result.push({\n      courseName,\n      learningGoals: resultLearningGoals\n    });\n  }\n  return result;\n}\n","import * as React from 'react';\nimport { UserTask, Task, UserSubTask } from 'kedbackend/models';\nimport { OpenCloseBox } from '../utility-components/open-close-box';\nimport { L } from '../../utils/utils';\nimport { preserveImpersonationQuery } from '../../access-control';\nimport { courseNameToCssClass } from '../calendar/course-name-to-css-class';\nimport { getTaskType } from './get-task-type';\nimport moment from 'moment';\nimport { VirtualLearningGoal } from './refiner';\nimport { Features } from '../../features';\n\nexport interface UserTasksBoxProps {\n  courseName: string;\n  learningGoals: VirtualLearningGoal[],\n  viewCourseUrl: string;\n  openCourses?: { [path: string]: boolean };\n  setIsOpen?: (courseName: string, isOpen: boolean) => void;\n  setTaskDone?: (task: UserTask, done: boolean) => void;\n  setSubTaskDone: (task: UserTask, subTask: UserSubTask, done: boolean) => void;\n  addOwnTask?: (courseName: string, learningGoalName: string) => void;\n  editTask: (task: UserTask) => void;\n  editSubTask: (task: UserTask, subTask: UserSubTask) => void;\n  removeLearningGoal: (lg: VirtualLearningGoal)=>void;\n};\n\nexport class UserTasksBox extends React.Component<UserTasksBoxProps> {\n  constructor(props: UserTasksBoxProps) {\n    super(props);\n  }\n\n  render() {\n    const {\n      courseName,\n      learningGoals\n    } = this.props;\n    const isOpen = !!this.props.openCourses[courseName];\n    const features = new Features();\n\n    return <OpenCloseBox\n      title={<h5>{courseName || L`Egna lärandemål`}</h5>}\n      headerOpen={isOpen}\n      className={courseName && courseNameToCssClass('wp-course-', courseName)}\n      onOpenClose={becameOpen => this.props.setIsOpen(courseName, becameOpen)}>\n      {learningGoals.map(lg =>\n        <div key={lg.name} className=\"learningGoalContainer\">\n          {lg.step && <div className=\"stepIndicator\">{lg.step}</div>}\n          <div className=\"align-horizontal\">\n            <div className=\"learningGoalText horizontalItem top\">{lg.name}</div>\n            <div className=\"horizontalItem\">\n              &nbsp;<a\n                className=\"trash\"\n                href=\"#\"\n                title=\"Ta bort lärandemålet och dess uppgifter\"\n                onClick={ev=>{\n                  ev.preventDefault();\n                  this.props.removeLearningGoal(lg);\n                }}\n              >\n                <i className=\"fa fa-trash\" />\n              </a>\n            </div>\n          </div>\n\n          <div className=\"learningGoalTasks\">\n            <div className=\"taskContainer\">\n              {lg.tasks.map(userTask => {\n                const isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';\n\n                const taskType = getTaskType(userTask);\n                const expired = moment(userTask.deadline).startOf('day') < moment().startOf('day');\n\n                return <div key={userTask.id} style={isWorking ? { opacity: 0.5 } : {}}>\n                  <div className=\"align-horizontal\">\n                    <div className=\"horizontalItem top\">\n                      <div className={\"checkBox\" + (userTask.done ? \" checked\" : \"\")}\n                        onClick={ev => !isWorking && this.props.setTaskDone(userTask, !userTask.done)}>\n                      </div>\n                    </div>\n                    <div className=\"horizontalItem top\">\n                      {taskType === 'courseBuilderTask' ?\n                        <a href={getTaskUrl(userTask, this.props.viewCourseUrl)}>{userTask.name}</a> :\n                        taskType === 'siteVisionTask' ?\n                          <a href={userTask.url}>{userTask.name}</a> :\n                          <a\n                            className={features.EditUserTasksViaPenOnly && !userTask.url ? \"link-less\": \"\"}\n                            onClick={features.EditUserTasksViaPenOnly ?\n                              undefined :\n                              ev=>{\n                                ev.preventDefault();\n                                this.props.editTask(userTask);\n                              }}\n                            href={userTask.url}\n                            target={(userTask.url+'').toLowerCase().startsWith(location.host.toLowerCase()) ?\n                              \"_self\" :\n                              \"_blank\"}\n                          >{userTask.name}</a>}\n                      {userTask.deadline && <div className={\"dateSet\" + (expired ? ' expired' : '')}>\n                        <i title={moment(userTask.deadline).format(\"YYYY-MM-DD\")} className=\"fa fa-calendar\" aria-hidden=\"true\"\n                          /*style={{cursor: 'pointer'}} */\n                          onClick={()=>{}}></i>\n                      </div>}\n                    </div>\n                    {\n                      features.EditUserTasksViaPenOnly ?\n                      <div className=\"horizontalItem top taskEdit\">\n                        <a className=\"editItem\" onClick={() => this.props.editTask(userTask)} />\n                      </div> : undefined\n                    }\n                  </div>\n                  {userTask.subTasks && <div className=\"subtasks\">\n                    {userTask.subTasks.map(subTask =>\n                      <div key={subTask.id} >\n                        <div className=\"horizontalItem top\">\n                          <div\n                            className={\"checkBox\" + (subTask.done ? \" checked\" : \"\")}\n                            onClick={ev =>\n                              !isWorking &&\n                              this.props.setSubTaskDone(userTask, subTask, !subTask.done)}>\n                          </div>\n                        </div>\n                        <div className=\"horizontalItem top\">\n                          <a\n                            href={subTask.url || undefined}\n                            target={(userTask.url+'').toLowerCase().startsWith(location.host.toLowerCase()) ?\n                            \"_self\" :\n                            \"_blank\"}\n                            className={\n                              subTask.url ?\n                                undefined :\n                                'link-less'\n                          }>{subTask.name}</a>\n                        </div>\n                        <div className=\"horizontalItem top taskEdit\">\n                          <a className=\"editItem\" onClick={() => this.props.editSubTask(userTask, subTask)} />\n                        </div>\n                      </div>)}\n                  </div>}\n                </div>\n              })}\n            </div>\n          </div>\n\n          <div className=\"learningGoalTools\">\n            <div className=\"btn addOwnGoal\"\n              onClick={() => this.props.addOwnTask(this.props.courseName, lg.name)}>\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i> {L`Eget arbetsmål`}\n            </div>\n          </div>\n          <br />\n        </div>\n      )}\n    </OpenCloseBox>\n  }\n}\n\nfunction getTaskUrl(userTask: UserTask, viewCourseUrl: string) {\n  if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {\n    const courseUrl = preserveImpersonationQuery(viewCourseUrl, { courseId: userTask.course[0].id });\n    return `${courseUrl}#/task/${userTask.task[0].id}`;\n  }\n  return userTask.url;\n}\n","import moment from 'moment';\nimport { localMoment } from '../../globals/moment-sv-locale';\n\ntype Moment = moment.Moment;\n\nexport class WeekPlannerPersistedState {\n  static EXPIRATION_HOURS = 12;\n  static VERSION = 2;\n\n  user: string;\n  lastWrite: number;\n  weekDate: number;\n  openCourses: { [path: string]: boolean }\n\n  constructor (userOrCopy: string | WeekPlannerPersistedState) {\n    if (typeof userOrCopy === 'string') {\n      this.user = userOrCopy;\n      this.lastWrite = Date.now();\n      this.weekDate = localMoment().startOf('week').valueOf();\n      this.openCourses = {};\n    } else {\n      Object.assign(this, userOrCopy);\n    }\n  }\n\n  static async load(user: string) {\n    const cookie = localStorage.getItem('WeekPlannerPersistedState2');\n    const storedData = cookie && (JSON.parse(cookie) as WeekPlannerPersistedState);\n    const state = new WeekPlannerPersistedState(user);\n    if (storedData) Object.assign(state, storedData);\n\n    return state.user === user && !state.isExpired(moment()) ?\n      state : new WeekPlannerPersistedState(user);\n  }\n\n  async save() {\n    this.lastWrite = Date.now();\n    const json = JSON.stringify(this);\n    localStorage.setItem('WeekPlannerPersistedState2', json);\n  }\n\n  isExpired (asOf: Moment) {\n      return moment(this.lastWrite)\n        .isBefore(\n            asOf.add(\n                0-WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours')\n        );\n  }\n}\n","import * as React from 'react';\nimport { UserTasksBox } from './user-tasks-box';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { createUUID, HttpError } from \"kedbackend/client\";\nimport { refine, VirtualLearningGoal } from './refiner';\nimport env from '../../globals/KED.env';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { L, compareProp } from '../../utils/utils';\nimport moment from 'moment';\n//import { CustomGoal } from '../../contracts/ked-models';\nimport { TSON } from '../../utils/tson';\nimport { WeekPlannerPersistedState } from './weekplanner-persisted-state';\nimport { RemoveItem } from '../course-builder/sub-components/remove-item';\nimport { Dialogs } from '../utility-components/dialogs';\nimport { AddCustomGoal } from './add-custom-goal';\nimport { AddCustomTask } from './add-custom-task';\nimport { EditUserTask } from './edit-user-task';\nimport { Spinner } from '../course-builder/sub-components/spinner';\nimport { OpenCloseBox } from '../utility-components/open-close-box';\nimport { PendingJob } from '../../utils/pending-job';\nimport { AddOrEditSubTask } from './add-or-edit-sub-task';\nimport { getAdjustedWeek, KEDWeek } from '../../utils/weekutil';\n\ninterface Props {\n  viewCourseUrl: string;\n}\n\ninterface State {\n  weekDate: number;\n  dialogs: any[];\n  userTasks: UserTask[];\n  openCourses: { [path: string]: boolean }\n  strategy?: string;\n  assessment?: string;\n  weekTextsUT: UserTask | null;\n  saving: boolean;\n  isLoading: boolean;\n}\n\nexport class WeekPlanner extends React.Component<Props,State> {\n  weekTextsSavingJob: PendingJob;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTasks: [],\n      weekDate: Date.now(),\n      openCourses: {},\n      dialogs: [],\n      saving: false,\n      weekTextsUT: null,\n      isLoading: true\n    }\n    this.onChange = this.onChange.bind(this);\n    this.weekTextsSavingJob = new PendingJob(()=>this.saveWeekTexts());\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onChange);\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onChange);\n    this.weekTextsSavingJob.stop();\n  }\n\n  onChange(userTasks: UserTask[], persisted: WeekPlannerPersistedState, weekTextsUT: UserTask) {\n    const newState : Partial<State> = {\n      userTasks,\n      weekDate: persisted.weekDate,\n      openCourses: persisted.openCourses,\n      weekTextsUT,\n      isLoading: false\n    }\n    if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {\n      // Changing week. Reset to new week's values\n      newState.strategy = weekTextsUT.weekTexts.strategy;\n      newState.assessment = weekTextsUT.weekTexts.assessment;\n    }\n    this.setState(newState as any); // React's use of Pick instead of Partial makes things complex here.\n  }\n\n  isWeekTextsEdited() {\n    const { strategy, assessment, weekTextsUT } = this.state;\n    return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);\n  }\n\n  private async saveWeekTexts() {\n    console.log(\"Saving texts...\");\n    const { strategy, assessment, weekTextsUT } = this.state;\n    if (this.isWeekTextsEdited()) {\n      await userTasksRepo.upsert(weekTextsUT, ut => {\n        ut.weekTexts = { strategy, assessment };\n      });\n    }\n  }\n\n  prevWeek() {\n    //this.saveWeekTexts();\n    userTasksRepo.changeWeek(moment(this.state.weekDate).add(-1, 'week').toDate());\n  }\n\n  nextWeek() {\n    //this.saveWeekTexts();\n    userTasksRepo.changeWeek(moment(this.state.weekDate).add(1, 'week').toDate());\n  }\n\n  openDialog(dialog) {\n    this.setState({ dialogs: [...this.state.dialogs, dialog] });\n  }\n\n  openAddGoalDialog() {\n    this.openDialog(<AddCustomGoal\n      onSave={async (learningGoal: string) => {\n        if (!learningGoal) throw new Error (L`Lärandemålet kan inte vara tomt`);\n        if (!this.state.saving) {\n          this.setState({ saving: true });\n          try {\n            await this.addCustomGoal(learningGoal);\n          } finally {\n            this.setState({ saving: false });\n          }\n          this.closeDialog();\n        }\n      }} />);\n  }\n\n  openAddOwnTaskDialog(courseName: string, learningGoalName: string) {\n    this.openDialog(<AddCustomTask\n      isTask={!courseName}\n      onSave={async (name: string, description: string, url: string) => {\n        if (!name) throw new Error (L`Namnet kan inte vara tomt`);\n        if (!this.state.saving) {\n          this.setState({ saving: true });\n          try {\n            await this.addCustomTask(courseName, learningGoalName, name, description, url);\n          } finally {\n            this.setState({ saving: false });\n          }\n          this.closeDialog();\n        }\n      }} />);\n  }\n\n  editTask(userTask: UserTask) {\n    this.openDialog(<EditUserTask\n      userTask={userTask}\n      onUpdate={async (updater: (ut: UserTask) => void) => {\n        const test = {...userTask};\n        updater(test);\n        if (!test.name) throw new Error (L`Namnet får inte vara tomt`);\n        this.closeDialog();\n        await userTasksRepo.update([userTask], updater);\n      }}\n      onDelete={async id => {\n        this.closeDialog();\n        await userTasksRepo.delete([id]);\n      }}\n      openDialog={dialog=>this.openDialog(dialog)}\n      closeDialog={()=>this.closeDialog()}\n    />);\n  }\n\n  editSubTask(userTask: UserTask, subTask: UserSubTask) {\n    this.openDialog(<AddOrEditSubTask\n      mode=\"edit\"\n      userTask={userTask}\n      subTask={subTask}\n      closeDialog={()=>this.closeDialog()}\n    />);\n  }\n\n  closeDialog() {\n    this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });\n  }\n\n\n\n  async addCustomGoal(learningGoal: string) {\n    let latestTimeStamp = Math.max.apply(\n      Math.max,\n      [this.state.weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n    await userTasksRepo.insert([{\n      id: createUUID(),\n      learningGoal,\n      dateTime: latestTimeStamp + 2000\n    }]);\n\n    await userTasksRepo.setWeekPlannerBoxOpen(\"\", true);\n  }\n\n  async removeLearningGoal(learningGoal: VirtualLearningGoal) {\n    if (learningGoal.tasks.length > 0) {\n      if (!confirm(`Ta bort lärandemål samt ${learningGoal.tasks.length} uppgifter?`)) {\n        return;\n      }\n    }\n    await userTasksRepo.delete(learningGoal.allTasks.map(t => t.id));\n  }\n\n  async addCustomTask(courseName: string, learningGoal: string, name: string, description: string, url: string) {\n    let latestTimeStamp = Math.max.apply(\n      Math.max,\n      [this.state.weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n    /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>\n      ut.name == null &&\n      !ut.courseName &&\n      ut.learningGoal === learningGoal);\n\n    if (emptyLearningGoalPlaceholder) {\n      // Hijack learning-goal placeholder and make it the real task.\n      // This will make the learning goal disappear once this task\n      // is deleted.\n      await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {\n        Object.assign(ut, { name, description, url });\n      });\n    } else {*/\n      // Add another task to same learning-goal\n      await userTasksRepo.insert([{\n        id: createUUID(),\n        dateTime: latestTimeStamp + 2000,\n        courseName,\n        learningGoal,\n        name,\n        description,\n        url\n      }]);\n    //}\n  }\n\n  setIsOpen(courseName: string, isOpen: boolean) {\n    userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);\n  }\n\n  async setTaskDone(task: UserTask, done: boolean) {\n    await userTasksRepo.setTaskDoneState(task, done);\n  }\n\n  async setSubTaskDone(task: UserTask, subTask: UserSubTask, done: boolean) {\n    await userTasksRepo.setSubTaskDoneState(task, subTask.id, done);\n  }\n\n  async copyFromPreviousWeek() {\n    const { userTasks, openCourses, weekDate } = this.state;\n    const prevWeekNo = getAdjustedWeek (moment(weekDate).add(-1, 'week'));\n    const prevKEDWeek = KEDWeek(moment(weekDate).year(), prevWeekNo);\n    // Read last week's goals and tasks\n    let prevTasks = await env.kedBackendClient.list<UserTask>(\"usertasks\", {\n      from: prevKEDWeek.notBefore,\n      to: prevKEDWeek.notAfter,\n      role: \"USER\",\n      include: [\"task\", \"course\", \"acl\"],\n      flags: [\"includeIdsOnly\"]\n    });\n    prevTasks = prevTasks\n      .filter(prevTask => !prevTask.done)  // Don't copy done tasks\n      .filter(prevTask => !!prevTask.name) // Don't copy empty learning goals\n      .filter(prevTask => !userTasks.some(taskOfCurrentWeek =>\n        taskOfCurrentWeek.name === prevTask.name &&\n        taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&\n        taskOfCurrentWeek.courseName === prevTask.courseName)); // Ignore identical tasks (already copied)\n\n    // Now create copies but place them in the current week.\n    let latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(userTasks.map(t => t.dateTime)));\n\n    const copies = prevTasks.sort(compareProp(\"dateTime\")).map(task => {\n      const copy: UserTask = { ...task, dateTime: latestTimeStamp += 1000 };\n      copy.id = createUUID();\n      if (copy.subTasks) {\n        copy.subTasks = copy.subTasks.filter(st => !st.done);\n      }\n      delete copy.$etag;\n      return copy;\n    });\n\n    // Store it\n    await userTasksRepo.insert(copies);\n  }\n\n  render() {\n    const weekNumber = moment(this.state.weekDate).week();\n    //console.log(\"Weekydate: \"  + new Date(this.state.weekDate) + \" which is week no \" + weekNumber);\n    const currentWeek = moment().week();\n    const taskSets = refine(this.state.userTasks);\n    const { dialogs, weekTextsUT, strategy, assessment, isLoading } = this.state;\n    const isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');\n    const isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);\n    const isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);\n    const enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);\n    return <div>\n      <div className={`ked_boxed weekPlanner${weekNumber === currentWeek ? \" currentWeek\" : \"\"}`}\n        onKeyDown={ev => {\n          if (ev.which === 83 && ev.ctrlKey) {\n            ev.preventDefault();\n            if (!isSaving && this.isWeekTextsEdited()) {\n              this.weekTextsSavingJob.triggerChange(0);\n            }\n          }\n        }}>\n        <div className={`weekSelect`}>\n          <div className=\"horizontalItem\">\n            <p>{L`Vecka ${weekNumber}`}</p>\n          </div>\n          <div className=\"horizontalItem\">\n            <div className=\"btn-group\">\n              <button className=\"btn\" onClick={() => this.prevWeek()}>\n                <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n              </button>\n              <button className=\"btn\" onClick={() => this.nextWeek()}>\n                <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <h4>{L`Loggbok`}</h4>\n        {taskSets.length > 0 && <hr />}\n\n        {taskSets.map(props =>\n          <UserTasksBox\n            key={props.courseName}\n            {...props}\n            courseName={props.courseName}\n            learningGoals={props.learningGoals}\n            viewCourseUrl={this.props.viewCourseUrl}\n            openCourses={this.state.openCourses}\n            addOwnTask={(courseName: string, learningGoalName: string) => this.openAddOwnTaskDialog(courseName, learningGoalName)}\n            setIsOpen={this.setIsOpen.bind(this)}\n            setTaskDone={this.setTaskDone.bind(this)}\n            setSubTaskDone={this.setSubTaskDone.bind(this)}\n            editTask={task => this.editTask(task)}\n            editSubTask={(task, subTask) => this.editSubTask(task, subTask)}\n            removeLearningGoal={lg => this.removeLearningGoal(lg)} />)}\n\n        <hr />\n\n        {isLoading ? <Spinner /> : <div>\n          <div className=\"btn\" onClick={ev => this.openAddGoalDialog()}>\n            <i className=\"fa fa-list-alt\" aria-hidden=\"true\"></i> {L`Eget lärandemål`}\n\n          </div>\n          <div className=\"btn\" onClick={ev => this.copyFromPreviousWeek()}>\n            <i className=\"fa fa-clone\" aria-hidden=\"true\"></i> {L`Kopiera ej klara från föregående vecka`}\n          </div>\n          <OpenCloseBox\n            title={<h5>{L`Strategi & Utvärdering`}</h5>}\n            headerOpen={this.state.openCourses[\"StratUtv\"]}\n            onOpenClose={becameOpen => this.setIsOpen(\"StratUtv\", becameOpen)}\n          >\n            <h3>Strategi</h3>\n            <p>Hur jag ska göra för att lära mig.</p>\n            <hr/>\n            <textarea\n              className=\"weekplanner-textarea\"\n              value={strategy}\n              onChange={ev => {\n                this.setState({strategy: ev.target.value});\n                this.weekTextsSavingJob.triggerChange(500);\n              }} />\n\n            <h3>Utvärdering</h3>\n            <p>Reflektion kring din arbetsinsats och dina valda strategier under veckan.\n              Utvärdera i förhållande till dina mål.</p>\n            <hr/>\n            <textarea\n              className=\"weekplanner-textarea\"\n              value={assessment}\n              onChange={ev => {\n                this.setState({assessment: ev.target.value})\n                this.weekTextsSavingJob.triggerChange(500);\n              } }/>\n            <div\n              className=\"btn\"\n              tabIndex={0}\n              style={enableSaveButton ? {} : {opacity: 0.5}}\n              onClick={()=>!isSaving && this.weekTextsSavingJob.triggerChange(0)}>\n                <i className=\"fa fa-floppy-o\" aria-hidden=\"true\" />\n                  {enableSaveButton ? \" Spara\" : \" Sparad\"}\n            </div>\n        </OpenCloseBox>\n\n        </div>}\n      </div>\n      <Dialogs\n        dialogs={dialogs}\n        popDialog={() => {\n            this.setState(\n              ({dialogs}) => ({ dialogs: dialogs.slice(0, dialogs.length - 1) }));\n          }\n        } />\n    </div>\n  }\n}\n","import '../../global-setters/set-bearer-providers';\nconst bearerPromise = env.bearerProvider.getBearer(); // Start getting bearer as soon as possible.\nimport '../../global-setters/set-ked-backend-client';\nimport '../../global-setters/set-eds-client';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport env from '../../globals/KED.env';\nimport { CourseViewer } from '../../components/course-viewer';\nimport $ from 'jquery';\nimport { showError, showInfo } from \"../../utils/utils\";\nimport { Spinner } from \"../../components/course-builder/sub-components/spinner\"; // TODO: Move outside of course-builder!\n\ninterface Props {\n  courseBuilderUrl: string;\n}\n\ninterface State {\n  isTokenLoaded: boolean;\n}\n\nexport class KEDAppCourseViewer extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isTokenLoaded: false\n    }\n  }\n\n  componentWillMount() {\n    bearerPromise.then(()=>{\n      this.setState({isTokenLoaded: true});\n    }).catch(err => {\n      showError(err);\n    });\n  }\n\n  render() {\n    return this.state.isTokenLoaded ?\n      <CourseViewer courseBuilderUrl={this.props.courseBuilderUrl} /> :\n      <p><Spinner/>V.g. vänta... autenticerar...</p>\n  }\n}\n","import KED from '../../globals/KED';\nimport * as components from './app.courseviewer.client';\nKED.components = {...KED.components, ...components};\n","import { User } from '../contracts/ked-models';\nimport { parseQueryString } from '../utils/query-string';\nimport env from '../globals/KED.env';\n\nexport class Features {\n  EditUserTasksViaPenOnly?: boolean;\n  SubTasks?: boolean;\n  AssignmentTasks?: boolean;\n\n  constructor () {\n    const user = env.currentUser!;\n    const query = parseQueryString(location.search, {toLower: true});\n    const features = ((query.features||'').split(',') as string[])\n      .map(feature => feature.toLowerCase()); // Can be used on forwards...\n\n    this.EditUserTasksViaPenOnly =\n      user.schoolType !== 'Grundskolor' && query.schooltype !== \"Grundskolor\";\n    this.SubTasks =\n      user.schoolType !== 'Grundskolor' && query.schooltype !== \"Grundskolor\";\n    this.AssignmentTasks = !!query.testversion;\n  }\n}\n","export * from './features';\n","import { parseQueryString, generateQueryString, splitUrlAndQuery } from \"../utils/query-string\";\nimport { KedBackendClientWeb, WebServerBearerProvider, isomorphic, storage } from 'kedbackend/clientweb';\nimport { BearerProvider, KedBearerProvider } from 'kedbackend/client';\nimport cfg from '../globals/KED.cfg';\nimport env from '../globals/KED.env';\nimport { User } from \"../contracts/ked-models\";\nimport { IMPERSONATION_QUERY_PARAMS } from \"../access-control/index\";\nimport { cherryPickProps } from \"../utils/utils\";\n\nfunction getMergedTokenPath(tokenPath: string, locationSearch: string, scopes: string[]) {\n  // Merge configured query params of token path with params given to current page\n  const currentQuery = parseQueryString(locationSearch);\n  const impersonationProps = cherryPickProps(currentQuery, IMPERSONATION_QUERY_PARAMS);\n  const [tokenPathWithoutQuery, tokenQueryString] = splitUrlAndQuery(tokenPath);\n  const tokenPathQuery = parseQueryString(tokenQueryString);\n  return tokenPathWithoutQuery + generateQueryString({\n    ...tokenPathQuery,\n    ...impersonationProps,\n    scopes: scopes.join(',')\n  });\n}\n\nfunction getTokenId(mergedTokenPath: string, userEmail: string) {\n  return mergedTokenPath + \"/\" + userEmail;\n}\n\nfunction saveUserInfo(user: User, tokenId: string) {\n  env.currentUser = user;\n  sessionStorage.setItem(\"userInfo\" + tokenId, JSON.stringify(user));\n}\n\nfunction loadUserInfo(tokenId: string) {\n  const storedSessionUser = sessionStorage.getItem(\"userInfo\" + tokenId);\n  if (storedSessionUser) {\n    env.currentUser = JSON.parse(storedSessionUser);\n  }\n}\n\nfunction createBearerProvider(mergedTokenPath: string, userEmail: string) {\n  const tokenId = getTokenId(mergedTokenPath, userEmail);\n  return new WebServerBearerProvider(mergedTokenPath, responseText => {\n    const res = JSON.parse(responseText) as { ok: boolean, error?: string, token?: string, user?: User };\n    if (!res.ok) throw new Error(res.error);\n    if (res.user) {\n      saveUserInfo(res.user, tokenId);\n    }\n    return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };\n  }, tokenId);\n}\n\nfunction createGoogleTokenProvider(mergedTokenPath: string, userEmail: string) {\n  const tokenId = getTokenId(mergedTokenPath, userEmail);\n  return new WebServerBearerProvider(mergedTokenPath, responseText => {\n    const res = JSON.parse(responseText) as { ok: boolean, error?: string, token?: string, user?: User };\n    if (!res.ok) throw new Error(res.error);\n    return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };\n  }, tokenId);\n}\n\nfunction createTestTokenProvider(tokenUrl: string, user: User, scopes: string[]) {\n  return new KedBearerProvider(\n    isomorphic,\n    storage,\n    tokenUrl + user.mail + location.search,\n    cfg.KED_CLIENT_ID,\n    cfg.KED_CLIENT_SECRET,\n    tokenUrl, {\n      email: user.mail.toLowerCase(),\n      roles: user.roles,\n      school: user.school,\n      schoolType: user.schoolType,\n      scopes\n    });\n}\n\n// env.currentUser.mail is set by SiteVision server initially.\n// A response from /api/token may change the mail attribute of the current\n// user, so env.currentUser.mail may be different after getting a response.\n// However, the initial value is valuable always in order to distinguish the case\n// when one normal user logs out and another user logs in.\nconst initialUserEmail = env.currentUser && env.currentUser.mail; // Initial value of mail. May change.\nif (initialUserEmail) {\n  // KED\n  if (cfg.KED_TOKEN_PATH) {\n    //\n    //\n    // Production / SiteVision proxied /api/token to request tokens from:\n    //\n    //\n    const mergedTokenPath = getMergedTokenPath(\n      cfg.KED_TOKEN_PATH,\n      location.search, [\n        \"kedbackend\",\n        \"EDS\",\n      ]);\n    env.bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);\n    loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));\n\n    // Google\n    const googleMergedPath = getMergedTokenPath(\n      cfg.KED_TOKEN_PATH,\n      location.search, [\n        \"https://www.googleapis.com/auth/calendar.readonly\",\n      ]);\n    env.googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);\n  } else if (cfg.KED_TOKEN_URL && cfg.KED_CLIENT_ID && cfg.KED_CLIENT_SECRET) {\n    //\n    //\n    // Test - go directly to KEDAUTH server to retrieve tokens\n    //\n    //\n    env.bearerProvider = createTestTokenProvider(cfg.KED_TOKEN_URL, env.currentUser, [\n      \"kedbackend\",\n      \"EDS\",\n    ]);\n    env.googleTokenProvider = createTestTokenProvider(cfg.KED_TOKEN_URL + \"/google\", env.currentUser, [\n      \"https://www.googleapis.com/auth/calendar.readonly\",\n    ]);\n  } else {\n    throw new Error(`Missing configuration parameter KED_TOKEN_PATH`);\n  }\n}\n","import env from '../globals/KED.env';\nimport cfg from '../globals/KED.cfg';\nimport { isomorphic } from 'kedbackend/clientweb';\nimport { EdsClient } from '../apis/edsclient';\n\nenv.edsClient = new EdsClient (\n  isomorphic,\n  cfg.EDS_API_URL,\n  env.bearerProvider);\n\n","import env from '../globals/KED.env';\nimport cfg from '../globals/KED.cfg';\nimport { KedBackendClientWeb } from 'kedbackend/clientweb';\n\nenv.kedBackendClient = new KedBackendClientWeb (\n  cfg.KED_API_URL,\n  env.bearerProvider);\n\n","import KED from './KED';\n\n/* This default configuration is used as a fallback.\nNormally both test pages and production pages will override these configrations\n*/\n/*const defaultConfiguration = {\n  // Environment\n  ENVIRONMENT: 'development' as 'production' | 'development' | 'test',\n  // Authentication Server:\n  KED_TOKEN_URL: 'https://kedauthtest.azurewebsites.net/token',\n  KED_TOKEN_PATH: '/api/token.Skript.portlet?sv.contenttype=application/json',\n  KED_CLIENT_ID: 'devclient',\n  KED_CLIENT_SECRET: '4fRdfQpWtJqjTWf',\n  // Services:\n  KED_API_URL: 'https://kedbackendtest.azurewebsites.net/api/',  \n  EDS_API_URL: 'https://edsportalowinapi.azurewebsites.net/api/'\n}*/\n\nexport interface IKedConfiguration {\n  ENVIRONMENT: 'production' | 'development' | 'test';\n  KED_TOKEN_URL: string;\n  KED_TOKEN_PATH: string;\n  KED_CLIENT_ID: string;\n  KED_CLIENT_SECRET: string;\n  KED_API_URL: string;\n  EDS_API_URL: string;\n};\n\nif (!KED.cfg) KED.cfg = {};\n\nexport default KED.cfg as IKedConfiguration;\n","import {User, LearningModuleTasks} from '../contracts/ked-models';\nimport { KedBackendClient, BearerProvider } from 'kedbackend/client';\nimport {UserTask} from 'kedbackend/models';\nimport {KedRepo} from '../repos/ked-repo';\nimport {EdsClient} from '../apis/edsclient';\nimport KED from './ked';\n\nexport interface Env {\n    currentUser?: User;\n    learningModuleTasks?: LearningModuleTasks;\n    bearerProvider?: BearerProvider;\n    googleTokenProvider?: BearerProvider;\n    kedBackendClient?: KedBackendClient;\n    edsClient?: EdsClient;\n    userTasksRepo?;\n    hiddenCoursesRepo?;\n}\n\nif (!KED.env) KED.env = {};\n\nexport default KED.env as Env;\n","\nexport const KED_NAMESPACE = \"KED\";\n\ndeclare var KED: any;\n\nvar result = typeof KED === 'undefined' ? {} : KED;\n\nif (typeof window !== 'undefined' && typeof KED === 'undefined') {\n    window[KED_NAMESPACE] = result;\n}\n\nexport default result;\n","\nexport const KED_NAMESPACE = \"KED\";\n\ndeclare var KED: any;\n\nvar result = typeof KED === 'undefined' ? {} : KED;\n\nif (typeof window !== 'undefined' && typeof KED === 'undefined') {\n    window[KED_NAMESPACE] = result;\n}\n\nexport default result;\n","import moment from 'moment';\n\nmoment.updateLocale('sv', {\n    months : 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),\n    monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),\n    weekdays : 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),\n    weekdaysShort : 'sön_mån_tis_ons_tor_fre_lör'.split('_'),\n    weekdaysMin : 'sö_må_ti_on_to_fr_lö'.split('_'),\n    longDateFormat : {\n        LT : 'HH:mm',\n        LTS : 'HH:mm:ss',\n        L : 'YYYY-MM-DD',\n        LL : 'D MMMM YYYY',\n        LLL : 'D MMMM YYYY [kl.] HH:mm',\n        LLLL : 'dddd D MMMM YYYY [kl.] HH:mm',\n        lll : 'D MMM YYYY HH:mm',\n        llll : 'ddd D MMM YYYY HH:mm'\n    },\n    calendar : {\n        sameDay: '[Idag] LT',\n        nextDay: '[Imorgon] LT',\n        lastDay: '[Igår] LT',\n        nextWeek: '[På] dddd LT',\n        lastWeek: '[I] dddd[s] LT',\n        sameElse: 'L'\n    },\n    relativeTime : {\n        future : 'om %s',\n        past : 'för %s sedan',\n        s : 'några sekunder',\n        ss : '%d sekunder',\n        m : 'en minut',\n        mm : '%d minuter',\n        h : 'en timme',\n        hh : '%d timmar',\n        d : 'en dag',\n        dd : '%d dagar',\n        M : 'en månad',\n        MM : '%d månader',\n        y : 'ett år',\n        yy : '%d år'\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(e|a)/,\n    ordinal : function (number) {\n        var b = number % 10,\n            output = (~~(number % 100 / 10) === 1) ? 'e' :\n            (b === 1) ? 'a' :\n            (b === 2) ? 'a' :\n            (b === 3) ? 'e' : 'e';\n        return number + output;\n    },\n    week : {\n        dow : 1, // Monday is the first day of the week.\n        doy : 4  // The week that contains Jan 4th is the first week of the year.\n    }\n});\n\nexport const localMoment = function () {\n    return moment.apply(this, arguments).locale('sv');\n}\n","import { KedRepo } from './ked-repo';\nimport { UserHiddenCourse, School, Course } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { EDSCourse } from '../contracts/eds';\nimport { showError, flatten, compareProp, arrayToMap } from '../utils/utils';\nimport { createUUID } from 'kedbackend/client';\nimport { EDSPeriod } from '../apis/edsclient';\nimport { getSchoolMoment } from '../utils/school-moment';\nimport moment from 'moment';\nexport let hiddenCoursesRepo = env.hiddenCoursesRepo as HiddenCoursesRepo;\n\n\nexport interface CourseWithHiddenState {\n  id: string;\n  name: string;\n  description?: string;\n  visible: boolean;\n  defaultVisible: boolean;\n}\n\nexport type HiddenCoursesSubscriber = (courses: CourseWithHiddenState[]) => void;\n\nexport interface SubscriberOptions {\n  fullCourse: boolean;\n}\n\nclass HiddenCoursesRepo {\n  result: CourseWithHiddenState[] | null = null;\n  subscribers: {subscriber: HiddenCoursesSubscriber, options: SubscriberOptions}[] = [];\n  fullCourse: boolean = false;\n  kedCoursesPromise: Promise<Partial<Course>[]>;\n  edsCoursesPromise: Promise<EDSCourse[]>;\n  userHiddenCoursesPromise: Promise<UserHiddenCourse[]>;\n  kedRepo: KedRepo<UserHiddenCourse>;\n\n  constructor() {\n    this.kedRepo = new KedRepo<UserHiddenCourse>({\n      getClient: () => env.kedBackendClient,\n      optimistic: true,\n      table: \"userhiddencourses\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async () => ({role: \"USER\"}),\n    });\n\n    const initPromise = this.init();\n\n    Promise.all([\n      initPromise,\n      this.kedCoursesPromise,\n      this.edsCoursesPromise\n    ]).catch(err => showError(err));\n  }\n\n  async init() {\n    // Wait till we have a currentUser that is accurate also for impersonated users.\n    const bearerPromise = env.bearerProvider ? env.bearerProvider.getBearer() : Promise.resolve({});\n\n    // In parallell, we request:\n    //  1) KEDBackend: Schools.activeCourses\n    //  2) EDS.getActiveAcourses()\n    //  3) (via subscription): KEDBackend: userHiddenCourses\n\n    this.kedCoursesPromise = bearerPromise.then(()=>this.listKedCourses());\n    this.edsCoursesPromise = bearerPromise.then(()=>this.listEDSCourses());\n    let resolveUserHiddenCoursesPromise: (x: UserHiddenCourse[])=>void;\n    let userHiddenCoursesResolved = false;\n    this.userHiddenCoursesPromise = new Promise(resolve => resolveUserHiddenCoursesPromise = x => {\n      if (userHiddenCoursesResolved) {\n        this.userHiddenCoursesPromise = Promise.resolve(x);\n      } else {\n        userHiddenCoursesResolved = true;\n        resolve(x);\n      }\n    });\n    await bearerPromise;\n\n    this.kedRepo.mem.subscribe(async userHiddenCourses => {\n      // Change or initial value ready to be notified out.\n      // But first, check we have all the related data responses we need.\n      const [activeCourses, edsActiveCourses] = await Promise.all([\n        this.kedCoursesPromise, \n        this.edsCoursesPromise]);\n      \n      // Refine the three results into a single result\n      this.result = await this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses);\n      // Notify our subscribers:\n      this.subscribers.forEach(subscriber => this.notifySubscriber(subscriber.subscriber, subscriber.options));\n      resolveUserHiddenCoursesPromise(userHiddenCourses);\n    });\n  }\n\n  async listKedCourses() {\n    const fullCourse = this.fullCourse;\n    console.log(\"FullCourse: \"+ fullCourse);\n    const schools = await env.kedBackendClient.list<School>('schools', {\n      role: \"USER\", // Workaround from showing activated templates among courses of the school\n      name: env.currentUser.school,\n      include: \"activeCourses\",\n      flags: fullCourse ? [] : [\"includeIdsAndNamesOnly\"],\n      cacheBust: env.currentUser.username\n    });\n    const activeCourses = flatten(schools.map(school => school.activeCourses)).sort(compareProp(\"name\"))\n    return activeCourses;\n  }\n\n  listEDSCourses(): Promise<EDSCourse[] | null> {\n    const periodName = new EDSPeriod(getSchoolMoment(moment())).period;\n    return env.currentUser.roles.indexOf('EMPLOYEE') === -1 ?\n      // STUDENTs should, by default, only show courses that is listed in EDS\n      env.edsClient.getActiveCourses({periodName}) :\n      // EMPLOYEEs should, by default, show all courses on school - no need to query EDS\n      null;\n  }\n\n  async createCoursesList(\n    edsActiveCourses: EDSCourse[] | null,\n    userHiddenCourses: UserHiddenCourse[],\n    activeCourses: Partial<Course>[]) : Promise<CourseWithHiddenState[]>\n  {\n    const hiddenCoursesMap = arrayToMap(userHiddenCourses.filter(hc => !hc.show), hc => hc.name);\n    const visibleCoursesMap = arrayToMap(userHiddenCourses.filter(hc => hc.show), hc => hc.name);\n\n    const isStudent = env.currentUser.roles.some(role => role === 'STUDENT');\n\n    const edsCourseMap = edsActiveCourses ?\n      arrayToMap(edsActiveCourses, c => c.name.substr(0, 20)) :\n      {};\n\n    const result = await Promise.all(activeCourses.map(async ({id, name, description, modifiedBy}) => {\n\n      const edsCourse = edsCourseMap[name.substr(0, 20)];\n\n      const defaultVisible = isStudent ?\n        edsCourse != null : // Course name also listed in EDS\n        true; // Teachers not dependent on EDS listing\n\n      const visible = defaultVisible ?\n        !hiddenCoursesMap[id] : // Visible unless user has overridden that.\n        !!visibleCoursesMap[id]; // Hidden unless user has overridden that.\n      \n      if (!this.fullCourse && name.length >= 20) {\n        // name could be truncated. Resolve the full name.\n        if (edsCourse) {\n          // Resolve full course name from EDS.\n          name = edsCourse.name;\n        } else if (visible) {\n          // No EDS to fallback to. Unless we wanna print course name as \"THE Partial name\" + \"...\",\n          // we must query the full course here from kedbackend:\n          const fullCourse = await env.kedBackendClient.get(\"courses\", id);\n          name = fullCourse.name;\n        }\n      }\n\n      // Resolve description:\n      if (modifiedBy && modifiedBy.name && !description) {\n        description = `${modifiedBy.name}s version`;\n      }\n\n      return {\n        id,\n        name,\n        description,\n        visible,\n        defaultVisible\n      };\n    }));\n\n    return result;\n  }\n\n  async hideCourse(c: CourseWithHiddenState) {\n    const overrides = this.kedRepo.mem.items.filter(hc => hc.name === c.id);\n    if (c.defaultVisible) {\n      await this.kedRepo.insert([{\n        id: createUUID(),\n        name: c.id\n      }]);\n    } else {\n      await this.kedRepo.delete(overrides.map(ov => ov.id));      \n    }\n  }\n\n  async showCourse(c: CourseWithHiddenState) {\n    const overrides = this.kedRepo.mem.items.filter(hc => hc.name === c.id);\n    if (c.defaultVisible) {\n      await this.kedRepo.delete(overrides.map(ov => ov.id));\n    } else {\n      await this.kedRepo.insert([{\n        id: createUUID(),\n        name: c.id,\n        show: true\n      }]);\n    }\n  }\n\n  notifySubscriber = (subscriber: HiddenCoursesSubscriber, options: SubscriberOptions) => {\n    try {\n      subscriber(options.fullCourse ? this.result : this.result.filter(c => c.visible));\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async subscribe (subscriber: HiddenCoursesSubscriber, options: SubscriberOptions) {\n    if (!this.fullCourse && options.fullCourse) {\n      // The subscriber demands full courses\n      // Need to query that before notifying\n      // Also affect state for future internal notification\n      this.fullCourse = options.fullCourse;\n      this.kedCoursesPromise = this.listKedCourses(); // Redo this call, now loading full courses\n      // Wait for all outstanding fetch() calls to complete:\n      const [activeCourses, edsActiveCourses, userHiddenCourses] = await Promise.all([\n        this.kedCoursesPromise, \n        this.edsCoursesPromise,\n        this.userHiddenCoursesPromise]);\n      // Assemble result:\n      this.result = await this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses);\n    }\n    await this.userHiddenCoursesPromise; // So we know that this.result is there.\n    this.notifySubscriber(subscriber, options);\n    this.subscribers.push({subscriber, options});\n  }\n\n  unsubscribe (subscriber: HiddenCoursesSubscriber) {\n    this.subscribers = this.subscribers.filter(s => s.subscriber !== subscriber);\n  }\n}\n\nif (!hiddenCoursesRepo) {\n  hiddenCoursesRepo = env.hiddenCoursesRepo = new HiddenCoursesRepo();\n}\n","import { Repo, RepoCommunicator} from './repo';\nimport { KedBackendClient, ListOptions, BatchRunner, createUUID } from 'kedbackend/client';\nimport { Document} from 'kedbackend/models';\n\nexport interface KedRepoOptions<T extends Document> {\n  getClient: ()=>KedBackendClient;\n  getQueryOptions: ()=>Promise<ListOptions>;\n  optimistic: boolean;\n  table: string;\n  user: string;\n}\n\nexport class KedRepo<T extends Document> {\n  mem: Repo<T>;\n  options: KedRepoOptions<T>;\n  \n  constructor(options: KedRepoOptions<T>) {\n    const {table, getClient, getQueryOptions} = options;\n    this.mem = new Repo<T>({query: async ()=>{\n      const queryOptions = await getQueryOptions();\n      return await getClient().list<T>(table, {\n        ...queryOptions,\n        cacheBust: this.getCacheBust()});\n    }});\n    this.options = options;\n  }\n\n  private getCacheBust() {\n    const {table, user} = this.options;\n    const cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);\n    return cacheBust || this.regenerateCacheBust();\n  }\n\n  private regenerateCacheBust() {\n    const {table, user} = this.options;\n    const cacheBust = createUUID();\n    localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);\n    return cacheBust;\n  }\n\n  async upsert(item: T, updater: (item: T) => void) {\n    if (!item.$etag) {\n      // Items without $etag cannot be retrieved from server, so it should be inserted.\n      const updatedItem = Object.assign({}, item);\n      updater(updatedItem);\n      return await this.insert([updatedItem]);\n    } else {\n      // We have an $etag, so we can expect it to live on the server.\n      // However, take care of the unlikely situation that it was deleted from server,\n      // and if so, insert it again.\n      await this.update([item], updater).catch(e => {\n        if (e.name === \"http404\" || e.name === \"http403\") {\n          const updatedItem = Object.assign({}, item);\n          updater(updatedItem);\n          return this.insert([updatedItem]);\n        }\n        return Promise.reject(e);\n      });\n    }\n  }\n\n  async update(items: T[], updater: (item: T) => void) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    const modifiedItems: T[] = items.map(item => {\n      const memRepoItem = this.mem.items.find(it => it.id === item.id);\n      item = Object.assign({}, memRepoItem || item);\n      updater(item);\n      return item;\n    });\n    if (optimistic) await this.mem.update(modifiedItems.map(x => Object.assign({}, x, {$meta: 'updating'})));\n    const res = await client.do (br => modifiedItems.forEach(item => br.put(table, item)))\n    .catch(e => e.name === \"http409\" ? // conflict\n      // Get a fresh version from server:\n      client.list<T>(table, {ids: items.map(item => item.id)}, {cache: 'no-cache'}).then(freshItems => {\n        // Update local version:\n        const modifiedItems = freshItems.map(freshItem => {\n          // Clone the fresh item\n          const modified = Object.assign({}, freshItem);\n          // Re-run the updater on the clone:\n          updater(modified);\n          return modified;\n        });\n        // Re-do the the put operation towards the server.\n        return client.do(br => modifiedItems.forEach(item => br.put(table, item)));\n      }) :\n      // Other unexpected error:\n      Promise.resolve(optimistic &&\n        this.mem.update(items)) // Undo optimistic update\n      .then(()=>{\n        return Promise.reject(e); // Reject with the error no matter.\n      }));\n    this.regenerateCacheBust();\n    modifiedItems.forEach(item => {\n      item.$etag = res.newEtags[item.id];\n      item.$meta = undefined;\n    });\n    await this.mem.update(modifiedItems); // Ensures new etag is is applied on next action.\n  }\n\n  stripGraphs (items: T[], graphs: string[]) {\n    return items.map(item => {\n      const clone = Object.assign({}, item);\n      graphs.forEach(graph => {\n        if (item[graph]) {\n          clone[graph] = (item[graph] as {id:string}[]).map (doc => ({id: doc.id}));\n        }\n      });\n      return clone;\n    });\n  }\n\n  async insert(items: T[]) {\n    const {getClient, optimistic, table, getQueryOptions} = this.options;\n    const client = getClient();\n    const queryOptions = await getQueryOptions();\n    const graphs = [].concat(queryOptions.include);\n    // Give IDs to each item:\n    items = items.map(item => item.id ? item : Object.assign({}, item, {id: createUUID()}));\n    const stripped = this.stripGraphs(items, graphs);\n    if (optimistic) await this.mem.insert(stripped.map(x => Object.assign({}, x, {$meta: 'adding'})));\n    const br = new BatchRunner();\n    for (const item of stripped) {\n      // Also add links to all foreign related items:\n      for (const graph of graphs) {\n        const foreignItems: Document[] = item[graph];\n        if (foreignItems) {\n          foreignItems.forEach(doc => {\n            br.link2(table, item.id, graph, doc.id);\n          });\n        }\n      }\n      br.add(table, item);\n    }\n    const res = await client.batch(br.mutationRequests).catch(e => {\n      if (optimistic) this.mem.delete(items.map(item => item.id));\n      return Promise.reject(e);\n    })\n    this.regenerateCacheBust();\n    items.forEach(item => item.$etag = res.newEtags[item.id]);\n    if (optimistic)\n      await this.mem.update(items); // Update with new $etag.\n    else\n      await this.mem.insert(items);\n  }\n\n  async delete (ids: string[]) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    if (optimistic) await this.mem.update(ids\n      .map(id => this.mem.items.find(x => x.id === id))\n      .filter(x => x)\n      .map(x => Object.assign({}, x, {$meta: 'deleting'})));\n    const res = await client.do (br => ids.forEach(id => br.delete(table, id))).catch(async e => {\n      if (optimistic) {\n        await this.mem.update(ids\n          .map(id => this.mem.items.find(x => x.id === id))\n          .filter(x => x)\n          .map(x => {\n            x = Object.assign({}, x);\n            delete x.$meta;\n            return x;\n          }));\n      }\n      throw e;\n    });\n    this.regenerateCacheBust();\n    await this.mem.delete(ids);\n  }\n}\n","\n\nexport interface RepoCommunicator<T extends {id: string}> {\n  query(): Promise<T[]>;\n}\n\ntype Subscriber<T> = (items:T[]) => any;\n\nexport class Repo<T extends {id: string}> {\n  listPromise: Promise<void>;\n  items: T[];\n  subscribers: Subscriber<T>[];\n\n  constructor(public comm: RepoCommunicator<T>) {\n    this.listPromise = null;\n    this.items = null;\n    this.subscribers = [];\n  }\n\n  subscribe(subscriber: Subscriber<T>) {\n    return this.ensureHasData().then(()=>{\n      subscriber(this.items);\n      this.subscribers.push(subscriber);\n    });\n  }\n\n  unsubscribe(subscriber: Subscriber<T>) {\n    this.subscribers = this.subscribers.filter (s => s !== subscriber);\n  }\n\n  notifySubscribers() {\n    this.subscribers.forEach(s => s(this.items));\n  }\n\n  ensureHasData() {\n    if (!this.listPromise) this.refreshFromServer();\n    return this.listPromise;\n  }\n\n  refreshFromServer() {\n    this.listPromise = this.comm.query().then(items => {\n      this.items = items;\n      this.notifySubscribers();\n    });\n    return this.listPromise;\n  }\n  \n  async update(item: T | T[]) {\n    await this.ensureHasData();\n    const items = Array.isArray(item) ? item : [item];\n    this.items = this.items.map(it => {\n      const item = items.find(({id}) => it.id === id);\n      return item ?\n        Object.assign({}, item) :\n        it;\n    });\n    this.notifySubscribers();\n  }\n\n  insert(item: T | T[]) {\n    return this.ensureHasData().then(()=>{\n      this.items = this.items.concat(item);\n      this.notifySubscribers();\n    });\n  }\n\n  delete(id: string | string[]) {\n    const ids = Array.isArray(id) ? id : [id];\n    return this.ensureHasData().then(()=>{\n      this.items = this.items.filter(it => !ids.some(id => it.id === id));\n      this.notifySubscribers();\n    });\n  }\n}\n","import {KedRepo} from './ked-repo';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { WeekPlannerPersistedState } from \"../components/weekplanner/weekplanner-persisted-state\";\nimport moment from 'moment';\nimport { createUUID, DocumentAccess } from 'kedbackend/client';\nimport { getAdjustedWeek, KEDWeek } from '../utils/weekutil';\n\nexport let userTasksRepo = env.userTasksRepo as UserTasksRepo;\n\nclass UserTasksRepo extends KedRepo<UserTask> {\n  persistedState: WeekPlannerPersistedState | null;\n\n  constructor() {\n    super({\n      getClient() { return env.kedBackendClient; },\n      optimistic: true,\n      table: \"usertasks\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async () => {\n        const userEmail = env.currentUser ? env.currentUser.mail : \"\";\n        if (!this.persistedState)\n          this.persistedState = await WeekPlannerPersistedState.load(userEmail);\n        const { weekDate } = this.persistedState;\n        const weekNumber = moment(weekDate).week();\n        const kedWeek = KEDWeek(moment(weekDate).year(), weekNumber);\n        /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]\n          .map(m => m.toDate().getTime());*/\n        \n          return {\n            from: kedWeek.notBefore,\n            to: kedWeek.notAfter,\n            role: \"USER\",\n            include: [\"task\", \"course\"],\n            flags: [\"includeIdsOnly\"],\n          };\n        }\n    });\n    this.persistedState = null;\n  }\n\n  async updatePersistedState(stateChanges: Partial<WeekPlannerPersistedState>) {\n    Object.assign(this.persistedState, stateChanges);\n    await this.persistedState.save();\n    this.mem.notifySubscribers();\n  }\n\n  async setTaskDoneState(userTask: UserTask, done: boolean) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    const modifiedItem = Object.assign({}, userTask, {done});\n    if (optimistic) await this.mem.update(Object.assign({}, modifiedItem, {$meta: 'updating'}));\n    // Now make sure to change the state for other weeks as well:\n    const similarTasks = await client.list<UserTask>('usertasks', {\n      name: userTask.name,\n      role: \"USER\",\n      include: [\"task\",\"course\"],\n      flags: [\"includeIdsOnly\"],\n      from: moment(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),\n      to: moment(this.persistedState.weekDate).add(3, 'weeks').valueOf()\n    }, {\n      cache: 'no-cache'\n    });\n    const identicalTasks = similarTasks.filter(t =>\n      t.courseName === userTask.courseName &&\n      t.learningGoal === userTask.learningGoal &&\n      (!userTask.task || t.task.map(t=>t.id).join('') === userTask.task.map(t=>t.id).join('')) &&\n      (!userTask.course || t.course.map(c=>c.id).join('') === userTask.course.map(c=>c.id).join('')));\n    await this.update(identicalTasks, t => t.done = done);\n  }\n\n  async setSubTaskDoneState (userTask: UserTask, subTaskId: string, done: boolean) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    await this.update([userTask],\n      t => t.subTasks && t.subTasks.filter(st => st.id === subTaskId)\n        .forEach(st => st.done = done));\n  }\n\n  async setWeekPlannerBoxOpen(courseName: string, isOpen: boolean) {\n    const openCourses = { ...this.persistedState.openCourses };\n    if (isOpen)\n      openCourses[courseName] = true;\n    else\n      delete openCourses[courseName];\n    await this.updatePersistedState({openCourses});\n  }\n\n  async changeWeek(weekDate: Date) {\n    let persistedState = this.persistedState;\n    if (!persistedState) {\n      persistedState = await WeekPlannerPersistedState.load(env.currentUser.mail);\n    }\n    const newPersisted = new WeekPlannerPersistedState(persistedState);\n    newPersisted.weekDate = moment(weekDate).startOf('week').valueOf();\n    newPersisted.save();\n    this.persistedState = newPersisted;\n    await this.mem.refreshFromServer();\n  }\n\n  subscribe(subscriber: (userTasks: UserTask[], persistedState: WeekPlannerPersistedState, weekTextsUT: UserTask) => void) {\n    const proxySubscriber = (userTasks: UserTask[]) => {\n      subscriber(\n        userTasks.filter(ut => !ut.weekTexts),\n        this.persistedState,\n        userTasks.filter(ut => !!ut.weekTexts)[0] || {\n          id: createUUID(),\n          dateTime: this.persistedState.weekDate,\n          weekTexts: {assessment:'', strategy:''},\n          acl: [\n            // Default ACL: Let user self have full control over this item:\n            new DocumentAccess(\"email\", env.currentUser.mail, \"S\"),\n            // Additional ACL: Let employees on same school have read access to it.\n            // This currently only applies to tasks that refer to course tasks (not own tasks!)\n            new DocumentAccess(\"schoolRole\", `${env.currentUser.school}/EMPLOYEE`, \"R\")\n          ].map(ac => ac.toString())\n        });\n    };\n    proxySubscriber[\"subscriber\"] = subscriber;\n    this.mem.subscribe(proxySubscriber);\n  }\n\n  unsubscribe(subscriber: (userTasks: UserTask[], persistedState: WeekPlannerPersistedState, weekTextsUT: UserTask) => void) {\n    this.mem.subscribers = this.mem.subscribers.filter (s => s[\"subscriber\"] !== subscriber);\n  }\n  \n}\n\nif (!userTasksRepo) {\n  userTasksRepo = env.userTasksRepo = new UserTasksRepo();\n  userTasksRepo.mem.ensureHasData();\n}\n","import * as React from 'react';\nimport {L} from './utils';\nimport $ from 'jquery';\n\ninterface Props {\n}\n\ninterface State {\n  error: string | undefined;\n  info: string | undefined;\n}\n\nexport class ErrorSuccessFeedback extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props);\n    this.state={\n      error: undefined,\n      info: undefined\n    };\n    this._unhandledRejection = this._unhandledRejection.bind(this);\n    this._error = this._error.bind(this);\n    this._customError = this._customError.bind(this);\n    this._onInfo = this._onInfo.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('unhandledrejection', this._unhandledRejection);\n    window.addEventListener('error', this._error);\n    window.addEventListener('customerror', this._customError);\n    window.addEventListener('info', this._onInfo);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('unhandledrejection', this._unhandledRejection);\n    window.removeEventListener('error', this._error);\n    window.removeEventListener('customerror', this._customError);\n    window.removeEventListener('info', this._onInfo);\n  }\n\n  _unhandledRejection (ev: Event & {reason: Error}) {\n    this.setState({error: ev.reason ? ev.reason.message : L`Ett okänt fel inträffade...`, info: null});\n    setTimeout(()=>this.setState({error: null}), 10000);\n  }\n\n  _error (ev: Event & {error: Error}) {\n    this.setState({error: ev.error ? ev.error.message : L`Ett okänt fel inträffade...`, info: null});\n    setTimeout(()=>this.setState({error: null}), 10000);\n  }\n\n  _customError (ev: CustomEvent) {\n    this.setState({error: ev.detail, info: null});\n    setTimeout(()=>this.setState({error: null}), 10000);\n  }\n\n  _onInfo(ev: CustomEvent) {\n    this.setState({error: null, info: ev.detail });\n    setTimeout(()=>this.setState({info: null}), 10000);\n  } \n\n  render() {\n    return <div className=\"error-success-feedback\" style={{\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      width: \"100%\",\n      pointerEvents: 'none'\n    }}>\n      <div style={{display: 'table', margin: \"0 auto\"}}>\n        <p className=\"error\" style={{display: this.state.error ? \"\" : \"none\"}}>{this.state.error && this.state.error}</p>\n        <p className=\"info\" style={{display: this.state.info ? \"\" : \"none\"}}>{this.state.info}</p>\n      </div>\n    </div>;\n  }\n}\n","\nexport class PendingJob {\n  private timeoutId = null;\n  private cancelled = false;\n  private pending = false;\n  private isJobExecuting = false;\n  private jobCallback: ()=>Promise<any>;\n  \n  constructor(callback: ()=>Promise<any>) {\n    this.jobCallback = callback;\n  }\n\n  triggerChange(throttle: number): any {\n    if (this.cancelled) return;\n    this.pending = true;\n    if (this.timeoutId !== null)\n      clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(()=>this.launchJob(), throttle);\n  }\n\n  stop() {\n    if (this.timeoutId !== null)\n      clearTimeout(this.timeoutId);\n    this.timeoutId = null;\n    this.cancelled = true;\n  }\n\n  private async launchJob() {\n    if (this.cancelled) return;\n    if (!this.pending) return;\n    if (this.isJobExecuting) return;\n    this.timeoutId = null;\n    try {\n      this.isJobExecuting = true;\n      this.pending = false;\n      await this.jobCallback();\n    } finally {\n      this.isJobExecuting = false;\n    }\n    if (this.pending)\n      await this.launchJob();\n  }\n}\n","export interface ParseQueryStringOptions {\n  toLower?: boolean;\n}\n\nexport function parseQueryString(locationSearch: string, options?: ParseQueryStringOptions): { [key: string]: string } {\n  const {toLower} = (options || {}) as ParseQueryStringOptions;\n  const result = {};\n  if (locationSearch && locationSearch.length > 1)\n    locationSearch.substr(1)\n      .split('&')\n      .map(part => part.split('=').map(s => decodeURIComponent(s.trim())))\n      .forEach(([key, value]) => result[toLower ? key.toLowerCase() : key] = value);\n  return result;\n}\n\nfunction encodeParams(params: {[key: string]:string}) {\n  return Object.keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`).join('&');\n}\n\nexport function generateQueryString(params: {[key: string]:string}) {\n  return \"?\" + encodeParams(params);\n}\n\nexport function parseHashQueryString(locationHash: string, options?: ParseQueryStringOptions) {\n  return parseQueryString(locationHash, options);\n}\n\nexport function generateHashQueryString(params: {[key: string]:string}) {\n  return \"#\" + encodeParams(params);\n}\n\nexport function splitUrlAndQuery (urlWithPossibleQuery: string) {\n  const pQuery = urlWithPossibleQuery.indexOf('?');\n  return pQuery >= 0 ?\n    [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :\n    [urlWithPossibleQuery, \"\"];\n}\n","import moment from 'moment';\nimport { Term, AcademicYear } from '../contracts/ked-models';\n\nexport interface SchoolMoment {\n  academicYear: AcademicYear;\n  term: Term;\n  week?: number;\n}\n\nexport function getFirstAndLastWeekOfTerm(term: Term) {\n  return term === 'AT' ?\n    [32, 51] :\n    [1, 25];\n}\n\nexport function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {\n  return now.month() >= 7 ? // 7 = August in JS Dates and in moment as well!\n    [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31\n    [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31\n}\n\nexport function getSchoolMoment(m: moment.Moment): SchoolMoment {\n  const thisYear = m.year();\n  const isAutumn = m.month() >= 7;\n  const [autumnYear, springYear] = isAutumn ?\n    [thisYear, thisYear + 1] :\n    [thisYear - 1, thisYear];\n  const academicYear = '' + autumnYear + '/' + springYear;\n  const term = isAutumn ? 'AT' : 'ST';\n  const week = m.week();\n  return { academicYear, term, week };\n}\n\nexport function addYear(aYear: AcademicYear, numYearsToAdd: number): AcademicYear {\n  return aYear.split('/')\n    .map(yearStr => parseInt(yearStr) + numYearsToAdd)\n    .map(year => '' + year)\n    .join('/');\n}\n\nexport function nextAcademicYear(aYear: AcademicYear): AcademicYear {\n  return addYear(aYear, 1);\n}\n\nexport function prevAcademicYear(aYear: AcademicYear): AcademicYear {\n  return addYear(aYear, -1);\n}\n","import moment from 'moment';\nimport { SchoolMoment, getSchoolMoment, addYear } from './school-moment';\nimport { AcademicYear, Term } from '../contracts/ked-models';\n\ntype Moment = moment.Moment;\n\nfunction isSchoolMoment(obj: Date | SchoolMoment): obj is SchoolMoment {\n  return 'academicYear' in obj;\n}\n\nexport class SchoolTerm {\n  academicYear: AcademicYear;\n  term: Term;\n\n  constructor(dateOrSchoolMoment: Date | SchoolMoment) {\n    const schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?\n      dateOrSchoolMoment : getSchoolMoment(moment(dateOrSchoolMoment));\n    this.academicYear = schoolMoment.academicYear;\n    this.term = schoolMoment.term;\n  }\n\n  get year() {\n    return parseInt(this.academicYear\n        .split('/')[this.term === 'AT' ? 0 : 1]);\n  }\n\n  nextTerm() {\n    return new SchoolTerm(this.term === 'AT' ?\n      {\n        term: 'ST',\n        academicYear: this.academicYear\n      } :\n      {\n        term: 'AT',\n        academicYear: addYear(this.academicYear, 1)\n      });\n  }\n\n  prevTerm() {\n    return new SchoolTerm(this.term === 'AT' ?\n      {\n        term: 'ST',\n        academicYear: addYear(this.academicYear, -1)\n      } :\n      {\n        term: 'AT',\n        academicYear: this.academicYear\n      });\n    \n  }\n\n  toLocaleString(locales: string[], shortYear?: boolean) {\n    let year = this.term === 'AT' ?\n      this.academicYear.split('/')[0]:\n      this.academicYear.split('/')[1];\n\n    if (shortYear)\n      year = year.substr(2);\n\n    for (let locale of locales) {\n      switch (locale.split('-')[0].split('_')[0].toLowerCase()) {\n        case 'en':\n          return `${this.term === 'AT' ? \"AT\" : \"ST\"} ${year}`;\n        case 'sv':\n          return `${this.term === 'AT' ? \"HT\" : \"VT\"} ${year}`;\n      }\n    }\n  }\n}\n","\nexport function capitalizeFirst (str) {\n    for (let i=0, l=str.length; i<l; ++i) {\n        if (str.charCodeAt(i) < 0x2000) {\n            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);\n        }\n    }\n    return str;\n}\n\nexport function extend(obj, extension) {\n    if (typeof extension !== 'object') return obj;\n    Object.keys(extension).forEach(key => {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\n\nexport function clone<T,E> (obj : T, extension?: E) {\n    let clone = {};\n    Object.getOwnPropertyNames(obj).forEach(key => {\n        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));\n    });\n    if (extension) extend(clone, extension);\n    return clone as (T & E);\n}\n\nconst concat = [].concat;\nexport function flatten<T> (a : (T | T[])[]) {\n    return concat.apply([], a) as T[];\n}\n\nexport function compareProp(prop:string) {\n    return (a,b) => {\n        const aProp = a[prop], bProp = b[prop];\n        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;\n    }\n}\n\nexport function compareProps(props: string | string[], locales?: string | string[], options?: Intl.CollatorOptions) {\n    props = Array.isArray(props) ? props : [props];\n\n    const localeCompare = (a,b) =>\n        typeof a === 'string' ?\n            a.localeCompare(b, locales, options) :\n            a < b ? -1 : a > b ? 1 : 0;\n\n    return props\n        .map(prop => (a,b) => localeCompare(a[prop], b[prop]))\n        .reduce((cmp1, cmp2) =>\n            (a,b) => cmp1(a,b) || cmp2(a,b));\n}\n\nexport function L(text, ...args) {\n    let first = text[0];\n    return buildMessage(text, args);\n}\n\nfunction buildMessage (text, args) {\n    let rv = text[0];\n    for (let i=1, l=text.length; i<l; ++i) {\n        rv += args[i-1] + text[i];\n    }\n    return rv;\n}\n\nexport class TC<T> {\n    constructor(template: T) {\n        extend(this, template);\n    }\n}\n\nexport function dateTimeReviver (key, value) {\n    var a;\n    if (typeof value === 'string') {\n        a = /\\/Date\\((\\d*)\\)\\//.exec(value);\n        if (a) {\n            return new Date(+a[1]);\n        }\n    }\n    return value;\n}\n\nexport function showInfo (msg) {\n    var event = new CustomEvent('info', { 'detail': msg });\n    window.dispatchEvent(event);\n}\n\nexport function showError (errMsg: string | Error) {\n    const msg = typeof errMsg === 'string' ? errMsg : errMsg.message;\n    var event = new CustomEvent('customerror', { 'detail': msg });\n    console.error(errMsg);\n    window.dispatchEvent(event);\n}\n\nexport function maxLength(str: string, maxLen: number) {\n    return str.length > maxLen ?\n        str.substr(0, maxLen - 3) + \"...\" :\n        str;\n}\n\nexport function arrayToLookup<T>(a: T[], keyAccessor: (item: T) => string | number) {\n    const result : {[key: string] : T[]} = {};\n    for (let i=0, l=a.length; i<l; ++i) {\n        const item = a[i];\n        const key = keyAccessor(item);\n        let array = result[key];\n        if (array) array.push(item);\n        else result[key] = [item];\n    }\n    return result;\n}\n\nexport function arrayToMap<T>(a: T[], keyAccessor: (item: T) => string | number) {\n    const result : {[key: string] : T} = {};\n    for (let i=0, l=a.length; i<l; ++i) {\n        const item = a[i];\n        const key = keyAccessor(item);\n        result[key] = item;\n    }\n    return result;\n}\n\nexport function cherryPickProps<T> (obj: T, propsToPick: string[]): Partial<T> {\n    const result = {};\n    for (const param of propsToPick) {\n      if (param in obj) result[param] = obj[param];\n    }\n    return result as Partial<T>;\n}\n\nexport function distinct<T> (a: T[], keyAccessor: (item: T) => any) {\n    const map = arrayToMap(a, keyAccessor);\n    return Object.keys(map).map(key => map[key]);\n}\n","import moment, { Moment } from \"moment\";\n\nexport function KEDWeek (year: number, week: number) {\n  const m = moment(new Date(year, 1, 1)).locale('sv').week(week);\n  const res = {\n    year,\n    week,\n    notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),\n    notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()\n  };\n  return res;\n}\n\nexport function getAdjustedWeek(m: Moment) {\n  const clone = m.clone().locale('sv');\n  return m.weekday() >= 5 ? // Lördag 00:00 / Söndag 00:00?\n      m.week() + 1 : // Tillhör nästa vecka\n      m.week();\n}\n\n/*export function getWeekLimits (m: Moment) {\n  const clonedSwedish = m.clone().locale('sv');\n  const limits = {\n    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),\n    notAfter: clonedSwedish.startOf('week').add(5, 'days')\n  };\n}\n*/\n","module.exports = jQuery;","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}