var kedappcourseviewer=function(e){function t(t){for(var r,o,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],a[o]&&m.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);m.length;)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={4:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;return s.push([84,0]),n()}([function(e,t){e.exports=React},,function(e,t,n){"use strict";function r(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)<8192)return e.substr(0,t)+e[t].toLocaleUpperCase()+e.substr(t+1);return e}function a(e,t){return"object"!=typeof t?e:(Object.keys(t).forEach(function(n){e[n]=t[n]}),e)}function s(e,t){var n={};return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),t&&a(n,t),n}n.d(t,"d",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"k",function(){return i}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"n",function(){return m}),n.d(t,"m",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return v}),n.d(t,"j",function(){return g});var o=[].concat;function i(e){return o.apply([],e)}function l(e){return function(t,n){var r=t[e],a=n[e];return r>a?1:r<a?-1:0}}function c(e,t,n){return(e=Array.isArray(e)?e:[e]).map(function(e){return function(r,a){return function(e,r){return"string"==typeof e?e.localeCompare(r,t,n):e<r?-1:e>r?1:0}(r[e],a[e])}}).reduce(function(e,t){return function(n,r){return e(n,r)||t(n,r)}})}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e[0];return function(e,t){for(var n=e[0],r=1,a=e.length;r<a;++r)n+=t[r-1]+e[r];return n}(e,t)}function d(e,t){var n;return"string"==typeof t&&(n=/\/Date\((\d*)\)\//.exec(t))?new Date(+n[1]):t}function m(e){var t=new CustomEvent("info",{detail:e});window.dispatchEvent(t)}function p(e){var t="string"==typeof e?e:e.message,n=new CustomEvent("customerror",{detail:t});console.error(e),window.dispatchEvent(n)}function f(e,t){return e.length>t?e.substr(0,t-3)+"...":e}function h(e,t){for(var n={},r=0,a=e.length;r<a;++r){var s=e[r],o=t(s),i=n[o];i?i.push(s):n[o]=[s]}return n}function b(e,t){for(var n={},r=0,a=e.length;r<a;++r){var s=e[r];n[t(s)]=s}return n}function v(e,t){for(var n={},r=0,a=t;r<a.length;r++){var s=a[r];s in e&&(n[s]=e[s])}return n}function g(e,t){var n=b(e,t);return Object.keys(n).map(function(e){return n[e]})}},function(e,t,n){"use strict";var r="undefined"==typeof KED?{}:KED;"undefined"!=typeof window&&"undefined"==typeof KED&&(window.KED=r);var a=r;a.env||(a.env={});t.a=a.env},,,function(e,t,n){"use strict";var r=n(23);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"c",function(){return r.c}),n.d(t,"d",function(){return r.e}),n.d(t,"e",function(){return r.f}),n.d(t,"f",function(){return r.g})},function(e,t,n){"use strict";var r=n(1),a=n(29),s=n(3),o=n(5),i=n.n(o),l=n(33),c=function(){function e(e){"string"==typeof e?(this.user=e,this.lastWrite=Date.now(),this.weekDate=Object(l.a)().startOf("week").valueOf(),this.openCourses={}):Object.assign(this,e)}return e.load=function(t){return r.b(this,void 0,void 0,function(){var n,a,s;return r.d(this,function(r){return n=localStorage.getItem("WeekPlannerPersistedState2"),a=n&&JSON.parse(n),s=new e(t),a&&Object.assign(s,a),[2,s.user!==t||s.isExpired(i()())?new e(t):s]})})},e.prototype.save=function(){return r.b(this,void 0,void 0,function(){var e;return r.d(this,function(t){return this.lastWrite=Date.now(),e=JSON.stringify(this),localStorage.setItem("WeekPlannerPersistedState2",e),[2]})})},e.prototype.isExpired=function(t){return i()(this.lastWrite).isBefore(t.add(0-e.EXPIRATION_HOURS,"hours"))},e.EXPIRATION_HOURS=12,e.VERSION=2,e}(),u=n(6),d=n(26);n.d(t,"a",function(){return m});var m=s.a.userTasksRepo,p=function(e){function t(){var t=e.call(this,{getClient:function(){return s.a.kedBackendClient},optimistic:!0,table:"usertasks",user:s.a.currentUser?s.a.currentUser.mail:"",getQueryOptions:function(){return r.b(t,void 0,void 0,function(){var e,t,n,a,o;return r.d(this,function(r){switch(r.label){case 0:return e=s.a.currentUser?s.a.currentUser.mail:"",this.persistedState?[3,2]:(t=this,[4,c.load(e)]);case 1:t.persistedState=r.sent(),r.label=2;case 2:return n=this.persistedState.weekDate,a=i()(n).week(),[2,{from:(o=Object(d.a)(i()(n).year(),a)).notBefore,to:o.notAfter,role:"USER",include:["task","course"],flags:["includeIdsOnly"]}]}})})}})||this;return t.persistedState=null,t}return r.c(t,e),t.prototype.updatePersistedState=function(e){return r.b(this,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return Object.assign(this.persistedState,e),[4,this.persistedState.save()];case 1:return t.sent(),this.mem.notifySubscribers(),[2]}})})},t.prototype.setTaskDoneState=function(e,t){return r.b(this,void 0,void 0,function(){var n,a,s,o,l,c,u;return r.d(this,function(r){switch(r.label){case 0:return n=this.options,a=n.getClient,s=n.optimistic,n.table,o=a(),l=Object.assign({},e,{done:t}),s?[4,this.mem.update(Object.assign({},l,{$meta:"updating"}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,o.list("usertasks",{name:e.name,role:"USER",include:["task","course"],flags:["includeIdsOnly"],from:i()(this.persistedState.weekDate).add(-3,"weeks").valueOf(),to:i()(this.persistedState.weekDate).add(3,"weeks").valueOf()},{cache:"no-cache"})];case 3:return c=r.sent(),u=c.filter(function(t){return!(t.courseName!==e.courseName||t.learningGoal!==e.learningGoal||e.task&&t.task.map(function(e){return e.id}).join("")!==e.task.map(function(e){return e.id}).join("")||e.course&&t.course.map(function(e){return e.id}).join("")!==e.course.map(function(e){return e.id}).join(""))}),[4,this.update(u,function(e){return e.done=t})];case 4:return r.sent(),[2]}})})},t.prototype.setSubTaskDoneState=function(e,t,n){return r.b(this,void 0,void 0,function(){var a,s;return r.d(this,function(r){switch(r.label){case 0:return a=this.options,s=a.getClient,a.optimistic,a.table,s(),[4,this.update([e],function(e){return e.subTasks&&e.subTasks.filter(function(e){return e.id===t}).forEach(function(e){return e.done=n})})];case 1:return r.sent(),[2]}})})},t.prototype.setWeekPlannerBoxOpen=function(e,t){return r.b(this,void 0,void 0,function(){var n;return r.d(this,function(a){switch(a.label){case 0:return n=r.a({},this.persistedState.openCourses),t?n[e]=!0:delete n[e],[4,this.updatePersistedState({openCourses:n})];case 1:return a.sent(),[2]}})})},t.prototype.changeWeek=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.d(this,function(r){switch(r.label){case 0:return(t=this.persistedState)?[3,2]:[4,c.load(s.a.currentUser.mail)];case 1:t=r.sent(),r.label=2;case 2:return(n=new c(t)).weekDate=i()(e).startOf("week").valueOf(),n.save(),this.persistedState=n,[4,this.mem.refreshFromServer()];case 3:return r.sent(),[2]}})})},t.prototype.subscribe=function(e){var t=this,n=function(n){e(n.filter(function(e){return!e.weekTexts}),t.persistedState,n.filter(function(e){return!!e.weekTexts})[0]||{id:Object(u.e)(),dateTime:t.persistedState.weekDate,weekTexts:{assessment:"",strategy:""},acl:[new u.b("email",s.a.currentUser.mail,"S"),new u.b("schoolRole",s.a.currentUser.school+"/EMPLOYEE","R")].map(function(e){return e.toString()})})};n.subscriber=e,this.mem.subscribe(n)},t.prototype.unsubscribe=function(e){this.mem.subscribers=this.mem.subscribers.filter(function(t){return t.subscriber!==e})},t}(a.a);m||(m=s.a.userTasksRepo=new p).mem.ensureHasData()},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var r=n(21);r.a.cfg||(r.a.cfg={}),t.a=r.a.cfg},function(e,t,n){"use strict";function r(e,t){var n=(t||{}).toLower,r={};return e&&e.length>1&&e.substr(1).split("&").map(function(e){return e.split("=").map(function(e){return decodeURIComponent(e.trim())})}).forEach(function(e){var t=e[0],a=e[1];return r[n?t.toLowerCase():t]=a}),r}function a(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function s(e){return"?"+a(e)}function o(e){var t=e.indexOf("?");return t>=0?[e.substr(0,t),e.substr(t)]:[e,""]}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o})},function(e,t,n){"use strict";n.d(t,"j",function(){return m}),n.d(t,"c",function(){return p}),n.d(t,"g",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"i",function(){return b}),n.d(t,"k",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"f",function(){return E}),n.d(t,"e",function(){return y}),n.d(t,"a",function(){return N}),n.d(t,"h",function(){return C}),n.d(t,"d",function(){return w});var r=n(1),a=n(5),s=n.n(a),o=n(6),i=n(22),l=n.n(i),c=n(8),u=n.n(c),d=n(3);function m(e,t,n,a,s){for(var i={},c=t.id,u=function(l){var u=a[l],d=e[l]||[],m=t[l];if(!m)return"continue";for(var p=m.map(function(e,t){return{doc:e,idx:t}}),f=0,h=p.filter(function(e){return!d.some(function(t){return t.id===e.doc.id})});f<h.length;f++){var b=h[f],v=(C=r.a({},b.doc)).$meta;delete C.$meta,"add"===v?(C.id||(C.id=Object(o.e)()),s.add(u,C)):"update"===v&&s.put(u,C),s.link(n,c,u,C.id,l),i[l]||(i[l]={}),i[l][b.idx]={$set:C}}for(var g=0,k=d.filter(function(e){return!m.some(function(t){return t.id===e.id})});g<k.length;g++){var E=k[g];s.unlink(n,c,u,E.id,l)}for(var y=0,N=p.filter(function(e){return d.some(function(t){return t.id===e.doc.id&&"update"===e.doc.$meta})});y<N.length;y++){var C,w=N[y];delete(C=r.a({},w.doc)).$meta,s.put(u,C),i[l]||(i[l]={}),i[l][w.idx]={$set:C}}},d=0,m=Object.keys(a);d<m.length;d++){u(m[d])}return l()(t,i)}function p(e){return s()(e).format("YYMMDD HH:mm")}function f(e){return s()(e).format("YYMMDD")}function h(e,t,n){return l()(t,{dateTime:{$set:e},modifiedDate:{$set:e},modifiedBy:{$set:{name:n.displayName,url:"mailto:"+n.mail}}})}function b(e,t,n){return l()(t,{createdDate:{$set:Date.now()},createdBy:{$set:{name:n.displayName,url:"mailto:"+n.mail}}})}function v(e,t){var n=Date.now();return(e=h(n,e,t)).createdBy||(e=b(0,e,t)),e}function g(e,t,n){var a=r.a({},e),s=t[e.id];s&&(a.$etag=s);for(var o=0,i=n;o<i.length;o++){var l=i[o],c=e[l].map(function(e){return g(e,t,[])});a[l]=c}return a}function k(e,t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(t){return e(t.target.result)},r.onabort=function(e){return n(new Error("file read aborted"))},r.onerror=function(e){return n(e.target.error)},t(r)})}function E(e){return k(0,function(t){return t.readAsText(e)})}function y(e){return k(0,function(t){return t.readAsDataURL(e)})}function N(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function C(e){var t=u()("div.course-builder")[0];t&&(t.className="course-builder"+(e?" status "+e:""))}function w(e,t){return r.b(this,void 0,void 0,function(){var n,a,s,o,i,l;return r.d(this,function(r){switch(r.label){case 0:return n=d.a.kedBackendClient,a=t&&t.includeTemplateChain,[4,Promise.all([n.get("courses",e,{include:["centralContent","knowledgeRequirements","abilities","images","acl"]}),n.list("tasks",{hasEdgesFrom:e,include:["knowledgeRequirements","centralContent","abilities","acl"],flags:["includeIdsOnly"]}),a&&n.list("courses",{hasEdgesFrom:e,flags:["idsOnly"]})])];case 1:return s=r.sent(),o=s[0],i=s[1],l=s[2],o.tasks=i,o.knowledgeRequirementsOrder&&(o.knowledgeRequirements=o.knowledgeRequirementsOrder.map(function(e){return o.knowledgeRequirements.find(function(t){return t.id===e})})),o.centralContentOrder&&(o.centralContent=o.centralContentOrder.map(function(e){return o.centralContent.find(function(t){return t.id===e})})),a&&(o.templateChain=l),[2,o]}})})}},function(e,t,n){"use strict";var r=n(1),a=n(6);function s(e){return[{type:"email",value:e.mail},{type:"school",value:e.school}].concat(e.roles.map(function(e){return{type:"role",value:e}})).concat(e.roles.map(function(t){return{type:"schoolRole",value:e.school+"/"+t}}))}var o=n(3),i=n(10);n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,!1,function(){return s});var l=["user","role","school","debug","testVersion","testversion","schoolType","schooltype"];function c(e,t){var n=s(o.a.currentUser);return Object(a.f)(a.b.fromStringArray(e.acl||[]),n,t)}function u(e){return c(e,"W")}function d(e){var t=o.a.currentUser.roles.some(function(e){return"EMPLOYEE"===e||"ADMIN"===e}),n=(e||"").toLowerCase()===o.a.currentUser.school.toLowerCase();return t&&n}var m={actAs:function(e){var t=e.role,n=e.school,a=e.url,s=Object(i.b)(location.search),o=r.a({},s,{role:t,school:n}),l=Object(i.a)(o);a?location.href=""+a+l:(location.hash="#",location.search=l)}};function p(e){m.actAs(e)}function f(e,t){for(var n=Object(i.b)(location.search),a=r.a({},t),s=0,o=l;s<o.length;s++){var c=o[s];n[c]&&(a[c]=n[c])}return""+e+Object(i.a)(a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),a=function(){return r.createElement("span",null,r.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"})," ")}},function(e,t,n){"use strict";function r(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}function a(e){var t=null;return function(){return t||(t=e.apply(this,arguments).then(function(e){return t=null,e})),t}}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return l});var r=n(5),a=n.n(r);function s(e){return"AT"===e?[32,51]:[1,25]}function o(e){return e.month()>=7?[a()(new Date(e.year(),7,1)),a()(new Date(e.year(),11,31))]:[a()(new Date(e.year(),0,1)),a()(new Date(e.year(),6,31))]}function i(e){var t=e.year(),n=e.month()>=7,r=n?[t,t+1]:[t-1,t];return{academicYear:r[0]+"/"+r[1],term:n?"AT":"ST",week:e.week()}}function l(e,t){return e.split("/").map(function(e){return parseInt(e)+t}).map(function(e){return""+e}).join("/")}},,function(e,t,n){"use strict";var r=n(23),a=function(){function e(){}return e.prototype.save=function(e,t){sessionStorage.setItem("bearer-"+e,JSON.stringify(t))},e.prototype.load=function(e){try{var t=sessionStorage.getItem("bearer-"+e);return Promise.resolve(t?JSON.parse(t):{token:null,expires:0})}catch(e){return Promise.resolve({token:null,expires:0})}},e}(),s=n(14);function o(e){e.resources||(e.resources=[])}function i(e,t,n){switch(t){case"courses":!function(e,t){e.modules||(e.modules=[]),e.modules.forEach(function(e){e.resources||(e.resources=[]),e.taskIds||(e.taskIds=[])}),e.responsibleTeachers||(e.responsibleTeachers=[]),"resourses"in e&&!("resources"in e)&&(e.resources=e.resourses,delete e.resourses),e.resources||(e.resources=[]),t&&t.forEach(function(t){switch(t){case"tasks":e.tasks.forEach(function(e){return o(e)})}})}(e,n);break;case"tasks":o(e)}}var l,c=(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}l((r=r.apply(e,t||[])).next())})},d=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[0,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};!function(e){if(!e.__migrator_mixed_in){e.__migrator_mixed_in=!0;var t=e.get,n=e.list;e.get=function(e,n,r){var a=r&&r.include;return t.apply(this,arguments).then(function(t){return i(t,e,a&&a.toString().split(",")),t})},e.list=function(e,t){var r=t&&t.include;return n.apply(this,arguments).then(function(t){return t.forEach(function(t){return i(t,e,r&&r.toString().split(","))}),t})}}}(r.d.prototype);var m=new a,p=Date.now(),f=function(){function e(e,t,n){this.tokenPath=e,this.tokenResponseMapper=t,this.tokenId=n,this.tokenInfo={token:null,expires:0},this.getBearer=Object(s.a)(this.getBearer.bind(this)),this.refreshBearer=Object(s.a)(this.refreshBearer.bind(this))}return e.prototype.getBearer=function(){return u(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.tokenInfo.token?[3,2]:this.tokenId?(e=this,[4,m.load(this.tokenId)]):[3,2];case 1:e.tokenInfo=t.sent(),t.label=2;case 2:return this.tokenInfo.expires<Date.now()?[4,this.refreshBearer()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2,this.tokenInfo]}})})},e.prototype.refreshBearer=function(){return u(this,void 0,void 0,function(){var e,t,n,r,a;return d(this,function(s){switch(s.label){case 0:return[4,fetch(this.tokenPath,{headers:{Accept:"text/plain; application/json"},redirect:"manual",cache:"no-cache",credentials:"same-origin"})];case 1:return(302===(e=s.sent()).status||!e.status&&"opaqueredirect"===e.type)&&Date.now()-p>6e4&&(this.wantsRedirect=!0,console.log("Redirect wanted. Reload page."),window.location.reload(!0)),200==e.status?[3,3]:(t=Error.bind,n="HTTP"+e.status+" ",[4,e.text()]);case 2:throw new(t.apply(Error,[void 0,n+s.sent()]));case 3:return r=this,a=this.tokenResponseMapper,[4,e.text()];case 4:return r.tokenInfo=a.apply(this,[s.sent()]),m.save(this.tokenId,this.tokenInfo),[2,this.tokenInfo]}})})},e}(),h={fetch:fetch.bind(self),btoa:btoa.bind(self)},b=function(e){function t(t,n,r){var a="string"!=typeof n?n:new f(n,r&&r.tokenResponseMapper||function(e){return{token:e,expires:Date.now()+212400}},r&&r.tokenId);return e.call(this,h,a,t)||this}return c(t,e),t}(r.d);n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return b})},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(14),a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}l((r=r.apply(e,t||[])).next())})},o=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[0,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},i=function(){function e(e,t,n){this.isomorphic=e,this.baseUrl=t,this.options=n,this.fetchOptions={mode:"cors"},this.authHeader=n.bearer?"Bearer "+n.bearer:n.username?"Basic "+e.btoa(n.username+":"+(n.password||"")):null,this.bearerProvider=n.bearerProvider||null}return e.prototype.fetch=function(e,t,n,i,l){return s(this,void 0,void 0,function(){var s,c,u,d,m,p,f,h,b,v,g;return o(this,function(o){switch(o.label){case 0:return l&&"no-cache"===l.cache&&(i=a({},i,{nocache:Object(r.b)()})),s=i&&Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])}).join("&"),u=(c=this).authHeader,d=c.tokenInfo,m=c.bearerProvider,u||d||!m?[3,2]:(p=this,[4,m.getBearer()]);case 1:p.tokenInfo=d=o.sent(),o.label=2;case 2:return d?d.expires<Date.now()?(console.log("Token expired. Refresh it:"),f=this,[4,m.refreshBearer()]):[3,4]:[3,5];case 3:f.tokenInfo=d=o.sent(),o.label=4;case 4:u="Bearer "+d.token,o.label=5;case 5:return u&&(n.Authorization=u),h=this.baseUrl+e+(s?"?"+s:""),[4,this.isomorphic.fetch(h,a({},this.fetchOptions,{headers:n,method:t},l))];case 6:return 401==(b=o.sent()).status&&this.bearerProvider?(v=b.headers.get("www-authenticate"),console.log("Got "+b.status+" from "+(this.baseUrl+e)),v&&/Bearer/i.test(v)?(g=this,[4,this.bearerProvider.refreshBearer()]):[3,9]):[3,9];case 7:return g.tokenInfo=o.sent(),n.Authorization="Bearer "+this.tokenInfo.token,[4,this.isomorphic.fetch(h,a({},this.fetchOptions,{headers:n,method:t},l))];case 8:b=o.sent(),o.label=9;case 9:return[2,b]}})})},e.prototype.get=function(e,t,n){return this.fetch(e,"GET",{Accept:"application/json; text/plain"},t,n)},e.prototype.post=function(e,t,n){return this.fetch(e,"POST",{"Content-Type":"application/json",Accept:"application/json"},null,a({},n,{body:JSON.stringify(t)}))},e.prototype.delete=function(e,t,n,r){return this.fetch(e,"DELETE",{Accept:"application/json; text/plain"},t,a({},r,{body:n}))},e}()},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var r="undefined"==typeof KED?{}:KED;"undefined"!=typeof window&&"undefined"==typeof KED&&(window.KED=r),t.a=r},,function(e,t,n){"use strict";var r=n(19),a=n(14),s=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}l((r=r.apply(e,t||[])).next())})},o=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[0,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},i=function(){function e(e,t,n,s,o,i,l){this.isomorphic=e,this.storage=t,this.tokenId=n,this.clientId=s,this.clientSecret=o,this.tokenUrl=i,this.tokenQuery=l,this.tokenInfo={token:null,expires:0},this.client=new r.a(e,"",{username:this.clientId,password:this.clientSecret}),this.getBearer=Object(a.a)(this.getBearer.bind(this)),this.refreshBearer=Object(a.a)(this.refreshBearer.bind(this))}return e.prototype.getBearer=function(){return s(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:if(e=this.tokenInfo,t=e.token,n=e.expires,t&&n>=Date.now())return[2,this.tokenInfo];a.label=1;case 1:return a.trys.push([1,4,,6]),r=this,[4,this.storage.load(this.clientId+"/"+this.tokenId)];case 2:return r.tokenInfo=a.sent(),this.tokenInfo.token&&this.tokenInfo.expires>=Date.now()?[2,this.tokenInfo]:[4,this.refreshBearer()];case 3:return a.sent(),[2,this.tokenInfo];case 4:return a.sent(),[4,this.refreshBearer()];case 5:return a.sent(),[2,this.tokenInfo];case 6:return[2]}})})},e.prototype.refreshBearer=function(){return s(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<6?(console.log("Retrieving token for "+this.tokenId),[4,this.client.get(this.tokenUrl,this.tokenQuery,{cache:"reload"})]):[3,5];case 2:return 200!==(e=a.sent()).status?(console.warn("Got "+e.status+" "+e.statusText),[3,4]):(n=this,r={},[4,e.text()]);case 3:return n.tokenInfo=(r.token=a.sent(),r.expires=Date.now()+354e4,r),console.log("Got token for "+this.tokenId+": "+JSON.stringify(this.tokenInfo)),this.storage.save(this.clientId+"/"+this.tokenId,this.tokenInfo),[2,this.tokenInfo];case 4:return++t,[3,1];case 5:throw new Error("Failed to retrieve token for "+JSON.stringify(this.tokenId))}})})},e}(),l=function(){function e(e,t,n){this.accessClaimType=e,this.accessClaimValue=t,this.right=n}return e.fromString=function(t){if(!t)return null;var n=t.split(":");if(n.length<3)throw new Error("Invalid access string: "+t);var r=e.unescape(n[0]),a=e.unescape(n[1]),s=n[2];if("R"!==s&&"W"!==s&&"S"!==s)throw new Error("Invalid access string: "+t);return new e(r,a,s)},e.escape=function(e){return e.replace(/\%/g,"%25").replace(/\:/g,"%3A")},e.unescape=function(e){return e.replace(/\%3A/g,":").replace(/\%25/g,"%")},e.prototype.toString=function(){return e.escape(this.accessClaimType)+":"+e.escape(this.accessClaimValue)+":"+this.right},e.fromStringArray=function(t){return t.map(function(t){return e.fromString(t)}).filter(function(e){return e})},e.toStringArray=function(e){return e.map(function(e){return e.toString()})},e}();function c(e,t,n){return!!t.some(function(e){return"role"===e.type&&"ADMIN"===e.value})||e.some(function(e){return t.some(function(t){return e.accessClaimType===t.type&&e.accessClaimValue===t.value&&("R"===e.right&&"R"===n||"W"===e.right&&["R","W"].indexOf(n)>=0||"S"===e.right)})})}var u,d=(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){var r=e.call(this,"HTTP"+t+" "+n)||this;return r.code=t,r.message=n,r.name="http"+t,r}return d(t,e),t}(Error);n.d(t,"d",function(){return b}),n.d(t,"a",function(){return v}),n.d(t,"f",function(){return a.b}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return m});var p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}l((r=r.apply(e,t||[])).next())})},h=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[0,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},b=function(){function e(e,t,n){this.http=new r.a(e,n,{bearerProvider:t})}return e.prototype.getMyClaims=function(e,t){return f(this,void 0,void 0,function(){var n,r,a;return h(this,function(s){switch(s.label){case 0:return[4,this.http.get("me/claims/"+(e||""),null,t)];case 1:return 200==(n=s.sent()).status?[3,3]:(r=m.bind,a=[void 0,n.status],[4,n.text()]);case 2:throw new(r.apply(m,a.concat([s.sent()])));case 3:return[4,n.json()];case 4:return[2,s.sent()]}})})},e.prototype.get=function(e,t,n,r){return f(this,void 0,void 0,function(){var a,s,o;return h(this,function(i){switch(i.label){case 0:return[4,this.http.get(e+"/"+t,n,r)];case 1:return 200==(a=i.sent()).status?[3,3]:(s=m.bind,o=[void 0,a.status],[4,a.text()]);case 2:throw new(s.apply(m,o.concat([i.sent()])));case 3:return[4,a.json()];case 4:return[2,i.sent()]}})})},e.prototype.list=function(e,t,n){return f(this,void 0,void 0,function(){var r,a,s;return h(this,function(o){switch(o.label){case 0:return[4,this.http.get(""+e,t,n)];case 1:return 200==(r=o.sent()).status?[3,3]:(a=m.bind,s=[void 0,r.status],[4,r.text()]);case 2:throw new(a.apply(m,s.concat([o.sent()])));case 3:return[4,r.json()];case 4:return[2,o.sent()]}})})},e.prototype.batch=function(e,t){return f(this,void 0,void 0,function(){var n,r,a;return h(this,function(s){switch(s.label){case 0:return e=e.slice().sort(function(e,t){return"add"===e.op?-1:"add"===t.op?1:"delete"===e.op?1:"delete"===t.op?-1:0}),[4,this.http.post("batch",e,t)];case 1:return 200==(n=s.sent()).status?[3,3]:(r=m.bind,a=[void 0,n.status],[4,n.text()]);case 2:throw new(r.apply(m,a.concat([s.sent()])));case 3:return[4,n.json()];case 4:return[2,s.sent()]}})})},e.prototype.do=function(e){return f(this,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return t=new v,e(t),[4,this.batch(t.mutationRequests)];case 1:return[2,n.sent()]}})})},e.prototype.deleteRealm=function(e){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(a){switch(a.label){case 0:return[4,this.http.delete("realms/"+e)];case 1:return 200==(t=a.sent()).status?[3,3]:(n=m.bind,r=[void 0,t.status],[4,t.text()]);case 2:throw new(n.apply(m,r.concat([a.sent()])));case 3:return[4,t.json()];case 4:return[2,a.sent()]}})})},e.prototype.add=function(e,t){return this.do(function(n){return n.add(e,t)})},e.prototype.put=function(e,t){return this.do(function(n){return n.put(e,t)})},e.prototype.delete=function(e,t){return this.do(function(n){return n.delete(e,t)})},e.prototype.share=function(e,t,n){return this.do(function(r){return r.share(e,t,n)})},e.prototype.unshare=function(e,t,n){return this.do(function(r){return r.unshare(e,t,n)})},e.prototype.link=function(e,t,n,r,a){return this.do(function(s){return s.link(e,t,n,r,a)})},e.prototype.link2=function(e,t,n,r){return this.do(function(a){return a.link2(e,t,r,n)})},e.prototype.unlink=function(e,t,n,r,a){return this.do(function(s){return s.unlink(e,t,n,r,a)})},e.prototype.unlink2=function(e,t,n,r){return this.do(function(a){return a.unlink2(e,t,r,n)})},e}(),v=function(){function e(){this.mutationRequests=[]}return e.prototype.add=function(e,t){return this.mutationRequests.push({op:"add",table:e,doc:t}),this},e.prototype.put=function(e,t){return delete(t=p({},t)).acl,this.mutationRequests.push({op:"put",table:e,doc:t}),this},e.prototype.delete=function(e,t){return this.mutationRequests.push({op:"delete",table:e,id:t}),this},e.prototype.share=function(e,t,n){return this.mutationRequests.push({op:"share",table:e,id:t,acl:n}),this},e.prototype.unshare=function(e,t,n){return this.mutationRequests.push({op:"unshare",table:e,id:t,acl:n}),this},e.prototype.link=function(e,t,n,r,a){return this.mutationRequests.push({op:"link",sourceTable:e,sourceId:t,targetTable:n,targetId:r,label:a}),this},e.prototype.link2=function(e,t,n,r){this.mutationRequests.push({op:"link",sourceTable:e,sourceId:t,targetId:r,label:n})},e.prototype.unlink=function(e,t,n,r,a){return this.mutationRequests.push({op:"unlink",sourceTable:e,sourceId:t,targetTable:n,targetId:r,label:a}),this},e.prototype.unlink2=function(e,t,n,r){return this.mutationRequests.push({op:"unlink",sourceTable:e,sourceId:t,targetId:r,label:n}),this},e}()},function(e,t,n){"use strict";var r=n(1),a=n(19),s=n(6),o=n(30),i=n(2),l=[{courseId:"2070d120-30ad-49e9-89c3-9c584a6cfa29",periodName:"HT2017",periodGoalGrade:"A",name:"Naturkunskap 1b",shortName:"XXX",courseSteps:[]},{courseId:"2070d120-30ad-49e9-89c3-9c584a6cfa2c",periodName:"VT2017",periodGoalGrade:"A",name:"Engelska",shortName:"EN",courseSteps:[{stepId:"61f02bc7-1a0d-4b80-9bf1-07b6280379db",name:"1. Lära känna varandra",shortName:"1",isCompleted:!0,completedDate:"/Date(1472111903600)/"},{stepId:"a34c07c7-3932-4f64-87f9-feb5646db3db",name:"10. En saga",shortName:"10",isCompleted:!0,completedDate:"/Date(1472111903740)/"},{stepId:"e931f2bb-5727-4d99-b9e5-1bababfbc2e9",name:"11. Det här är jag",shortName:"11",isCompleted:!0,completedDate:"/Date(1472111903757)/"},{stepId:"ab823339-90ac-4b7f-a895-869d25cef504",name:"12. Jag och min familj",shortName:"12",isCompleted:!0,completedDate:"/Date(1472111903770)/"},{stepId:"53e00313-4980-4ab2-84ff-abe80ecd72d2",name:"13. Jag och mina vänner",shortName:"13",isCompleted:!0,completedDate:"/Date(1472111903787)/"},{stepId:"828796e9-84ad-4496-aa78-7850dd5bb23a",name:"14. Jag och min fritid",shortName:"14",isCompleted:!0,completedDate:"/Date(1472111903803)/"},{stepId:"31e08f37-4ec5-4366-9af6-bca5b9070198",name:"15. The Blog",shortName:"15",isCompleted:!0,completedDate:"/Date(1472111904117)/"},{stepId:"4f88e9a3-9b36-47af-9686-d28b00ca98fc",name:"16. Sport",shortName:"16",isCompleted:!0,completedDate:"/Date(1474888651180)/"},{stepId:"abb57443-be68-48b7-a719-3454afbf3daa",name:"17. Musik",shortName:"17",isCompleted:!0,completedDate:"/Date(1477656328037)/"},{stepId:"964f7ac3-8cf7-4042-912f-58ffb6812ddb",name:"18. Vykort",shortName:"18",isCompleted:null,completedDate:null},{stepId:"3002e95c-8de0-4914-a754-0773a18606bf",name:"19. Läsa noveller",shortName:"19",isCompleted:null,completedDate:null},{stepId:"d8708a56-e4fb-4ad3-84ef-bb40481eaf80",name:"2. Veckans aktiviteter",shortName:"2",isCompleted:!0,completedDate:"/Date(1472111903613)/"},{stepId:"46915f18-288c-44df-b224-1852d221b6ca",name:"20. Summer camp",shortName:"20",isCompleted:null,completedDate:null},{stepId:"db22d300-0126-4a32-950d-aaf2f7142627",name:"21. Hus och hem",shortName:"21",isCompleted:null,completedDate:null},{stepId:"68111c18-e610-45c0-b290-9dd3cede1e48",name:"22. Sightseeing",shortName:"22",isCompleted:null,completedDate:null},{stepId:"4c84dd89-66f2-4ea1-bce8-3fde1724dcc9",name:"23. Vid matbordet",shortName:"23",isCompleted:!0,completedDate:"/Date(1488205880703)/"},{stepId:"75943640-f031-41da-8495-9d87b5804a3e",name:"24. Traditioner",shortName:"24",isCompleted:null,completedDate:null},{stepId:"72021bc2-0ea8-4d39-87fa-11cc976e9c9f",name:"25. Staying with a host family",shortName:"25",isCompleted:null,completedDate:null},{stepId:"574e1626-cad3-4220-8ba7-b443f03830b4",name:"26. Det engelska språket",shortName:"26",isCompleted:null,completedDate:null},{stepId:"50a3682e-057d-45b1-81b5-e2eaa8b6d16b",name:"27. Skolan och framtidsdrömmar",shortName:"27",isCompleted:null,completedDate:null},{stepId:"15a47a71-989a-4348-8fcb-a10683d263ec",name:"28. Identitet",shortName:"28",isCompleted:null,completedDate:null},{stepId:"5717f099-477f-433d-b10a-c2bf0dfe6f8e",name:"29. Att läsa en bok",shortName:"29",isCompleted:null,completedDate:null},{stepId:"0443638f-a546-40d8-a533-e2d12abef609",name:"3. Fira ett speciellt tillfälle",shortName:"3",isCompleted:!0,completedDate:"/Date(1472111903630)/"},{stepId:"54ff6488-f0ae-4fb6-b4e4-0f29d9274b23",name:"30. The World Today",shortName:"30",isCompleted:null,completedDate:null},{stepId:"2ab8a527-cd74-4847-97a6-79f629e22e84",name:"31. Entertainment",shortName:"31",isCompleted:null,completedDate:null},{stepId:"1b5d42ff-9615-439a-9ae2-89779040bf91",name:"32. Interview",shortName:"32",isCompleted:null,completedDate:null},{stepId:"29ffc098-d26d-4f3b-a295-b5f065923bf2",name:"33. Filmed books",shortName:"33",isCompleted:null,completedDate:null},{stepId:"4d5fe734-9af9-42b8-8c50-920c9a450bc1",name:"34. See the film",shortName:"34",isCompleted:null,completedDate:null},{stepId:"dd87c548-4a3a-4a62-9114-70ec7e713aee",name:"35. Write a bestseller",shortName:"35",isCompleted:null,completedDate:null},{stepId:"1fb5ce80-faf0-465c-9be8-c9bc722297bb",name:"36. The English-speaking World",shortName:"36",isCompleted:null,completedDate:null},{stepId:"f0007f75-0d1f-48c7-8f19-bb2e9f2c5377",name:"37. Poetry",shortName:"37",isCompleted:null,completedDate:null},{stepId:"addebfcc-5b3c-4360-b819-0de0269a5e2d",name:"38. Rhetoric",shortName:"38",isCompleted:null,completedDate:null},{stepId:"23c16db5-d435-49d3-8daa-c2b6433366b7",name:"39. An important issue",shortName:"39",isCompleted:null,completedDate:null},{stepId:"e4d22285-735a-4bab-8884-ca5b736ebb88",name:"4. Åka någonstans",shortName:"4",isCompleted:!0,completedDate:"/Date(1472111903647)/"},{stepId:"4c489a2b-ee79-4f89-9818-787632abfba8",name:"40. Write a speech",shortName:"40",isCompleted:null,completedDate:null},{stepId:"9667976c-83ab-4b9e-8a76-d330983c28f5",name:"41. Changing world",shortName:"41",isCompleted:null,completedDate:null},{stepId:"6bb14af9-9094-4938-be2d-2725a931895c",name:"42. An organization",shortName:"42",isCompleted:null,completedDate:null},{stepId:"fe313a1a-dc5c-4890-b11e-b8e109db689b",name:"43. The written word",shortName:"43",isCompleted:null,completedDate:null},{stepId:"f1a592ec-6095-4ae4-9b9e-ebd527c18a2a",name:"44. Communication",shortName:"44",isCompleted:null,completedDate:null},{stepId:"5f6a5e15-462b-40ab-981b-b93e5fc0ee22",name:"45. Giving a lecture",shortName:"45",isCompleted:null,completedDate:null},{stepId:"8c9b57c1-cf05-4465-84b2-68cf353b1075",name:"5. Min semester",shortName:"5",isCompleted:!0,completedDate:"/Date(1472111903660)/"},{stepId:"1bd11f36-6438-40b5-ad4c-4b02b6f481d0",name:"6. Låt oss prata om det",shortName:"6",isCompleted:!0,completedDate:"/Date(1472111903677)/"},{stepId:"d49c08ee-c0e6-4599-b79f-5efd811fe33c",name:"7. Jag är en turist",shortName:"7",isCompleted:!0,completedDate:"/Date(1472111903693)/"},{stepId:"2def3414-de65-46c0-8f48-f8aa18be7b7c",name:"8. Vänner över hela världen",shortName:"8",isCompleted:!0,completedDate:"/Date(1472111903707)/"},{stepId:"ea8ff1a0-4bad-43ac-b328-62dff3e4d08e",name:"9. Hjältar och kända personer",shortName:"9",isCompleted:!0,completedDate:"/Date(1472111903723)/"}]},{courseId:"9d129e6a-9557-4849-a53f-416725502895",periodName:"VT2017",periodGoalGrade:"C",name:"Matematik",shortName:"MA",courseSteps:[{stepId:"f1af6c2c-799a-4a3d-9985-c423940e91c0",name:"1. Tal och mönster",shortName:"1",isCompleted:!0,completedDate:"/Date(1474401815917)/"},{stepId:"4a34c53d-93d0-4247-ba19-9ce9dbed6de5",name:"10. Lägesmått och diagram",shortName:"10",isCompleted:!0,completedDate:"/Date(1474401816200)/"},{stepId:"0816a2b0-3aa7-41a9-bc39-971ccc7bd79c",name:"11. Räknesätt",shortName:"11",isCompleted:!0,completedDate:"/Date(1476103754013)/"},{stepId:"fdc90a9c-b06a-48b1-9781-606c230c425c",name:"12. Geometri",shortName:"12",isCompleted:!0,completedDate:"/Date(1481279716607)/"},{stepId:"bfd77c92-6636-45fa-9002-d813beaa56c3",name:"13. Rymdgeometri",shortName:"13",isCompleted:!0,completedDate:"/Date(1489669353170)/"},{stepId:"58a619a1-b99a-487b-bbd5-abd31a903e5a",name:"14. Räknemetoder och algebra",shortName:"14",isCompleted:null,completedDate:null},{stepId:"55b88760-22aa-452a-8a57-131346669aad",name:"15. Problemet",shortName:"15",isCompleted:null,completedDate:null},{stepId:"47f16476-ea47-40a2-a073-7ac4b36c4bf0",name:"16. Delen och det hela",shortName:"16",isCompleted:null,completedDate:null},{stepId:"704e3d5b-fce7-409b-b989-340b2d7b2e18",name:"17. Geometri och vinklar",shortName:"17",isCompleted:null,completedDate:null},{stepId:"db5693ea-48ef-44ce-8107-be9915ef5256",name:"18. Funktioner",shortName:"18",isCompleted:null,completedDate:null},{stepId:"f9250c97-d932-4bf6-989e-204c0ef582c9",name:"19. Proportionalitet",shortName:"19",isCompleted:null,completedDate:null},{stepId:"d0411b1d-c9b4-452f-9fb6-ea7206755ecd",name:"2. Längd och räknesätt",shortName:"2",isCompleted:!0,completedDate:"/Date(1474401815930)/"},{stepId:"616b742e-b175-45c3-a926-fda3e4d8af80",name:"20. Förflyttningsgraf",shortName:"20",isCompleted:null,completedDate:null},{stepId:"f8a9b467-6ba6-4d9a-8174-87e369062621",name:"21. Likformighet",shortName:"21",isCompleted:null,completedDate:null},{stepId:"8fe483d7-b78b-4d9d-9402-15d57da05832",name:"22. Bråk, sannolikhet och kombinatorik",shortName:"22",isCompleted:null,completedDate:null},{stepId:"7eb39090-6461-4ce4-b008-dd98f8a57679",name:"23. Negativa tal, procentsatser och förändringsfaktor",shortName:"23",isCompleted:null,completedDate:null},{stepId:"34cb3911-3a78-4773-a823-2f9054a9a925",name:"24. Algebra och ekvationer",shortName:"24",isCompleted:null,completedDate:null},{stepId:"49abad1a-dd4b-4b0b-8d1f-752796723ca1",name:"25. Lotteriet",shortName:"25",isCompleted:null,completedDate:null},{stepId:"6756d8bc-e31a-4139-8d95-8f47916a361b",name:"26. Geometriska samband",shortName:"26",isCompleted:null,completedDate:null},{stepId:"0f0efee5-e617-4bca-b84e-e50e32aac90b",name:"27. Rymdgeometri",shortName:"27",isCompleted:null,completedDate:null},{stepId:"de4e12d1-f678-4b1a-ac7b-5d62cdaeb52d",name:"28. Storheter och proportionella samband",shortName:"28",isCompleted:null,completedDate:null},{stepId:"80323de8-fe66-4750-bb2e-d0dbabbb3dac",name:"29. Funktioner och grafer",shortName:"29",isCompleted:null,completedDate:null},{stepId:"68894968-8a16-497a-8b97-711df61fca71",name:"3. Tal och enheter",shortName:"3",isCompleted:!0,completedDate:"/Date(1474401815947)/"},{stepId:"fa32d170-ab25-466d-91a8-a88f955cc5bc",name:"30. Förpackning",shortName:"30",isCompleted:null,completedDate:null},{stepId:"4c31e00f-aeda-409f-8583-9805c0bb4f7f",name:"31. Negativa tal och statistik",shortName:"31",isCompleted:null,completedDate:null},{stepId:"691bb48b-070d-4227-8fb6-2edce2fc6be4",name:"32. Bråk",shortName:"32",isCompleted:null,completedDate:null},{stepId:"320481da-e417-4c52-af23-0076b694794d",name:"33. Procent och förändringsfaktor",shortName:"33",isCompleted:null,completedDate:null},{stepId:"f3a4338d-504e-4092-9610-ef2775b5b411",name:"34. Potenser",shortName:"34",isCompleted:null,completedDate:null},{stepId:"f43d7931-158c-4759-b7be-b14cf68c939a",name:"35. Solsystemet",shortName:"35",isCompleted:null,completedDate:null},{stepId:"8931fc26-693a-41bd-8040-e01a6d22b2b5",name:"36. Ekvationer och algebra",shortName:"36",isCompleted:null,completedDate:null},{stepId:"94370d70-dcbd-4eef-baf1-e92f6680b966",name:"37. Funktioner och grafer",shortName:"37",isCompleted:null,completedDate:null},{stepId:"ab0535df-68cc-4c10-86eb-afba3e199d0a",name:"38. Geometri",shortName:"38",isCompleted:null,completedDate:null},{stepId:"4ba66c7a-7d8f-4576-aefa-c09397b99db0",name:"39. Sannolikhet",shortName:"39",isCompleted:null,completedDate:null},{stepId:"c4e12bc8-1428-4d1b-a273-e947fa0574f3",name:"4. Multiplikation och division",shortName:"4",isCompleted:!0,completedDate:"/Date(1474401815963)/"},{stepId:"0b75ce2b-89de-432a-9eee-d6a7b74b6f38",name:"40. Chokladfabriken",shortName:"40",isCompleted:null,completedDate:null},{stepId:"dba4a055-c143-4bd4-b436-3eb508ebe658",name:"41. Genrella lösningsmetoder",shortName:"41",isCompleted:null,completedDate:null},{stepId:"db193873-0a8c-4073-8618-99c5a56f710b",name:"42. Avancerad ekvationslösning",shortName:"42",isCompleted:null,completedDate:null},{stepId:"357ee123-1d77-4568-8fa1-78b5662e12b3",name:"43. Problemlösning",shortName:"43",isCompleted:null,completedDate:null},{stepId:"015cdd58-7b31-4a89-a9fe-cd0bb45e7434",name:"44. Avancerad problemlösning",shortName:"44",isCompleted:null,completedDate:null},{stepId:"785e12ac-4a71-4acf-bf40-27652faf20ff",name:"45. Vad är matematik?",shortName:"45",isCompleted:null,completedDate:null},{stepId:"6372cdb6-91cf-4f0f-ac9c-8578c00760ff",name:"5. Form och storlek",shortName:"5",isCompleted:!0,completedDate:"/Date(1474401815977)/"},{stepId:"c781e529-fefa-43ce-99fb-d232585a1e1a",name:"6. Tid och räknesätt",shortName:"6",isCompleted:!0,completedDate:"/Date(1474401815993)/"},{stepId:"5df2975c-f84e-4620-abe9-5c47ebcb0f90",name:"7. Bråk och decimaltal",shortName:"7",isCompleted:!0,completedDate:"/Date(1474401816007)/"},{stepId:"9cbb966f-32df-48cf-be77-5e00d466d63a",name:"8. Procent och bråk",shortName:"8",isCompleted:!0,completedDate:"/Date(1474401816023)/"},{stepId:"b1b59f38-63c6-428a-a512-220b7d838e5f",name:"9. Sannolikhet och bråk",shortName:"9",isCompleted:!0,completedDate:"/Date(1474401816040)/"}]},{courseId:"cfdc5bc0-ea41-4683-b941-d980de4e82a5",periodName:"VT2017",periodGoalGrade:"D",name:"Spanska, språkval",shortName:"M2SP",courseSteps:[{stepId:"16bb0ce6-60ac-4937-8e60-dd633cd7c5f0",name:"1. Första mötet",shortName:"1",isCompleted:!0,completedDate:"/Date(1476255771933)/"},{stepId:"f3504ab6-386c-42d2-882b-668719f329b5",name:"10. Turist",shortName:"10",isCompleted:null,completedDate:null},{stepId:"d2de4e01-44dd-4ba7-a69f-075450c627a7",name:"11. Skolan",shortName:"11",isCompleted:null,completedDate:null},{stepId:"58e4d577-05f5-4071-8745-a41571df3019",name:"12. Fritiden",shortName:"12",isCompleted:null,completedDate:null},{stepId:"d8a079f9-3fef-4fbc-b868-6b050e3832d1",name:"13. Stämma träff",shortName:"13",isCompleted:null,completedDate:null},{stepId:"d62f63a1-3806-4650-b6a9-354eccd056b9",name:"14. Sport och musik",shortName:"14",isCompleted:null,completedDate:null},{stepId:"b475dc9d-e694-4eb9-8c78-b150494dfe84",name:"15. Presentera dig själv",shortName:"15",isCompleted:null,completedDate:null},{stepId:"009c68f6-db7e-44a3-bc5c-d1e2e78d327c",name:"16. När och fjärran",shortName:"16",isCompleted:null,completedDate:null},{stepId:"a124f250-2fb7-4b57-b2bc-b72e0e8fd21a",name:"17. Mat och traditioner",shortName:"17",isCompleted:null,completedDate:null},{stepId:"ec6ccef4-58b5-4111-b152-8a7a7f546bb8",name:"18. Planera en resa",shortName:"18",isCompleted:null,completedDate:null},{stepId:"ec96d506-112e-4b38-8946-6f19130bd741",name:"19. Etikett och regler",shortName:"19",isCompleted:null,completedDate:null},{stepId:"0b52b5e6-bbc7-4c78-815c-efc30fa984af",name:"2. Min familj",shortName:"2",isCompleted:!0,completedDate:"/Date(1488368769260)/"},{stepId:"e05c674b-1097-4646-ac47-1d8c4342a343",name:"20. Resan",shortName:"20",isCompleted:null,completedDate:null},{stepId:"f6f8cffb-69ae-4148-81fa-35e1f984f836",name:"21. Boende",shortName:"21",isCompleted:null,completedDate:null},{stepId:"aee9167c-2f65-4f8d-a94b-684458c300bc",name:"22. Familjeliv",shortName:"22",isCompleted:null,completedDate:null},{stepId:"115f28de-fe33-435e-a7fb-36fea0a37cce",name:"23. Bostadsläge",shortName:"23",isCompleted:null,completedDate:null},{stepId:"d5e8b9e2-b84e-4af7-8b20-e37896dec41d",name:"24. Min stad",shortName:"24",isCompleted:null,completedDate:null},{stepId:"c2f15857-a682-4b02-8d00-ec042858e799",name:"25. Presentera någon annan",shortName:"25",isCompleted:null,completedDate:null},{stepId:"1bc87327-1e3f-42f6-b839-e9b385200149",name:"26. Media",shortName:"26",isCompleted:null,completedDate:null},{stepId:"36f23967-f30b-4cbc-a69c-4191094e182d",name:"27. En tv-kväll",shortName:"27",isCompleted:null,completedDate:null},{stepId:"32ead07a-fa58-4770-ac20-3a31f27069cf",name:"28. Tidningar",shortName:"28",isCompleted:null,completedDate:null},{stepId:"598d7b7e-97b6-4ff3-b7a7-8f5c45c164cd",name:"29. Film",shortName:"29",isCompleted:null,completedDate:null},{stepId:"12e8d03b-7d80-434c-9201-7f852f5c114c",name:"3. Fler siffror, månader och väder",shortName:"3",isCompleted:null,completedDate:null},{stepId:"98f0825e-e200-43f4-9f4b-866bb50d28dd",name:"30. Tidningen",shortName:"30",isCompleted:null,completedDate:null},{stepId:"956757b9-979f-4d12-be01-8b30970b603e",name:"31. Min framtid",shortName:"31",isCompleted:null,completedDate:null},{stepId:"c2003358-0ce9-409b-82fa-e7a0bff891fc",name:"32. Ung i framtiden",shortName:"32",isCompleted:null,completedDate:null},{stepId:"1c1ca040-f96d-46af-862b-a978698e2745",name:"33. Insändare",shortName:"33",isCompleted:null,completedDate:null},{stepId:"64f620bb-8c77-4de2-88e2-feaa21f4c41e",name:"34. På gymnasiet",shortName:"34",isCompleted:null,completedDate:null},{stepId:"4c3c19eb-0447-47cf-bb72-8d1176118c71",name:"35. Framtiden",shortName:"35",isCompleted:null,completedDate:null},{stepId:"c3779788-030e-46f3-89a7-a15015931a51",name:"4. Det här är jag",shortName:"4",isCompleted:null,completedDate:null},{stepId:"a6628c06-443a-481d-96fc-c019800e8e4e",name:"5. Boken",shortName:"5",isCompleted:null,completedDate:null},{stepId:"f34e1dee-1dd3-4bcd-89b4-f0ba6638c65c",name:"6. På café",shortName:"6",isCompleted:null,completedDate:null},{stepId:"9ffb3665-0e3a-423a-af93-c5006a2a4839",name:"7. Att handla",shortName:"7",isCompleted:null,completedDate:null},{stepId:"63e62432-ba1e-4f96-911c-52bd756c803e",name:"8. I staden",shortName:"8",isCompleted:null,completedDate:null},{stepId:"3c93cf1d-2e82-452b-9333-16b336fdda6d",name:"9. På hotellet",shortName:"9",isCompleted:null,completedDate:null}]},{courseId:"3cc7c710-63fb-49bd-8dc5-b95be6374122",periodName:"VT2017",periodGoalGrade:"C",name:"Svenska",shortName:"SV",courseSteps:[{stepId:"379585a4-f602-4086-920d-d506d2e93fed",name:"1. Min bästa sak",shortName:"1",isCompleted:!0,completedDate:"/Date(1472559179490)/"},{stepId:"5d90747a-d5ff-4c12-818c-d301e4cf2405",name:"10. Quizkampen",shortName:"10",isCompleted:!0,completedDate:"/Date(1472559179630)/"},{stepId:"fb271830-5368-43dc-b911-3d65af082e26",name:"11. Ta kontakt",shortName:"11",isCompleted:!0,completedDate:"/Date(1472559179647)/"},{stepId:"bf7a93a6-24af-4d01-8839-aa4f3f6b438d",name:"12. Samla fakta och presentera",shortName:"12",isCompleted:!0,completedDate:"/Date(1472559179660)/"},{stepId:"2a712108-e5d7-4ffb-a55f-80ff195ea946",name:"13. Påverka och uttrycka åsikter",shortName:"13",isCompleted:!0,completedDate:"/Date(1472559179943)/"},{stepId:"94b5abaa-0471-4ab4-be3c-c0b0d4098609",name:"14. Språk i Sverige",shortName:"14",isCompleted:!0,completedDate:"/Date(1475049857367)/"},{stepId:"e0169353-8ac0-4fcd-8a45-4cfffc5fe55e",name:"15. Min förebild",shortName:"15",isCompleted:!0,completedDate:"/Date(1480951054357)/"},{stepId:"e12c8fa6-8aaa-4598-8e6f-5c6d318163db",name:"16. Förstå, minnas och lära",shortName:"16",isCompleted:!0,completedDate:"/Date(1490605558217)/"},{stepId:"1a19c53b-36f0-4309-adfd-26a307b43dbd",name:"17. Använda språket i olika sammanhang",shortName:"17",isCompleted:null,completedDate:null},{stepId:"31aa5b91-59d0-41db-ab2e-0bdec6342dfe",name:"18. Sammanfatta och presentera",shortName:"18",isCompleted:null,completedDate:null},{stepId:"48747057-835d-40fd-811f-dde4fd48f3a0",name:"19. Den moderna ungdomen",shortName:"19",isCompleted:null,completedDate:null},{stepId:"4708aedf-3b7d-4ec0-80c9-769de4cdda9b",name:"2. Författare",shortName:"2",isCompleted:!0,completedDate:"/Date(1472559179507)/"},{stepId:"4258123d-d122-4058-8120-9de7d1fb3d66",name:"20. Att vara ungdom idag",shortName:"20",isCompleted:null,completedDate:null},{stepId:"3d94e56d-9d38-4d3c-a3cb-d4f2d13814c9",name:"21. Upplysningstiden och romantiken",shortName:"21",isCompleted:null,completedDate:null},{stepId:"5d8c3d70-e996-4236-9326-982ed128340c",name:"22. Realismen och modernismen",shortName:"22",isCompleted:null,completedDate:null},{stepId:"02037ab3-ffdf-4fe2-a172-26de404c58bc",name:"23. Våga utanför ramarna",shortName:"23",isCompleted:null,completedDate:null},{stepId:"7c376d37-0170-49ac-865d-5479d82ce806",name:"24. Modern litteratur",shortName:"24",isCompleted:null,completedDate:null},{stepId:"7131b28d-89d1-40f6-8d87-80fd0c15486d",name:"25. Budskapet",shortName:"25",isCompleted:null,completedDate:null},{stepId:"30c876a6-48a7-4fc7-a49f-ad44bac3d4bb",name:"26. Övertyga och påverka",shortName:"26",isCompleted:null,completedDate:null},{stepId:"97b328ea-3342-41d6-a1c5-91e9c1d17a08",name:"27. Språkbruk genom tiderna",shortName:"27",isCompleted:null,completedDate:null},{stepId:"e4ec472d-b31c-4d20-886c-0162e1159e55",name:"28. Tidningstexter",shortName:"28",isCompleted:null,completedDate:null},{stepId:"47ccf40e-28a1-4432-91ed-f3013eb97aa8",name:"29. Samtala om texter",shortName:"29",isCompleted:null,completedDate:null},{stepId:"6c89c307-adff-46b8-9d75-2ecb1fc714ce",name:"3. Leka med ord",shortName:"3",isCompleted:!0,completedDate:"/Date(1472559179520)/"},{stepId:"2145d4aa-60db-42f9-918b-49f3bf714786",name:"30. Språkets möjligheter",shortName:"30",isCompleted:null,completedDate:null},{stepId:"c211ba3d-b8fa-4c5c-bbe1-bcfea2a243b5",name:"31. Dikt och diktanalys",shortName:"31",isCompleted:null,completedDate:null},{stepId:"fbeb356a-5c9d-4114-9a4b-9ac2325913d0",name:"32. Berättarteknik i skönlitteratur",shortName:"32",isCompleted:null,completedDate:null},{stepId:"4446df13-5bb8-4cf1-beb4-4d2b43bf97b8",name:"33. Utveckla ditt skönlitterära skrivande",shortName:"33",isCompleted:null,completedDate:null},{stepId:"47e0c5bf-2898-4cc3-8119-2346d4c6c78f",name:"34. Noveller",shortName:"34",isCompleted:null,completedDate:null},{stepId:"3b072a72-9f2c-4439-b095-33edb5ae3276",name:"35. Det fria ordet - En skönlitterär djupdykning",shortName:"35",isCompleted:null,completedDate:null},{stepId:"56a2b991-63f5-4f1c-8e48-1bc1f83fa9a9",name:"36. Debatt och retorik",shortName:"36",isCompleted:null,completedDate:null},{stepId:"7b0e633b-65b5-407d-8bdd-d77673d1be1f",name:"37. Argumenterande texter",shortName:"37",isCompleted:null,completedDate:null},{stepId:"d76356c9-2fdd-4845-aa7a-1bf54547a34e",name:"38. Analysera tal",shortName:"38",isCompleted:null,completedDate:null},{stepId:"eb312838-f59b-4815-987f-d7f11973a95f",name:"39. Tal",shortName:"39",isCompleted:null,completedDate:null},{stepId:"48559f29-37cb-451f-8f40-354101a413af",name:"4. Skrivarskola",shortName:"4",isCompleted:!0,completedDate:"/Date(1472559179537)/"},{stepId:"a054f1e2-b296-4185-b9b7-dac94f600ab3",name:"40. Muntlig argumentation",shortName:"40",isCompleted:null,completedDate:null},{stepId:"2e5ff9f3-ac8e-4fea-abe2-a7534e64e25f",name:"41. Modern lyrik",shortName:"41",isCompleted:null,completedDate:null},{stepId:"ceed4cee-dd38-40b9-af97-43b0af244a41",name:"42. Nobelpriset i litteratur",shortName:"42",isCompleted:null,completedDate:null},{stepId:"2df27363-1a57-4129-96dc-5e2a26dc0209",name:"43. Analysmetod i akademiska uppsatser",shortName:"43",isCompleted:null,completedDate:null},{stepId:"71062f38-2874-4d6a-96b9-8128a10e3559",name:"44. Litteratur som väckt debatt genom tiderna",shortName:"44",isCompleted:null,completedDate:null},{stepId:"d0e40b55-4638-45fd-b9f3-924c68c673cc",name:"45. Analysera vetenskapligt",shortName:"45",isCompleted:null,completedDate:null},{stepId:"5954c057-cdc2-4293-bb9e-8b96ec27e04c",name:"5. Min bästa sak på äventyr",shortName:"5",isCompleted:!0,completedDate:"/Date(1472559179553)/"},{stepId:"5b9e5c30-c9de-4092-b7e6-0dbb4e3513ff",name:"6. Faktatext",shortName:"6",isCompleted:!0,completedDate:"/Date(1472559179567)/"},{stepId:"2b823257-8dad-4f6b-8f2b-539e4dae0bd4",name:"7. Tal- och skriftspråk",shortName:"7",isCompleted:!0,completedDate:"/Date(1472559179583)/"},{stepId:"28e73fd2-c40a-4319-8b93-ec0f1b658c81",name:"8. Dikter",shortName:"8",isCompleted:!0,completedDate:"/Date(1472559179600)/"},{stepId:"35a5926a-8cb3-4c9d-a7ef-714761935755",name:"9. Olika texttyper",shortName:"9",isCompleted:!0,completedDate:"/Date(1472559179613)/"}]}],c={assessments:[{publishDateTime:"2017-08-28T09:05:43.16",text:"Testbedömning Engelsa 5",gradeName:"C",courseUnitName:"1. Ready, steady, go!"},{publishDateTime:"2017-08-28T08:59:21.253",text:"Testbedömning...\r\n/ Kim test",gradeName:"C",courseUnitName:"Tema 1"},{publishDateTime:"2017-08-10T09:43:36.797",text:"Test",gradeName:"D",courseUnitName:"Block 1"}]},u={StudyPlans:[{courseUnitName:"Hem- och konsumentkunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Historia",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Fysik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Geografi",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Matematik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Samhällskunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Engelska",finalGoalGrade:"A",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"A"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Religionskunskap",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Idrott och hälsa",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"D"}]},{courseUnitName:"Biologi",finalGoalGrade:"D",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Svenska",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Teknik",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Bild",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"C"}]},{courseUnitName:"Spanska, språkval",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:""}]},{courseUnitName:"Kemi",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Slöjd",finalGoalGrade:"C",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"D"},{periodName:"HT2016",gradeName:"B"}]},{courseUnitName:"Musik",finalGoalGrade:"B",strategyText:"",periodGoals:[{periodName:"VT2017",gradeName:"C"},{periodName:"HT2016",gradeName:"D"}]}]},d=n(3);function m(){return{user:d.a.currentUser.mail}}n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var p=function(){function e(e,t,n){this.http=new a.a(e,t,{bearerProvider:n}),this.getActiveCourses=b(this.getActiveCourses),this.getLatestAssessments=b(this.getLatestAssessments),this.getStudentGoals=b(this.getStudentGoals),this.getStudentFutureAbilities=b(this.getStudentFutureAbilities)}return e.prototype.getActiveCourses=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,o,l;return r.d(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),t=m(),e&&(e.courseCode&&(t.CourseCode=e.courseCode),e.periodName&&(t.PeriodName=e.periodName)),[4,this.http.get("studentactivecourses",t)];case 1:return 200==(n=c.sent()).status?[3,3]:(a=s.c.bind,o=[void 0,n.status],[4,n.text()]);case 2:throw new(a.apply(s.c,o.concat([c.sent()])));case 3:return[4,n.json()];case 4:return[2,c.sent().courses];case 5:throw l=c.sent(),console.error("Error from EDS: "+l),new Error(Object(i.a)(h||(h=r.e(["Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare..."],["Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare..."]))));case 6:return[2]}})})},e.prototype.getLatestAssessments=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,o;return r.d(this,function(r){switch(r.label){case 0:return t=m(),isNaN(e)||(t.Count=e),[4,this.http.get("studentassessments",t)];case 1:return 200==(n=r.sent()).status?[3,3]:(a=s.c.bind,o=[void 0,n.status],[4,n.text()]);case 2:throw new(a.apply(s.c,o.concat([r.sent()])));case 3:return[4,n.json()];case 4:return[2,r.sent().assessments]}})})},e.prototype.getStudentGoals=function(){return r.b(this,void 0,void 0,function(){var e,t,n;return r.d(this,function(r){switch(r.label){case 0:return[4,this.http.get("studentgoals",m())];case 1:return 200==(e=r.sent()).status?[3,3]:(t=s.c.bind,n=[void 0,e.status],[4,e.text()]);case 2:throw new(t.apply(s.c,n.concat([r.sent()])));case 3:return[4,e.json()];case 4:return[2,r.sent().studentGoals]}})})},e.prototype.getStudentFutureAbilities=function(){return r.b(this,void 0,void 0,function(){var e,t,n;return r.d(this,function(r){switch(r.label){case 0:return[4,this.http.get("studentFutureAbilities",m())];case 1:return 200==(e=r.sent()).status?[3,3]:(t=s.c.bind,n=[void 0,e.status],[4,e.text()]);case 2:throw new(t.apply(s.c,n.concat([r.sent()])));case 3:return[4,e.json()];case 4:return[2,r.sent().studentFutureAbilities]}})})},e}(),f=function(){function e(e){if("string"==typeof e){if(this.period=e,this.term=this.period.startsWith("HT")?"AT":"ST",this.year=parseInt(this.period.substr(2)),isNaN(this.year))throw new Error("Invalid period: "+this.period)}else{var t=new o.a(e);this.period=("AT"===t.term?"HT":"VT")+t.year,this.term=t.term,this.year=t.year}}return Object.defineProperty(e.prototype,"schoolTerm",{get:function(){return new o.a({academicYear:"AT"===this.term?this.year+"/"+(this.year+1):this.year-1+"/"+this.year,term:this.term})},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.period},e.prototype.valueOf=function(){return this.year+":"+("ST"===this.term?"1":"2")},e}();var h;!function(){function e(){this.http=null}e.prototype.getActiveCourses=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){return t=l,e&&(e.courseCode&&(t=t.filter(function(t){return t.shortName===e.courseCode})),e.periodName&&(t=t.filter(function(t){return t.periodName===e.periodName}))),[2,t]})})},e.prototype.getLatestAssessments=function(e){return r.b(this,void 0,void 0,function(){return r.d(this,function(t){return[2,e?c.assessments.slice(0,e):c.assessments]})})},e.prototype.getStudentGoals=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){return[2,u.StudyPlans]})})},e.prototype.getStudentFutureAbilities=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){return[2,[]]})})}}();function b(e){var t={};return function(){var n=JSON.stringify([].slice.call(arguments));return t[n]||(t[n]=e.apply(this,arguments).then(function(e){return delete t[n],e})),t[n]}}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),a=n(0),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={headerOpen:t.headerOpen||!1},n}return r.c(t,e),t.prototype.componentWillReceiveProps=function(e){e.headerOpen!==this.props.headerOpen&&this.setState({headerOpen:e.headerOpen})},t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.className,s=t.children,o=t.headerClassName,i=t.contentClassName,l=this.state.headerOpen;return a.createElement("div",{className:(r||"")+" openClose"+(l?" open":"")},a.createElement("div",{className:"openHeader"+(o?" "+o:""),onClick:function(){e.props.onOpenClose&&e.props.onOpenClose(!e.state.headerOpen),e.setState({headerOpen:!e.state.headerOpen})}},n),a.createElement("div",{className:"openContent"+(i?" "+i:"")},s))},t}(a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var r=n(5),a=n.n(r);function s(e,t){var n=a()(new Date(e,1,1)).locale("sv").week(t);return{year:e,week:t,notBefore:n.clone().startOf("week").add(-2,"days").toDate().getTime(),notAfter:n.clone().startOf("week").add(5,"days").toDate().getTime()}}function o(e){e.clone().locale("sv");return e.weekday()>=5?e.week()+1:e.week()}},,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(1),a=n(29),s=n(3),o=n(2),i=n(6),l=n(24),c=n(15),u=n(5),d=n.n(u),m=s.a.hiddenCoursesRepo,p=function(){function e(){var e=this;this.result=null,this.subscribers=[],this.fullCourse=!1,this.notifySubscriber=function(t,n){try{t(n.fullCourse?e.result:e.result.filter(function(e){return e.visible}))}catch(e){console.error(e)}},this.kedRepo=new a.a({getClient:function(){return s.a.kedBackendClient},optimistic:!0,table:"userhiddencourses",user:s.a.currentUser?s.a.currentUser.mail:"",getQueryOptions:function(){return r.b(e,void 0,void 0,function(){return r.d(this,function(e){return[2,{role:"USER"}]})})}});var t=this.init();Promise.all([t,this.kedCoursesPromise,this.edsCoursesPromise]).catch(function(e){return Object(o.m)(e)})}return e.prototype.init=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a=this;return r.d(this,function(o){switch(o.label){case 0:return e=s.a.bearerProvider?s.a.bearerProvider.getBearer():Promise.resolve({}),this.kedCoursesPromise=e.then(function(){return a.listKedCourses()}),this.edsCoursesPromise=e.then(function(){return a.listEDSCourses()}),n=!1,this.userHiddenCoursesPromise=new Promise(function(e){return t=function(t){n?a.userHiddenCoursesPromise=Promise.resolve(t):(n=!0,e(t))}}),[4,e];case 1:return o.sent(),this.kedRepo.mem.subscribe(function(e){return r.b(a,void 0,void 0,function(){var n,a,s,o,i=this;return r.d(this,function(r){switch(r.label){case 0:return[4,Promise.all([this.kedCoursesPromise,this.edsCoursesPromise])];case 1:return n=r.sent(),a=n[0],s=n[1],o=this,[4,this.createCoursesList(s,e,a)];case 2:return o.result=r.sent(),this.subscribers.forEach(function(e){return i.notifySubscriber(e.subscriber,e.options)}),t(e),[2]}})})}),[2]}})})},e.prototype.listKedCourses=function(){return r.b(this,void 0,void 0,function(){var e,t;return r.d(this,function(n){switch(n.label){case 0:return e=this.fullCourse,console.log("FullCourse: "+e),[4,s.a.kedBackendClient.list("schools",{role:"USER",name:s.a.currentUser.school,include:"activeCourses",flags:e?[]:["includeIdsAndNamesOnly"],cacheBust:s.a.currentUser.username})];case 1:return t=n.sent(),[2,Object(o.k)(t.map(function(e){return e.activeCourses})).sort(Object(o.g)("name"))]}})})},e.prototype.listEDSCourses=function(){var e=new l.a(Object(c.c)(d()())).period;return-1===s.a.currentUser.roles.indexOf("EMPLOYEE")?s.a.edsClient.getActiveCourses({periodName:e}):null},e.prototype.createCoursesList=function(e,t,n){return r.b(this,void 0,void 0,function(){var a,i,l,c,u=this;return r.d(this,function(d){switch(d.label){case 0:return a=Object(o.c)(t.filter(function(e){return!e.show}),function(e){return e.name}),i=Object(o.c)(t.filter(function(e){return e.show}),function(e){return e.name}),l=s.a.currentUser.roles.some(function(e){return"STUDENT"===e}),c=e?Object(o.c)(e,function(e){return e.name.substr(0,20)}):{},[4,Promise.all(n.map(function(e){var t=e.id,n=e.name,o=e.description,d=e.modifiedBy;return r.b(u,void 0,void 0,function(){var e,u,m,p;return r.d(this,function(r){switch(r.label){case 0:return e=c[n.substr(0,20)],m=(u=!l||null!=e)?!a[t]:!!i[t],!this.fullCourse&&n.length>=20?e?(n=e.name,[3,3]):[3,1]:[3,3];case 1:return m?[4,s.a.kedBackendClient.get("courses",t)]:[3,3];case 2:p=r.sent(),n=p.name,r.label=3;case 3:return d&&d.name&&!o&&(o=d.name+"s version"),[2,{id:t,name:n,description:o,visible:m,defaultVisible:u}]}})})}))];case 1:return[2,d.sent()]}})})},e.prototype.hideCourse=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return t=this.kedRepo.mem.items.filter(function(t){return t.name===e.id}),e.defaultVisible?[4,this.kedRepo.insert([{id:Object(i.e)(),name:e.id}])]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.kedRepo.delete(t.map(function(e){return e.id}))];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.showCourse=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return t=this.kedRepo.mem.items.filter(function(t){return t.name===e.id}),e.defaultVisible?[4,this.kedRepo.delete(t.map(function(e){return e.id}))]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.kedRepo.insert([{id:Object(i.e)(),name:e.id,show:!0}])];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.subscribe=function(e,t){return r.b(this,void 0,void 0,function(){var n,a,s,o,i;return r.d(this,function(r){switch(r.label){case 0:return this.fullCourse||!t.fullCourse?[3,3]:(this.fullCourse=t.fullCourse,this.kedCoursesPromise=this.listKedCourses(),[4,Promise.all([this.kedCoursesPromise,this.edsCoursesPromise,this.userHiddenCoursesPromise])]);case 1:return n=r.sent(),a=n[0],s=n[1],o=n[2],i=this,[4,this.createCoursesList(s,o,a)];case 2:i.result=r.sent(),r.label=3;case 3:return[4,this.userHiddenCoursesPromise];case 4:return r.sent(),this.notifySubscriber(e,t),this.subscribers.push({subscriber:e,options:t}),[2]}})})},e.prototype.unsubscribe=function(e){this.subscribers=this.subscribers.filter(function(t){return t.subscriber!==e})},e}();m||(m=s.a.hiddenCoursesRepo=new p)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),a=n(37),s=n(6),o=function(){function e(e){var t=this,n=e.table,s=e.getClient,o=e.getQueryOptions;this.mem=new a.a({query:function(){return r.b(t,void 0,void 0,function(){var e;return r.d(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return e=t.sent(),[4,s().list(n,r.a({},e,{cacheBust:this.getCacheBust()}))];case 2:return[2,t.sent()]}})})}}),this.options=e}return e.prototype.getCacheBust=function(){var e=this.options,t=e.table,n=e.user;return localStorage.getItem("cache-bust-"+t+"-"+n)||this.regenerateCacheBust()},e.prototype.regenerateCacheBust=function(){var e=this.options,t=e.table,n=e.user,r=Object(s.e)();return localStorage.setItem("cache-bust-"+t+"-"+n,r),r},e.prototype.upsert=function(e,t){return r.b(this,void 0,void 0,function(){var n,a=this;return r.d(this,function(r){switch(r.label){case 0:return e.$etag?[3,2]:(n=Object.assign({},e),t(n),[4,this.insert([n])]);case 1:return[2,r.sent()];case 2:return[4,this.update([e],t).catch(function(n){if("http404"===n.name||"http403"===n.name){var r=Object.assign({},e);return t(r),a.insert([r])}return Promise.reject(n)})];case 3:r.sent(),r.label=4;case 4:return[2]}})})},e.prototype.update=function(e,t){return r.b(this,void 0,void 0,function(){var n,a,s,o,i,l,c,u=this;return r.d(this,function(r){switch(r.label){case 0:return n=this.options,a=n.getClient,s=n.optimistic,o=n.table,i=a(),l=e.map(function(e){var n=u.mem.items.find(function(t){return t.id===e.id});return e=Object.assign({},n||e),t(e),e}),s?[4,this.mem.update(l.map(function(e){return Object.assign({},e,{$meta:"updating"})}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,i.do(function(e){return l.forEach(function(t){return e.put(o,t)})}).catch(function(n){return"http409"===n.name?i.list(o,{ids:e.map(function(e){return e.id})},{cache:"no-cache"}).then(function(e){var n=e.map(function(e){var n=Object.assign({},e);return t(n),n});return i.do(function(e){return n.forEach(function(t){return e.put(o,t)})})}):Promise.resolve(s&&u.mem.update(e)).then(function(){return Promise.reject(n)})})];case 3:return c=r.sent(),this.regenerateCacheBust(),l.forEach(function(e){e.$etag=c.newEtags[e.id],e.$meta=void 0}),[4,this.mem.update(l)];case 4:return r.sent(),[2]}})})},e.prototype.stripGraphs=function(e,t){return e.map(function(e){var n=Object.assign({},e);return t.forEach(function(t){e[t]&&(n[t]=e[t].map(function(e){return{id:e.id}}))}),n})},e.prototype.insert=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,o,i,l,c,u,d,m,p,f,h,b,v,g=this;return r.d(this,function(r){switch(r.label){case 0:return t=this.options,n=t.getClient,a=t.optimistic,o=t.table,i=t.getQueryOptions,l=n(),[4,i()];case 1:return c=r.sent(),u=[].concat(c.include),e=e.map(function(e){return e.id?e:Object.assign({},e,{id:Object(s.e)()})}),d=this.stripGraphs(e,u),a?[4,this.mem.insert(d.map(function(e){return Object.assign({},e,{$meta:"adding"})}))]:[3,3];case 2:r.sent(),r.label=3;case 3:for(m=new s.a,p=function(e){for(var t=function(t){var n=e[t];n&&n.forEach(function(n){m.link2(o,e.id,t,n.id)})},n=0,r=u;n<r.length;n++){t(r[n])}m.add(o,e)},f=0,h=d;f<h.length;f++)b=h[f],p(b);return[4,l.batch(m.mutationRequests).catch(function(t){return a&&g.mem.delete(e.map(function(e){return e.id})),Promise.reject(t)})];case 4:return v=r.sent(),this.regenerateCacheBust(),e.forEach(function(e){return e.$etag=v.newEtags[e.id]}),a?[4,this.mem.update(e)]:[3,6];case 5:return r.sent(),[3,8];case 6:return[4,this.mem.insert(e)];case 7:r.sent(),r.label=8;case 8:return[2]}})})},e.prototype.delete=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,s,o,i=this;return r.d(this,function(l){switch(l.label){case 0:return t=this.options,n=t.getClient,a=t.optimistic,s=t.table,o=n(),a?[4,this.mem.update(e.map(function(e){return i.mem.items.find(function(t){return t.id===e})}).filter(function(e){return e}).map(function(e){return Object.assign({},e,{$meta:"deleting"})}))]:[3,2];case 1:l.sent(),l.label=2;case 2:return[4,o.do(function(t){return e.forEach(function(e){return t.delete(s,e)})}).catch(function(t){return r.b(i,void 0,void 0,function(){var n=this;return r.d(this,function(r){switch(r.label){case 0:return a?[4,this.mem.update(e.map(function(e){return n.mem.items.find(function(t){return t.id===e})}).filter(function(e){return e}).map(function(e){return delete(e=Object.assign({},e)).$meta,e}))]:[3,2];case 1:r.sent(),r.label=2;case 2:throw t}})})})];case 3:return l.sent(),this.regenerateCacheBust(),[4,this.mem.delete(e)];case 4:return l.sent(),[2]}})})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(5),a=n.n(r),s=n(15);var o=function(){function e(e){var t="academicYear"in e?e:Object(s.c)(a()(e));this.academicYear=t.academicYear,this.term=t.term}return Object.defineProperty(e.prototype,"year",{get:function(){return parseInt(this.academicYear.split("/")["AT"===this.term?0:1])},enumerable:!0,configurable:!0}),e.prototype.nextTerm=function(){return new e("AT"===this.term?{term:"ST",academicYear:this.academicYear}:{term:"AT",academicYear:Object(s.a)(this.academicYear,1)})},e.prototype.prevTerm=function(){return new e("AT"===this.term?{term:"ST",academicYear:Object(s.a)(this.academicYear,-1)}:{term:"AT",academicYear:this.academicYear})},e.prototype.toLocaleString=function(e,t){var n="AT"===this.term?this.academicYear.split("/")[0]:this.academicYear.split("/")[1];t&&(n=n.substr(2));for(var r=0,a=e;r<a.length;r++){switch(a[r].split("-")[0].split("_")[0].toLowerCase()){case"en":return("AT"===this.term?"AT":"ST")+" "+n;case"sv":return("AT"===this.term?"HT":"VT")+" "+n}}},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r,a=n(1),s=n(0),o=n(2),i=function(e){var t=e.onClick,n=e.className,i=e.style,l=e.title;return s.createElement("div",{title:l||Object(o.a)(r||(r=a.e(["Radera"],["Radera"]))),className:"removeItem "+(n||""),onClick:t,style:i})}},,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(5),a=n.n(r);a.a.updateLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}});var s=function(){return a.a.apply(this,arguments).locale("sv")}},function(e,t,n){"use strict";var r=n(1),a=n(0),s=n(3),o=n(5),i=n.n(o),l=n(6),c=n(7),u=n(2);function d(e){return a.createElement("div",{className:"confirmation-box "+e.className+(e.visible?" visible":"")},a.createElement("p",null,e.text),a.createElement("button",{onClick:function(){return e.onConfirm()}},"OK"),a.createElement("button",{onClick:function(){return e.onCancel()}},"Avbryt"))}n.d(t,"a",function(){return v});var m,p,f,h,b,v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTasks:[],weekDate:Date.now(),confirmations:[]},n.onChange=n.onChange.bind(n),n}return r.c(t,e),t.prototype.onChange=function(e,t){t.weekDate!==this.state.weekDate&&this.setState({confirmations:[]}),this.setState({userTasks:e,weekDate:t.weekDate})},t.prototype.componentDidMount=function(){c.a.subscribe(this.onChange)},t.prototype.componentWillUnmount=function(){c.a.unsubscribe(this.onChange)},t.prototype.toggleTask=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,o;return r.d(this,function(r){switch(r.label){case 0:return t=this.state.userTasks.filter(function(t){return e.task?t.task&&t.task.some(function(t){return t.id===e.id}):t.siteVisionPageId===e.id}),n=this.state.weekDate,0!==t.length?[3,2]:(a=Math.max.apply(Math.max,[n].concat(this.state.userTasks.map(function(e){return e.dateTime}))),o={id:Object(l.e)(),courseName:e.courseName,dateTime:a+2e3,learningGoal:e.learningGoal,name:e.name,url:e.url,acl:[new l.b("email",s.a.currentUser.mail,"S"),new l.b("schoolRole",s.a.currentUser.school+"/EMPLOYEE","R")].map(function(e){return e.toString()})},e.task&&e.task.deadline&&(o.deadline=e.task.deadline),e.task&&e.course?(o.task=[e.task],o.course=[e.course]):o.siteVisionPageId=e.id,e.step&&(o.step=e.step),[4,Promise.all([c.a.setWeekPlannerBoxOpen(e.courseName,!0),c.a.insert([o])])]);case 1:return r.sent(),[3,4];case 2:return[4,c.a.delete(t.map(function(e){return e.id}))];case 3:r.sent(),r.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props.learningTasks,n=Object(u.c)(this.state.userTasks,function(e){return e.task&&e.task.length>0?e.task.map(function(e){return e.id})[0]:e.siteVisionPageId?e.siteVisionPageId:e.url}),s=this.state.confirmations,o=i()(this.state.weekDate).week(),l=i()().week(),c=o===l?"":o===l+1?Object(u.a)(m||(m=r.e(["för nästa vecka (v",")"],["för nästa vecka (v",")"])),o):o===l-1?Object(u.a)(p||(p=r.e(["för förra veckan (v",")"],["för förra veckan (v",")"])),o):Object(u.a)(f||(f=r.e(["för vecka ",""],["för vecka ",""])),o);return a.createElement("div",{className:"taskContainer"},t.map(function(t,i){var m=t.id,p=n[m]||{$meta:"deleted"},f="adding"===p.$meta||"deleting"===p.$meta,v="deleted"!==p.$meta&&"deleting"!==p.$meta,g=v?Object(u.a)(h||(h=r.e(["Ta bort uppgiften från egen veckoplanering ",""],["Ta bort uppgiften från egen veckoplanering ",""])),c):Object(u.a)(b||(b=r.e(["Lägg till uppgiften i egen veckoplanering ",""],["Lägg till uppgiften i egen veckoplanering ",""])),c),k=s.some(function(e){return m===e});return a.createElement("div",{key:t.id},a.createElement("div",{key:m,className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("div",{className:"selectedBox"+(v?" selected":""),style:f?{opacity:.5}:{},onClick:function(){return f||o!==l?k?e.setState({confirmations:s.filter(function(e){return e!==m})}):e.setState({confirmations:s.slice().concat(m)}):e.toggleTask(t)},title:g})),a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{href:t.url},t.name))),a.createElement(d,{visible:k,text:g,onConfirm:function(){e.toggleTask(t),e.setState({confirmations:s.filter(function(e){return e!==m})})},onCancel:function(){e.setState({confirmations:s.filter(function(e){return e!==m})})}}))}))},t}(a.Component)},,function(e,t,n){"use strict";var r=n(10),a=n(3),s=function(){return function(){var e=a.a.currentUser,t=Object(r.b)(location.search,{toLower:!0});(t.features||"").split(",").map(function(e){return e.toLowerCase()}),this.EditUserTasksViaPenOnly="Grundskolor"!==e.schoolType&&"Grundskolor"!==t.schooltype,this.SubTasks="Grundskolor"!==e.schoolType&&"Grundskolor"!==t.schooltype,this.AssignmentTasks=!!t.testversion}}();n.d(t,"a",function(){return s})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),a=function(){function e(e){this.comm=e,this.listPromise=null,this.items=null,this.subscribers=[]}return e.prototype.subscribe=function(e){var t=this;return this.ensureHasData().then(function(){e(t.items),t.subscribers.push(e)})},e.prototype.unsubscribe=function(e){this.subscribers=this.subscribers.filter(function(t){return t!==e})},e.prototype.notifySubscribers=function(){var e=this;this.subscribers.forEach(function(t){return t(e.items)})},e.prototype.ensureHasData=function(){return this.listPromise||this.refreshFromServer(),this.listPromise},e.prototype.refreshFromServer=function(){var e=this;return this.listPromise=this.comm.query().then(function(t){e.items=t,e.notifySubscribers()}),this.listPromise},e.prototype.update=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,this.ensureHasData()];case 1:return n.sent(),t=Array.isArray(e)?e:[e],this.items=this.items.map(function(e){var n=t.find(function(t){var n=t.id;return e.id===n});return n?Object.assign({},n):e}),this.notifySubscribers(),[2]}})})},e.prototype.insert=function(e){var t=this;return this.ensureHasData().then(function(){t.items=t.items.concat(e),t.notifySubscribers()})},e.prototype.delete=function(e){var t=this,n=Array.isArray(e)?e:[e];return this.ensureHasData().then(function(){t.items=t.items.filter(function(e){return!n.some(function(t){return e.id===t})}),t.notifySubscribers()})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),a=n(0),s=n(31),o=n(20),i=n(8),l=n.n(i),c=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.componentDidUpdate=function(e){null!==this.lastDiv&&e.dialogs.length>this.props.dialogs.length&&l()(Object(o.findDOMNode)(this.lastDiv)).find(":input").first().focus()},t.prototype.render=function(){var e=this;this.lastDiv=null;var t=this.props,n=t.dialogs,r=t.popDialog;return l()("body").attr("aria-disabled",n.length>0),l()("body").css("overflow",n.length>0?"hidden":"auto"),n.length>0&&a.createElement("div",null,n.map(function(t,i){var c;return a.createElement("div",{key:i},a.createElement("div",{className:"darken"}),a.createElement("div",{className:"modal-page-wrap"},a.createElement("div",{className:"modal-page",ref:function(t){c=t,i===n.length-1&&(e.lastDiv=t)},tabIndex:0,"aria-disabled":i<n.length-1,onKeyPress:function(e){13!==e.which||e.target&&"TEXTAREA"===e.target.tagName||l()(Object(o.findDOMNode)(c)).find(".btn-default").click(),e.stopPropagation()},onKeyDown:function(e){if(27===e.which)return r(),void e.stopPropagation();if(83===e.which&&(e.ctrlKey||e.metaKey)){var t=Object(o.findDOMNode)(c);e.preventDefault(),l()(t).find(".btn-default").click(),e.stopPropagation()}}},t,a.createElement(s.a,{onClick:r}),a.createElement("div",{className:"stopFloats"}))))}))},t}(a.Component)},function(e,t,n){"use strict";function r(e,t){return""+e+t.substr(0,3).toLowerCase()}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";var r=n(1),a=n(0),s=n(25),o=n(2),i=n(12),l=n(39);function c(e){return e.course&&e.task&&e.course.length>0&&e.task.length>0?"courseBuilderTask":e.siteVisionPageId?"siteVisionTask":"customTask"}var u,d,m=n(5),p=n.n(m),f=n(36),h=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.courseName,m=t.learningGoals,h=!!this.props.openCourses[n],b=new f.a;return a.createElement(s.a,{title:a.createElement("h5",null,n||Object(o.a)(u||(u=r.e(["Egna lärandemål"],["Egna lärandemål"])))),headerOpen:h,className:n&&Object(l.a)("wp-course-",n),onOpenClose:function(t){return e.props.setIsOpen(n,t)}},m.map(function(t){return a.createElement("div",{key:t.name,className:"learningGoalContainer"},t.step&&a.createElement("div",{className:"stepIndicator"},t.step),a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"learningGoalText horizontalItem top"},t.name),a.createElement("div",{className:"horizontalItem"}," ",a.createElement("a",{className:"trash",href:"#",title:"Ta bort lärandemålet och dess uppgifter",onClick:function(n){n.preventDefault(),e.props.removeLearningGoal(t)}},a.createElement("i",{className:"fa fa-trash"})))),a.createElement("div",{className:"learningGoalTasks"},a.createElement("div",{className:"taskContainer"},t.tasks.map(function(t){var n="adding"===t.$meta||"deleting"===t.$meta||"updating"===t.$meta,r=c(t),s=p()(t.deadline).startOf("day")<p()().startOf("day");return a.createElement("div",{key:t.id,style:n?{opacity:.5}:{}},a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("div",{className:"checkBox"+(t.done?" checked":""),onClick:function(r){return!n&&e.props.setTaskDone(t,!t.done)}})),a.createElement("div",{className:"horizontalItem top"},"courseBuilderTask"===r?a.createElement("a",{href:function(e,t){if(e.course&&e.course.length>0&&e.task&&e.task.length>0){var n=Object(i.e)(t,{courseId:e.course[0].id});return n+"#/task/"+e.task[0].id}return e.url}(t,e.props.viewCourseUrl)},t.name):"siteVisionTask"===r?a.createElement("a",{href:t.url},t.name):a.createElement("a",{className:b.EditUserTasksViaPenOnly&&!t.url?"link-less":"",onClick:b.EditUserTasksViaPenOnly?void 0:function(n){n.preventDefault(),e.props.editTask(t)},href:t.url,target:(t.url+"").toLowerCase().startsWith(location.host.toLowerCase())?"_self":"_blank"},t.name),t.deadline&&a.createElement("div",{className:"dateSet"+(s?" expired":"")},a.createElement("i",{title:p()(t.deadline).format("YYYY-MM-DD"),className:"fa fa-calendar","aria-hidden":"true",onClick:function(){}}))),b.EditUserTasksViaPenOnly?a.createElement("div",{className:"horizontalItem top taskEdit"},a.createElement("a",{className:"editItem",onClick:function(){return e.props.editTask(t)}})):void 0),t.subTasks&&a.createElement("div",{className:"subtasks"},t.subTasks.map(function(r){return a.createElement("div",{key:r.id},a.createElement("div",{className:"horizontalItem top"},a.createElement("div",{className:"checkBox"+(r.done?" checked":""),onClick:function(a){return!n&&e.props.setSubTaskDone(t,r,!r.done)}})),a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{href:r.url||void 0,target:(t.url+"").toLowerCase().startsWith(location.host.toLowerCase())?"_self":"_blank",className:r.url?void 0:"link-less"},r.name)),a.createElement("div",{className:"horizontalItem top taskEdit"},a.createElement("a",{className:"editItem",onClick:function(){return e.props.editSubTask(t,r)}})))})))}))),a.createElement("div",{className:"learningGoalTools"},a.createElement("div",{className:"btn addOwnGoal",onClick:function(){return e.props.addOwnTask(e.props.courseName,t.name)}},a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," ",Object(o.a)(d||(d=r.e(["Eget arbetsmål"],["Eget arbetsmål"]))))),a.createElement("br",null))}))},t}(a.Component);var b=n(6);var v=n(3),g=n(7),k=n(38),E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={learningGoal:t.learningGoal||""},n}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.state.learningGoal,n=this.props.onSave;return a.createElement("div",null,a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},a.createElement("h2",null,"Lägg till eget lärandemål"),a.createElement("hr",null),a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},"Mål:"),a.createElement("div",{className:"horizontalItem top"},a.createElement("input",{type:"text",tabIndex:1,size:50,autoFocus:!0,value:t,onChange:function(t){return e.setState({learningGoal:t.target.value})}})),a.createElement("div",{className:"horizontalItem top spaced"})),a.createElement("br",null)),a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return n(t)}},"Spara")))},t}(a.Component);var y,N,C,w,D,T,I,O,S=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement("label",{className:"kclabel",htmlFor:(e=this.props.children,t=new Set,function e(n){if("string"==typeof n)return null;if(!t.has(n)){if(t.add(n),n.props)return n.props.id?n.props.id:n.props.children?e(n.props.children):void 0;if(n.length)for(var r=0;r<n.length;++r){var a=n[r];if(a){var s=e(a);if(s)return s}}}}(e))},this.props.label),this.props.children);var e,t},t}(a.Component),x=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.render=function(){var e=this;return a.createElement(S,{label:this.props.label},a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("input",{type:"text",autoFocus:this.props.autoFocus,id:this.props.id,size:35,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:this.props.placeholder})),!!this.props.children&&a.createElement("div",{className:"horizontalItem"},this.props.children)))},t}(a.Component),j=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.render=function(){var e=this;return a.createElement(S,{label:this.props.label},a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("textarea",{autoFocus:this.props.autoFocus,id:this.props.id,cols:35,rows:this.props.rows||5,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:this.props.placeholder})),!!this.props.children&&a.createElement("div",{className:"horizontalItem"},this.props.children)))},t}(a.Component),P=function(e){function t(t){var n=e.call(this,t)||this;return n.state={name:"",description:"",url:""},n}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.name,r=t.description,s=t.url,o=this.props,i=(o.isTask,o.onSave);return a.createElement("div",null,a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},a.createElement("h2",null,"Lägg till eget arbetsmål"),a.createElement("hr",null),a.createElement(x,{label:"Namn",id:"AddCustomTask:name",placeholder:"Ange namn...",value:n,autoFocus:!0,onChange:function(t){return e.setState({name:t})}}),a.createElement(j,{rows:7,label:"Beskrivning",id:"AddCustomTask:description",placeholder:"Lägg till en beskrivning...",value:r,onChange:function(t){return e.setState({description:t})}}),a.createElement(x,{label:"Länk",id:"AddCustomTask:url",placeholder:"http://www...",value:s,onChange:function(t){return e.setState({url:s})}})),a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return i(n,r,s)}},"Spara")))},t}(a.Component),U=n(48),_=(n(33),function(e){function t(t){var n=e.call(this,t)||this;if("edit"===t.mode){var r=t.subTask;n.state={name:r.name||"",description:r.description||"",url:r.url||""}}else n.state={name:"",description:"",url:""};return n}return r.c(t,e),t.prototype.save=function(){var e=this.props,t=e.userTask,n=e.closeDialog,a=this.state,s=a.name,o=a.description,i=a.url;if("edit"===e.mode)g.a.update([t],function(t){var n=t.subTasks;n&&(t.subTasks=n.map(function(t){return t.id===e.subTask.id?r.a({},t,{name:s,description:o,url:i}):r.a({},t)}))});else{var l={id:Object(b.e)(),name:s,description:o,url:i};g.a.update([t],function(e){e.subTasks||(e.subTasks=[]),e.subTasks=e.subTasks.concat(l)})}n()},t.prototype.delete=function(){var e=this.props;if("edit"!==e.mode)throw new Error("Can only delete in edit mode");g.a.update([e.userTask],function(t){t.subTasks&&(t.subTasks=t.subTasks.filter(function(t){return t.id!==e.subTask.id}))}),e.closeDialog()},t.prototype.render=function(){var e=this,t=this.state,n=(t.name,t.description,t.url,this.props),r="edit"===n.mode;return a.createElement(a.Fragment,null,a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},a.createElement("h2",null,r?"Redigera underuppgift":"Lägg till underuppgift"),a.createElement("hr",null),a.createElement(x,{autoFocus:!0,label:"Underuppgiftens namn",id:"AddUserSubTask:name",placeholder:"",value:this.state.name,onChange:function(t){return e.setState({name:t})}}),a.createElement(j,{label:"Beskrivning",id:"AddUserSubTask:description",rows:7,placeholder:"",value:this.state.description,onChange:function(t){return e.setState({description:t})}}),a.createElement(x,{label:"Länk",id:"AddUserSubTask:url",placeholder:"",value:this.state.url,onChange:function(t){return e.setState({url:t})}}),a.createElement("br",null)),a.createElement("div",{className:"sv-html-portlet sv-portlet"},"edit"===n.mode&&a.createElement("button",{className:"btn btn-warning btn-large pull-right",onClick:function(t){return e.delete()}},"Ta bort underuppgift"),a.createElement("button",{tabIndex:1,className:"btn btn-large btn-default",onClick:function(){return e.save()}},"Spara")))},t}(a.Component)),L=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTask:t.userTask,name:t.userTask.name,description:t.userTask.description,url:t.userTask.url,deadline:t.userTask.deadline,subTasks:t.userTask.subTasks},n.onUserTasksChanged=n.onUserTasksChanged.bind(n),n}return r.c(t,e),t.prototype.componentDidMount=function(){g.a.subscribe(this.onUserTasksChanged)},t.prototype.onUserTasksChanged=function(e){var t=this,n=e.find(function(e){return e.id===t.props.userTask.id});n?this.setState({userTask:n,subTasks:n.subTasks}):this.props.closeDialog()},t.prototype.componentWillUnmount=function(){g.a.unsubscribe(this.onUserTasksChanged)},t.prototype.isModified=function(){var e=this.state,t=e.deadline,n=e.description,r=e.name,a=e.url,s=e.userTask;return t!==s.deadline||n!==s.description||r!==s.name||a!==s.url},t.prototype.addSubTask=function(){this.props.openDialog(a.createElement(_,{mode:"add",userTask:this.state.userTask,closeDialog:this.props.closeDialog}))},t.prototype.editSubTask=function(e){this.props.openDialog(a.createElement(_,{mode:"edit",subTask:e,userTask:this.state.userTask,closeDialog:this.props.closeDialog}))},t.prototype.render=function(){var e=this,t=this.state,n=t.name,r=t.description,s=t.url,o=t.deadline,i=t.subTasks,l=t.showCalendar,u=t.userTask,d=u.id,m=(u.courseName,this.props),f=m.onUpdate,h=m.onDelete,b=this.isModified(),v="customTask"===c(u),g=p()(u.deadline)<p()();return a.createElement("div",{className:"editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer"},a.createElement("h2",null,v?"Redigera arbetsmål":"Redigera uppgift"),a.createElement("hr",null),a.createElement(x,{autoFocus:!0,label:v?"Arbetsmålets namn":"Uppgiftens namn",id:"EditUserTask:name",placeholder:v?"Vad ska du göra?":"Ange uppgiftens namn...",value:n,onChange:function(t){return e.setState({name:t})}}),v&&a.createElement(a.Fragment,null,a.createElement(j,{rows:5,label:"Beskrivning",id:"EditUserTask:description",placeholder:"Lägg till en beskrivning...",value:r,onChange:function(t){return e.setState({description:t})}}),a.createElement(x,{label:"Länk",id:"EdutUserTask:url",placeholder:"http(s)://...",value:s,onChange:function(t){return e.setState({url:t})}})),a.createElement(S,{label:"Ange deadline"},o||l?a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement(U.a,{ref:function(t){return e.datePicker=t},id:"EditUserTask:deadline",selected:o&&p()(o),autoFocus:l,dateFormat:"YYYY-MM-DD",className:g?"expired":void 0,locale:"sv",popperPlacement:v?"top-start":"bottom-start",onBlur:function(){return e.setState({showCalendar:!1})},onChange:function(t){e.setState({deadline:t&&t.format("YYYY-MM-DD"),showCalendar:!1})}})),a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{className:"deleteDate",href:"#",title:"Ta bort deadline",onClick:function(t){t.preventDefault(),e.setState({deadline:null,showCalendar:!1})}}))):a.createElement("div",{className:"top",ref:function(){e.datePicker=null}},a.createElement("a",{className:"btn",onClick:function(t){e.datePicker&&e.datePicker.setOpen(!0),e.setState({showCalendar:!0})}},a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"})," Ange deadline..."))),a.createElement(S,{label:"Underuppgifter"},a.createElement("div",{className:"learningGoalTasks"},a.createElement("div",{className:"taskContainer"},i&&i.map(function(t){return a.createElement("div",{key:t.id,className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{onClick:function(){return e.editSubTask(t)},href:"#"},t.name)))}))),a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"top"},a.createElement("button",{id:"EditUserTask:addSubTask",className:"btn",onClick:function(){return e.addSubTask()}},a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," Lägg till underuppgift")))),a.createElement("div",{className:"divider large"}),a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalButton top"},a.createElement("button",{tabIndex:1,className:"btn btn-default",onClick:function(){b?f(function(e){e.name=n,e.description=r,e.url=s,e.deadline=o}):e.props.closeDialog()}}," Spara ")),a.createElement("div",{className:"horizontalButton top"},a.createElement("button",{tabIndex:1,className:"btn",onClick:function(){e.props.closeDialog()}}," Avbryt ")),a.createElement("div",{className:"confirm top pull-right"},a.createElement("button",{tabIndex:1,className:"btn btn-warning",onClick:function(){h(d)}},v?" Ta bort arbetsmål":" Ta bort den här uppgiften"))))},t}(a.Component),G=n(13),M=function(){function e(e){this.timeoutId=null,this.cancelled=!1,this.pending=!1,this.isJobExecuting=!1,this.jobCallback=e}return e.prototype.triggerChange=function(e){var t=this;this.cancelled||(this.pending=!0,null!==this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){return t.launchJob()},e))},e.prototype.stop=function(){null!==this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null,this.cancelled=!0},e.prototype.launchJob=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){switch(e.label){case 0:if(this.cancelled)return[2];if(!this.pending)return[2];if(this.isJobExecuting)return[2];this.timeoutId=null,e.label=1;case 1:return e.trys.push([1,,3,4]),this.isJobExecuting=!0,this.pending=!1,[4,this.jobCallback()];case 2:return e.sent(),[3,4];case 3:return this.isJobExecuting=!1,[7];case 4:return this.pending?[4,this.launchJob()]:[3,6];case 5:e.sent(),e.label=6;case 6:return[2]}})})},e}(),R=n(26),A=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTasks:[],weekDate:Date.now(),openCourses:{},dialogs:[],saving:!1,weekTextsUT:null,isLoading:!0},n.onChange=n.onChange.bind(n),n.weekTextsSavingJob=new M(function(){return n.saveWeekTexts()}),n}return r.c(t,e),t.prototype.componentDidMount=function(){g.a.subscribe(this.onChange)},t.prototype.componentWillUnmount=function(){g.a.unsubscribe(this.onChange),this.weekTextsSavingJob.stop()},t.prototype.onChange=function(e,t,n){var r={userTasks:e,weekDate:t.weekDate,openCourses:t.openCourses,weekTextsUT:n,isLoading:!1};this.state.weekTextsUT&&n.dateTime===this.state.weekTextsUT.dateTime||(r.strategy=n.weekTexts.strategy,r.assessment=n.weekTexts.assessment),this.setState(r)},t.prototype.isWeekTextsEdited=function(){var e=this.state,t=e.strategy,n=e.assessment,r=e.weekTextsUT;return!!r&&(t!==r.weekTexts.strategy||n!==r.weekTexts.assessment)},t.prototype.saveWeekTexts=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a;return r.d(this,function(r){switch(r.label){case 0:return console.log("Saving texts..."),e=this.state,t=e.strategy,n=e.assessment,a=e.weekTextsUT,this.isWeekTextsEdited()?[4,g.a.upsert(a,function(e){e.weekTexts={strategy:t,assessment:n}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.prevWeek=function(){g.a.changeWeek(p()(this.state.weekDate).add(-1,"week").toDate())},t.prototype.nextWeek=function(){g.a.changeWeek(p()(this.state.weekDate).add(1,"week").toDate())},t.prototype.openDialog=function(e){this.setState({dialogs:this.state.dialogs.concat([e])})},t.prototype.openAddGoalDialog=function(){var e=this;this.openDialog(a.createElement(E,{onSave:function(t){return r.b(e,void 0,void 0,function(){return r.d(this,function(e){switch(e.label){case 0:if(!t)throw new Error(Object(o.a)(y||(y=r.e(["Lärandemålet kan inte vara tomt"],["Lärandemålet kan inte vara tomt"]))));if(this.state.saving)return[3,5];this.setState({saving:!0}),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,this.addCustomGoal(t)];case 2:return e.sent(),[3,4];case 3:return this.setState({saving:!1}),[7];case 4:this.closeDialog(),e.label=5;case 5:return[2]}})})}}))},t.prototype.openAddOwnTaskDialog=function(e,t){var n=this;this.openDialog(a.createElement(P,{isTask:!e,onSave:function(a,s,i){return r.b(n,void 0,void 0,function(){return r.d(this,function(n){switch(n.label){case 0:if(!a)throw new Error(Object(o.a)(N||(N=r.e(["Namnet kan inte vara tomt"],["Namnet kan inte vara tomt"]))));if(this.state.saving)return[3,5];this.setState({saving:!0}),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.addCustomTask(e,t,a,s,i)];case 2:return n.sent(),[3,4];case 3:return this.setState({saving:!1}),[7];case 4:this.closeDialog(),n.label=5;case 5:return[2]}})})}}))},t.prototype.editTask=function(e){var t=this;this.openDialog(a.createElement(L,{userTask:e,onUpdate:function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:if(t=r.a({},e),n(t),!t.name)throw new Error(Object(o.a)(C||(C=r.e(["Namnet får inte vara tomt"],["Namnet får inte vara tomt"]))));return this.closeDialog(),[4,g.a.update([e],n)];case 1:return a.sent(),[2]}})})},onDelete:function(e){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return this.closeDialog(),[4,g.a.delete([e])];case 1:return t.sent(),[2]}})})},openDialog:function(e){return t.openDialog(e)},closeDialog:function(){return t.closeDialog()}}))},t.prototype.editSubTask=function(e,t){var n=this;this.openDialog(a.createElement(_,{mode:"edit",userTask:e,subTask:t,closeDialog:function(){return n.closeDialog()}}))},t.prototype.closeDialog=function(){this.setState({dialogs:this.state.dialogs.slice(0,this.state.dialogs.length-1)})},t.prototype.addCustomGoal=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return t=Math.max.apply(Math.max,[this.state.weekDate].concat(this.state.userTasks.map(function(e){return e.dateTime}))),[4,g.a.insert([{id:Object(b.e)(),learningGoal:e,dateTime:t+2e3}])];case 1:return n.sent(),[4,g.a.setWeekPlannerBoxOpen("",!0)];case 2:return n.sent(),[2]}})})},t.prototype.removeLearningGoal=function(e){return r.b(this,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return e.tasks.length>0&&!confirm("Ta bort lärandemål samt "+e.tasks.length+" uppgifter?")?[2]:[4,g.a.delete(e.allTasks.map(function(e){return e.id}))];case 1:return t.sent(),[2]}})})},t.prototype.addCustomTask=function(e,t,n,a,s){return r.b(this,void 0,void 0,function(){var o;return r.d(this,function(r){switch(r.label){case 0:return o=Math.max.apply(Math.max,[this.state.weekDate].concat(this.state.userTasks.map(function(e){return e.dateTime}))),[4,g.a.insert([{id:Object(b.e)(),dateTime:o+2e3,courseName:e,learningGoal:t,name:n,description:a,url:s}])];case 1:return r.sent(),[2]}})})},t.prototype.setIsOpen=function(e,t){g.a.setWeekPlannerBoxOpen(e,t)},t.prototype.setTaskDone=function(e,t){return r.b(this,void 0,void 0,function(){return r.d(this,function(n){switch(n.label){case 0:return[4,g.a.setTaskDoneState(e,t)];case 1:return n.sent(),[2]}})})},t.prototype.setSubTaskDone=function(e,t,n){return r.b(this,void 0,void 0,function(){return r.d(this,function(r){switch(r.label){case 0:return[4,g.a.setSubTaskDoneState(e,t.id,n)];case 1:return r.sent(),[2]}})})},t.prototype.copyFromPreviousWeek=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a,s,i,l,c;return r.d(this,function(u){switch(u.label){case 0:return e=this.state,t=e.userTasks,e.openCourses,n=e.weekDate,a=Object(R.b)(p()(n).add(-1,"week")),s=Object(R.a)(p()(n).year(),a),[4,v.a.kedBackendClient.list("usertasks",{from:s.notBefore,to:s.notAfter,role:"USER",include:["task","course","acl"],flags:["includeIdsOnly"]})];case 1:return i=(i=u.sent()).filter(function(e){return!e.done}).filter(function(e){return!!e.name}).filter(function(e){return!t.some(function(t){return t.name===e.name&&t.learningGoal===e.learningGoal&&t.courseName===e.courseName})}),l=Math.max.apply(Math.max,[n].concat(t.map(function(e){return e.dateTime}))),c=i.sort(Object(o.g)("dateTime")).map(function(e){var t=r.a({},e,{dateTime:l+=1e3});return t.id=Object(b.e)(),t.subTasks&&(t.subTasks=t.subTasks.filter(function(e){return!e.done})),delete t.$etag,t}),[4,g.a.insert(c)];case 2:return u.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=p()(this.state.weekDate).week(),n=p()().week(),i=function(e){for(var t=[],n=Object(o.b)(e,function(e){return e.courseName||""}),r=0,a=Object.keys(n).sort().filter(function(e){return e}).concat(n[""]?[""]:[]);r<a.length;r++){for(var s=a[r],i=n[s]||n[""],l=Object(o.b)(i,function(e){return e.learningGoal}),c=[],u=0,d=Object.keys(l);u<d.length;u++){var m=d[u],p=l[m].sort(Object(o.g)("dateTime")),f=p.filter(function(e){return null==e.name})[0],h=f&&f.url;c.push({name:m,allTasks:p,url:h,step:p.map(function(e){return e.step}).filter(function(e){return e})[0],tasks:p.filter(function(e){return e.name})})}t.push({courseName:s,learningGoals:c})}return t}(this.state.userTasks),l=this.state,c=l.dialogs,u=l.weekTextsUT,d=l.strategy,m=l.assessment,f=l.isLoading,b=u&&("adding"===u.$meta||"updating"===u.$meta),v=!!u&&d!==u.weekTexts.strategy,g=!!u&&m!==u.weekTexts.assessment,E=!b&&(v||g);return a.createElement("div",null,a.createElement("div",{className:"ked_boxed weekPlanner"+(t===n?" currentWeek":""),onKeyDown:function(t){83===t.which&&t.ctrlKey&&(t.preventDefault(),!b&&e.isWeekTextsEdited()&&e.weekTextsSavingJob.triggerChange(0))}},a.createElement("div",{className:"weekSelect"},a.createElement("div",{className:"horizontalItem"},a.createElement("p",null,Object(o.a)(w||(w=r.e(["Vecka ",""],["Vecka ",""])),t))),a.createElement("div",{className:"horizontalItem"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn",onClick:function(){return e.prevWeek()}},a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),a.createElement("button",{className:"btn",onClick:function(){return e.nextWeek()}},a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}))))),a.createElement("h4",null,Object(o.a)(D||(D=r.e(["Loggbok"],["Loggbok"])))),i.length>0&&a.createElement("hr",null),i.map(function(t){return a.createElement(h,r.a({key:t.courseName},t,{courseName:t.courseName,learningGoals:t.learningGoals,viewCourseUrl:e.props.viewCourseUrl,openCourses:e.state.openCourses,addOwnTask:function(t,n){return e.openAddOwnTaskDialog(t,n)},setIsOpen:e.setIsOpen.bind(e),setTaskDone:e.setTaskDone.bind(e),setSubTaskDone:e.setSubTaskDone.bind(e),editTask:function(t){return e.editTask(t)},editSubTask:function(t,n){return e.editSubTask(t,n)},removeLearningGoal:function(t){return e.removeLearningGoal(t)}}))}),a.createElement("hr",null),f?a.createElement(G.a,null):a.createElement("div",null,a.createElement("div",{className:"btn",onClick:function(t){return e.openAddGoalDialog()}},a.createElement("i",{className:"fa fa-list-alt","aria-hidden":"true"})," ",Object(o.a)(T||(T=r.e(["Eget lärandemål"],["Eget lärandemål"])))),a.createElement("div",{className:"btn",onClick:function(t){return e.copyFromPreviousWeek()}},a.createElement("i",{className:"fa fa-clone","aria-hidden":"true"})," ",Object(o.a)(I||(I=r.e(["Kopiera ej klara från föregående vecka"],["Kopiera ej klara från föregående vecka"])))),a.createElement(s.a,{title:a.createElement("h5",null,Object(o.a)(O||(O=r.e(["Strategi & Utvärdering"],["Strategi & Utvärdering"])))),headerOpen:this.state.openCourses.StratUtv,onOpenClose:function(t){return e.setIsOpen("StratUtv",t)}},a.createElement("h3",null,"Strategi"),a.createElement("p",null,"Hur jag ska göra för att lära mig."),a.createElement("hr",null),a.createElement("textarea",{className:"weekplanner-textarea",value:d,onChange:function(t){e.setState({strategy:t.target.value}),e.weekTextsSavingJob.triggerChange(500)}}),a.createElement("h3",null,"Utvärdering"),a.createElement("p",null,"Reflektion kring din arbetsinsats och dina valda strategier under veckan. Utvärdera i förhållande till dina mål."),a.createElement("hr",null),a.createElement("textarea",{className:"weekplanner-textarea",value:m,onChange:function(t){e.setState({assessment:t.target.value}),e.weekTextsSavingJob.triggerChange(500)}}),a.createElement("div",{className:"btn",tabIndex:0,style:E?{}:{opacity:.5},onClick:function(){return!b&&e.weekTextsSavingJob.triggerChange(0)}},a.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"}),E?" Spara":" Sparad")))),a.createElement(k.a,{dialogs:c,popDialog:function(){e.setState(function(e){var t=e.dialogs;return{dialogs:t.slice(0,t.length-1)}})}}))},t}(a.Component);n.d(t,"a",function(){return A})},,,,,,,,function(e,t,n){"use strict";var r=n(3),a=n(9),s=n(17);r.a.kedBackendClient=new s.a(a.a.KED_API_URL,r.a.bearerProvider)},function(e,t,n){"use strict";var r=n(1),a=n(10),s=n(17),o=n(6),i=n(9),l=n(3),c=n(12),u=n(2);function d(e,t,n){var s=Object(a.b)(t),o=Object(u.e)(s,c.a),i=Object(a.c)(e),l=i[0],d=i[1],m=Object(a.b)(d);return l+Object(a.a)(r.a({},m,o,{scopes:n.join(",")}))}function m(e,t){return e+"/"+t}function p(e,t,n){return new o.d(s.c,s.d,e+t.mail+location.search,i.a.KED_CLIENT_ID,i.a.KED_CLIENT_SECRET,e,{email:t.mail.toLowerCase(),roles:t.roles,school:t.school,schoolType:t.schoolType,scopes:n})}var f,h,b=l.a.currentUser&&l.a.currentUser.mail;if(b)if(i.a.KED_TOKEN_PATH){var v=d(i.a.KED_TOKEN_PATH,location.search,["kedbackend","EDS"]);l.a.bearerProvider=function(e,t){var n=m(e,t);return new s.b(e,function(e){var t=JSON.parse(e);if(!t.ok)throw new Error(t.error);return t.user&&function(e,t){l.a.currentUser=e,sessionStorage.setItem("userInfo"+t,JSON.stringify(e))}(t.user,n),{token:t.token,expires:Date.now()+354e4}},n)}(v,b),f=m(v,b),(h=sessionStorage.getItem("userInfo"+f))&&(l.a.currentUser=JSON.parse(h));var g=d(i.a.KED_TOKEN_PATH,location.search,["https://www.googleapis.com/auth/calendar.readonly"]);l.a.googleTokenProvider=function(e,t){var n=m(e,t);return new s.b(e,function(e){var t=JSON.parse(e);if(!t.ok)throw new Error(t.error);return{token:t.token,expires:Date.now()+354e4}},n)}(g,b)}else{if(!(i.a.KED_TOKEN_URL&&i.a.KED_CLIENT_ID&&i.a.KED_CLIENT_SECRET))throw new Error("Missing configuration parameter KED_TOKEN_PATH");l.a.bearerProvider=p(i.a.KED_TOKEN_URL,l.a.currentUser,["kedbackend","EDS"]),l.a.googleTokenProvider=p(i.a.KED_TOKEN_URL+"/google",l.a.currentUser,["https://www.googleapis.com/auth/calendar.readonly"])}},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,a,s=n(1),o=n(0),i=n(2),l=n(13),c=n(10),u=n(12),d=n(28),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!0,courses:[],headerOpen:!1},n.updateHiddenCourses=n.updateHiddenCourses.bind(n),n}return s.c(t,e),t.prototype.componentWillMount=function(){d.a.subscribe(this.updateHiddenCourses,{fullCourse:!0})},t.prototype.componentWillUnmount=function(){d.a.unsubscribe(this.updateHiddenCourses)},t.prototype.updateHiddenCourses=function(e){this.setState({courses:e,isLoading:!1})},t.prototype.hideCourse=function(e){return s.b(this,void 0,void 0,function(){return s.d(this,function(t){switch(t.label){case 0:return Object(i.n)(Object(i.a)(r||(r=s.e(["Sparar..."],["Sparar..."])))),[4,d.a.hideCourse(e)];case 1:return t.sent(),Object(i.n)(""),[2]}})})},t.prototype.showCourse=function(e){return s.b(this,void 0,void 0,function(){return s.d(this,function(t){switch(t.label){case 0:return Object(i.n)(Object(i.a)(a||(a=s.e(["Sparar..."],["Sparar..."])))),[4,d.a.showCourse(e)];case 1:return t.sent(),Object(i.n)(""),[2]}})})},t.prototype.render=function(){var e=this;if(this.state.isLoading)return o.createElement(l.a,null);var t=this.state.courses,n=t.filter(function(e){return e.visible}),r=t.filter(function(e){return!e.visible}),a=Object(c.b)(location.search),i=this.props.viewCourseUrl||"";return o.createElement("div",{className:"ked_boxed"},o.createElement("h3",null,"Skolans kurser"),o.createElement("div",{className:"taskContainer odd-even"},n.map(function(t){return o.createElement("div",{className:"studentCourse",key:t.id},o.createElement("div",{className:"align-horizontal"},o.createElement("div",{className:"horizontalItem top pull-right"},o.createElement("a",{className:"hideItem",onClick:function(){return e.hideCourse(t)}})),o.createElement("div",{className:"horizontalItem top"},o.createElement("a",{href:Object(u.e)(i,{courseId:t.id})},t.name))),o.createElement("div",{className:"horizontalItem top"},o.createElement("p",{className:"small"},t.description)))})),o.createElement("div",{className:"openClose"+(this.state.headerOpen?" open":"")},o.createElement("div",{className:"openHeader",onClick:function(){return e.setState({headerOpen:!e.state.headerOpen})}},o.createElement("h5",null,"Dolda kurser")),o.createElement("div",{className:"openContent"},o.createElement("div",{className:"taskContainer odd-even"},r.map(function(t){return o.createElement("div",{className:"studentCourse",key:t.id},o.createElement("div",{className:"align-horizontal"},o.createElement("div",{className:"horizontalItem top pull-right"},o.createElement("a",{className:"showItem",onClick:function(){return e.showCourse(t)}})),o.createElement("a",{href:Object(c.a)(s.a({},a,{courseId:t.id}))},t.name)),o.createElement("div",{className:"horizontalItem top"},o.createElement("p",{className:"small"},t.description)))})))))},t}(o.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r,a,s=n(1),o=n(0),i=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={error:void 0,info:void 0},n._unhandledRejection=n._unhandledRejection.bind(n),n._error=n._error.bind(n),n._customError=n._customError.bind(n),n._onInfo=n._onInfo.bind(n),n}return s.c(t,e),t.prototype.componentDidMount=function(){window.addEventListener("unhandledrejection",this._unhandledRejection),window.addEventListener("error",this._error),window.addEventListener("customerror",this._customError),window.addEventListener("info",this._onInfo)},t.prototype.componentWillUnmount=function(){window.removeEventListener("unhandledrejection",this._unhandledRejection),window.removeEventListener("error",this._error),window.removeEventListener("customerror",this._customError),window.removeEventListener("info",this._onInfo)},t.prototype._unhandledRejection=function(e){var t=this;this.setState({error:e.reason?e.reason.message:Object(i.a)(r||(r=s.e(["Ett okänt fel inträffade..."],["Ett okänt fel inträffade..."]))),info:null}),setTimeout(function(){return t.setState({error:null})},1e4)},t.prototype._error=function(e){var t=this;this.setState({error:e.error?e.error.message:Object(i.a)(a||(a=s.e(["Ett okänt fel inträffade..."],["Ett okänt fel inträffade..."]))),info:null}),setTimeout(function(){return t.setState({error:null})},1e4)},t.prototype._customError=function(e){var t=this;this.setState({error:e.detail,info:null}),setTimeout(function(){return t.setState({error:null})},1e4)},t.prototype._onInfo=function(e){var t=this;this.setState({error:null,info:e.detail}),setTimeout(function(){return t.setState({info:null})},1e4)},t.prototype.render=function(){return o.createElement("div",{className:"error-success-feedback",style:{position:"fixed",left:0,top:0,width:"100%",pointerEvents:"none"}},o.createElement("div",{style:{display:"table",margin:"0 auto"}},o.createElement("p",{className:"error",style:{display:this.state.error?"":"none"}},this.state.error&&this.state.error),o.createElement("p",{className:"info",style:{display:this.state.info?"":"none"}},this.state.info)))},t}(o.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),a=n(0),s=n(34),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.c(t,e),t.prototype.render=function(){var e=this.props,t=e.commonTasks,n=e.learningGoals;return a.createElement("div",null,n.map(function(e){return a.createElement("div",{key:e.name},a.createElement("h5",null,e.name),a.createElement(s.a,{learningTasks:e.learningTasks}))}),t.length>0&&a.createElement("div",null,n.length>0&&a.createElement("h5",null,"Övergripande"),a.createElement(s.a,{learningTasks:t})))},t}(a.Component)},,function(e,t,n){"use strict";var r=n(3),a=n(9),s=n(17),o=n(24);r.a.edsClient=new o.b(s.c,a.a.EDS_API_URL,r.a.bearerProvider)},,,function(e,t,n){var r={"./en-au":47,"./en-au.js":47,"./en-ca":46,"./en-ca.js":46,"./en-gb":45,"./en-gb.js":45,"./en-ie":44,"./en-ie.js":44,"./en-nz":43,"./en-nz.js":43,"./sv":42,"./sv.js":42};function a(e){var t=s(e);return n(t)}function s(e){var t=r[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=58},,,,,,,,,,function(e,t,n){"use strict";var r=n(1),a=n(0),s=n(2),o=n(52),i=n(11),l=n(13),c=function(e){var t=e.title,n=e.backgroundImage,r=e.tabs,s=e.activeTab;return a.createElement("div",{className:"sv-row sv-layout sv-skip-spacer"},a.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-12"},a.createElement("div",{className:"sv-script-portlet sv-portlet sv-skip-spacer"},n&&a.createElement("style",null,"\n        .pageHeader {\n          background-image: url('"+n+"') !important;\n        }\n      "),a.createElement("div",{className:"pageHeader"},a.createElement("a",null,a.createElement("h1",null,t)),a.createElement("div",{className:"buttonsField"},a.createElement("div",{className:"buttonsContainer"},a.createElement("div",{className:"align-horizontal"}),a.createElement("div",{className:"horizontalMenu"},a.createElement("ul",null,r.map(function(e,t){var n=e.name,r=e.key,o=e.link,i=s===o;return a.createElement("li",{key:r||("string"==typeof n?n:t),className:i?"activePage":""},a.createElement("a",{href:o},n))})))))))))},u=n(25),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r.c(t,e),t.prototype.render=function(){for(var e=this.props,t=e.title,n=e.requirements,r=e.className,s=e.includedIds,o=e.headerOpen,i=["E","C","A"],l=[],c=n.slice(),d=null;!(d=i.map(function(e){var t=c.findIndex(function(t){return t.gradeStep.toUpperCase()===e});if(t<0)return null;var n=c[t];return c.splice(t,1),s?s[n.id]?n:void 0:n})).every(function(e){return null===e});)d.every(function(e){return!e})||l.push(d);return a.createElement(u.a,{title:a.createElement("p",null,t),className:r,headerOpen:o},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,i.map(function(e){return a.createElement("th",{key:e},e)}))),a.createElement("tbody",null,l.map(function(e,t){return a.createElement("tr",{key:t},e.map(function(e,t){return a.createElement("td",{key:t,dangerouslySetInnerHTML:{__html:e?e.name:""}})}))}))))},t}(a.Component);var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={headerOpen:t.headerOpen||!1},n}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.subTitle,s=t.abilities,o=t.className,i=this.state.headerOpen;return a.createElement("div",{className:(o||"")+" openClose"+(i?" open":"")},a.createElement("div",{className:"openHeader",onClick:function(){return e.setState({headerOpen:!e.state.headerOpen})}},a.createElement("p",null,n)),a.createElement("div",{className:"openContent"},a.createElement("div",{className:"abilityList"},r&&a.createElement("div",{className:"contentHeader"},a.createElement("h5",null,r)),s.map(function(e){return a.createElement("div",{key:e.id,className:"contentPart"},a.createElement("div",{className:"contentText"},a.createElement("p",{dangerouslySetInnerHTML:{__html:e.name}})))}))))},t}(a.Component),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={headerOpen:t.headerOpen||!1},n}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.subTitle,s=t.centralContent,o=t.className,i=this.state.headerOpen;return a.createElement("div",{className:(o||"")+" openClose"+(i?" open":"")},a.createElement("div",{className:"openHeader",onClick:function(){return e.setState({headerOpen:!e.state.headerOpen})}},a.createElement("p",null,n)),a.createElement("div",{className:"openContent"},a.createElement("div",{className:"abilityList"},r&&a.createElement("div",{className:"contentHeader"},a.createElement("h5",null,r)),s.map(function(e){return a.createElement("div",{key:e.id,className:"contentPart"},a.createElement("div",{className:"contentText"},a.createElement("p",{dangerouslySetInnerHTML:{__html:e.name}})))}))))},t}(a.Component),f=n(53),h=n(34);function b(e,t){return e.taskCustomizations?r.a({},t,e.taskCustomizations[t.id]):t}var v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r.c(t,e),t.prototype.render=function(){var e=this.props,t=e.module,n=e.course,r=function(e,t){var n={};return t.tasks.filter(function(t){return-1!==e.taskIds.indexOf(t.id)}).forEach(function(e){e.abilities.forEach(function(e){var t=e.id;return n[t]=!0}),e.centralContent.forEach(function(e){var t=e.id;return n[t]=!0}),e.knowledgeRequirements.forEach(function(e){var t=e.id;return n[t]=!0})}),n}(t,n),o=t.taskIds.map(function(e){return n.tasks.find(function(t){return t.id===e})}).filter(function(e){return!!e}).map(function(e){return{id:e.id,task:b(t,e),course:n,name:e.name,url:"#"+encodeURIComponent(t.name.trim())+"/"+e.id,courseName:n.name,learningGoal:e.learningGoal||t.name}}),i=o.filter(function(e){return e.task&&e.task.assignment}),l=o.filter(function(e){return!e.task||!e.task.assignment}),c=l.filter(function(e){return!e.task.learningGoal}),u=Object(s.b)(l.filter(function(e){return!!e.task.learningGoal}),function(e){return e.learningGoal});return a.createElement("div",null,a.createElement("div",{className:"sv-text-portlet sv-use-margins sv-skip-spacer"},a.createElement("div",{className:"sv-text-portlet-content"},a.createElement("h1",{className:"h1"},t.name))),a.createElement("div",{className:"sv-vertical sv-layout"},a.createElement("div",{dangerouslySetInnerHTML:{__html:t.mandatoryContent}})),a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("div",{className:"ked_boxed"},a.createElement("h3",null,"Modulens kunskapskrav, förmågor och centrala innehåll"),(!!t.startWeek||!!t.endWeek)&&a.createElement("div",{className:"week-period-div"},a.createElement("div",null,"Startvecka"),a.createElement("div",null,t.startWeek||"--"),a.createElement("div",null,"Slutvecka"),a.createElement("div",null,t.endWeek||"--"),a.createElement("br",null)),a.createElement("hr",null),a.createElement(d,{title:"I den här modulen bedöms följande kunskapskrav",requirements:n.knowledgeRequirements,includedIds:r}),a.createElement(m,{title:"Den här modulen behandlar följande förmågor",abilities:n.abilities.filter(function(e){return r[e.id]})}),a.createElement(p,{title:"Den här modulen behandlar följande centrala innehåll",centralContent:n.centralContent.filter(function(e){return r[e.id]})}))),t.taskIds.length>0&&a.createElement("div",{className:"sv-script-portlet sv-portlet"},a.createElement("div",{className:"ked_boxed"},0===i.length?void 0:a.createElement(a.Fragment,null,a.createElement("h2",null,"Inlämningsuppgifter"),a.createElement("hr",null),a.createElement(h.a,{learningTasks:i})),0===l.length?void 0:a.createElement(a.Fragment,null,a.createElement("h2",null,"Uppgifter"),a.createElement("hr",null),a.createElement(f.a,{commonTasks:c,learningGoals:Object.keys(u).map(function(e){return{name:e,learningTasks:u[e]}})})))),t.resources.length>0&&a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("div",{className:"ked_boxed"},a.createElement("h2",null,"Resurser"),a.createElement("hr",null),a.createElement("div",{className:"taskContainer"},t.resources.map(function(e,t){return a.createElement("div",{className:"align-horizontal",key:t},a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{href:e.url},e.name)))})))))},t}(a.Component),g=function(e){function t(t){return e.call(this,t)||this}return r.c(t,e),t.prototype.render=function(){var e=this.props.resources;return a.createElement("div",null,a.createElement("div",{className:"taskContainer"},e.map(function(e,t){return a.createElement("div",{className:"align-horizontal",key:t},a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{href:e.url},e.name)))})))},t}(a.Component),k=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r.c(t,e),t.prototype.render=function(){var e=this.props.course;return a.createElement("div",null,a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},e.runUpText&&a.createElement("div",null,a.createElement("h1",null,"Upptakt"),a.createElement("p",{className:"normal",dangerouslySetInnerHTML:{__html:e.runUpText}})),e.responsibleTeachers&&e.responsibleTeachers.length>0&&a.createElement("div",null,a.createElement("h2",null,"Lärare"),e.responsibleTeachers.map(function(e,t){return a.createElement("p",{key:t},a.createElement("a",{href:(n=e.url,-1===n.indexOf(":")&&n.indexOf("@")>=0?"mailto:"+n:n)},e.name));var n})),e.workFlowLink&&a.createElement("a",{className:"btn",href:e.workFlowLink},"Arbetsgång"),a.createElement("br",null),a.createElement("br",null),a.createElement(m,{title:"Ämnets förmågor",subTitle:"Förmågor",abilities:e.abilities,className:"larger"}),a.createElement(p,{title:"Kursens centrala innehåll",subTitle:"Centralt innehåll",centralContent:e.centralContent,className:"larger"}),a.createElement(d,{title:"Kursens kunskapskrav",requirements:e.knowledgeRequirements,className:"larger"})),e.resources.length>0&&a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("div",{className:"ked_boxed"},a.createElement("h2",null,"Resurser"),a.createElement("hr",null),a.createElement(g,{resources:e.resources}))))},t}(a.Component);var E=!1;var y,N,C,w,D,T=n(12),I=n(41),O=n(7),S=n(6),x=n(3),j=n(5),P=n.n(j),U=n(70),_=n.n(U),L=[".pdf",".odt",".docx"],G=function(e){function t(t){var n=e.call(this,t)||this;return n.state={assignments:[],loading:!0},n}return r.c(t,e),t.prototype.setStatePromised=function(t){var n=this;return new Promise(function(r){return e.prototype.setState.call(n,t,r)})},t.prototype.componentDidMount=function(){this.load()},t.prototype.componentWillReceiveProps=function(e){return r.b(this,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e.taskId===this.props.taskId&&e.courseId===this.props.courseId?[3,3]:[4,this.setStatePromised(function(){return{assignments:[],loading:!0}})];case 1:return n.sent(),[4,this.load()];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:return t=n.sent(),Object(s.m)(t),[3,5];case 5:return[2]}})})},t.prototype.load=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a,s,o,i,l,c,u;return r.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),e=x.a.kedBackendClient.http,t=this.props,n=t.courseId,a=t.taskId,s=t.school,[4,Object(T.d)(s)?e.get("assignments/"+n+"/"+a):e.get("assignments/"+n+"/"+a+"/"+x.a.currentUser.mail)];case 1:return 200===(o=r.sent()).status?[3,3]:(i=S.c.bind,l=[void 0,o.status],[4,o.text()]);case 2:throw new(i.apply(S.c,l.concat([r.sent()])));case 3:return[4,o.json()];case 4:return c=r.sent(),this.setState({error:null,loading:!1,assignments:c}),[3,6];case 5:return u=r.sent(),this.setState({loading:!1,error:"Kunde inte ladda inlämningsuppgifter",assignments:[]}),console.error(u),[3,6];case 6:return[2]}})})},t.prototype.onDrag=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},t.prototype.onDrop=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e.stopPropagation(),e.preventDefault(),t=e.dataTransfer.files[0],this.state.assignments.some(function(e){return e.user===x.a.currentUser.mail&&e.filename===t.name})&&!confirm("Ersätta befintlig fil ("+t.name+")?")?[2]:this.props.school.toLowerCase()===x.a.currentUser.school.toLowerCase()||confirm("Uppgiften tillhör en annan skola ("+this.props.school+").\nVill du ändå lämna in ditt arbete här?")?(this.setState({uploadingFile:t}),[4,this.upload(t)]):[2];case 1:return r.sent(),[4,this.load()];case 2:return r.sent(),this.setState({uploadingFile:null}),[3,4];case 3:return n=r.sent(),this.setState({error:"Kunde inte ladda upp filen. "+(n.message||n),uploadingFile:null}),console.error(n),[3,4];case 4:return[2]}})})},t.prototype.upload=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,s,o,i,l,c,u;return r.d(this,function(r){switch(r.label){case 0:if(x.a.kedBackendClient.http,t=this.props,n=t.courseId,a=t.taskId,s=x.a.currentUser.mail,e.size>10485760)throw new Error("Filen får inte vara större än 10 MB");if(o=e.name.toLowerCase(),!L.some(function(e){return o.endsWith(e)}))throw new Error("Filens ändelse måste vara "+L.join(" / "));return(i=new FormData).append("files",e),[4,x.a.kedBackendClient.http.fetch("assignments/"+n+"/"+a+"/"+s,"put",{},{userDisplayName:x.a.currentUser.displayName},{body:i})];case 1:return 200===(l=r.sent()).status?[3,3]:(c=S.c.bind,u=[void 0,l.status],[4,l.text()]);case 2:throw new(c.apply(S.c,u.concat([r.sent()])));case 3:return[2]}})})},t.prototype.download=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,s,o;return r.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,x.a.kedBackendClient.http.fetch(e.mediaLink,"get",{})];case 1:return(t=r.sent()).status>=400?(n=S.c.bind,a=[void 0,t.status],[4,t.text()]):[3,3];case 2:throw new(n.apply(S.c,a.concat([r.sent()])));case 3:return[4,t.blob()];case 4:return s=r.sent(),_()(s,e.filename,e.contentType),[3,6];case 5:return o=r.sent(),this.setState({error:"Kunde inte ladda ned filen. "+(o.message||o)}),console.error(o),[3,6];case 6:return[2]}})})},t.prototype.delete=function(e){return r.b(this,void 0,void 0,function(){var t,n,a,s;return r.d(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,this.setStatePromised(function(t){return{assignments:t.assignments.map(function(t){return t.mediaLink===e?r.a({},t,{metadata:r.a({},t.metadata,{$meta:"delete"})}):r.a({},t)})}})];case 1:return o.sent(),[4,x.a.kedBackendClient.http.fetch(e,"delete",{})];case 2:return(t=o.sent()).status>=400?(n=S.c.bind,a=[void 0,t.status],[4,t.text()]):[3,4];case 3:throw new(n.apply(S.c,a.concat([o.sent()])));case 4:return[4,this.load()];case 5:return o.sent(),[3,7];case 6:return s=o.sent(),this.setState({error:"Kunde inte ta bort filen. "+(s.message||s)}),console.error(s),[3,7];case 7:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.courseId,r=t.taskId,o=t.school,i=this.state,c=i.loading,u=i.assignments,d=i.error,m=i.uploadingFile,p=Object(T.d)(o),f=u.slice();if(m){var h={courseId:n,taskId:r,filename:m.name,size:m.size,user:x.a.currentUser.mail,contentType:m.type,uploadDate:Date.now(),mediaLink:"assignments/"+n+"/"+r+"/"+x.a.currentUser.mail+"/"+m.name,metadata:{$meta:"add"}};f=(f=f.filter(function(e){return e.mediaLink!==h.mediaLink})).concat([h])}return f=f.sort(Object(s.h)(["user","filename"],["sv","en"],{sensitivity:"base"})),a.createElement("div",{onDragOver:function(t){return e.onDrag(t)},onDrop:function(t){return e.onDrop(t)}},d?a.createElement(a.Fragment,null,a.createElement("p",{className:"error"},d)):void 0,c?a.createElement(a.Fragment,null,a.createElement(l.a,null)," Laddar inlämnade filer..."):0===f.length?p?a.createElement("p",null,"Ingen elev har lämnat in något arbete ännu."):void 0:a.createElement(a.Fragment,null,a.createElement("table",{className:"task-assignments-table"},a.createElement("thead",null,a.createElement("tr",null,p?a.createElement("th",null,"Elev"):void 0,a.createElement("th",null,"Filnamn"),a.createElement("th",null,"Inlämnat den"),a.createElement("th",null,"Status"),a.createElement("th",null))),a.createElement("tbody",null,f.map(function(t){return a.createElement("tr",{key:t.mediaLink,style:t.metadata.$meta?{opacity:.5}:{}},p?a.createElement("td",null,a.createElement("a",{href:"mailto:"+t.user},t.metadata.userDisplayName||t.user)):void 0,a.createElement("td",null,a.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),n.stopPropagation(),e.download(t)}},t.filename)),a.createElement("td",null,P()(t.uploadDate).format("YYYY-MM-DD HH:mm")),a.createElement("td",null,"add"===t.metadata.$meta?a.createElement(a.Fragment,null,a.createElement(l.a,null)," Laddar upp..."):"delete"===t.metadata.$meta?a.createElement(a.Fragment,null,a.createElement(l.a,null)," Tar bort..."):a.createElement(a.Fragment,null,a.createElement("i",{className:"fa fas fa-check"})," Inlämnad")),a.createElement("td",null,!t.metadata.$meta&&t.user===x.a.currentUser.mail&&a.createElement("a",{href:"#",onClick:function(n){n.stopPropagation(),n.preventDefault(),e.delete(t.mediaLink)}},a.createElement("i",{className:"fa fa-trash"}))))})))),p?void 0:a.createElement("div",{className:"drop-zone task-assignment-drop-zone"},"Droppa ditt färdiga arbete här",a.createElement("br",null),a.createElement("b",null,"(.pdf, .docx, .odt)"),")"))},t}(a.Component),M=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userTask:void 0,weekPlannerWeek:P()().week()},n.onUserTasksChanged=n.onUserTasksChanged.bind(n),n}return r.c(t,e),t.prototype.componentDidMount=function(){O.a.subscribe(this.onUserTasksChanged)},t.prototype.componentWillUnmount=function(){O.a.unsubscribe(this.onUserTasksChanged)},t.prototype.componentWillReceiveProps=function(e){if(e.task.id!==this.props.task.id){var t=O.a.mem.items.find(function(t){return t.task&&t.task.length>0&&t.task[0].id===e.task.id})||null;this.setState({userTask:t,weekPlannerWeek:P()(O.a.persistedState.weekDate).week()})}},t.prototype.onUserTasksChanged=function(e){var t=this,n=e.find(function(e){return e.task&&e.task.length>0&&e.task[0].id===t.props.task.id})||null;this.setState({userTask:n,weekPlannerWeek:P()(O.a.persistedState.weekDate).week()})},t.prototype.toggleTask=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a,s,o,i,l;return r.d(this,function(r){switch(r.label){case 0:return e=O.a.persistedState.weekDate,t=this.state.userTask,n=this.props,a=n.course,s=n.task,(o=a.modules.find(function(e){return e.taskIds.some(function(e){return e===s.id})}))?void 0===t?[2]:t?[3,2]:(i=Math.max.apply(Math.max,[e].concat(O.a.mem.items.map(function(e){return e.dateTime}))),l={id:Object(S.e)(),courseName:a.name,dateTime:i+2e3,learningGoal:s.learningGoal||o.name,name:s.name,url:s.url,task:[s],course:[a],acl:[new S.b("email",x.a.currentUser.mail,"S"),new S.b("schoolRole",x.a.currentUser.school+"/EMPLOYEE","R")].map(function(e){return e.toString()})},s.deadline&&(l.deadline=s.deadline),[4,Promise.all([O.a.setWeekPlannerBoxOpen(this.props.course.name,!0),O.a.insert([l])])]):[2];case 1:return r.sent(),[3,4];case 2:return[4,O.a.delete([t.id])];case 3:r.sent(),r.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.task,o=t.course,i=this.state,l=i.userTask,c=i.weekPlannerWeek,u=n.abilities.map(function(e){return o.abilities.find(function(t){return t.id===e.id})}).filter(function(e){return!!e}),f=n.centralContent.map(function(e){return o.centralContent.find(function(t){return t.id==e.id})}).filter(function(e){return!!e}),h=n.knowledgeRequirements.map(function(e){return o.knowledgeRequirements.find(function(t){return t.id===e.id})}).filter(function(e){return!!e}),b=l&&("adding"===l.$meta||"deleting"===l.$meta),v=P()().week(),g=c===v?"loggboken":c===v+1?Object(s.a)(y||(y=r.e(["vald vecka (nästa vecka)"],["vald vecka (nästa vecka)"]))):c===v-1?Object(s.a)(N||(N=r.e(["vald vecka (förra veckan)"],["vald vecka (förra veckan)"]))):Object(s.a)(C||(C=r.e(["vald vecka (v ",")"],["vald vecka (v ",")"])),c),k=n.deadline&&P()(n.deadline).endOf("day")<P()();return a.createElement("div",null,a.createElement("div",{className:"sv-text-portlet sv-use-margins sv-skip-spacer"},a.createElement("div",{className:"sv-text-portlet-content"},a.createElement("h1",{className:"h1"},n.name))),a.createElement("div",{className:"sv-html-portlet sv-portlet"},n.content&&a.createElement(a.Fragment,null,a.createElement("div",{dangerouslySetInnerHTML:{__html:n.content}})),n.learningGoal&&a.createElement("div",null,a.createElement("h2",null,"Uppgiftens lärandemål"),a.createElement("p",null,n.learningGoal)),n.url&&a.createElement("a",{href:n.url,className:"btn btn-large"},"Gå till uppgiften")),a.createElement("br",null),n.assignment?a.createElement(a.Fragment,null,a.createElement("h2",null,"Inlämningsuppgift"),Object(T.d)(o.school)?a.createElement("p",null,"Här kan du som lärare se elevernas inlämnade arbeten."):a.createElement(a.Fragment,null,a.createElement("p",null,"Det här är en inlämningsuppgift. Lämna in ditt arbete som en pdf, doc eller odt fil genom att dra det till fältet under."),n.deadline?a.createElement("p",null,a.createElement("b",null,"Den här uppgiften ",k?"skulle varit inlämnad ":"skall vara inlämnad ",P()(n.deadline).format("YYYY MM DD"))):void 0),a.createElement(G,{courseId:o.id,taskId:n.id,school:o.school}),a.createElement("br",null)):void 0,a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},u.length>0&&a.createElement(m,{title:"Den här uppgiften behandlar följande förmågor",className:"larger",headerOpen:!1,abilities:u}),f.length>0&&a.createElement(p,{title:"Den här uppgiften behandlar följande centrala innehåll",className:"larger",headerOpen:!1,centralContent:f}),h.length>0&&a.createElement(d,{title:"I den här uppgiften bedöms följande kunskapskrav",className:"larger",headerOpen:!0,requirements:h})),a.createElement("hr",null),void 0!==l&&a.createElement("div",{className:"taskContainer"},a.createElement("div",{className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("div",{className:"selectedBox"+(l&&"deleting"!==l.$meta?" selected":""),style:b?{opacity:.5}:{},onClick:function(){return!b&&e.toggleTask()}})),a.createElement("div",{className:"horizontalItem top"},l?Object(s.a)(w||(w=r.e(["Ta bort uppgiften från ",""],["Ta bort uppgiften från ",""])),g):Object(s.a)(D||(D=r.e(["Lägg till uppgiften i ",""],["Lägg till uppgiften i ",""])),g)))),a.createElement("hr",null),n.resources&&n.resources.length>0&&a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement("h2",null,"Resurser kopplade till uppgiften"),a.createElement("div",{className:"taskContainer"},n.resources.map(function(e,t){return a.createElement("div",{key:t,className:"align-horizontal"},a.createElement("div",{className:"horizontalItem top"},a.createElement("a",{href:e.url},e.name)))})),a.createElement("br",null)),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null))},t}(a.Component);E||(E=!0,document.documentElement.addEventListener("click",function(e){var t=e.target;t&&"A"===t.tagName&&history.replaceState({pageYOffset:window.pageYOffset},null,null)}),history.scrollRestoration&&(history.scrollRestoration="manual"));var R=function(e){function t(t){var n=e.call(this,t)||this;n.onHashChange=n.onHashChange.bind(n);var r=n.getModuleAndTaskFromHash(),a=r.module,s=r.task;return n.state={module:a,task:s},n}return r.c(t,e),t.prototype.getModuleAndTaskFromHash=function(){var e=(location.hash.substr(1)||"").split("/");e.length>0&&!e[0]&&(e=e.slice(1));var t=e.map(function(e){return decodeURIComponent(e)}),n=t[0],r=t[1],a=this.props.course.modules.filter(function(e){return(e.name||"").trim().toLowerCase()===(n||"").trim().toLowerCase()})[0]||null,s=r&&this.props.course.tasks.find(function(e){return e.id===r})||null;return s&&!a&&(a=this.getOrderedModules().filter(function(e){return e.taskIds.some(function(e){return s.id===e})})[0]),s&&a&&(s=b(a,s)),{module:a,task:s}},t.prototype.componentDidMount=function(){window.addEventListener("hashchange",this.onHashChange)},t.prototype.componentWillUnmount=function(){window.removeEventListener("hashchange",this.onHashChange)},t.prototype.onHashChange=function(){var e=this.getModuleAndTaskFromHash(),t=e.module,n=e.task;this.setState({module:t,task:n},function(){var e=void 0;if(n){var t=document.getElementById("ked-task-anchor");e=t?window.pageYOffset+t.getBoundingClientRect().top:0}!function(e){var t=e.fallbackScrollPosition;history.state&&void 0!==history.state.pageYOffset?window.scrollTo(0,history.state.pageYOffset):void 0!==t&&window.scrollTo(0,t)}({fallbackScrollPosition:e})})},t.prototype.getOrderedModules=function(){var e=this.props.course,t=e.moduleOrder||e.modules.map(function(e){return e.id});return t.map(function(t){return e.modules.find(function(e){return e.id===t})}).filter(function(e){return!!e}).concat(e.modules.filter(function(e){return!t.find(function(t){return e.id===t})}))},t.prototype.render=function(){var e=this.props,t=e.course,n=e.courseBuilderUrl,r=this.state,s=r.module,o=r.task,i=this.getOrderedModules();return a.createElement("div",null,a.createElement(c,{title:t.name+" - "+t.points+"p",backgroundImage:(t.images.find(function(e){return e.id===t.imageId})||{url:""}).url,tabs:[{name:"Upptakt",link:"#",key:"Upptakt"}].concat(i.map(function(e){var t=e.name;return{name:t,link:"#"+encodeURIComponent(t),key:t}})).concat(t.workFlowLink?[{name:"Arbetsgång",key:"workflow",link:t.workFlowLink}]:[]).concat(Object(T.c)(t)?[{name:a.createElement("span",null,a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})," Redigera denna kurs"),key:"edit",link:Object(T.e)(n,{})+"#/courses/"+t.id+"/edit"}]:[]),activeTab:s?"#"+encodeURIComponent(s.name):"#"}),a.createElement("div",{className:"sv-row sv-layout"},a.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-12"},a.createElement("div",{className:"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer"},a.createElement("div",{className:"pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer"},a.createElement("div",{className:"sv-row sv-layout sv-skip-spacer"},a.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-7"},o?a.createElement(M,{task:o,course:t}):s?a.createElement(v,{course:t,module:s}):a.createElement(k,{course:t})),a.createElement("div",{className:"sv-layout sv-column-5"},a.createElement("div",{className:"sv-vertical sv-layout sv-skip-spacer"},a.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},a.createElement(I.a,{viewCourseUrl:""}))))))))))},t}(a.Component),A=n(10),B=n(51);function H(){return a.createElement("div",{className:"sv-html-portlet sv-portlet"},a.createElement(c,{title:x.a.currentUser.school,backgroundImage:"",tabs:[{name:"Skolans kurser",link:"#"}],activeTab:"#"}),a.createElement("div",{className:"sv-row sv-layout"},a.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-12"},a.createElement("div",{className:"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer"},a.createElement(B.a,null)))))}n.d(t,"a",function(){return F});var F=function(e){function t(t){var n=e.call(this,t)||this;return n.state={course:null,isLoading:!0},n}return r.c(t,e),t.prototype.componentWillMount=function(){var e=this;this.load().catch(s.m).then(function(){return e.setState({isLoading:!1})})},t.prototype.load=function(){return r.b(this,void 0,void 0,function(){var e,t,n;return r.d(this,function(r){switch(r.label){case 0:return(e=Object(A.b)(location.search).courseId)?[4,Object(i.d)(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=null,r.label=3;case 3:return t=n,this.setState({course:t}),[2]}})})},t.prototype.render=function(){return a.createElement("div",{className:"course-viewer"},this.state.isLoading?a.createElement(l.a,null):this.state.course?a.createElement(R,{course:this.state.course,courseBuilderUrl:this.props.courseBuilderUrl}):a.createElement(H,null),a.createElement(o.a,null))},t}(a.Component)},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"KEDAppCourseViewer",function(){return m});var a=n(1),s=n(21),o=(n(50),n(49),n(55),n(0)),i=n(3),l=n(68),c=n(2),u=n(13),d=i.a.bearerProvider.getBearer(),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isTokenLoaded:!1},n}return a.c(t,e),t.prototype.componentWillMount=function(){var e=this;d.then(function(){e.setState({isTokenLoaded:!0})}).catch(function(e){Object(c.m)(e)})},t.prototype.render=function(){return this.state.isTokenLoaded?o.createElement(l.a,{courseBuilderUrl:this.props.courseBuilderUrl}):o.createElement("p",null,o.createElement(u.a,null),"V.g. vänta... autenticerar...")},t}(o.Component);s.a.components=a.a({},s.a.components,r)}]);
//# sourceMappingURL=kedappcourseviewer.min.js.map