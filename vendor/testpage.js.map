{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/../kedbackend/js/ked-backend-client-web/bearer-storage-sessionstorage.ts","webpack://[name]/../kedbackend/js/ked-backend-client-web/index.ts","webpack://[name]/../kedbackend/js/ked-backend-client/access-control.ts","webpack://[name]/../kedbackend/js/ked-backend-client/http-error.ts","webpack://[name]/../kedbackend/js/ked-backend-client/index.ts","webpack://[name]/../kedbackend/js/ked-backend-client/ked-bearer-provider.ts","webpack://[name]/../kedbackend/js/ked-backend-client/restclient.ts","webpack://[name]/../kedbackend/js/ked-backend-client/utils.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/index.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate-course.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate-task.ts","webpack://[name]/../kedbackend/js/ked-model-migrator/migrate.ts","webpack://[name]/./node_modules/moment/locale sync sv|en","webpack://[name]/./src/access-control/get-user-claims.ts","webpack://[name]/./src/access-control/index.ts","webpack://[name]/./src/apis/eds-stubdata/ActiveCourses.ts","webpack://[name]/./src/apis/eds-stubdata/LatestAssessments.ts","webpack://[name]/./src/apis/eds-stubdata/StudentGoals.ts","webpack://[name]/./src/apis/edsclient.ts","webpack://[name]/./src/apis/google-calendar.ts","webpack://[name]/./src/apis/ked-learninggoals.ts","webpack://[name]/./src/components/calendar/course-name-to-css-class.ts","webpack://[name]/./src/components/calendar/crunch-colliding-events.ts","webpack://[name]/./src/components/calendar/day-view-event.tsx","webpack://[name]/./src/components/calendar/day-view.tsx","webpack://[name]/./src/components/calendar/hour-marker.tsx","webpack://[name]/./src/components/calendar/index.tsx","webpack://[name]/./src/components/calendar/should-include-calendar.ts","webpack://[name]/./src/components/calendar/status-bar.tsx","webpack://[name]/./src/components/calendar/time-lines.tsx","webpack://[name]/./src/components/calendar/week-view.tsx","webpack://[name]/./src/components/course-builder/sub-components/remove-item.tsx","webpack://[name]/./src/components/course-builder/sub-components/spinner.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/confirmation.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/learning-goals-list.tsx","webpack://[name]/./src/components/course-viewer/subcomponents/task-list.tsx","webpack://[name]/./src/components/kg-termplanner/index.tsx","webpack://[name]/./src/components/kg-termplanner/week-note-dialog.tsx","webpack://[name]/./src/components/ks-goals/future-abilities-table.tsx","webpack://[name]/./src/components/ks-goals/future-abilities-viewmodel.ts","webpack://[name]/./src/components/ks-goals/goals-viewmodel.ts","webpack://[name]/./src/components/ks-goals/goals.tsx","webpack://[name]/./src/components/ks-termplanner2/termplanner-utils.ts","webpack://[name]/./src/components/ks-termplanner2/termplanner.tsx","webpack://[name]/./src/components/ks-termplanner2/viewmodel.ts","webpack://[name]/./src/components/latest-assessments/latest-assessments.tsx","webpack://[name]/./src/components/learning-tasks/index.tsx","webpack://[name]/./src/components/list-courses/list-courses.tsx","webpack://[name]/./src/components/my-courses/my-courses.tsx","webpack://[name]/./src/components/utility-components/dialogs.tsx","webpack://[name]/./src/components/utility-components/form-field-text-input.tsx","webpack://[name]/./src/components/utility-components/form-field-textarea.tsx","webpack://[name]/./src/components/utility-components/form-field.tsx","webpack://[name]/./src/components/utility-components/open-close-box.tsx","webpack://[name]/./src/components/utility-components/renameable-text.tsx","webpack://[name]/./src/components/weekplanner/add-custom-goal.tsx","webpack://[name]/./src/components/weekplanner/add-custom-task.tsx","webpack://[name]/./src/components/weekplanner/add-or-edit-sub-task.tsx","webpack://[name]/./src/components/weekplanner/edit-user-task.tsx","webpack://[name]/./src/components/weekplanner/get-task-type.ts","webpack://[name]/./src/components/weekplanner/index.ts","webpack://[name]/./src/components/weekplanner/refiner.ts","webpack://[name]/./src/components/weekplanner/user-tasks-box.tsx","webpack://[name]/./src/components/weekplanner/weekplanner-persisted-state.ts","webpack://[name]/./src/components/weekplanner/weekplanner.tsx","webpack://[name]/./src/features/features.ts","webpack://[name]/./src/features/index.ts","webpack://[name]/./src/global-setters/set-all.ts","webpack://[name]/./src/global-setters/set-bearer-providers.ts","webpack://[name]/./src/global-setters/set-eds-client.ts","webpack://[name]/./src/global-setters/set-ked-backend-client.ts","webpack://[name]/./src/globals/KED.cfg.ts","webpack://[name]/./src/globals/KED.env.ts","webpack://[name]/./src/globals/KED.ts","webpack://[name]/./src/globals/ked.ts","webpack://[name]/./src/globals/moment-sv-locale.ts","webpack://[name]/./src/repos/hidden-courses-repo.ts","webpack://[name]/./src/repos/ked-repo.ts","webpack://[name]/./src/repos/kg-termplanner-repo.ts","webpack://[name]/./src/repos/ks-termplanner-repo.ts","webpack://[name]/./src/repos/repo.ts","webpack://[name]/./src/repos/user-tasks-repo.ts","webpack://[name]/./src/test/components.ts","webpack://[name]/./src/test/configure.ts","webpack://[name]/./src/test/data/learningModules.ts","webpack://[name]/./src/test/data/learningModules2.ts","webpack://[name]/./src/test/data/users.ts","webpack://[name]/./src/test/testpage.tsx","webpack://[name]/./src/test/utils/choose-user.tsx","webpack://[name]/./src/utils/constants.js","webpack://[name]/./src/utils/pending-job.ts","webpack://[name]/./src/utils/query-string.ts","webpack://[name]/./src/utils/school-moment.ts","webpack://[name]/./src/utils/school-term.ts","webpack://[name]/./src/utils/table-walk.ts","webpack://[name]/./src/utils/utils.ts","webpack://[name]/./src/utils/weekutil.ts","webpack://[name]/external \"jQuery\"","webpack://[name]/external \"React\"","webpack://[name]/external \"ReactDOM\""],"names":[],"mappings":"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","file":"testpage.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"testpage\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp_name_\"] = window[\"webpackJsonp_name_\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/test/testpage.tsx\",\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import {BearerPersistentStorage, BearerTokenInfo} from '../ked-backend-client';\n\nexport class BearerStorageSessionStorage implements BearerPersistentStorage {\n    save(id: string, tokenInfo: BearerTokenInfo) {\n        sessionStorage.setItem(\"bearer-\" + id, JSON.stringify(tokenInfo));\n    }\n\n    load(id: string): Promise<BearerTokenInfo> {\n        try {\n            const json = sessionStorage.getItem(\"bearer-\" + id);\n            return Promise.resolve(json ? JSON.parse(json) : {token: null, expires: 0});\n        } catch (ex) {\n            return Promise.resolve({token: null, expires: 0});\n        }\n    }\n}\n","import { KedBackendClient, BearerProvider, BearerTokenInfo, IsomorphicEnv } from '../ked-backend-client';\nimport { BearerStorageSessionStorage } from \"./bearer-storage-sessionstorage\";\nimport { avoidSimultanousCalls } from '../ked-backend-client/utils';\nimport { KedModelMigratorMixin } from '../ked-model-migrator';\nKedModelMigratorMixin(KedBackendClient.prototype);\n\nexport const storage = new BearerStorageSessionStorage();\n\nconst timeOfPageLoad = Date.now();\n\nexport class WebServerBearerProvider implements BearerProvider {\n    tokenInfo: BearerTokenInfo;\n    wantsRedirect: boolean;\n\n    constructor (\n        public tokenPath: string,\n        public tokenResponseMapper: (responseText: string) => BearerTokenInfo,\n        public tokenId: string)\n    {\n        this.tokenInfo = {token: null, expires: 0};\n        this.getBearer = avoidSimultanousCalls(this.getBearer.bind(this));\n        this.refreshBearer = avoidSimultanousCalls(this.refreshBearer.bind(this));\n    }\n\n    async getBearer() {\n        if (!this.tokenInfo.token) {\n            if (this.tokenId) this.tokenInfo = await storage.load(this.tokenId);\n        }\n        if (this.tokenInfo.expires < Date.now()) {\n            await this.refreshBearer();\n        }\n        return this.tokenInfo;\n    }\n\n    async refreshBearer() {\n        const res = await fetch(this.tokenPath, {\n            headers: {Accept: \"text/plain; application/json\"},\n            redirect: 'manual',\n            cache: 'no-cache',\n            credentials: \"same-origin\"\n        });\n        if (res.status === 302 || (!res.status && res.type === \"opaqueredirect\")) {\n            // User session timed out and server wants to redirect entire page to login page\n            // Time to reload current page to force a redirect of the entire page instead for\n            // just redirecting to /api/token or whatever.\n            if (Date.now() - timeOfPageLoad > 60000) {// prohibit endless loop of reloading self.\n                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.\n                console.log(\"Redirect wanted. Reload page.\")\n                window.location.reload(true);\n            }\n        }\n        if (res.status != 200) throw new Error(\"HTTP\"+res.status + \" \" + await res.text());\n        this.tokenInfo = this.tokenResponseMapper(await res.text());\n        storage.save(this.tokenId, this.tokenInfo);\n        return this.tokenInfo;\n    }\n}\n\nexport const isomorphic = {fetch: fetch.bind(self), btoa: btoa.bind(self)};\n\nexport class KedBackendClientWeb extends KedBackendClient {\n    constructor(\n        apiBaseUrl: string,\n        providerOrTokenPath: string | BearerProvider,\n        options?: {\n            tokenResponseMapper?: (responseText: string) => BearerTokenInfo,\n            tokenId?: string\n        })\n    {\n        const bearerProvider = typeof providerOrTokenPath !== 'string' ?\n            providerOrTokenPath :\n            new WebServerBearerProvider(\n                providerOrTokenPath,\n                (options && options.tokenResponseMapper) || (x=>({token: x, expires: Date.now() + 59 * 60 * 60})),\n                options && options.tokenId);\n        super(isomorphic, bearerProvider, apiBaseUrl);\n    }\n}\n","export interface AccessClaim {\n  type: string;\n  value: string;\n}\n\nexport type AccessRight = 'R' | 'W' | 'S';\n\nexport class DocumentAccess {\n  constructor(\n    public accessClaimType: string,\n    public accessClaimValue: string,\n    public right: AccessRight\n  ) { }\n\n  static fromString(ac: string) {\n    if (!ac) return null;\n    var split = ac.split(':');\n    if (split.length < 3) throw new Error(\"Invalid access string: \" + ac);\n    var claimType = DocumentAccess.unescape(split[0]);\n    var claimValue = DocumentAccess.unescape(split[1]);\n    var right = split[2];\n    if (right !== 'R' && right !== 'W' && right !== 'S')\n      throw new Error(\"Invalid access string: \" + ac);\n    return new DocumentAccess(\n      claimType,\n      claimValue,\n      right);\n  }\n\n  static escape(accessComponent: string) {\n    return accessComponent.replace(/\\%/g, \"%25\").replace(/\\:/g, \"%3A\");\n  }\n\n  static unescape(accessComponent: string) {\n    return accessComponent.replace(/\\%3A/g, \":\").replace(/\\%25/g, \"%\");\n  }\n\n  toString() {\n    return DocumentAccess.escape(this.accessClaimType) + \":\" +\n      DocumentAccess.escape(this.accessClaimValue) + \":\" +\n      this.right;\n  }\n\n  static fromStringArray(acl: string[]) {\n    return acl\n      .map(ac => DocumentAccess.fromString(ac))\n      .filter(ac => ac);\n  }\n\n  static toStringArray(acl: DocumentAccess[]) {\n    return acl.map(ac => ac.toString());\n  }\n}\n\nexport function hasAccess(acl: DocumentAccess[], userClaims: AccessClaim[], requestedRight: AccessRight) {\n  if (userClaims.some(claim => claim.type === 'role' && claim.value === \"ADMIN\"))\n    return true;\n\n  return acl.some(a =>\n    userClaims.some(c =>\n      a.accessClaimType === c.type &&\n      a.accessClaimValue === c.value && (\n        (a.right === 'R' && requestedRight === 'R') ||\n        (a.right === 'W' && ['R','W'].indexOf(requestedRight) >= 0) ||\n        (a.right === 'S'))));\n}\n","\nexport class HttpError extends Error {\n    constructor (public code: number, public message: string) {\n      super(\"HTTP\" + code + \" \" + message)\n      this.name = \"http\" + code;\n    }\n}\n","import {RestClient, BearerProvider, BearerTokenInfo} from './restclient';\nexport {BearerProvider, BearerTokenInfo};\nexport {BearerPersistentStorage} from './ked-bearer-provider';\nexport {createUUID} from './utils';\nexport {KedBearerProvider} from './ked-bearer-provider';\nimport {IsomorphicEnv} from './isomorphic-env';\nexport {IsomorphicEnv};\nexport {TokenQuery} from './token-query';\nexport * from './access-control';\nimport {HttpError} from './http-error';\nexport {HttpError}\n\nexport interface ListOptions {\n    from?: number,\n    to?: number,\n    include?: string | string[],\n    role?: string | string[],\n    hasEdgesTo?: string | string[],\n    hasEdgesFrom?: string | string[],\n    ids?: string[],\n    name?: string,\n    tags?: string | string[],\n    flags?: QueryFlag[],\n    cacheBust?: string | number\n};\n\nexport type QueryFlag = 'idsOnly' | 'includeIdsOnly' | 'idsAndNamesOnly' | 'includeIdsAndNamesOnly'; // | 'otherFlag' | 'thirdFlag';...\n\nexport class KedBackendClient {\n    http: RestClient;\n\n    constructor (\n        isomorphic: IsomorphicEnv,\n        bearerProvider: BearerProvider,\n        baseUrl: string)\n    {\n        this.http = new RestClient(\n            isomorphic,\n            baseUrl,\n            {bearerProvider});\n    }\n\n    async getMyClaims(table?: string, fetchOptions?: RequestInit) : Promise<any> // TODO: Specify what you get here\n    {\n        const res = await this.http.get(\"me/claims/\" + (table ||\"\"), null, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async get<T = any>(table, id, options?: {include?: string | string[]}, fetchOptions?: RequestInit) : Promise<T> {\n        const res = await this.http.get(`${table}/${id}`, options, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }    \n\n    async list<T = any>(table: string, options?: ListOptions, fetchOptions?: RequestInit) : Promise<T[]>\n    {\n        const res = await this.http.get(`${table}`, options, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async batch(reqs: MutationRequest[], fetchOptions?: RequestInit) : Promise<BatchResponse> {\n        // Reorder operations so that 'add's come first and 'delete's come last:\n        reqs = reqs.slice().sort((req1, req2) =>\n            req1.op === 'add' ? -1 : req2.op === 'add' ? 1 : \n            req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0);\n        const res = await this.http.post(`batch`, reqs, fetchOptions);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    async do(scopeFn: (r:BatchRunner)=>void) : Promise<BatchResponse> {\n        const runner = new BatchRunner();\n        scopeFn(runner);\n        return await this.batch(runner.mutationRequests);\n    }\n\n    async deleteRealm(realm: string) : Promise<number> {\n        const res = await this.http.delete(\"realms/\" + realm);\n        if (res.status != 200) throw new HttpError(res.status, await res.text());\n        return await res.json();\n    }\n\n    add(table:string, doc) {\n        return this.do(r=>r.add(table, doc));\n    }\n    put(table:string, doc) {\n        return this.do(r=>r.put(table, doc));\n    }\n    delete (table:string, id:string) {\n        return this.do(r=>r.delete(table, id));\n    }\n    share(table:string, id:string, acl: string[]) {\n        return this.do(r=>r.share(table, id, acl));\n    }\n    unshare (table:string, id:string, acl: string[]) {\n        return this.do(r=>r.unshare(table, id, acl));\n    }\n    link (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        return this.do(r=>r.link(sourceTable, sourceId, targetTable, targetId, label));\n    }\n    link2 (sourceTable:string, sourceId:string, targetId:string, label:string) {\n        return this.do(r=>r.link2(sourceTable, sourceId, label, targetId));\n    } \n    unlink (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        return this.do(r=>r.unlink(sourceTable, sourceId, targetTable, targetId, label));\n    }\n    unlink2 (sourceTable:string, sourceId:string, targetId:string, label:string) {\n        return this.do(r=>r.unlink2(sourceTable, sourceId, label, targetId));\n    }\n}\n\nexport class BatchRunner {\n    mutationRequests: MutationRequest[];\n\n    constructor() {\n        this.mutationRequests = [];\n    }\n\n    add (table:string, doc) {\n        this.mutationRequests.push({op: 'add', table, doc});\n        return this;\n    }\n    put (table:string, doc) {\n        doc = {...doc};\n        delete doc.acl; // Forbidden to send acl with put() calls.\n        this.mutationRequests.push({op: 'put', table, doc});\n        return this;\n    }\n    delete (table:string, id:string) {\n        this.mutationRequests.push({op: 'delete', table, id});\n        return this;\n    }\n    share (table:string, id:string, acl:string[]) {\n        this.mutationRequests.push({op: 'share', table, id, acl});\n        return this;\n    }\n    unshare (table:string, id:string, acl:string[]) {\n        this.mutationRequests.push({op: 'unshare', table, id, acl});\n        return this;\n    }\n    link (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        this.mutationRequests.push({op: 'link', sourceTable, sourceId, targetTable, targetId, label});\n        return this;\n    }\n    link2 (sourceTable:string, sourceId:string, label:string, targetId:string) {\n        this.mutationRequests.push({op: 'link', sourceTable, sourceId, targetId, label});\n    }\n    unlink (sourceTable:string, sourceId:string, targetTable:string, targetId:string, label:string) {\n        this.mutationRequests.push({op: 'unlink', sourceTable, sourceId, targetTable, targetId, label});\n        return this;\n    }\n    unlink2 (sourceTable:string, sourceId:string, label:string, targetId:string) {\n        this.mutationRequests.push({op: 'unlink', sourceTable, sourceId, targetId, label});\n        return this;\n    }\n}\n\nexport interface AddRequest {\n    op: 'add';\n    table: string;\n    doc: {id?: string, acl?: string[], name?: string, dateTime?: number};\n}\n\nexport interface PutRequest {\n    op: 'put';\n    table: string;\n    doc: {id: string, name?: string, dateTime?: number};\n}\n\nexport interface DeleteRequest {\n    op: 'delete';\n    table: string;\n    id: string;\n}\n\nexport interface ShareRequest {\n    op: 'share';\n    table: string;\n    id: string;\n    acl: string[];\n}\n\nexport interface UnshareRequest {\n    op: 'unshare';\n    table: string;\n    id: string;\n    acl: string[];\n}\n\nexport interface LinkRequest {\n    op: 'link';\n    sourceTable: string;\n    sourceId: string;\n    targetTable?: string;\n    targetId: string;\n    label: string;\n}\n\nexport interface UnlinkRequest {\n    op: 'unlink';\n    sourceTable: string;\n    sourceId: string;\n    targetTable?: string;\n    targetId: string;\n    label: string;\n}\n\nexport type MutationRequest =\n    AddRequest |\n    PutRequest |\n    DeleteRequest |\n    ShareRequest |\n    UnshareRequest |\n    LinkRequest |\n    UnlinkRequest;\n\nexport interface BatchResponse {\n    newEtags: {[id:string] : string};\n}\n\n","import {BearerProvider, RestClient, BearerTokenInfo} from './restclient';\nimport {IsomorphicEnv} from './isomorphic-env';\nimport {TokenQuery} from './token-query';\nimport {avoidSimultanousCalls} from './utils';\n\nexport interface BearerPersistentStorage {\n    save(id: string, tokenInfo: BearerTokenInfo);\n    load(id: string) : Promise<BearerTokenInfo>;\n}\n\nexport class KedBearerProvider implements BearerProvider {\n    tokenInfo: BearerTokenInfo;\n    client: RestClient;\n    \n    constructor (\n        public isomorphic: IsomorphicEnv,\n        public storage: BearerPersistentStorage,\n        public tokenId:string,\n        public clientId: string,\n        public clientSecret: string,\n        public tokenUrl: string,\n        public tokenQuery: TokenQuery)\n    {\n        this.tokenInfo = {token: null, expires: 0};\n        this.client = new RestClient(isomorphic, \"\", {\n            username: this.clientId,\n            password: this.clientSecret\n        });\n        this.getBearer = avoidSimultanousCalls(this.getBearer.bind(this));\n        this.refreshBearer = avoidSimultanousCalls(this.refreshBearer.bind(this));\n    }\n\n    async getBearer(): Promise<BearerTokenInfo> {\n        const {token, expires} = this.tokenInfo;\n        if (token && expires >= Date.now()) return this.tokenInfo;\n        try {\n            this.tokenInfo = await this.storage.load(this.clientId + \"/\" + this.tokenId);\n            if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now()) return this.tokenInfo;\n            await this.refreshBearer();\n            return this.tokenInfo;\n        } catch (e) {\n            await this.refreshBearer();\n            return this.tokenInfo;\n        }\n    }\n\n    async refreshBearer(): Promise<BearerTokenInfo> {\n        let res: Response;\n        for (let retries=0;retries<6;++retries) {\n            console.log(`Retrieving token for ${this.tokenId}`);\n            res = await this.client.get(this.tokenUrl, this.tokenQuery, {cache: 'reload'});\n            if (res.status !== 200) {\n                console.warn(`Got ${res.status} ${res.statusText}`);\n                continue;\n            }\n            this.tokenInfo = {token: await res.text(), expires: Date.now() + 59 * 60 * 1000};\n            console.log(`Got token for ${this.tokenId}: ${JSON.stringify(this.tokenInfo)}`);\n            this.storage.save(this.clientId + \"/\" + this.tokenId, this.tokenInfo);\n            return this.tokenInfo;\n        }\n        throw new Error(\"Failed to retrieve token for \" + JSON.stringify(this.tokenId));\n    }\n}\n","/*\ndeclare var Buffer; // node built-in\n\n\nfunction basicAuthHeader(username, password) {\n    return \"Basic \" + new Buffer(username + \":\" + password).toString(\"base64\");\n}\n*/\n\nimport {IsomorphicEnv} from './isomorphic-env';\nimport { createUUID } from \"./utils\";\n\nexport interface BearerTokenInfo {\n    token: string;\n    expires: number;\n}\n\nexport interface BearerProvider {\n    getBearer(): Promise<BearerTokenInfo>;\n    refreshBearer(): Promise<BearerTokenInfo>;\n    wantsRedirect?: boolean;\n}\n\nexport class RestClient {\n    authHeader?: string;\n    tokenInfo?: BearerTokenInfo;\n    bearerProvider?: BearerProvider;\n    fetchOptions: RequestInit;\n\n    constructor(\n        public isomorphic: IsomorphicEnv,\n        public baseUrl: string,\n        public options: {\n            username?,\n            password?,\n            bearer?,\n            bearerProvider?: BearerProvider\n        },\n    ) {\n        this.fetchOptions = {mode: 'cors'};\n        this.authHeader = options.bearer ?\n            \"Bearer \" + options.bearer :\n            options.username ?\n                \"Basic \" + isomorphic.btoa(options.username + \":\" + (options.password || \"\")) :\n                null;\n        this.bearerProvider = options.bearerProvider || null;\n    }\n\n    async fetch(path: string, method: string, headers, query?, fetchOptions?: RequestInit): Promise<Response> {\n        if (fetchOptions && fetchOptions.cache === 'no-cache') {\n            // Workaround for back-button not respecting cache control in Chrome/Opera.\n            // Append a query parameter to force a cache entry\n            query = {...query, nocache: createUUID()}\n        }\n        const queryStr = query && Object.keys(query).map(key =>\n            encodeURIComponent(key) +\n            \"=\" +\n            encodeURIComponent(query[key]))\n            .join('&');\n\n        let {authHeader, tokenInfo, bearerProvider} = this;\n\n        // {username, password or bearer} not specified in options, but bearerProvider specified:\n        if (!authHeader && !tokenInfo && bearerProvider) {\n            this.tokenInfo = tokenInfo = await bearerProvider.getBearer();\n        }\n        // Either because we've just specified bearerProvider in options, OR, we've got a 401\n        // in earlier response with www-authenticate: Bearer, and we had a BearerProvider,\n        // so we saved the tokenInfo. Now use it regardless of whether username,password or bearer was given\n        // to options in constructor:\n        if (tokenInfo) {\n            if (tokenInfo.expires < Date.now()) {\n                console.log(\"Token expired. Refresh it:\");\n                this.tokenInfo = tokenInfo = await bearerProvider.refreshBearer();\n            }\n            authHeader = \"Bearer \" + tokenInfo.token;            \n        }\n\n        // In one way or another, we've concluded an Authorization header to use:\n        if (authHeader) {\n            headers.Authorization = authHeader;\n        }\n\n        const url = this.baseUrl + path + (queryStr ? \"?\" + queryStr : \"\");\n        let res: Response = await this.isomorphic.fetch(url, { ...this.fetchOptions, headers, method, ...fetchOptions });\n        if (res.status == 401 && this.bearerProvider) {\n            const wwwauth = res.headers.get(\"www-authenticate\");\n            console.log(`Got ${res.status} from ${this.baseUrl + path}`);\n            if (wwwauth && /Bearer/i.test(wwwauth)) {\n                this.tokenInfo = await this.bearerProvider.refreshBearer();\n                headers.Authorization = \"Bearer \" + this.tokenInfo.token;\n                res = await this.isomorphic.fetch(url, { ...this.fetchOptions, headers, method, ...fetchOptions });\n            }\n        }\n        return res;\n    }\n\n    get(path: string, query?, fetchOptions?: RequestInit) {\n        return this.fetch(path, \"GET\", { Accept: \"application/json; text/plain\" }, query, fetchOptions);\n    }\n\n    post(path: string, data, fetchOptions?: RequestInit): Promise<Response> {\n        return this.fetch(path, \"POST\", {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        }, null, {...fetchOptions, body: JSON.stringify(data)});\n    }\n\n    delete(path: string, query?, body?, fetchOptions?: RequestInit) {\n        return this.fetch(path, \"DELETE\", { Accept: \"application/json; text/plain\" }, query, {...fetchOptions, body});\n    }\n}\n","\nexport function createUUID() {\n  // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n  var d = Date.now();\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n  });\n  return uuid;\n}\n\nexport function avoidSimultanousCalls<T,A>(method: (...args:A[])=>Promise<T>) : (...args:A[])=>Promise<T> {\n  let ongoingPromise: Promise<T> = null;\n  return function() {\n      if (!ongoingPromise) {\n          ongoingPromise = method.apply(this, arguments).then(result=>{\n              ongoingPromise = null;\n              return result;\n          });\n      }\n      return ongoingPromise;\n  }\n}\n","import { KedBackendClient } from '../ked-backend-client';\nimport migrate from './migrate';\n\nexport const KedModelMigratorMixin = (client: KedBackendClient) => {\n    if ((client as any).__migrator_mixed_in) return;\n    (client as any).__migrator_mixed_in = true;\n    \n    const get = client.get;\n    const list = client.list;\n\n    client.get = function (table, id, options) {\n        const include = options && options.include;\n        return get.apply(this, arguments).then(result => {\n            migrate(result, table, include && include.toString().split(','));\n            return result;\n        });\n    }\n\n    client.list = function (table, options) {\n        const include = options && options.include;\n        return list.apply(this, arguments).then(result => {\n            result.forEach(doc => migrate(doc, table, include && include.toString().split(',')));\n            return result;\n        });\n    }\n\n    return client;\n}\n\n","import { Course } from '../../KED.Backend.API/schema';\nimport migrateTask from './migrate-task';\n\nexport default function migrateCourse(course: Course, graphs?: string[]) {\n  if (!course.modules) course.modules = [];\n  course.modules.forEach(module => {\n    if (!module.resources) {\n      module.resources = [];\n    }\n    if (!module.taskIds) {\n      module.taskIds = [];\n    }\n  });\n\n  if (!course.responsibleTeachers) {\n    course.responsibleTeachers = []\n  }\n\n  // Earlier wrong spelling of resources\n  if ('resourses' in (course as any) && !('resources' in (course as any))) {\n    course.resources = (course as any).resourses;\n    delete (course as any).resourses;\n  }\n  if (!course.resources) {\n    course.resources = [];\n  }\n\n  if (graphs) {\n    graphs.forEach(label => {\n      switch (label) {\n        case 'tasks':\n          course.tasks.forEach(task => migrateTask(task));\n          break;\n      }\n    });\n  }\n}\n","import { Task } from '../../KED.Backend.API/schema';\n\nexport default function migrateTask(task: Task) {\n    if (!task.resources) task.resources = [];\n}\n","import * as model from '../../KED.Backend.API/schema';\nimport migrateCourse from './migrate-course';\nimport migrateTask from './migrate-task';\n\nexport default function migrate(doc, table: string, graphs?: string[]) {\n  switch (table) {\n    case \"courses\":\n      migrateCourse(doc, graphs);\n      break;\n    case \"tasks\":\n      migrateTask(doc);\n      break;\n  }\n}\n","var map = {\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tvar module = __webpack_require__(id);\n\treturn module;\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive sv|en\";","import { User } from \"../contracts/ked-models\";\n\nexport default function getUserClaims (user: User) {\n  return [{\n    type: \"email\",\n    value: user.mail\n  },{\n    type: \"school\",\n    value: user.school\n  }].concat(user.roles.map(role => ({\n    type: \"role\",\n    value: role\n  }))).concat(user.roles.map(role => ({\n    type: \"schoolRole\",\n    value: user.school + \"/\" + role\n  })));\n}\n","import { AccessClaim, DocumentAccess, hasAccess as _hasAccess, AccessRight } from 'kedbackend/client';\nimport { Document } from 'kedbackend/models';\nimport getUserClaims from './get-user-claims';\nimport env from '../globals/KED.env';\nimport { parseQueryString, generateQueryString } from \"../utils/query-string\";\nexport { getUserClaims };\n\nexport const IMPERSONATION_QUERY_PARAMS = [\"user\",\"role\",\"school\",\"debug\",\"testVersion\",\"testversion\",\"schoolType\",\"schooltype\"];\n\nexport function hasAccess(doc: Document, requestedRight: AccessRight) {\n  var claims = getUserClaims(env.currentUser);\n  var result = _hasAccess(DocumentAccess.fromStringArray(doc.acl || []), claims, requestedRight);\n  //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);\n  return result;\n}\n\nexport function hasReadAccess(doc: Document) {\n  return hasAccess(doc, 'R');\n}\n\nexport function hasWriteAccess(doc: Document) {\n  return hasAccess(doc, 'W');\n}\n\nexport function hasShareAccess(doc: Document) {\n  return hasAccess(doc, 'S');\n}\n\nexport function isTeacherAtSchool(school: string) {\n  const isTeacher = env.currentUser.roles.some(role => role === 'EMPLOYEE' || role === 'ADMIN');\n  const belongsToSchool = (school||\"\").toLowerCase() === env.currentUser.school.toLowerCase();\n  return (isTeacher && belongsToSchool);\n}\n\nexport const impersonationEnv = {\n  actAs (options: {role, school, url?}) {\n    const {role, school, url} = options;\n    const currentQuery = parseQueryString(location.search);\n    const newQuery = {...currentQuery, role, school};\n    const newQueryString = generateQueryString(newQuery);\n    if (url) {\n      location.href = `${url}${newQueryString}`;\n    } else {\n      location.hash = \"#\";\n      location.search = newQueryString;\n    }\n  }\n}\n\nexport function actAs(options: {role, school, url?}) {\n  impersonationEnv.actAs(options);\n}\n\nexport function preserveImpersonationQuery (url: string, query: {[name: string] : string}) {\n  const currentQuery = parseQueryString(location.search);\n  const newQuery = {...query};\n  for (const param of IMPERSONATION_QUERY_PARAMS) {\n    if (currentQuery[param]) newQuery[param] = currentQuery[param];\n  }\n  const newQueryString = generateQueryString(newQuery);\n  return `${url}${newQueryString}`;\n}\n","import {EDSCourse} from '../../contracts/eds';\n\nexport const courses: {courses: EDSCourse[]} =\n\n{\n    \"courses\": [\n        // Test data for Gymnasium students (made-up!)\n        {\n            \n            \"courseId\": \"2070d120-30ad-49e9-89c3-9c584a6cfa29\",\n            \"periodName\": \"HT2017\",\n            \"periodGoalGrade\": \"A\",\n            \"name\": \"Naturkunskap 1b\",\n            \"shortName\": \"XXX\",\n            \"courseSteps\": []\n        },\n        // Test data once retrieved from EDS test API for ground-school students:\n        {\n            \"courseId\": \"2070d120-30ad-49e9-89c3-9c584a6cfa2c\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"A\",\n            \"name\": \"Engelska\",\n            \"shortName\": \"EN\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"61f02bc7-1a0d-4b80-9bf1-07b6280379db\",\n                    \"name\": \"1. Lära känna varandra\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903600)\\/\"\n                },\n                {\n                    \"stepId\": \"a34c07c7-3932-4f64-87f9-feb5646db3db\",\n                    \"name\": \"10. En saga\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903740)\\/\"\n                },\n                {\n                    \"stepId\": \"e931f2bb-5727-4d99-b9e5-1bababfbc2e9\",\n                    \"name\": \"11. Det här är jag\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903757)\\/\"\n                },\n                {\n                    \"stepId\": \"ab823339-90ac-4b7f-a895-869d25cef504\",\n                    \"name\": \"12. Jag och min familj\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903770)\\/\"\n                },\n                {\n                    \"stepId\": \"53e00313-4980-4ab2-84ff-abe80ecd72d2\",\n                    \"name\": \"13. Jag och mina vänner\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903787)\\/\"\n                },\n                {\n                    \"stepId\": \"828796e9-84ad-4496-aa78-7850dd5bb23a\",\n                    \"name\": \"14. Jag och min fritid\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903803)\\/\"\n                },\n                {\n                    \"stepId\": \"31e08f37-4ec5-4366-9af6-bca5b9070198\",\n                    \"name\": \"15. The Blog\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111904117)\\/\"\n                },\n                {\n                    \"stepId\": \"4f88e9a3-9b36-47af-9686-d28b00ca98fc\",\n                    \"name\": \"16. Sport\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474888651180)\\/\"\n                },\n                {\n                    \"stepId\": \"abb57443-be68-48b7-a719-3454afbf3daa\",\n                    \"name\": \"17. Musik\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1477656328037)\\/\"\n                },\n                {\n                    \"stepId\": \"964f7ac3-8cf7-4042-912f-58ffb6812ddb\",\n                    \"name\": \"18. Vykort\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3002e95c-8de0-4914-a754-0773a18606bf\",\n                    \"name\": \"19. Läsa noveller\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d8708a56-e4fb-4ad3-84ef-bb40481eaf80\",\n                    \"name\": \"2. Veckans aktiviteter\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903613)\\/\"\n                },\n                {\n                    \"stepId\": \"46915f18-288c-44df-b224-1852d221b6ca\",\n                    \"name\": \"20. Summer camp\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db22d300-0126-4a32-950d-aaf2f7142627\",\n                    \"name\": \"21. Hus och hem\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"68111c18-e610-45c0-b290-9dd3cede1e48\",\n                    \"name\": \"22. Sightseeing\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c84dd89-66f2-4ea1-bce8-3fde1724dcc9\",\n                    \"name\": \"23. Vid matbordet\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1488205880703)\\/\"\n                },\n                {\n                    \"stepId\": \"75943640-f031-41da-8495-9d87b5804a3e\",\n                    \"name\": \"24. Traditioner\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"72021bc2-0ea8-4d39-87fa-11cc976e9c9f\",\n                    \"name\": \"25. Staying with a host family\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"574e1626-cad3-4220-8ba7-b443f03830b4\",\n                    \"name\": \"26. Det engelska språket\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"50a3682e-057d-45b1-81b5-e2eaa8b6d16b\",\n                    \"name\": \"27. Skolan och framtidsdrömmar\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"15a47a71-989a-4348-8fcb-a10683d263ec\",\n                    \"name\": \"28. Identitet\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5717f099-477f-433d-b10a-c2bf0dfe6f8e\",\n                    \"name\": \"29. Att läsa en bok\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0443638f-a546-40d8-a533-e2d12abef609\",\n                    \"name\": \"3. Fira ett speciellt tillfälle\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903630)\\/\"\n                },\n                {\n                    \"stepId\": \"54ff6488-f0ae-4fb6-b4e4-0f29d9274b23\",\n                    \"name\": \"30. The World Today\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2ab8a527-cd74-4847-97a6-79f629e22e84\",\n                    \"name\": \"31. Entertainment\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1b5d42ff-9615-439a-9ae2-89779040bf91\",\n                    \"name\": \"32. Interview\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"29ffc098-d26d-4f3b-a295-b5f065923bf2\",\n                    \"name\": \"33. Filmed books\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4d5fe734-9af9-42b8-8c50-920c9a450bc1\",\n                    \"name\": \"34. See the film\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"dd87c548-4a3a-4a62-9114-70ec7e713aee\",\n                    \"name\": \"35. Write a bestseller\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1fb5ce80-faf0-465c-9be8-c9bc722297bb\",\n                    \"name\": \"36. The English-speaking World\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f0007f75-0d1f-48c7-8f19-bb2e9f2c5377\",\n                    \"name\": \"37. Poetry\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"addebfcc-5b3c-4360-b819-0de0269a5e2d\",\n                    \"name\": \"38. Rhetoric\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"23c16db5-d435-49d3-8daa-c2b6433366b7\",\n                    \"name\": \"39. An important issue\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"e4d22285-735a-4bab-8884-ca5b736ebb88\",\n                    \"name\": \"4. Åka någonstans\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903647)\\/\"\n                },\n                {\n                    \"stepId\": \"4c489a2b-ee79-4f89-9818-787632abfba8\",\n                    \"name\": \"40. Write a speech\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"9667976c-83ab-4b9e-8a76-d330983c28f5\",\n                    \"name\": \"41. Changing world\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6bb14af9-9094-4938-be2d-2725a931895c\",\n                    \"name\": \"42. An organization\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"fe313a1a-dc5c-4890-b11e-b8e109db689b\",\n                    \"name\": \"43. The written word\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f1a592ec-6095-4ae4-9b9e-ebd527c18a2a\",\n                    \"name\": \"44. Communication\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5f6a5e15-462b-40ab-981b-b93e5fc0ee22\",\n                    \"name\": \"45. Giving a lecture\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8c9b57c1-cf05-4465-84b2-68cf353b1075\",\n                    \"name\": \"5. Min semester\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903660)\\/\"\n                },\n                {\n                    \"stepId\": \"1bd11f36-6438-40b5-ad4c-4b02b6f481d0\",\n                    \"name\": \"6. Låt oss prata om det\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903677)\\/\"\n                },\n                {\n                    \"stepId\": \"d49c08ee-c0e6-4599-b79f-5efd811fe33c\",\n                    \"name\": \"7. Jag är en turist\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903693)\\/\"\n                },\n                {\n                    \"stepId\": \"2def3414-de65-46c0-8f48-f8aa18be7b7c\",\n                    \"name\": \"8. Vänner över hela världen\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903707)\\/\"\n                },\n                {\n                    \"stepId\": \"ea8ff1a0-4bad-43ac-b328-62dff3e4d08e\",\n                    \"name\": \"9. Hjältar och kända personer\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472111903723)\\/\"\n                }\n            ]\n        },\n        {\n            \"courseId\": \"9d129e6a-9557-4849-a53f-416725502895\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"C\",\n            \"name\": \"Matematik\",\n            \"shortName\": \"MA\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"f1af6c2c-799a-4a3d-9985-c423940e91c0\",\n                    \"name\": \"1. Tal och mönster\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815917)\\/\"\n                },\n                {\n                    \"stepId\": \"4a34c53d-93d0-4247-ba19-9ce9dbed6de5\",\n                    \"name\": \"10. Lägesmått och diagram\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816200)\\/\"\n                },\n                {\n                    \"stepId\": \"0816a2b0-3aa7-41a9-bc39-971ccc7bd79c\",\n                    \"name\": \"11. Räknesätt\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1476103754013)\\/\"\n                },\n                {\n                    \"stepId\": \"fdc90a9c-b06a-48b1-9781-606c230c425c\",\n                    \"name\": \"12. Geometri\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1481279716607)\\/\"\n                },\n                {\n                    \"stepId\": \"bfd77c92-6636-45fa-9002-d813beaa56c3\",\n                    \"name\": \"13. Rymdgeometri\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1489669353170)\\/\"\n                },\n                {\n                    \"stepId\": \"58a619a1-b99a-487b-bbd5-abd31a903e5a\",\n                    \"name\": \"14. Räknemetoder och algebra\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"55b88760-22aa-452a-8a57-131346669aad\",\n                    \"name\": \"15. Problemet\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47f16476-ea47-40a2-a073-7ac4b36c4bf0\",\n                    \"name\": \"16. Delen och det hela\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"704e3d5b-fce7-409b-b989-340b2d7b2e18\",\n                    \"name\": \"17. Geometri och vinklar\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db5693ea-48ef-44ce-8107-be9915ef5256\",\n                    \"name\": \"18. Funktioner\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f9250c97-d932-4bf6-989e-204c0ef582c9\",\n                    \"name\": \"19. Proportionalitet\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d0411b1d-c9b4-452f-9fb6-ea7206755ecd\",\n                    \"name\": \"2. Längd och räknesätt\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815930)\\/\"\n                },\n                {\n                    \"stepId\": \"616b742e-b175-45c3-a926-fda3e4d8af80\",\n                    \"name\": \"20. Förflyttningsgraf\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f8a9b467-6ba6-4d9a-8174-87e369062621\",\n                    \"name\": \"21. Likformighet\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8fe483d7-b78b-4d9d-9402-15d57da05832\",\n                    \"name\": \"22. Bråk, sannolikhet och kombinatorik\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7eb39090-6461-4ce4-b008-dd98f8a57679\",\n                    \"name\": \"23. Negativa tal, procentsatser och förändringsfaktor\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"34cb3911-3a78-4773-a823-2f9054a9a925\",\n                    \"name\": \"24. Algebra och ekvationer\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"49abad1a-dd4b-4b0b-8d1f-752796723ca1\",\n                    \"name\": \"25. Lotteriet\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6756d8bc-e31a-4139-8d95-8f47916a361b\",\n                    \"name\": \"26. Geometriska samband\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0f0efee5-e617-4bca-b84e-e50e32aac90b\",\n                    \"name\": \"27. Rymdgeometri\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"de4e12d1-f678-4b1a-ac7b-5d62cdaeb52d\",\n                    \"name\": \"28. Storheter och proportionella samband\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"80323de8-fe66-4750-bb2e-d0dbabbb3dac\",\n                    \"name\": \"29. Funktioner och grafer\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"68894968-8a16-497a-8b97-711df61fca71\",\n                    \"name\": \"3. Tal och enheter\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815947)\\/\"\n                },\n                {\n                    \"stepId\": \"fa32d170-ab25-466d-91a8-a88f955cc5bc\",\n                    \"name\": \"30. Förpackning\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c31e00f-aeda-409f-8583-9805c0bb4f7f\",\n                    \"name\": \"31. Negativa tal och statistik\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"691bb48b-070d-4227-8fb6-2edce2fc6be4\",\n                    \"name\": \"32. Bråk\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"320481da-e417-4c52-af23-0076b694794d\",\n                    \"name\": \"33. Procent och förändringsfaktor\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f3a4338d-504e-4092-9610-ef2775b5b411\",\n                    \"name\": \"34. Potenser\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f43d7931-158c-4759-b7be-b14cf68c939a\",\n                    \"name\": \"35. Solsystemet\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"8931fc26-693a-41bd-8040-e01a6d22b2b5\",\n                    \"name\": \"36. Ekvationer och algebra\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"94370d70-dcbd-4eef-baf1-e92f6680b966\",\n                    \"name\": \"37. Funktioner och grafer\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ab0535df-68cc-4c10-86eb-afba3e199d0a\",\n                    \"name\": \"38. Geometri\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4ba66c7a-7d8f-4576-aefa-c09397b99db0\",\n                    \"name\": \"39. Sannolikhet\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c4e12bc8-1428-4d1b-a273-e947fa0574f3\",\n                    \"name\": \"4. Multiplikation och division\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815963)\\/\"\n                },\n                {\n                    \"stepId\": \"0b75ce2b-89de-432a-9eee-d6a7b74b6f38\",\n                    \"name\": \"40. Chokladfabriken\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"dba4a055-c143-4bd4-b436-3eb508ebe658\",\n                    \"name\": \"41. Genrella lösningsmetoder\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"db193873-0a8c-4073-8618-99c5a56f710b\",\n                    \"name\": \"42. Avancerad ekvationslösning\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"357ee123-1d77-4568-8fa1-78b5662e12b3\",\n                    \"name\": \"43. Problemlösning\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"015cdd58-7b31-4a89-a9fe-cd0bb45e7434\",\n                    \"name\": \"44. Avancerad problemlösning\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"785e12ac-4a71-4acf-bf40-27652faf20ff\",\n                    \"name\": \"45. Vad är matematik?\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6372cdb6-91cf-4f0f-ac9c-8578c00760ff\",\n                    \"name\": \"5. Form och storlek\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815977)\\/\"\n                },\n                {\n                    \"stepId\": \"c781e529-fefa-43ce-99fb-d232585a1e1a\",\n                    \"name\": \"6. Tid och räknesätt\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401815993)\\/\"\n                },\n                {\n                    \"stepId\": \"5df2975c-f84e-4620-abe9-5c47ebcb0f90\",\n                    \"name\": \"7. Bråk och decimaltal\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816007)\\/\"\n                },\n                {\n                    \"stepId\": \"9cbb966f-32df-48cf-be77-5e00d466d63a\",\n                    \"name\": \"8. Procent och bråk\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816023)\\/\"\n                },\n                {\n                    \"stepId\": \"b1b59f38-63c6-428a-a512-220b7d838e5f\",\n                    \"name\": \"9. Sannolikhet och bråk\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1474401816040)\\/\"\n                }\n            ]\n        },\n        {\n            \"courseId\": \"cfdc5bc0-ea41-4683-b941-d980de4e82a5\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"D\",\n            \"name\": \"Spanska, språkval\",\n            \"shortName\": \"M2SP\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"16bb0ce6-60ac-4937-8e60-dd633cd7c5f0\",\n                    \"name\": \"1. Första mötet\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1476255771933)\\/\"\n                },\n                {\n                    \"stepId\": \"f3504ab6-386c-42d2-882b-668719f329b5\",\n                    \"name\": \"10. Turist\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d2de4e01-44dd-4ba7-a69f-075450c627a7\",\n                    \"name\": \"11. Skolan\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"58e4d577-05f5-4071-8745-a41571df3019\",\n                    \"name\": \"12. Fritiden\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d8a079f9-3fef-4fbc-b868-6b050e3832d1\",\n                    \"name\": \"13. Stämma träff\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d62f63a1-3806-4650-b6a9-354eccd056b9\",\n                    \"name\": \"14. Sport och musik\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"b475dc9d-e694-4eb9-8c78-b150494dfe84\",\n                    \"name\": \"15. Presentera dig själv\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"009c68f6-db7e-44a3-bc5c-d1e2e78d327c\",\n                    \"name\": \"16. När och fjärran\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"a124f250-2fb7-4b57-b2bc-b72e0e8fd21a\",\n                    \"name\": \"17. Mat och traditioner\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ec6ccef4-58b5-4111-b152-8a7a7f546bb8\",\n                    \"name\": \"18. Planera en resa\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ec96d506-112e-4b38-8946-6f19130bd741\",\n                    \"name\": \"19. Etikett och regler\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"0b52b5e6-bbc7-4c78-815c-efc30fa984af\",\n                    \"name\": \"2. Min familj\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1488368769260)\\/\"\n                },\n                {\n                    \"stepId\": \"e05c674b-1097-4646-ac47-1d8c4342a343\",\n                    \"name\": \"20. Resan\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f6f8cffb-69ae-4148-81fa-35e1f984f836\",\n                    \"name\": \"21. Boende\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"aee9167c-2f65-4f8d-a94b-684458c300bc\",\n                    \"name\": \"22. Familjeliv\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"115f28de-fe33-435e-a7fb-36fea0a37cce\",\n                    \"name\": \"23. Bostadsläge\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d5e8b9e2-b84e-4af7-8b20-e37896dec41d\",\n                    \"name\": \"24. Min stad\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c2f15857-a682-4b02-8d00-ec042858e799\",\n                    \"name\": \"25. Presentera någon annan\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1bc87327-1e3f-42f6-b839-e9b385200149\",\n                    \"name\": \"26. Media\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"36f23967-f30b-4cbc-a69c-4191094e182d\",\n                    \"name\": \"27. En tv-kväll\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"32ead07a-fa58-4770-ac20-3a31f27069cf\",\n                    \"name\": \"28. Tidningar\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"598d7b7e-97b6-4ff3-b7a7-8f5c45c164cd\",\n                    \"name\": \"29. Film\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"12e8d03b-7d80-434c-9201-7f852f5c114c\",\n                    \"name\": \"3. Fler siffror, månader och väder\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"98f0825e-e200-43f4-9f4b-866bb50d28dd\",\n                    \"name\": \"30. Tidningen\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"956757b9-979f-4d12-be01-8b30970b603e\",\n                    \"name\": \"31. Min framtid\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c2003358-0ce9-409b-82fa-e7a0bff891fc\",\n                    \"name\": \"32. Ung i framtiden\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"1c1ca040-f96d-46af-862b-a978698e2745\",\n                    \"name\": \"33. Insändare\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"64f620bb-8c77-4de2-88e2-feaa21f4c41e\",\n                    \"name\": \"34. På gymnasiet\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4c3c19eb-0447-47cf-bb72-8d1176118c71\",\n                    \"name\": \"35. Framtiden\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c3779788-030e-46f3-89a7-a15015931a51\",\n                    \"name\": \"4. Det här är jag\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"a6628c06-443a-481d-96fc-c019800e8e4e\",\n                    \"name\": \"5. Boken\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"f34e1dee-1dd3-4bcd-89b4-f0ba6638c65c\",\n                    \"name\": \"6. På café\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"9ffb3665-0e3a-423a-af93-c5006a2a4839\",\n                    \"name\": \"7. Att handla\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"63e62432-ba1e-4f96-911c-52bd756c803e\",\n                    \"name\": \"8. I staden\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3c93cf1d-2e82-452b-9333-16b336fdda6d\",\n                    \"name\": \"9. På hotellet\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                }\n            ]\n        },\n        {\n            \"courseId\": \"3cc7c710-63fb-49bd-8dc5-b95be6374122\",\n            \"periodName\": \"VT2017\",\n            \"periodGoalGrade\": \"C\",\n            \"name\": \"Svenska\",\n            \"shortName\": \"SV\",\n            \"courseSteps\": [\n                {\n                    \"stepId\": \"379585a4-f602-4086-920d-d506d2e93fed\",\n                    \"name\": \"1. Min bästa sak\",\n                    \"shortName\": \"1\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179490)\\/\"\n                },\n                {\n                    \"stepId\": \"5d90747a-d5ff-4c12-818c-d301e4cf2405\",\n                    \"name\": \"10. Quizkampen\",\n                    \"shortName\": \"10\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179630)\\/\"\n                },\n                {\n                    \"stepId\": \"fb271830-5368-43dc-b911-3d65af082e26\",\n                    \"name\": \"11. Ta kontakt\",\n                    \"shortName\": \"11\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179647)\\/\"\n                },\n                {\n                    \"stepId\": \"bf7a93a6-24af-4d01-8839-aa4f3f6b438d\",\n                    \"name\": \"12. Samla fakta och presentera\",\n                    \"shortName\": \"12\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179660)\\/\"\n                },\n                {\n                    \"stepId\": \"2a712108-e5d7-4ffb-a55f-80ff195ea946\",\n                    \"name\": \"13. Påverka och uttrycka åsikter\",\n                    \"shortName\": \"13\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179943)\\/\"\n                },\n                {\n                    \"stepId\": \"94b5abaa-0471-4ab4-be3c-c0b0d4098609\",\n                    \"name\": \"14. Språk i Sverige\",\n                    \"shortName\": \"14\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1475049857367)\\/\"\n                },\n                {\n                    \"stepId\": \"e0169353-8ac0-4fcd-8a45-4cfffc5fe55e\",\n                    \"name\": \"15. Min förebild\",\n                    \"shortName\": \"15\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1480951054357)\\/\"\n                },\n                {\n                    \"stepId\": \"e12c8fa6-8aaa-4598-8e6f-5c6d318163db\",\n                    \"name\": \"16. Förstå, minnas och lära\",\n                    \"shortName\": \"16\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1490605558217)\\/\"\n                },\n                {\n                    \"stepId\": \"1a19c53b-36f0-4309-adfd-26a307b43dbd\",\n                    \"name\": \"17. Använda språket i olika sammanhang\",\n                    \"shortName\": \"17\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"31aa5b91-59d0-41db-ab2e-0bdec6342dfe\",\n                    \"name\": \"18. Sammanfatta och presentera\",\n                    \"shortName\": \"18\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"48747057-835d-40fd-811f-dde4fd48f3a0\",\n                    \"name\": \"19. Den moderna ungdomen\",\n                    \"shortName\": \"19\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4708aedf-3b7d-4ec0-80c9-769de4cdda9b\",\n                    \"name\": \"2. Författare\",\n                    \"shortName\": \"2\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179507)\\/\"\n                },\n                {\n                    \"stepId\": \"4258123d-d122-4058-8120-9de7d1fb3d66\",\n                    \"name\": \"20. Att vara ungdom idag\",\n                    \"shortName\": \"20\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3d94e56d-9d38-4d3c-a3cb-d4f2d13814c9\",\n                    \"name\": \"21. Upplysningstiden och romantiken\",\n                    \"shortName\": \"21\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5d8c3d70-e996-4236-9326-982ed128340c\",\n                    \"name\": \"22. Realismen och modernismen\",\n                    \"shortName\": \"22\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"02037ab3-ffdf-4fe2-a172-26de404c58bc\",\n                    \"name\": \"23. Våga utanför ramarna\",\n                    \"shortName\": \"23\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7c376d37-0170-49ac-865d-5479d82ce806\",\n                    \"name\": \"24. Modern litteratur\",\n                    \"shortName\": \"24\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7131b28d-89d1-40f6-8d87-80fd0c15486d\",\n                    \"name\": \"25. Budskapet\",\n                    \"shortName\": \"25\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"30c876a6-48a7-4fc7-a49f-ad44bac3d4bb\",\n                    \"name\": \"26. Övertyga och påverka\",\n                    \"shortName\": \"26\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"97b328ea-3342-41d6-a1c5-91e9c1d17a08\",\n                    \"name\": \"27. Språkbruk genom tiderna\",\n                    \"shortName\": \"27\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"e4ec472d-b31c-4d20-886c-0162e1159e55\",\n                    \"name\": \"28. Tidningstexter\",\n                    \"shortName\": \"28\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47ccf40e-28a1-4432-91ed-f3013eb97aa8\",\n                    \"name\": \"29. Samtala om texter\",\n                    \"shortName\": \"29\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"6c89c307-adff-46b8-9d75-2ecb1fc714ce\",\n                    \"name\": \"3. Leka med ord\",\n                    \"shortName\": \"3\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179520)\\/\"\n                },\n                {\n                    \"stepId\": \"2145d4aa-60db-42f9-918b-49f3bf714786\",\n                    \"name\": \"30. Språkets möjligheter\",\n                    \"shortName\": \"30\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"c211ba3d-b8fa-4c5c-bbe1-bcfea2a243b5\",\n                    \"name\": \"31. Dikt och diktanalys\",\n                    \"shortName\": \"31\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"fbeb356a-5c9d-4114-9a4b-9ac2325913d0\",\n                    \"name\": \"32. Berättarteknik i skönlitteratur\",\n                    \"shortName\": \"32\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"4446df13-5bb8-4cf1-beb4-4d2b43bf97b8\",\n                    \"name\": \"33. Utveckla ditt skönlitterära skrivande\",\n                    \"shortName\": \"33\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"47e0c5bf-2898-4cc3-8119-2346d4c6c78f\",\n                    \"name\": \"34. Noveller\",\n                    \"shortName\": \"34\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"3b072a72-9f2c-4439-b095-33edb5ae3276\",\n                    \"name\": \"35. Det fria ordet - En skönlitterär djupdykning\",\n                    \"shortName\": \"35\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"56a2b991-63f5-4f1c-8e48-1bc1f83fa9a9\",\n                    \"name\": \"36. Debatt och retorik\",\n                    \"shortName\": \"36\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"7b0e633b-65b5-407d-8bdd-d77673d1be1f\",\n                    \"name\": \"37. Argumenterande texter\",\n                    \"shortName\": \"37\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d76356c9-2fdd-4845-aa7a-1bf54547a34e\",\n                    \"name\": \"38. Analysera tal\",\n                    \"shortName\": \"38\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"eb312838-f59b-4815-987f-d7f11973a95f\",\n                    \"name\": \"39. Tal\",\n                    \"shortName\": \"39\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"48559f29-37cb-451f-8f40-354101a413af\",\n                    \"name\": \"4. Skrivarskola\",\n                    \"shortName\": \"4\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179537)\\/\"\n                },\n                {\n                    \"stepId\": \"a054f1e2-b296-4185-b9b7-dac94f600ab3\",\n                    \"name\": \"40. Muntlig argumentation\",\n                    \"shortName\": \"40\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2e5ff9f3-ac8e-4fea-abe2-a7534e64e25f\",\n                    \"name\": \"41. Modern lyrik\",\n                    \"shortName\": \"41\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"ceed4cee-dd38-40b9-af97-43b0af244a41\",\n                    \"name\": \"42. Nobelpriset i litteratur\",\n                    \"shortName\": \"42\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"2df27363-1a57-4129-96dc-5e2a26dc0209\",\n                    \"name\": \"43. Analysmetod i akademiska uppsatser\",\n                    \"shortName\": \"43\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"71062f38-2874-4d6a-96b9-8128a10e3559\",\n                    \"name\": \"44. Litteratur som väckt debatt genom tiderna\",\n                    \"shortName\": \"44\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"d0e40b55-4638-45fd-b9f3-924c68c673cc\",\n                    \"name\": \"45. Analysera vetenskapligt\",\n                    \"shortName\": \"45\",\n                    \"isCompleted\": null,\n                    \"completedDate\": null\n                },\n                {\n                    \"stepId\": \"5954c057-cdc2-4293-bb9e-8b96ec27e04c\",\n                    \"name\": \"5. Min bästa sak på äventyr\",\n                    \"shortName\": \"5\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179553)\\/\"\n                },\n                {\n                    \"stepId\": \"5b9e5c30-c9de-4092-b7e6-0dbb4e3513ff\",\n                    \"name\": \"6. Faktatext\",\n                    \"shortName\": \"6\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179567)\\/\"\n                },\n                {\n                    \"stepId\": \"2b823257-8dad-4f6b-8f2b-539e4dae0bd4\",\n                    \"name\": \"7. Tal- och skriftspråk\",\n                    \"shortName\": \"7\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179583)\\/\"\n                },\n                {\n                    \"stepId\": \"28e73fd2-c40a-4319-8b93-ec0f1b658c81\",\n                    \"name\": \"8. Dikter\",\n                    \"shortName\": \"8\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179600)\\/\"\n                },\n                {\n                    \"stepId\": \"35a5926a-8cb3-4c9d-a7ef-714761935755\",\n                    \"name\": \"9. Olika texttyper\",\n                    \"shortName\": \"9\",\n                    \"isCompleted\": true,\n                    \"completedDate\": \"\\/Date(1472559179613)\\/\"\n                }\n            ]\n        }\n    ]\n}\n","import {EDSAssessment} from '../../contracts/eds';\n\nexport const assessments: {assessments: EDSAssessment[]} =\n\n{\n    \"assessments\": [\n      {\n        \"publishDateTime\": \"2017-08-28T09:05:43.16\",\n        \"text\": \"Testbedömning Engelsa 5\",\n        \"gradeName\": \"C\",\n        \"courseUnitName\": \"1. Ready, steady, go!\"\n      },\n      {\n        \"publishDateTime\": \"2017-08-28T08:59:21.253\",\n        \"text\": \"Testbedömning...\\r\\n/ Kim test\",\n        \"gradeName\": \"C\",\n        \"courseUnitName\": \"Tema 1\"\n      },\n      {\n        \"publishDateTime\": \"2017-08-10T09:43:36.797\",\n        \"text\": \"Test\",\n        \"gradeName\": \"D\",\n        \"courseUnitName\": \"Block 1\"\n      }\n    ]\n  }","import {EDSStudyPlan} from '../../contracts/eds';\n\nexport const studyPlans: {StudyPlans: EDSStudyPlan[]} =\n\n{\n    \"StudyPlans\": [\n        {\n            \"courseUnitName\": \"Hem- och konsumentkunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Historia\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Fysik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Geografi\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Matematik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Samhällskunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Engelska\",\n            \"finalGoalGrade\": \"A\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"A\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Religionskunskap\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Idrott och hälsa\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Biologi\",\n            \"finalGoalGrade\": \"D\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Svenska\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Teknik\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Bild\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"C\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Spanska, språkval\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Kemi\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Slöjd\",\n            \"finalGoalGrade\": \"C\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"D\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"B\"\n                }\n            ]\n        },\n        {\n            \"courseUnitName\": \"Musik\",\n            \"finalGoalGrade\": \"B\",\n            \"strategyText\": \"\",\n            \"periodGoals\": [\n                {\n                    \"periodName\": \"VT2017\",\n                    \"gradeName\": \"C\"\n                },\n                {\n                    \"periodName\": \"HT2016\",\n                    \"gradeName\": \"D\"\n                }\n            ]\n        }\n    ]\n}","import { EDSCourse, EDSAssessment, EDSStudyPlan, EDSStudentFutureAbility } from '../contracts/eds';\nimport { RestClient } from 'kedbackend/js/dist/ked-backend-client/restclient';\nimport { IsomorphicEnv, BearerProvider, HttpError } from 'kedbackend/client';\nimport { SchoolMoment } from '../utils/school-moment';\nimport { SchoolTerm } from '../utils/school-term';\nimport { dateTimeReviver, L } from '../utils/utils';\nimport { courses } from './eds-stubdata/ActiveCourses';\nimport { assessments } from './eds-stubdata/LatestAssessments';\nimport { studyPlans } from './eds-stubdata/StudentGoals';\nimport env from '../globals/KED.env';\n//Gamla: const API_URL = \"https://test-dev-eds-cs.cloudapp.net/WebAPI/\";\n//NYA: const API_URL = \"https://edsportalowinapi.azurewebsites.net/api/\";\n\nfunction privatizingCacheBust () {\n  return {user: env.currentUser.mail};\n}\nexport class EdsClient {\n  http: RestClient;\n\n  constructor (\n    isomorphic: IsomorphicEnv,\n    baseUrl: string,\n    bearerProvider: BearerProvider\n  ) {\n    this.http = new RestClient (isomorphic, baseUrl, {bearerProvider});\n    this.getActiveCourses = avoidSimultanousCalls(this.getActiveCourses);\n    this.getLatestAssessments = avoidSimultanousCalls(this.getLatestAssessments);\n    this.getStudentGoals = avoidSimultanousCalls(this.getStudentGoals);\n    this.getStudentFutureAbilities = avoidSimultanousCalls(this.getStudentFutureAbilities);\n  }\n\n/**\n   * Retrieve active courses for current logged in student.\n   *\n   * @param courseCode Short-name of the course. Optional.\n   */\n  async getActiveCourses(q: {courseCode?: string, periodName: string}) {\n    try {\n      const query:any = privatizingCacheBust();\n      if (q) {\n        if (q.courseCode) query.CourseCode = q.courseCode;\n        if (q.periodName) query.PeriodName = q.periodName;\n      }\n      const res = await this.http.get(\"studentactivecourses\", query);\n      if (res.status != 200) throw new HttpError(res.status, await res.text());\n      const json = await res.json();\n      return json.courses as EDSCourse[];\n    } catch (ex) {\n      console.error(\"Error from EDS: \" + ex);\n      throw new Error(L`Kunde tyvärr inte ladda terminsmål eller avklarade steg från EDS. Försök igen senare...`);\n    }\n  }\n\n  /**\n   * Retrieve latest assessments for current logged in user.\n   * \n   * @param limit Optional limit\n   */\n  async getLatestAssessments(limit?: number) {\n    const query:any = privatizingCacheBust();\n    if (!isNaN(limit)) query.Count = limit;\n    const res = await this.http.get(\"studentassessments\", query);\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.assessments as EDSAssessment[];    \n  }\n\n  /**\n   * Retrieve studyplans for current logged-in user\n   */\n  async getStudentGoals() {\n    const res = await this.http.get(\"studentgoals\", privatizingCacheBust());\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.studentGoals as EDSStudyPlan[];    \n  }\n\n  async getStudentFutureAbilities() {\n    const res = await this.http.get(\"studentFutureAbilities\", privatizingCacheBust());\n    if (res.status != 200) throw new HttpError(res.status, await res.text());\n    const json = await res.json();\n    return json.studentFutureAbilities as EDSStudentFutureAbility[];\n  }\n}\n\nexport class EDSPeriod {\n  period: string;\n  term: 'AT' | 'ST';\n  year: number;\n  constructor (periodStringOrSchoolTerm: string | SchoolMoment) {\n    if (typeof periodStringOrSchoolTerm === 'string') {\n      this.period = periodStringOrSchoolTerm;\n      this.term = this.period.startsWith('HT') ? 'AT' : 'ST';\n      this.year = parseInt(this.period.substr(2));\n      if (isNaN(this.year)) throw new Error (`Invalid period: ${this.period}`);\n    } else {\n      const schoolTerm = new SchoolTerm(periodStringOrSchoolTerm);\n      this.period = (schoolTerm.term === 'AT' ? \"HT\" : \"VT\") + schoolTerm.year;\n      this.term = schoolTerm.term;\n      this.year = schoolTerm.year;\n    }\n  }\n\n  get schoolTerm () : SchoolTerm {\n    return new SchoolTerm({\n      academicYear: this.term === 'AT' ?\n        `${this.year}/${this.year + 1}` :\n        `${this.year-1}/${this.year}`,\n      term: this.term\n    });\n  }\n\n  toString() {\n    return this.period;\n  }\n\n  valueOf() {\n    return this.year + \":\" + (this.term === 'ST' ? \"1\" : \"2\");\n  }\n}\n\nexport function parseJsonDate_old (jsonDateStr: string) : Date {\n  const date = dateTimeReviver(\"\", jsonDateStr);\n  if (!(date instanceof Date)) throw new Error(\"Invalid JSON date string: \" + jsonDateStr);\n  return date;\n}\n\nexport class StubEdsClient implements EdsClient {\n  http: RestClient;\n\n  constructor () {\n    this.http = null;\n  }\n\n  async getActiveCourses(q?: { courseCode?: string; periodName?: string; }) {\n    let result = courses.courses;\n      if (q) {\n        if (q.courseCode) result = result.filter (c => c.shortName === q.courseCode);\n        if (q.periodName) result = result.filter(c => c.periodName === q.periodName);\n      }\n      return result;\n  }\n\n  async getLatestAssessments(limit?: number) {\n    return limit ?\n        assessments.assessments.slice(0, limit) :\n        assessments.assessments;\n  }\n\n  async getStudentGoals() {\n    return studyPlans.StudyPlans;\n  }\n\n  async getStudentFutureAbilities() {\n    return [] as EDSStudentFutureAbility[];\n  }  \n}\n\nfunction avoidSimultanousCalls<T,A>(method: (...args:A[])=>Promise<T>) : (...args:A[])=>Promise<T> {\n  let ongoingPromises: {[argsJson: string]: Promise<T>} = {};\n  return function() {\n    const argsJson = JSON.stringify([].slice.call(arguments));\n    if (!ongoingPromises[argsJson]) {\n      ongoingPromises[argsJson] = method.apply(this, arguments).then(result=>{\n        delete ongoingPromises[argsJson];\n        return result;\n      });\n    }\n    return ongoingPromises[argsJson];\n  }\n}\n","/// <reference path=\"../../typings-gapi/gapi.client.calendar-v3/gapi.client.calendar.d.ts\" />\nimport env from '../globals/KED.env';\n//const SCOPES = [\"https://www.googleapis.com/auth/calendar.readonly\"];\n\n/*global gapi */\n\nexport class GoogleCalendar {\n  tokenExpiration: Date;\n\n  async ensureInited() {\n    // Load GAPI\n    if (typeof gapi === 'undefined') await this.loadGapi();\n    // Set token\n    if (!this.tokenExpiration || this.tokenExpiration < new Date()) {\n      const tokenResult = await env.googleTokenProvider.getBearer();\n      this.tokenExpiration = new Date(tokenResult.expires);\n      gapi.auth.setToken({\n        access_token: tokenResult.token,\n        error: null,\n        expires_in: '' + (tokenResult.expires - Date.now()),\n        state: \"https://www.googleapis.com/auth/calendar.readonly\"\n      });\n    }\n    // Load Calendar API\n    await gapi.client.load('calendar', 'v3');\n  }\n\n  loadGapi() {\n    return new Promise((resolve, reject) => {\n      if (typeof gapi !== 'undefined') return resolve();\n      const script = document.createElement('script');\n      script.src = \"https://apis.google.com/js/client.js?onload=gaapi_loaded\";\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n      (window as any).gaapi_loaded = resolve;\n    });\n  }\n\n  // https://stackoverflow.com/questions/21168688/google-oauth2-using-externally-generated-access-token-with-js-client-library\n  // https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiclientsettokentokenobject\n  /*gapi.auth.setToken({\n      access_token: 'accessToken?',\n      expires_in: \"3600\",\n      state: \"https://www.googleapis.com/auth/calendar.readonly\"\n  })*/\n\n  async listCalendars() {\n    await this.ensureInited();\n    try {\n      const res = await gapi.client.calendar.calendarList.list({});\n      // TODO: What is the normal res.status? 200? Throw if not 200?\n      return res.result.items;\n    } catch (err) {\n      // TODO: Parse out error from err (which is an object!)\n      throw err.error; // Is this correct? Test!\n    }\n  }\n\n  async listEvents({ calendarId, timeMin, timeMax }) {\n    await this.ensureInited();\n    try {\n      const res = await gapi.client.calendar.events.list({\n        'calendarId': calendarId || 'primary',\n        'timeMin': timeMin && (new Date(timeMin)).toISOString(),\n        'timeMax': timeMax && (new Date(timeMax)).toISOString(),\n        'showDeleted': false,\n        'singleEvents': true,\n        'maxResults': 2500,\n        'orderBy': 'startTime'\n      });\n      // TODO: Check res.status same way as above!\n      return res.result.items;\n    } catch (err) {\n      throw err.error;// Is this correct? Test!\n    }\n  }\n}\n","\nexport interface KedLearningGoalsData {\n  moduleName: string\n  subject: {\n    name: string\n    course: {\n      name: string\n      url: string\n    }\n  }\n  step?: number\n  commonTasks: KedLearningTask[]\n  learningGoals: KedLearningGoal[]\n}\n\nexport interface KedLearningTask {\n  id: string;\n  name: string;\n  url: string;\n}\n\nexport interface KedLearningGoal {\n  name: string;\n  tasks: KedLearningTask[];\n}\n\nexport async function getLearningGoalsAndTasks(apiPath: string, pageId: string) {\n  const res = await fetch (`${apiPath}?nodeID=${pageId}`, {credentials: \"same-origin\"});\n  const data = await res.json();\n  return data as KedLearningGoalsData;\n}\n","export function courseNameToCssClass(cssPrefix: string, courseName: string) {\n  return `${cssPrefix}${courseName.substr(0,3).toLowerCase()}`;\n}\n","import moment from 'moment';\nimport { flatten, distinct, compareProp } from '../../utils/utils';\nimport { StudentCalendarEvent } from './models';\n\ninterface EventMeta {\n  index?: number,\n  prevOverlaps?: StudentCalendarEvent[]  \n}\n\nexport function crunchCollidingEvents (\n  events: StudentCalendarEvent[],\n  isLastCall?: boolean)\n: StudentCalendarEvent[]\n{\n  const result: (StudentCalendarEvent & EventMeta)[] = [];\n  events.forEach((event, eventIndex) => {\n      const overlaps = result.filter(x => x.startMoment && x.endMoment &&\n          (x.startMoment <= event.startMoment) &&\n          (x.endMoment > event.startMoment));\n      let allOverlaps = overlaps.concat(flatten (overlaps.map(o => o.prevOverlaps)));\n      allOverlaps = distinct(allOverlaps, o => o.index);\n      allOverlaps.sort(compareProp(\"startMoment\"));\n      let width;// = Math.round(100 / Math.max((allOverlaps.length + 1), 1));\n      let pos = 0;\n      allOverlaps.forEach((overlap, i) => {\n        if (i % 4 === 0) {\n          width = Math.max(25, Math.round(100 / Math.max(allOverlaps.length - i + 1, 1)));\n          pos = 0;\n        }\n        overlap.width = width;\n        overlap.className = (overlap.className || \"\").split(' ')\n          .filter(cn => cn !== 'splitted')\n          .concat(\"splitted\")\n          .join(' '),\n        overlap.pos = pos;\n        pos += width;\n      });\n      result.push({\n        ...event,\n        index: eventIndex,\n        pos: pos,\n        width,\n        className: width < 100 ?\n          (event.className ? event.className + \" splitted\" : \"splitted\") :\n          event.className,\n        prevOverlaps: allOverlaps\n      });\n      /*if (isLastCall && moment(event.start).day() === 1) {\n        if (/Sve2/.test(event.text)) {\n          debugger;\n        }\n        if (/Franska/.test(event.text)) {\n          debugger;\n        }\n        if (/Tyska/.test(event.text)) {\n          debugger;\n        }\n        if (/spansk/.test(event.text)) debugger;\n        if (/Eng6/.test(event.text)) debugger;\n      }*/\n  });\n  return result;\n}\n","import * as React from 'react';\nimport moment from 'moment';\nimport {MINUTE} from '../../utils/constants';\nimport {L} from '../../utils/utils';\n\ninterface Props {\n    id: string,\n    dayStart,\n    startMoment: moment.Moment,\n    endMoment: moment.Moment,\n    text: string,\n    location: string,\n    description: string,\n    width: number,\n    pos: number,\n    locale: string,\n    zoom: number,\n    htmlLink: string,\n    className: string\n}\n\nexport default function DayViewEvent ({\n    id,\n    dayStart,\n    startMoment,\n    endMoment,\n    text,\n    location,\n    description,\n    width,\n    pos,\n    locale,\n    zoom,\n    htmlLink,\n    className\n}: Props) {\n    const top = (moment(startMoment).diff(dayStart) / MINUTE) * zoom;\n    const height = (moment(endMoment).diff(startMoment) / MINUTE) * zoom;\n    const localeTimeOptions = {hour: 'numeric', minute: '2-digit'};\n    const localeStartTime = startMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);\n    const localeEndTime = endMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);\n\n    return <div className={\"dayviewevent \" + className} style={{\n        position:'absolute',\n        boxSizing: 'border-box',\n        top,\n        left: (pos || 0) + \"%\",\n        width: (width || 100) + '%',\n        height,\n        maxHeight: height,\n        overflow: 'hidden'}}\n\n        title={`${localeStartTime} - ${localeEndTime} ${text}` +\n            (location ?\n                \"\\n\" + L`Plats: ${location}` :\n                \"\" ) +\n            (description ?\n                \"\\n\" + description :\n                \"\" )\n        }\n        >\n        <a className=\"event-title\" href={htmlLink} target=\"calendar-event\">\n            {text}\n        </a>\n        <p className=\"event-period\">\n            {localeStartTime} - {localeEndTime}\n        </p>\n        {location &&\n            <p className=\"event-location\">\n                {location}\n            </p>\n        }\n        {description &&\n            <p className=\"event-description\">\n                {description}\n            </p>\n        }\n    </div>;\n}\n","import * as React from 'react';\nimport moment from 'moment';\nimport DayViewEvent from './day-view-event';\nimport TimeLines from './time-lines';\nimport {MINUTE} from '../../utils/constants';\nimport {crunchCollidingEvents} from './crunch-colliding-events';\nimport { StudentCalendarEvent } from './models';\n\ninterface Props {\n    dayStart: moment.Moment;   // Milliseconds at start of the day (for example 08:00 the day)\n    dayEnd: moment.Moment;     // Milliseconds at end of the day (for example 17:00 the day)\n    events: StudentCalendarEvent[],     // Events to show\n    locale: string,\n    zoom: number,\n    isLastCall: boolean\n}\n\nexport default function DayView ({\n    dayStart,   // Milliseconds at start of the day (for example 08:00 the day)\n    dayEnd,     // Milliseconds at end of the day (for example 17:00 the day)\n    events,     // Events to show\n    locale,\n    zoom,\n    isLastCall\n}: Props) {\n    const height = (moment(dayEnd).diff(dayStart) / MINUTE) * zoom;\n\n    const crunchedEvents = crunchCollidingEvents(events, isLastCall);\n\n    return (\n        <div className=\"dayview\" style={{\n            top: 0,\n            height,\n            maxHeight: height,\n            position: 'relative',\n            overflow: 'hidden'\n        }}>\n\n            <TimeLines dayStart={dayStart} dayEnd={dayEnd} zoom={zoom} />\n\n            {crunchedEvents.map (ev => <DayViewEvent\n                key={ev.id}\n                id={ev.id}\n                className={ev.className}\n                dayStart={dayStart}\n                startMoment={ev.startMoment}\n                endMoment={ev.endMoment}\n                text={ev.text}\n                location={ev.location}\n                description={ev.description}\n                width={ev.width}\n                pos={ev.pos}\n                locale={locale}\n                zoom={zoom}\n                htmlLink={ev.htmlLink}\n            />)}\n        </div>\n    );\n}\n\n","import * as React from 'react';\nimport moment from 'moment';\n\nexport default function HourMarker ({startHour, endHour, locale, zoom}) {\n    const hourPixels = 60 * zoom;\n\n    const hours = [];\n    for (let hour = startHour; hour <= endHour; ++hour) {\n        hours.push(hour);\n    }\n\n    return <div className=\"hourmarker\" style={{\n        position: 'relative',\n        left: 0,\n        top: 0,\n        overflow: 'visible',\n        height: (endHour - startHour) * hourPixels\n    }}>\n      {hours.map((hour, i) => {\n        const ypos = i * hourPixels;\n        return <span key={hour}><div style={{\n                position: 'absolute',\n                left: 0,\n                top: ypos,\n                marginTop: '-4px', // CSS!\n                padding: 0\n            }}>\n                {moment().hour(hour).minute(0).toDate().toLocaleString(locale, {hour: \"2-digit\", minute: \"2-digit\"})}\n            </div>\n            {/*<div className=\"hourline\"\n                style={{\n                    backgroundColor: '#eeeeF2', // CSS!\n                    position: 'absolute',\n                    left: '24px',\n                    width: '6px',\n                    margin: 0,\n                    padding: 0,\n                    height: '1px',\n                    top: ypos\n                }}\n            />\n            {hour < endHour && <div className=\"halvhourline\"\n                style={{\n                    backgroundColor: '#eeeeF2', // CSS!\n                    position: 'absolute',\n                    left: '26px',\n                    width: '4px',\n                    margin: 0,\n                    padding: 0,\n                    height: '1px',\n                    top: ypos + (hourPixels / 2) + 1\n            }} /> } */}\n        </span>;\n    })}</div>;\n}\n","import * as React from 'react';\nimport WeekView from './week-view';\nimport {GoogleCalendar} from '../../apis/google-calendar';\nimport moment from 'moment';\nimport {clone, flatten, L} from '../../utils/utils';\nimport StatusBar from './status-bar';\nimport {courseNameToCssClass} from './course-name-to-css-class';\nimport {shouldIncludeCalendar} from './should-include-calendar';\nimport { localMoment } from '../../globals/moment-sv-locale';\n\ninterface Props {\n    locale: string;\n    //firstDay: moment.Moment;\n    numDays: number;\n    initialStartHour: number;\n    initialEndHour: number;\n    initialZoom: number;\n}\n\ninterface State {\n    firstDay: moment.Moment,\n    startHour: number,\n    endHour: number,\n    zoom: number,\n    calendars: {[calendarId: string]: {\n        calendar: gapi.client.calendar.CalendarListEntry,\n        events: gapi.client.calendar.Event[] }},\n    calendarsBeingLoaded: string[],\n    status: string,\n    error: Error | null \n}\n\nexport class Calendar extends React.Component<Props, State> {\n    gcal: GoogleCalendar;\n\n    constructor (props) {\n        super(props);\n        // Props\n        const firstDay = localMoment().startOf('week').weekday(0);\n        const {\n            initialStartHour,\n            initialEndHour,\n            initialZoom\n        } = this.props;\n        \n        // State\n        this.state = {\n            firstDay: firstDay,\n            startHour: initialStartHour,\n            endHour: initialEndHour,\n            zoom: initialZoom,\n            calendars: {},\n            calendarsBeingLoaded: [],\n            status: 'Loading calendars... (authenticating...)',\n            error: null\n        };\n\n        this.gcal = new GoogleCalendar();\n\n        // Start calling on Google API right away. Store promise in property.\n        this.gcal.ensureInited().then(()=>{\n            return this.loadData(firstDay);\n        }).catch (error => {\n            this.handleError(error);\n        });\n    }\n\n    handleError(error) {\n        if (!error) error = \"Unknown error\";\n        this.setState({error});\n        console.error (error.stack || error); // Keep!\n    }\n\n    loadData(firstDay) {\n        // Props\n        const {numDays} = this.props;\n        \n        this.setState({\n            firstDay,\n            calendars: {},\n            calendarsBeingLoaded: [],\n            error: null,\n            status: 'Loading calendars... (listing...)'\n        });\n\n        // Important to return the Promise so that caller will catch any error.\n        return this.gcal.listCalendars().then(calendars => {\n            // Ignore the \"week numbers\" calendar as we already include week numbers in our view\n            calendars = calendars.filter(cal => shouldIncludeCalendar(cal));\n            //!/Week Numbers/ig.test(c.summary)\n\n            //console.log(calendars.map(c => ({bgColor: c.backgroundColor, primary: c.primary, summary: c.summary, x: c})));\n            // Calendars Successfully listed.\n            this.setState({\n                calendarsBeingLoaded: calendars.map(c=>c.id),\n                status: `Load calendar events...`\n            });\n\n            return Promise.all(calendars.map(calendar => this.gcal.listEvents({\n                calendarId: calendar.id,\n                timeMin: moment(firstDay).startOf('day'),\n                timeMax: moment(firstDay).add(numDays, 'days').endOf('day')\n            }).then(events => {\n                /*if (calendar.description === \"Synchronized\" || calendar.summary === 'schema') {\n                    console.log(events);\n                }*/\n                // Successfully loaded all events from one particular calendar.\n                // Now remove this calendar from 'calendarsBeingLoaded'\n                const calendarsBeingLoaded =\n                    this.state.calendarsBeingLoaded.filter(id => id !== calendar.id);\n\n                // Add the loaded calendar to the state. To do this, first clone it and then set it.\n                // This is needed because it is a sub property. If it was a direct property on this.state\n                // react would automatically do the merge.\n                const calendars = clone(this.state.calendars);\n                // Append the recently loaded calendar and its events\n                calendars[calendar.id] = {calendar, events};\n                /*const ev = events.filter(ev => JSON.stringify(ev).indexOf(\"Hämta post\") !== -1)\n                    .map(ev => ({ev, calendar}));\n                if (ev.length > 0) debugger;*/\n                // Update state accordingly. This will trigger a rendering of the loaded calendar.\n                // TODO: (not nescessarily) Add some sort of debounce / throttling in case multiple calendar events load fast.\n                this.setState({\n                    calendars,\n                    calendarsBeingLoaded,\n                    status: calendarsBeingLoaded.length === 0 ?\n                      `` : // Empty status means everything is done!\n                      `Load calendar events...`\n                });\n            })));\n        });\n    }\n\n    navigateToPreviousWeek() {\n        this.loadData(moment(this.state.firstDay).add(-1, \"week\")).catch(error => {\n            this.handleError(error);\n        });\n    }\n\n    navigateToNextWeek() {\n        this.loadData(moment(this.state.firstDay).add(1, \"week\")).catch(error => {\n            this.handleError(error);\n        });\n    }\n\n    render () {\n        // Props\n        const { numDays, locale } = this.props;\n        \n        // State\n        const {\n            firstDay,\n            startHour,\n            endHour,\n            zoom,\n            calendars,\n            status,\n            error\n        } = this.state;\n\n        const eventSets = Object.keys(calendars)\n            .map(calendarId => calendars[calendarId])\n            .map(({calendar, events}) => {\n                const isSchedule = calendar.summary === 'Skolschema' && calendar.description === \"Synchronized\";\n                const isHoliday = /holiday/.test(calendar.id);\n                const isClassRoom = /classroom/.test(calendar.id);\n\n                const classNames = [];\n                if (calendar.colorId) classNames.push(\"gcal-palette-\" + calendar.colorId);\n                if (isSchedule) classNames.push(\"course-event\");\n                if (isHoliday) classNames.push(\"holiday-event\");\n                // Map Google Calendar events to our own format:\n                return events.map(event => ({\n                    id: event.id,\n                    start: event.start,\n                    end: event.end,\n                    text: event.summary,\n                    location: event.location,\n                    description: event.description,\n                    //bgColor: calendar.backgroundColor,\n                    //fgColor: calendar.foregroundColor,\n                    htmlLink: event.htmlLink,\n                    className: (isSchedule && event.summary ?\n                        classNames.concat(courseNameToCssClass('course-event-', event.summary)) :\n                        classNames).join(\" \")\n                }))\n            });\n                \n        const events = flatten(eventSets);\n\n        // Else, render the WeekView now. Any error should be displayed as red status\n        return <div style={{position: 'relative', top: 0, left: 0}}>\n            <div className=\"btn-toolbar week-navigation\" >\n                {/*<div className=\"btn-group\">\n                    <button className=\"btn\">\n                        {L`Idag`}\n                    </button>\n                </div>*/}\n                <div className=\"btn-group\">\n                    <button className=\"btn\" onClick={()=>this.navigateToPreviousWeek()}>\n                        <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n                    </button>\n                    <button className=\"btn\" onClick={()=>this.navigateToNextWeek()}>\n                        <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\n                    </button>\n                </div>\n                <div className=\"btn-group\">\n                    {L`Vecka ${moment(firstDay).week()}, ${moment(firstDay).year()}`}\n                </div>\n            </div>\n            <WeekView\n                locale={locale}\n                firstDay={firstDay}\n                startHour={startHour}\n                endHour={endHour}\n                numDays={numDays}\n                zoom={zoom}\n                events={events}\n                status={status}\n                error={error}\n            />\n        </div>\n    }\n}\n","/// <reference path=\"../../../typings-gapi/gapi.client.calendar-v3/gapi.client.calendar.d.ts\" />\n\n/* Calendars to show:\n\n    summary: \"Matsedel\",\n    summary: \"Skolschema\",\n    primary: true\n    id.includes('classroom')\n    id.includes('holiday')\n*/\n\n\nexport function shouldIncludeCalendar (cal: gapi.client.calendar.CalendarListEntry) {\n  const summary = cal.summary || \"\";\n  const isPrimary = !!cal.primary;\n  const isClassroomCalendar = /classroom/ig.test(cal.id);\n  const isHolidayCalendar = /holiday/ig.test(cal.id);\n\n  return (\n    isPrimary ||\n    isClassroomCalendar ||\n    isHolidayCalendar ||\n    ///matsedel/ig.test(summary) ||\n    /schema/ig.test(summary)\n  );\n}\n","import * as React from 'react';\n\nexport default function StatusBar ({status, error}) {\n    if (!status && !error) return null;\n    return <div className=\"statusbar\">\n        {error ?\n            <p className=\"error\">{''+error}</p> :\n            <p className=\"status\">{status}</p>}\n    </div>\n}\n","import * as React from 'react';\nimport moment from 'moment';\n\nexport default function TimeLines ({dayStart, dayEnd, zoom}) {\n    const hourPixels = 60 * zoom;\n    const startHour = moment(dayStart).hour();\n    const endHour = moment(dayEnd).hour();\n\n    const hours = [];\n    for (let hour = startHour; hour <= endHour; ++hour) {\n        hours.push(hour);\n    }\n\n    return <div>\n        {hours.map(hour => \n            <div key={hour} className=\"timeline\" style={{\n                width: '100%',\n                boxSizing: 'border-box',\n                margin: `${hourPixels / 2}px 0 0 0`,\n                height: hourPixels / 2\n        }} /> )}\n    </div>;\n}\n","import * as React from 'react';\nimport moment from 'moment';\nimport DayView from './day-view';\nimport HourMarker from './hour-marker';\nimport {capitalizeFirst, clone, L} from '../../utils/utils';\nimport StatusBar from './status-bar';\nimport { StudentCalendarEvent, DayData } from './models';\n\ninterface Props {\n    firstDay: moment.Moment,  // {moment} The day to start with (normally a monday)\n    startHour: number, // {number} The hour to start on\n    endHour: number,   // {number} The hour to end rendering per day\n    numDays: number,   // {number} Number of days, normally 5.\n    events: StudentCalendarEvent[],    // Array of events to display in the week.\n    locale: string,    // Locale to use for showing week days and hour marks.\n    zoom: number,      // {number} Zoom where 1 means that 1 minute = 1 pixel.  \n    status?: string,\n    error?: Error\n}\n\nexport default class WeekView extends React.Component<Props> {\n    render () {\n        // Props:\n        const {\n            firstDay,  // {moment} The day to start with (normally a monday)\n            startHour, // {number} The hour to start on\n            endHour,   // {number} The hour to end rendering per day\n            numDays,   // {number} Number of days, normally 5.\n            events,    // Array of events to display in the week.\n            locale,    // Locale to use for showing week days and hour marks.\n            zoom,      // {number} Zoom where 1 means that 1 minute = 1 pixel.  \n            status,\n            error\n        } = this.props;\n\n        // Prepare DayView datas \n        const dayDatas: DayData[] = [];\n        let day = moment(firstDay);\n        for (let i=0;i<numDays; ++i) {\n            const dayStart = moment(day).hour(startHour);\n            const dayEnd = moment(day).hour(endHour);\n            const dayDate = moment(day).format('YYYY-MM-DD');\n            const isToday = moment(dayStart).startOf(\"day\").valueOf() === moment().startOf(\"day\").valueOf();\n            dayDatas.push({\n                name: capitalizeFirst(dayStart.toDate().toLocaleString(locale, {\n                    weekday: 'long',\n                    day:'numeric',\n                    month: 'short'})),\n                dayStart,\n                dayEnd,\n                isToday,\n                events: events.filter(event =>\n                    event.start && event.end && event.start.dateTime && event.end.dateTime &&\n                    (moment(event.start.dateTime).isBetween(dayStart, dayEnd) ||\n                     moment(event.end.dateTime).isBetween(dayStart, dayEnd)))\n                     // Change start / end to directly point to the dateTime\n                     .map(event => clone(event, {startMoment: moment(event.start.dateTime), endMoment: moment(event.end.dateTime)}))\n                     .sort((a,b) => a.startMoment.valueOf > b.startMoment.valueOf ? 1 : a.startMoment < b.startMoment ? -1 : 0),\n                fullDayEvents: events.filter(event =>\n                    // Verify that it is a full-day-event\n                    event.start && event.end && event.start.date && event.end.date &&\n                    // Verify it applies to current day\n                    (event.start.date <= dayDate && event.end.date > dayDate)) \n                     // Change start / end to directly point to the date object\n                    .map(event => clone(event, {\n                        startDate: event.start.date,\n                        endDate: event.end.date}))\n            });\n            day = moment(day) // clone it\n                .add(1, 'days'); // Add another day\n        }\n\n        // Render\n        return <div className=\"vemendo-weekview\">\n          <table><tbody>\n            <tr>\n                <td style={{border: 0}}></td>\n                {dayDatas.map(d => <td key={d.dayStart.toISOString()} className={d.isToday ? \"today\" : null}>\n                    <p className=\"dayname\">{d.name}</p>\n                </td>)}\n            </tr><tr>\n                <td style={{border: 0}}><p className=\"week-number\">{L`V${moment(firstDay).week()}`}</p></td>\n                {dayDatas.map(day =>\n                    <td key={day.dayStart.toISOString()} className={day.isToday ? \"today\" : null}>\n                        {day.fullDayEvents.map(({id, text, location, description, htmlLink, className}) =>\n                            <div key={id} className={\"dayviewevent full-day \" + className}\n                                title={`${text}` + (location ?\n                                    \"\\n\" + L`Plats: ${location}` :\n                                    \"\") +\n                                    (description ?\n                                        \"\\n\" + description :\n                                        \"\")}\n                            >\n                                <a className=\"event-title\" href={htmlLink} target=\"calendar-event\">\n                                    {text}\n                                </a>\n                                {location &&\n                                    <p className=\"event-location\">\n                                        {location}\n                                    </p>\n                                }\n                                {description &&\n                                    <p className=\"event-description\">\n                                        {description}\n                                    </p>                                \n                                }\n                            </div>\n                        )}\n                    </td>\n                )}\n            </tr><tr>\n            <td style={{border: 0}}>\n                <HourMarker\n                    startHour={startHour}\n                    endHour={endHour}\n                    locale={locale}\n                    zoom={zoom} />\n            </td>\n                {dayDatas.map(day => <td key={day.dayStart.toISOString()} className={day.isToday ? \"today\" : null}><DayView\n                    key={day.dayStart.toISOString()}\n                    dayStart={day.dayStart}\n                    dayEnd={day.dayEnd}\n                    events={day.events}\n                    locale={locale}\n                    zoom={zoom}\n                    isLastCall={status == ''} /> </td>)}\n            </tr>\n            {\n                (status || error) && (!error || error.name !== \"UnauthorizedError\") &&\n                    //\n                    // Show status / error\n                    //\n                    <tr><td style={{border: 0}}></td><td style={{border: 0}} colSpan={numDays}>\n                        <StatusBar status={status} error={error} />\n                    </td></tr>\n            }\n          </tbody></table>\n        </div>\n    }\n}","import * as React from 'react';\nimport { L } from \"../../../utils/utils\";\n\ninterface Props {\n  onClick,\n  className?,\n  style?,\n  title?\n};\n\nexport const RemoveItem = ({ onClick, className, style, title }: Props) =>\n\n  <div\n    title={title || L`Radera`}\n    className={\"removeItem \" + (className || \"\")}\n    onClick={onClick} style={style} />\n","import * as React from 'react';\n\nexport const Spinner = ()=> <span><i className=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>&nbsp;</span>;\n","import * as React from 'react';\n\ninterface Props {\n  visible: boolean;\n  text: string;\n  className?: string;\n  onConfirm: ()=>void;\n  onCancel: ()=>void;\n}\n\nexport function Confirmation (props: Props) {\n  return <div\n    className={`confirmation-box ${props.className}${props.visible ? \" visible\" : \"\"}`}>\n    <p>{props.text}</p>\n    <button onClick={()=>props.onConfirm()}>OK</button>\n    <button onClick={()=>props.onCancel()}>Avbryt</button>\n  </div>;\n}\n","import * as React from 'react';\nimport { LearningModuleTask, TaskList } from './task-list';\n\ninterface Props {\n  commonTasks: LearningModuleTask[]\n  learningGoals: LearningGoal[]\n}\n\nexport interface LearningGoal {\n  name: string;\n  learningTasks: LearningModuleTask[];\n}\n\nexport class LearningGoalsList extends React.Component<Props> {\n  render() {\n    const {commonTasks, learningGoals} = this.props;\n    return <div>{learningGoals.map(lg => <div key={lg.name}>\n      <h5>{lg.name}</h5>\n      <TaskList learningTasks={lg.learningTasks} />\n    </div>)}\n    {commonTasks.length > 0 && <div>\n      {learningGoals.length > 0 && <h5>Övergripande</h5>}\n      <TaskList learningTasks={commonTasks} />\n    </div>}\n    </div>;\n  }\n}","import * as React from 'react';\nimport { Course, CourseModule, Task, UserTask } from 'kedbackend/models';\nimport env from '../../../globals/KED.env';\nimport { WeekPlannerPersistedState } from \"../../weekplanner/weekplanner-persisted-state\";\nimport moment from 'moment';\nimport { createUUID, BatchRunner, DocumentAccess } from 'kedbackend/client';\nimport { userTasksRepo } from '../../../repos/user-tasks-repo';\nimport { arrayToMap, L } from '../../../utils/utils';\nimport { Spinner } from '../../course-builder/sub-components/spinner';\nimport { Confirmation } from './confirmation';\n\ninterface Props {\n  learningTasks: LearningModuleTask[]\n}\n\ninterface State {\n  weekDate: number;\n  userTasks: UserTask[];\n  confirmations: string[];\n}\n\nexport interface LearningModuleTask {\n  id: string;\n  name: string;\n  url: string;\n  /** courseName\n   * For KG: courseName\n   * For KS: Subject name\n   */\n  courseName: string;\n  /** learningGoal\n   * For KG: module name or learning goal of the task\n   * For KS/step-course: course name\n   * For KS/theme-course: learning goal\n   */\n  learningGoal: string;\n  /** Step\n   * Only present in KS/step-course\n   */\n  step?: number;\n  /** task\n   * Only for courses built by coursebuilder\n   */\n  task?: Task;\n  /** course\n   * Only for courses built by coursebuilder\n   */\n  course?: Course;\n}\n\nexport class TaskList extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTasks: [],\n      weekDate: Date.now(),\n      confirmations: []\n    }\n    this.onChange = this.onChange.bind(this);    \n  }\n\n  onChange (userTasks: UserTask[], persisted: WeekPlannerPersistedState) {\n    if (persisted.weekDate !== this.state.weekDate) {\n      this.setState({\n        confirmations: []\n      })\n    }\n    this.setState({\n      userTasks,\n      weekDate: persisted.weekDate\n    });\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onChange);\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onChange);\n  }\n\n  async toggleTask (learningTask: LearningModuleTask) {\n    const userTasks = this.state.userTasks.filter(ut => {\n      return learningTask.task ?\n        ut.task && ut.task.some(t => t.id === learningTask.id) :\n        ut.siteVisionPageId === learningTask.id;\n    });\n    const {weekDate} = this.state;\n    \n    if (userTasks.length === 0) {\n      // No task matches this learningModuleTask - not present in weekplanner.\n      let latestTimeStamp = Math.max.apply(\n        Math.max,\n        [weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n      const userTask: UserTask = {\n        id: createUUID(),\n        courseName: learningTask.courseName,\n        dateTime: latestTimeStamp + 2000,\n        learningGoal: learningTask.learningGoal,\n        name: learningTask.name,\n        url: learningTask.url,\n        acl: [\n          // Default ACL: Let user self have full control over this item:\n          new DocumentAccess(\"email\", env.currentUser.mail, \"S\"),\n          // Additional ACL: Let employees on same school have read access to it.\n          // This currently only applies to tasks that refer to course tasks (not custom tasks!)\n          new DocumentAccess(\"schoolRole\", `${env.currentUser.school}/EMPLOYEE`, \"R\")\n        ].map(ac => ac.toString())\n      };\n      if (learningTask.task && learningTask.task.deadline) {\n        userTask.deadline = learningTask.task.deadline;\n      }\n      if (learningTask.task && learningTask.course) {\n        userTask.task = [learningTask.task];\n        userTask.course = [learningTask.course];\n      } else {\n        userTask.siteVisionPageId = learningTask.id;\n      }\n      if (learningTask.step) {\n        userTask.step = learningTask.step;\n      }\n      await Promise.all([\n        userTasksRepo.setWeekPlannerBoxOpen(learningTask.courseName, true),\n        userTasksRepo.insert([userTask])]);\n    } else {\n      // Already present in weekplanner. It's time to delete those that matched us.\n      await userTasksRepo.delete(userTasks.map(t => t.id));\n    }\n    \n  }\n\n  render() {\n    const {learningTasks} = this.props;\n    const userTasks = arrayToMap(this.state.userTasks, ut => ut.task && ut.task.length > 0 ?\n      ut.task.map(t => t.id)[0] : // course-builder tasks looked up by id\n      ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks\n      ut.url);\n    const {confirmations} = this.state;\n    const weekPlannerWeek = moment(this.state.weekDate).week();\n    const currentWeek = moment().week();\n    const forWeekString = weekPlannerWeek === currentWeek ? \"\" :\n    weekPlannerWeek === currentWeek + 1 ? L`för nästa vecka (v${weekPlannerWeek})` :\n    weekPlannerWeek === currentWeek - 1 ? L`för förra veckan (v${weekPlannerWeek})` :\n    L`för vecka ${weekPlannerWeek}`;\n\n    return <div className=\"taskContainer\">\n      {learningTasks.map((learningTask, idx) => {\n        const taskLookupId = learningTask.id;\n        const userTask = userTasks[taskLookupId] || {$meta: 'deleted'} as Partial<UserTask>; // No exist = $meta: 'deleted'\n        const isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';\n        const selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';\n        const describedAction = selected ?\n                  L`Ta bort uppgiften från egen veckoplanering ${forWeekString}` :\n                  L`Lägg till uppgiften i egen veckoplanering ${forWeekString}`;\n        const confirmationVisible =\n          confirmations.some(tid => taskLookupId === tid);\n\n        return <div key={learningTask.id}><div key={taskLookupId} className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n              <div\n                className={`selectedBox${selected ? ' selected' : ''}`}\n                style={isWorking ? {opacity: 0.5}: {}}\n                onClick={()=>!isWorking && weekPlannerWeek === currentWeek ?\n                  this.toggleTask(learningTask) :\n                  confirmationVisible ? \n                    this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)}) :\n                    this.setState({confirmations: [...confirmations].concat(taskLookupId)})}\n                title={describedAction}>\n              </div>\n          </div>\n          <div className=\"horizontalItem top\">\n            <a href={learningTask.url}>{learningTask.name}</a>\n          </div>\n        </div>\n        <Confirmation\n            visible={confirmationVisible}\n            text={describedAction}\n            onConfirm={()=>{\n              this.toggleTask(learningTask);\n              this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)});\n            }}\n            onCancel={()=>{\n              this.setState({confirmations: confirmations.filter(tid => tid !== taskLookupId)});\n            }} />\n        </div>\n        }\n      )}\n    </div>\n  }\n}\n","import * as React from 'react';\nimport env from '../../globals/KED.env';\nimport { EDSCourse, EDSStudyPlan } from '../../contracts/eds';\nimport { EDSPeriod } from '../../apis/edsclient';\nimport { getSchoolMoment, getFirstAndLastWeekOfTerm, getTermStartAndEnd } from '../../utils/school-moment';\nimport moment from 'moment';\nimport { Spinner } from '../course-builder/sub-components/spinner';\nimport { KGTermPlannerWeekPlan, KGTermPlannerWeekPlanEntry } from 'kedbackend/models';\nimport { Dialogs } from '../utility-components/dialogs';\nimport { WeekNoteDialog } from './week-note-dialog';\nimport { termPlannerRepo } from '../../repos/kg-termplanner-repo';\nimport { distinct } from '../../utils/utils';\nimport { KEDWeek } from '../../utils/weekutil';\n\ninterface Props {\n}\n\ninterface State {\n  now: Date,\n  courses: EDSCourse[];\n  weekPlans: KGTermPlannerWeekPlan[];\n  isLoadingCourses: boolean;\n  isLoadingWeekPlans: boolean;\n  dialogs: any[];\n  //goals: EDSStudyPlan[];\n}\n\nexport class KGTermPlanner extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const now = new Date();\n    this.state = {\n      now,\n      courses: [],\n      weekPlans: [],\n      isLoadingCourses: true,\n      isLoadingWeekPlans: true,\n      dialogs: []\n      //goals: []\n    }\n    this.updateWeekPlans = this.updateWeekPlans.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadEDSCourses();\n    termPlannerRepo.mem.subscribe(this.updateWeekPlans);\n  }\n\n  componentWillUnmount() {\n    termPlannerRepo.mem.unsubscribe(this.updateWeekPlans);\n  }\n\n  updateWeekPlans(weekPlans: KGTermPlannerWeekPlan[]) {\n    this.setState({weekPlans, isLoadingWeekPlans: false});\n  }\n\n  async loadEDSCourses() {\n    try {\n      const schoolMoment = getSchoolMoment(moment(this.state.now));\n      const periodName = new EDSPeriod(schoolMoment).period;\n      const courses = distinct(await env.edsClient.getActiveCourses({periodName}), course => course.name);\n      //console.log(\"courses:\" + JSON.stringify(courses, null, 2));\n      this.setState({ courses });\n    } finally {\n      this.setState({ isLoadingCourses: false });\n    }\n  }\n\n  onNoteClick(weekNumber: number, weekDate: number, courseName: string, weekPlan?: KGTermPlannerWeekPlan, note?: KGTermPlannerWeekPlanEntry) {\n    this.openDialog(<WeekNoteDialog\n      weekNumber={weekNumber}\n      weekDate={weekDate}\n      courseName={courseName}\n      weekPlan={weekPlan}\n      note={note}\n      closeDialog={()=>this.closeDialog()} />);\n  }\n\n  openDialog(dialog) {\n    this.setState({ dialogs: [...this.state.dialogs, dialog] });\n  }\n\n  closeDialog() {\n    this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });\n  }\n\n  render() {\n    const { courses, now, isLoadingCourses, isLoadingWeekPlans, weekPlans, dialogs } = this.state;\n    const isLoading = isLoadingCourses || isLoadingWeekPlans;\n\n    const weeks: { weekNumber: number, weekDate: number, weekPlan: KGTermPlannerWeekPlan }[] = [];\n    const schoolMoment = getSchoolMoment(moment(now));\n    const [termStart, termEnd] = getTermStartAndEnd(moment(now));\n    const [firstWeek, lastWeek] = getFirstAndLastWeekOfTerm(schoolMoment.term);\n\n    for (let weekMoment = termStart.clone().startOf('week');\n      weekMoment.valueOf() < termEnd.valueOf();\n      weekMoment = weekMoment.clone().add(1, 'week').startOf('week'))\n    {\n      const weekNumber = weekMoment.week();\n      const kedWeek = KEDWeek(weekMoment.year(), weekNumber);\n      if (weekNumber >= firstWeek && weekNumber <= lastWeek) {\n        const weekPlan = weekPlans.filter(wp =>\n          wp.dateTime >= kedWeek.notBefore &&\n          wp.dateTime <= kedWeek.notAfter)[0];\n\n        weeks.push({\n          weekNumber,\n          weekDate: weekMoment.clone().startOf('week').valueOf(),\n          weekPlan\n        });\n      }\n    }\n\n    return <div className=\"ked_boxed termPlanContainer\">\n      <h4>\n        Terminsplanering\n       </h4>\n      <hr />\n      {isLoading ?\n        <Spinner /> : courses.length === 0 ? <div>\n          Terminsplaneraren aktiveras när du skrivits in på dina kurser\n          </div> : <table className=\"smallFont\">\n            <thead>\n              <tr>\n                <th className=\"nowrap\">Vecka</th>\n                {/*goals.map(({courseUnitId, courseUnitName}) =>\n                  <th key={courseUnitId} className=\"termCourseHeader\">\n                    <div className=\"termCourseText\">{courseUnitName}</div></th>)*/}\n                {\n                  courses.map((c, idx) => <th key={idx} className=\"termCourseHeader\">\n                    <div className=\"termCourseText\">{c.name}</div></th>)\n                }\n              </tr>\n            </thead>\n            <tbody>\n              {weeks.map((w, idx) => \n                <tr key={idx} className={idx % 2 && 'tableOdd'}>\n                  <td>{w.weekNumber}</td>\n                  {courses.map((c,idx) => {\n                    const note = w.weekPlan && w.weekPlan.plans[c.name];\n                    return <td\n                      key={idx}\n                      className=\"courseNote\"\n                      title={note && note.description}\n                      onClick={()=>this.onNoteClick(w.weekNumber, w.weekDate, c.name, w.weekPlan, note)}>\n                      <div\n                        className={`note${note ? ` noted note-color-${note.color}` : ''}`}\n                      />\n                    </td>}\n                  )}\n                </tr>\n              )}\n            </tbody>\n            <tfoot>\n              <tr>\n                <th key=\"points\">Poäng</th>\n                {courses.map((c, idx) => <th key={idx} className=\"stepCell\">{c.credits}</th>)}\n              </tr>\n              <tr>\n                <th>Betygsmål</th>\n                {/*goals.map(g =>\n                <th className=\"stepCell\">{g.periodGoals.filter(pg => pg.periodName ===  period.period)\n                  .map(pg=>pg.gradeName)[0] || g.finalGoalGrade}</th>)*/}\n                {courses.map((c, idx) =>\n                  <th key={idx} className=\"stepCell\">{c.periodGoalGrade}</th>)}\n              </tr>\n            </tfoot>\n          </table>}\n          <Dialogs\n        dialogs={dialogs}\n        popDialog={() => this.setState({ dialogs: dialogs.slice(0, dialogs.length - 1) })} />\n          \n    </div>\n  }\n}","import * as React from 'react';\nimport { KGTermPlannerWeekPlan, KGTermPlannerWeekPlanEntry } from 'kedbackend/models';\nimport {termPlannerRepo} from '../../repos/kg-termplanner-repo';\nimport { createUUID } from 'kedbackend/client';\n\ninterface Props {\n  weekNumber: number;\n  weekDate: number;\n  courseName: string;\n  weekPlan?: KGTermPlannerWeekPlan;\n  note?: KGTermPlannerWeekPlanEntry;\n  closeDialog: ()=>void;\n}\n\ninterface State {\n  description: string;\n  color: string;\n}\n\nexport class WeekNoteDialog extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      description: props.note ? props.note.description : '',\n      color: props.note ? props.note.color : 'yellow'\n    }\n  }\n\n  async delete() {\n    const { weekNumber, weekDate, courseName, weekPlan, note, closeDialog } = this.props;\n    const { description, color} = this.state;\n\n    closeDialog();\n\n    if (Object.keys(weekPlan.plans).length === 1) {\n      await termPlannerRepo.delete([weekPlan.id]);\n    } else {\n      await termPlannerRepo.update([weekPlan], wp => {\n        delete wp.plans[courseName]\n      });\n    }\n  }\n\n  async save() {\n    const { weekNumber, weekDate, courseName, weekPlan, note, closeDialog } = this.props;\n    const { description, color} = this.state;\n\n    closeDialog();\n\n    if (weekPlan) {\n      await termPlannerRepo.update([weekPlan], wp => wp.plans[courseName] = {description, color});\n    } else {\n      const plans = {};\n      plans[courseName] = {description, color};\n      await termPlannerRepo.insert([{\n        id: createUUID(),\n        dateTime: weekDate,\n        plans\n      }]);\n    }\n  }\n\n  render() {\n    const { weekNumber, courseName, weekPlan, note } = this.props;\n    const { description, color } = this.state;\n    return <div>\n      <div>\n        <h2>Händelse för vecka {weekNumber} och {courseName}</h2>\n        <hr />\n        <div className=\"align-table\">\n          <div>Beskrivning:</div>\n          <div className=\"fullWidth\">\n            <textarea autoFocus value={description} onChange={ev => this.setState({description: ev.target.value})} />\n          </div>\n        </div>\n        <div className=\"align-table\">\n          <div>Färg:</div>\n          <div>\n            <select value={color} onChange={ev => this.setState({color: ev.target.value})}>\n              <option value=\"yellow\">Gul</option>\n              <option value=\"yellowLight\">Ljusgul</option>\n              <option value=\"cyan\">Grön</option>\n              <option value=\"cyanLight\">Ljusgrön</option>\n              <option value=\"purple\">Lila</option>\n              <option value=\"purpleLight\">Ljuslila</option>\n              <option value=\"red\">Röd</option>\n              <option value=\"redLight\">Rosa</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div>\n        <button tabIndex={1} className=\"btn btn-large btn-default\" onClick={()=>this.save()}>Spara</button>\n        {note && <a tabIndex={1} className=\"btn btn-warning btn-large pull-right\" onClick={()=>this.delete()}>Ta bort</a>}\n      </div>\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { EDSStudentFutureAbility } from '../../contracts/eds';\nimport env from '../../globals/KED.env';\nimport { flatten } from '../../utils/utils';\nimport { FutureAbilitiesViewModel } from './future-abilities-viewmodel';\n\ninterface State {\n  loading: boolean,\n  data: EDSStudentFutureAbility[],\n  error: string | null\n}\n\nexport class FutureAbilitiesTable extends React.Component<{}, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      data: [],\n      error: null\n    };\n  }\n\n  componentWillMount() {\n    this.load();\n  }\n\n  async load() {\n    this.setState({ loading: true });\n    try {\n      const data = await env.edsClient.getStudentFutureAbilities();\n      this.setState({ data });\n    } catch (error) {\n      this.setState({ error });\n    }\n    this.setState({ loading: false });\n  }\n\n  render() {\n    const viewModel = new FutureAbilitiesViewModel (this.state.data);\n    const {columnHeaders, vtHts, capabRows} = viewModel;\n\n    return <div>\n      <h5>Framtidsförmågor</h5>\n      <div className=\"partialEditStudyPlanViewMode\">\n        <table style={{ width: '100%' }} className=\"smallFont\">\n          <thead>\n            <tr>{columnHeaders.map(({ name, type }, i) =>\n              type === 'header' ?\n                <th key={i} rowSpan={2}>{name}</th> :\n                <th key={i} colSpan={2}>{name}</th>)}</tr>\n            <tr className=\"header\">\n              {vtHts.map((vtHt, i) => <th key={i}>{vtHt}</th>)}\n            </tr>\n          </thead>\n          <tbody>\n            {capabRows.map((row, i) => <tr key={i} className={(Math.floor(i/3) % 2) && 'tableOdd'}>\n              {row.map((col, i) => col.type === 'ability' ?\n                <td key={i} rowSpan={3} className=\"goalsSubject\">{col.name}</td> :\n                col.type === 'capability' ?\n                  <td key={i} className=\"goalsSubject\">{col.name}</td> :\n                  col.selected ?\n                    <td key={i} className=\"edsSelected\"><div className=\"markedItem\"></div></td> :\n                    <td key={i} />)}\n            </tr>)}\n          </tbody>\n        </table>\n      </div>\n    </div>;\n  }\n}","import { EDSStudentFutureAbility } from '../../contracts/eds';\nimport { flatten } from '../../utils/utils';\n\ntype AbilityCell = { type: 'ability', name: string };\ntype CapabCell = { type: 'capability', name: string };\ntype TermCell = { type: 'term', selected: boolean };\ntype Cell = AbilityCell | CapabCell | TermCell;\n\nexport class FutureAbilitiesViewModel {\n  columnHeaders: {name: string, type: string}[];\n  vtHts: string[];\n  capabRows: Cell[][];\n\n  constructor(data: EDSStudentFutureAbility[]) {\n    // Will build the total years\n    const formNames: {[name: string]: true} = {};\n    data.forEach(a => a.capabilities.forEach(c => formNames[c.formName] = true));\n    const years = Object.keys(formNames);\n    \n    // columnHeaders\n    this.columnHeaders = [{\n      name: \"Framtidsförmåga\",\n      type: \"header\"\n    }, {\n      name: \"Område\",\n      type: \"header\"\n    }].concat(years.map(year => ({\n      name: year,\n      type: 'year'\n    })));\n\n    // vtHts\n    this.vtHts = flatten(years.map(year => [\"HT\", \"VT\"]));\n\n    // cababRows\n    const rows: Cell[][] = [];\n    data.forEach(a => {\n      let row: Cell[] = [{type: 'ability', name: a.abilityName}];\n      const addedCapabs : {[name: string]: true} = {};\n      a.capabilities.forEach(c => {\n        const cells: TermCell[] = [\n          {type: 'term', selected: c.htHasValue !== false},\n          {type: 'term', selected: c.vtHasValue !== false}\n        ];\n        //if (c.htHasValue || c.vtHasValue) debugger;\n\n        if (!addedCapabs[c.capabilityName]) {\n          //if (!isFirstCapability) rows.push(row);\n          if (row.length > 1) {\n            rows.push(row);\n            row = [];\n          }\n          addedCapabs[c.capabilityName] = true;\n          row.push({type: 'capability', name: c.capabilityName});\n          cells.forEach(cell => row.push(cell));\n        } else if (row) {\n          //addedCapabs[c.capabilityName].concat(cells);\n          cells.forEach(cell => row.push(cell));\n        }\n      });\n      if (row) rows.push(row);\n    });\n\n    this.capabRows = rows;\n  }\n}","import {EDSStudyPlan} from '../../contracts/eds';\nimport { EDSPeriod } from '../../apis/edsclient';\n\nexport class ViewModel {\n    subjects: Array<{\n        name: string;\n        atGoal: string;\n        stGoal: string;\n        finalGoal: string;\n        strategies: string;\n    }>;\n\n    constructor (studyPlans: EDSStudyPlan[]) {\n        this.subjects = studyPlans.map(sp => {\n            const periodGoals = sp.periodGoals\n                .map(g => ({period: new EDSPeriod(g.periodName), goal: g.gradeName}));\n            return {\n                name: sp.courseUnitName,\n                atGoal: periodGoals.filter (({period})=> period.term === 'AT').map(({goal}) => goal)[0],\n                stGoal: periodGoals.filter (({period})=> period.term === 'ST').map(({goal}) => goal)[0],\n                finalGoal: sp.finalGoalGrade,\n                strategies: sp.strategyText\n            };\n        });\n    }\n}\n","import * as React from 'react';\nimport { L } from '../../utils/utils';\nimport { ViewModel } from './goals-viewmodel';\nimport env from '../../globals/KED.env';\nimport { EDSStudyPlan } from '../../contracts/eds';\nimport { FutureAbilitiesTable } from './future-abilities-table';\n\ninterface State {\n  loadingStudyPlans: boolean,\n  studyPlans: EDSStudyPlan[],\n  error: string | null\n}\n\nexport class KSGoals extends React.Component<{}, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingStudyPlans: false,\n      studyPlans: [],\n      error: null\n    }\n  }\n\n  componentWillMount() {\n    this.load();\n  }\n\n  async load() {\n    this.setState({loadingStudyPlans: true});\n    try {\n      const studyPlans = await env.edsClient.getStudentGoals();\n      this.setState({studyPlans});\n    } catch (error) {\n      this.setState({error});\n    }\n    this.setState({loadingStudyPlans: false});\n  }\n\n  render() {\n    const viewModel = new ViewModel(this.state.studyPlans);\n    const showTermGoals =\n       (''+env.currentUser.schoolType).toLowerCase() !== \"gymnasium\";\n\n    return <div className=\"ked_boxed\">\n      <h4>\n        {L`Mål`}\n      </h4>\n      <hr />\n      <table className=\"smallFont\">\n        <thead>\n          <tr>\n            <th>{L`Ämne`}</th>\n            {showTermGoals && <th>{L`HT`}</th>}\n            {showTermGoals && <th>{L`VT`}</th>}\n            <th>{L`Slutmål`}</th>\n            <th>{L`Strategier`}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {viewModel.subjects.map((s, i) =>\n          <tr key={s.name} className={i % 2 && \"tableOdd\"}>\n            <td className=\"goalsSubject\">{s.name}</td>\n            {showTermGoals && <td className=\"goalsTerm\">{s.atGoal}</td>}\n            {showTermGoals && <td className=\"goalsTerm\">{s.stGoal}</td>}\n            <td className=\"goalsEnd\">{s.finalGoal}</td>\n            <td>{s.strategies}</td>\n          </tr>\n          )}\n        </tbody></table>\n        <div className=\"divider\" />\n        <FutureAbilitiesTable />\n    </div>\n  }\n}\n","import {Term} from '../../contracts/ked-models';\nimport {EDSCourse} from '../../contracts/eds';\n\nexport function getFirstAndLastWeek(term: Term) {\n  return term === 'AT' ?\n    [33, 50] :  // This is a guess! Need data! Should be possible to get from skola24?\n    [2, 23];    // This is a guess! Need data!\n}\n\nexport const LAST_STEP_SPRING = 28; // Week 28 is in summer. Use it as placeholder for \"last step\"\nexport const LAST_STEP_AUTUMN = 52; // Week must be valid. Use it as placeholder for \"last step\"\n\n/**\n * Note that this function is tightly coupled to the swedish school.\n */\nexport function findCourseFromColumnHeader(\n  courses: EDSCourse[],\n  columnHeader: string) : EDSCourse | null\n{\n  switch (columnHeader) {\n    case 'M.spr': return courses\n      .filter(course => course.shortName !== 'MA' && course.shortName.startsWith('M'))[0] || null;\n    case 'Ma': return courses.filter(c => c.shortName === \"MA\")[0] || null;\n    case 'Sv/SvA': return courses.filter(c => c.shortName.startsWith(\"SV\"))[0] || null;\n    case 'Eng': return courses.filter(c => c.shortName === \"EN\")[0] || null;\n  }\n  return null;\n}\n\n/**\n * Note that this function is tightly coupled to the swedish school.\n */\nexport function getColumnHeaderFromCourse(course: EDSCourse) : string\n{\n  const shortName = course.shortName;\n  if (shortName === \"MA\") return 'Ma';\n  if (shortName === \"EN\") return 'Eng';\n  if (shortName.startsWith(\"SV\")) return 'Sv/SvA';\n  if (shortName.startsWith(\"M\")) return 'M.spr';\n  return null;\n}\n","import * as React from 'react';\nimport { SchoolTerm } from '../../utils/school-term';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport { getSchoolMoment } from '../../utils/school-moment';\nimport { L } from '../../utils/utils';\nimport {Term} from '../../contracts/ked-models';\nimport {EDSPeriod} from '../../apis/edsclient';\nimport {EDSCourse} from '../../contracts/eds';\nimport {getFirstAndLastWeek, LAST_STEP_AUTUMN, LAST_STEP_SPRING} from './termplanner-utils';\nimport {ViewModel} from './viewmodel';\nimport {RenameableText} from '../utility-components/renameable-text';\nimport {tableWalk} from '../../utils/table-walk';\nimport env from '../../globals/KED.env';\nimport { KSTermPlannerWeekPlan } from 'kedbackend/models';\nimport { termPlannerRepoKS } from '../../repos/ks-termplanner-repo';\n\ninterface Props {\n  initialDate: Date;\n  locale: string;\n}\n\ninterface State {\n  schoolTerm: SchoolTerm;\n  weekPlans: KSTermPlannerWeekPlan[];\n  activeCourses: EDSCourse[];\n  loadingWeekPlans: boolean;\n  loadingActiveCourses: boolean;\n  error: Error | null;\n}\n\n\nexport class KSTermPlanner extends React.Component<Props,State> {\n  table: HTMLTableElement;\n  flowId: number;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      schoolTerm: new SchoolTerm(props.initialDate),\n      activeCourses: [],\n      weekPlans: [],\n      error: null,\n      loadingActiveCourses: false,\n      loadingWeekPlans: false\n    }\n    this.flowId = 1;\n    this.updateWeekPlans = this.updateWeekPlans.bind(this);\n  }\n\n  componentWillMount() {\n    this.load(this.state.schoolTerm);\n  }\n\n  componentDidMount() {\n    tableWalk($(this.table));\n    termPlannerRepoKS.mem.subscribe(this.updateWeekPlans);\n  }\n\n  componentWillUnmount() {\n    termPlannerRepoKS.mem.unsubscribe(this.updateWeekPlans);\n  }  \n\n  updateWeekPlans(weekPlans: KSTermPlannerWeekPlan[]) {\n    this.setState({weekPlans, loadingWeekPlans: false});\n  }\n\n  load(schoolTerm: SchoolTerm) {\n    const flowId = ++this.flowId;\n    this.setState({\n      schoolTerm,\n      //loadingWeekPlans: true,\n      loadingActiveCourses: true\n    });\n    /*this.loadWeekPlans(schoolTerm).then(weekPlans => {\n      if (this.flowId === flowId) {\n        this.setState({weekPlans, loadingWeekPlans: false});\n      }\n    }).catch(error => {\n      if (this.flowId === flowId) {\n        this.setState({loadingWeekPlans: false, error});  \n      }\n    });*/\n    this.loadActiveCourses(schoolTerm).then(activeCourses => {\n      if (this.flowId === flowId) {\n        this.setState({activeCourses, loadingActiveCourses: false});\n      }\n    }).catch(error => {\n      if (this.flowId === flowId) {\n        this.setState({loadingActiveCourses: false, error});  \n      }\n    });\n  }\n\n  async loadActiveCourses(schoolTerm: SchoolTerm) {\n    const periodName = new EDSPeriod(schoolTerm).period;\n    const activeCourses = await env.edsClient.getActiveCourses({periodName});\n    return activeCourses;\n  }\n\n  async updateCell (weekPlan: KSTermPlannerWeekPlan, columnName: string, newValue: string) {\n    try {\n      weekPlan.cellValues[columnName] = newValue;\n      return await termPlannerRepoKS.upsert (weekPlan, wp => wp.cellValues[columnName] = newValue);\n    } catch (error) {\n      console.error(error.stack || error);\n      this.setState({error: L`För tillfället problem att spara data. Dina ändringar sparades inte.`});\n    }\n  }\n\n  render() {\n    const model = new ViewModel(\n      this.state.weekPlans,\n      this.state.activeCourses);\n\n    const {completedSteps, lastSteps, termGoals, weekPlans} = model;\n    const courseColumns = [\"M.spr\", \"Ma\", \"Sv/SvA\", \"Eng\"];\n    const lastTrDatas = [];\n\n    return <div className={\n        \"termplanner\" + \n        (this.state.loadingWeekPlans ? \" loading-weekplans\" : \"\") +\n        (this.state.loadingActiveCourses ? \" loading-courses\" : \"\")\n      }>\n      <div className=\"ked_boxed\">\n        <div className=\"weekSelect\">\n          <div className=\"horizontalItem\">\n            <p>{this.state.schoolTerm.toLocaleString([this.props.locale], true)}</p>\n          </div>\n          <div className=\"horizontalItem\">\n            <div className=\"btn-group\">\n              <button className=\"btn\" onClick={() => {\n                  this.load(this.state.schoolTerm.prevTerm());\n                  termPlannerRepoKS.prevTerm();\n              }\n              }>\n                <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n              </button>\n              <button className=\"btn\" onClick={() => {\n                this.load(this.state.schoolTerm.nextTerm())\n                termPlannerRepoKS.nextTerm();\n              }\n              }>\n                <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <h4>\n          {L`Terminsplanering`}\n        </h4>\n        <hr />\n        <table className=\"smallFont termplanner-table\" ref={table => this.table = table} style={{\n        }}>\n          <thead>\n            <tr>\n              <th className=\"nowrap\">{L`Vecka`}</th>\n              <th className=\"nowrap\">{L`M.spr`}</th>\n              <th className=\"nowrap\">{L`Ma`}</th>\n              <th className=\"nowrap\">{L`Sv/SvA`}</th>\n              <th className=\"nowrap\">{L`Eng`}</th>\n              <th className=\"nowrap\">{L`Kurs`}</th>\n              <th>{L`Kommentar`}</th></tr>\n          </thead>\n          <tbody>\n            {model.weekPlans.map((weekPlan, i) => {\n              const {cellValues, dateTime, weekNumber} = weekPlan;\n              const week = weekNumber;\n              let rtxts = [];\n              return <tr key={model.year + ':' + week} className={i % 2 ? \"tableOdd\" : \"\"}>\n              <td>{week}</td>\n              <td className={\"stepCell\" + (completedSteps[\"M.spr\" + cellValues[\"M.spr\"]] ? \" completedStep\" : \"\")}\n                onClick={()=>rtxts[0].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  tag=\"input\"\n                  text={cellValues[\"M.spr\"]}\n                  onChange={this.updateCell.bind(this, weekPlan, \"M.spr\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </td>\n              <td className={\"stepCell\" + (completedSteps[\"Ma\" + cellValues[\"Ma\"]] ? \" completedStep\" : \"\")}\n                onClick={()=>rtxts[1].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  text={cellValues[\"Ma\"]}\n                  onChange={this.updateCell.bind(this, weekPlan, \"Ma\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </td>\n              <td className={\"stepCell\" + (completedSteps[\"Sv/SvA\" + cellValues[\"Sv/SvA\"]] ? \" completedStep\" : \"\")}\n                onClick={()=>rtxts[2].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  text={cellValues[\"Sv/SvA\"]}\n                  onChange={this.updateCell.bind(this, weekPlan, \"Sv/SvA\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </td>\n              <td className={\"stepCell\" + (completedSteps[\"Eng\" + cellValues[\"Eng\"]] ? \" completedStep\" : \"\")}\n                onClick={()=>rtxts[3].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  text={cellValues[\"Eng\"]}\n                  onChange={this.updateCell.bind(this, weekPlan, \"Eng\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </td>\n              <td className=\"courseCell\"\n                onClick={()=>rtxts[4].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  text={cellValues[\"Kurs\"]}\n                  onChange={this.updateCell.bind(this, weekPlan, \"Kurs\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </td>\n              <td onClick={()=>rtxts[5].rename()}>\n                <RenameableText\n                  ref={rt=>rtxts.push(rt)}\n                  text={cellValues[\"Kommentar\"]}\n                  tag=\"textarea\"\n                  onChange={this.updateCell.bind(this, weekPlan, \"Kommentar\")} />\n              </td></tr>\n            }\n            )}\n          </tbody>\n          <tfoot>\n            <tr>\n              <th>{L`Slutsteg`}</th>\n              <th className=\"stepCell\" onClick={()=>lastTrDatas[0].rename()}>\n                <RenameableText\n                  ref={rt => lastTrDatas.push(rt)}\n                  text={lastSteps.cellValues[\"M.spr\"]}\n                  onChange={this.updateCell.bind(this, model.lastSteps, \"M.spr\")}\n                  readOnly={this.state.loadingWeekPlans}\n               />\n              </th>\n              <th className=\"stepCell\" onClick={()=>lastTrDatas[1].rename()}>\n                <RenameableText\n                  ref={rt => lastTrDatas.push(rt)}\n                  text={lastSteps.cellValues[\"Ma\"]}\n                  onChange={this.updateCell.bind(this, model.lastSteps, \"Ma\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </th>\n              <th className=\"stepCell\" onClick={()=>lastTrDatas[2].rename()}>\n                <RenameableText\n                  ref={rt => lastTrDatas.push(rt)}\n                  text={lastSteps.cellValues[\"Sv/SvA\"]}\n                  onChange={this.updateCell.bind(this, model.lastSteps, \"Sv/SvA\")}\n                  readOnly={this.state.loadingWeekPlans}\n                 />\n              </th>\n              <th className=\"stepCell\" onClick={()=>lastTrDatas[3].rename()}>\n                <RenameableText\n                  ref={rt => lastTrDatas.push(rt)}\n                  text={lastSteps.cellValues[\"Eng\"]}\n                  onChange={this.updateCell.bind(this, model.lastSteps, \"Eng\")}\n                  readOnly={this.state.loadingWeekPlans}\n                />\n              </th>\n              <th>-</th>\n              <th></th>              \n            </tr>\n            <tr>\n              <th>{L`Terminsmål`}</th>\n              <th className=\"stepCell\">{termGoals[\"M.spr\"]}</th>\n              <th className=\"stepCell\">{termGoals[\"Ma\"]}</th>\n              <th className=\"stepCell\">{termGoals[\"Sv/SvA\"]}</th>\n              <th className=\"stepCell\">{termGoals[\"Eng\"]}</th>\n              <th>-</th>\n              <th>{this.state.error && <p className=\"error\">{''+this.state.error}</p>}</th>\n            </tr>\n          </tfoot>\n          </table>\n      </div>\n    </div>\n      }\n}\n","import { KSTermPlannerWeekPlan } from 'kedbackend/models';\nimport { EDSCourse } from '../../contracts/eds';\nimport { EDSPeriod } from '../../apis/edsclient';\nimport { Term } from '../../contracts/ked-models';\nimport {\n  findCourseFromColumnHeader,\n  LAST_STEP_SPRING,\n  LAST_STEP_AUTUMN,\n  getColumnHeaderFromCourse,\n  getFirstAndLastWeek\n} from './termplanner-utils';\nimport { getTermStartAndEnd, getFirstAndLastWeekOfTerm, getSchoolMoment } from '../../utils/school-moment';\nimport moment from 'moment';\nimport { createUUID } from 'kedbackend/client';\nimport { termPlannerRepoKS } from '../../repos/ks-termplanner-repo';\nimport { KEDWeek } from '../../utils/weekutil';\n\nexport class ViewModel {\n  weekPlans: KSTermPlannerWeekPlan[];\n  lastSteps: KSTermPlannerWeekPlan;\n  completedSteps: { [columnHeaderAndstep: string]: true };\n  termGoals: { [columnHeader: string]: string };\n  year: number;\n\n  constructor(\n    dbWeekPlans: KSTermPlannerWeekPlan[],\n    courses: EDSCourse[]) {\n    const nowMoment = moment(termPlannerRepoKS.now);\n    const schoolMoment = getSchoolMoment(nowMoment);\n    const [termStart, termEnd] = getTermStartAndEnd(nowMoment);\n    const [firstWeek, lastWeek] = getFirstAndLastWeekOfTerm(schoolMoment.term);\n    this.year = termStart.year();\n    //\n    // weekPlans\n    //\n    this.weekPlans = [];\n    //let currentCompletedSteps: { [columnHeader: string]: string } = {};\n    for (let weekMoment = termStart.clone().startOf('week');\n      weekMoment.valueOf() < termEnd.valueOf();\n      weekMoment = weekMoment.clone().add(1, 'week').startOf('week'))\n    {\n      const weekNumber = weekMoment.week();\n      if (weekNumber >= firstWeek && weekNumber <= lastWeek) {\n        const kedWeek = KEDWeek(weekMoment.year(), weekNumber);\n        const weekPlan = dbWeekPlans.filter(wp =>\n          wp.dateTime >= kedWeek.notBefore &&\n          wp.dateTime <= kedWeek.notAfter)[0];\n\n        this.weekPlans.push({\n          ...weekPlan || {},\n          id: weekPlan ? weekPlan.id : createUUID(),\n          dateTime: weekPlan ? weekPlan.dateTime : weekMoment.valueOf(),\n          cellValues: weekPlan ? weekPlan.cellValues : {},\n          weekNumber\n        });\n      }\n    }\n\n    //\n    // lastSteps\n    //\n    const lastStepWeek = firstWeek > LAST_STEP_SPRING ? LAST_STEP_AUTUMN : LAST_STEP_SPRING;\n    const lastStepKedWeek = KEDWeek(termStart.year(), lastStepWeek);\n    this.lastSteps = dbWeekPlans.filter(wp =>\n        wp.dateTime >= lastStepKedWeek.notBefore &&\n        wp.dateTime <= lastStepKedWeek.notAfter)[0] || {\n      id: createUUID(),\n      dateTime: moment(nowMoment).clone().week(lastStepWeek).startOf('week').valueOf(),\n      cellValues: {},\n      weekNumber: lastStepWeek\n    };\n\n    this.completedSteps = {};\n    this.termGoals = {};\n    for (const course of courses) {\n      const columnHeader = getColumnHeaderFromCourse(course);\n      //\n      // completedSteps\n      //\n      for (const step of course.courseSteps) {\n        if (step.isCompleted) {\n          this.completedSteps[columnHeader + step.shortName] = true;\n          /*const weekPlans = findWeekPlansByStep(this.weekPlans, step.ShortName);\n          weekPlans.forEach(weekPlan => {\n              this.completedSteps[weekPlan.week + columnHeader] = true;\n          })*/\n        }\n      }\n      //\n      // termGoals\n      //\n      this.termGoals[columnHeader] = course.periodGoalGrade;\n    }\n  }\n}\n\nfunction findWeekPlansByStep(weekPlans: KSTermPlannerWeekPlan[], step: string): KSTermPlannerWeekPlan[] {\n  return weekPlans.filter(wp => Object.keys(wp.cellValues).map(column => wp.cellValues[column] === step));\n}\n","import * as React from 'react';\nimport { L } from '../../utils/utils';\nimport { EDSAssessment } from '../../contracts/eds';\nimport env from '../../globals/KED.env';\n\ninterface Props {\n  limit?: number;\n  locale: string;\n}\n\ninterface State {\n  loading: boolean,\n  assessments: EDSAssessment[],\n  error: string | null\n}\n\nexport class LatestAssessments extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props);\n    this.state = {\n      assessments: [],\n      error: null,\n      loading: false\n    }\n  }\n\n  componentWillMount() {\n    this.load();\n  }\n\n  async load() {\n    this.setState({loading: true});\n    try {\n      const assessments = await env.edsClient.getLatestAssessments(this.props.limit);\n      this.setState({assessments});\n    } catch (error) {\n      this.setState({error});\n    }\n    this.setState({loading: false});    \n  }\n\n  render() {\n    const hasGrades = this.state.assessments.some(a => !!a.gradeName);\n    return <div className=\"ked_boxed\">\n      <div className=\"weekSelect\">\n        <div className=\"horizontalItem\">\n\n        </div>\n        <div className=\"horizontalItem\">\n\n        </div>\n      </div>\n\n      <h4>{L`Senaste bedömningar`}</h4>\n      <hr />\n      <table className=\"smallFont\">\n        <thead>\n          <tr>\n            <th className=\"nowrap\">{L`Datum`}</th>\n            <th className=\"nowrap\">{L`Kurs`}</th>\n            <th className=\"nowrap\">{L`Del`}</th>\n            {hasGrades && <th className=\"nowrap\">{L`Betyg`}</th>}\n            <th className=\"nowrap\" colSpan={2}>{L`Bedömningar`}</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {this.state.assessments.map((a, i) => \n            <tr key={i} className={i % 2 && \"tableOdd\"}>\n              <td>{a.publishDateTime.substr(0, 10)}</td>\n              <td className=\"amneCell\">{a.courseName}</td>\n              <td className=\"delCell\">{a.courseUnitName}</td>\n              {hasGrades && <td>{a.gradeName}</td>}\n              <td><pre>{a.text}</pre></td>\n            </tr>\n          )}\n        </tbody></table>\n    </div>;\n  }\n}\n","import * as React from 'react';\nimport { getLearningGoalsAndTasks, KedLearningGoalsData } from '../../apis/ked-learninggoals';\nimport { LearningModuleTask, TaskList } from '../course-viewer/subcomponents/task-list';\nimport { flatten } from '../../utils/utils';\nimport { LearningGoal, LearningGoalsList } from '../course-viewer/subcomponents/learning-goals-list';\n\ninterface Props {\n  apiPath: string; // \"/4.5667c63115ed6c03790a4c8c/12.1f95a67a15ee31ea1c4447b2.json\"\n  pageId: string; // sv.PageContext.pageId\n}\n\ninterface State {\n  data: KedLearningGoalsData | null\n}\n\nexport class LearningTasks extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      data: null\n    }\n  }\n\n  async componentDidMount() {\n    const data = await getLearningGoalsAndTasks(\n      this.props.apiPath,\n      this.props.pageId);\n\n    this.setState({ data });\n  }\n\n  render() {\n    if (!this.state.data) return <div></div>;\n    const { moduleName, subject, commonTasks, learningGoals, step } = this.state.data;\n    //const step = undefined; // moduleName.toLowerCase().startsWith(\"steg \") && parseInt(moduleName.substr(5));\n    const commonTasksList: LearningModuleTask[] =\n      commonTasks.map(task => ({\n        id: task.id,\n        name: task.name,\n        url: task.url,\n        courseName: subject.name,\n        learningGoal: step && learningGoals.length > 0 ? `${moduleName} - övergripande` : moduleName\n      }));\n      \n    const learningGoalsList: LearningGoal[] = learningGoals.map(learningGoal => ({\n      name: learningGoal.name,\n      learningTasks: learningGoal.tasks.map(task => ({\n        id: task.id,\n        name: task.name,\n        url: task.url,\n        courseName: subject.name,\n        learningGoal: learningGoal.name\n      }))\n    }));\n\n    if (step) {\n      commonTasksList.forEach(task => task.step = step);\n      learningGoalsList.forEach(lg => lg.learningTasks.forEach(task => task.step = step));\n    }\n\n    return <LearningGoalsList\n      commonTasks={commonTasksList}\n      learningGoals={learningGoalsList} />;\n  }\n}\n","import * as React from 'react';\nimport { Course, School, UserHiddenCourse } from 'kedbackend/models';\nimport env from '../../globals/KED.env';\nimport { showError, flatten, compareProp, showInfo, L } from \"../../utils/utils\";\nimport { createUUID } from 'kedbackend/client';\nimport { Spinner } from \"../course-builder/sub-components/spinner\";\nimport { parseQueryString, generateQueryString } from \"../../utils/query-string\";\nimport { preserveImpersonationQuery } from '../../access-control/index';\nimport { hiddenCoursesRepo, CourseWithHiddenState } from '../../repos/hidden-courses-repo';\n\ninterface Props {\n  viewCourseUrl?: string;\n}\n\ninterface State {\n  isLoading: boolean\n  courses: CourseWithHiddenState[]\n  headerOpen: boolean\n}\n\nexport class ListCourses extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      courses: [],\n      headerOpen: false\n    };\n    this.updateHiddenCourses = this.updateHiddenCourses.bind(this);\n  }\n\n  componentWillMount() {\n    hiddenCoursesRepo.subscribe(this.updateHiddenCourses, {fullCourse: true});\n  }\n\n  componentWillUnmount() {\n    hiddenCoursesRepo.unsubscribe(this.updateHiddenCourses);\n  }\n\n  updateHiddenCourses(courses: CourseWithHiddenState[]) {\n    this.setState({courses, isLoading: false});\n  }\n\n  async hideCourse(course: CourseWithHiddenState) {\n    showInfo(L`Sparar...`);\n    await hiddenCoursesRepo.hideCourse(course);\n    showInfo(\"\");\n  }\n\n  async showCourse(course: CourseWithHiddenState) {\n    showInfo(L`Sparar...`);\n    await hiddenCoursesRepo.showCourse(course);\n    showInfo(\"\");\n  }\n\n  render() {\n    if (this.state.isLoading) return <Spinner />;\n    const {courses} = this.state;\n    const visibleCourses = courses.filter(course => course.visible);\n    const hiddenCourses = courses.filter(course => !course.visible);\n    const query = parseQueryString(location.search);\n    const viewCourseUrl = this.props.viewCourseUrl || \"\";\n\n    return <div className=\"ked_boxed\">\n      <h3>Skolans kurser</h3>\n      <div className=\"taskContainer odd-even\">\n        {visibleCourses.map(course =>\n          <div className=\"studentCourse\" key={course.id}>\n            <div className=\"align-horizontal\">\n              <div className=\"horizontalItem top pull-right\">\n                <a className=\"hideItem\" onClick={() => this.hideCourse(course)} />\n              </div>\n              <div className=\"horizontalItem top\">\n                <a href={preserveImpersonationQuery(viewCourseUrl, {courseId: course.id})}>{course.name}</a>\n              </div>\n            </div>\n            <div className=\"horizontalItem top\">\n              <p className=\"small\">{course.description}</p>\n            </div>\n          </div>)}\n      </div>\n\n      <div className={\"openClose\" + (this.state.headerOpen ? \" open\" : \"\")}>\n        <div className=\"openHeader\" onClick={() => this.setState({ headerOpen: !this.state.headerOpen })}>\n          <h5>Dolda kurser</h5>\n        </div>\n        <div className=\"openContent\">\n          <div className=\"taskContainer odd-even\">\n            {hiddenCourses.map(course => \n            <div className=\"studentCourse\" key={course.id}>\n              <div className=\"align-horizontal\">\n                <div className=\"horizontalItem top pull-right\">\n                  <a className=\"showItem\" onClick={() => this.showCourse(course)}></a>\n                </div>\n                <a href={generateQueryString({...query, courseId: course.id})}>{course.name}</a>\n              </div>\n              <div className=\"horizontalItem top\">\n                <p className=\"small\">{course.description}</p>\n              </div>\n            </div>)}\n          </div>\n        </div>\n      </div>\n    </div>\n  }\n}\n","import * as React from 'react';\nimport { Course, UserHiddenCourse, School } from 'kedbackend/models';\nimport { hiddenCoursesRepo, CourseWithHiddenState } from '../../repos/hidden-courses-repo';\nimport env from '../../globals/KED.env';\nimport { flatten, compareProp, arrayToMap, arrayToLookup } from '../../utils/utils';\nimport { preserveImpersonationQuery } from '../../access-control';\n\nexport interface Props {\n  viewCourseUrl: string;\n}\n\nexport interface State {\n  courses: CourseWithHiddenState[];\n  isLoading: boolean;\n  error?: Error;\n}\n\nexport class MyCourses extends React.Component<Props,State> {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      courses: [],\n      isLoading: true\n    }\n    this.updateHiddenCoursesState = this.updateHiddenCoursesState.bind(this);\n  }\n\n  componentDidMount() {\n    hiddenCoursesRepo.subscribe(this.updateHiddenCoursesState, {fullCourse: false});\n  }\n\n  updateHiddenCoursesState(courses: CourseWithHiddenState[]) {\n    this.setState({courses, isLoading: false});\n  }\n\n\n  componentWillUnmount() {\n    hiddenCoursesRepo.unsubscribe(this.updateHiddenCoursesState);\n  }\n\n  getCourseUrl(courseId: string) {\n    return preserveImpersonationQuery(this.props.viewCourseUrl, { courseId });\n  }\n\n  render() {\n    const {viewCourseUrl} = this.props;\n    const {isLoading, error, courses } = this.state;\n    const visibleCourses = this.state.courses.filter(c => c.visible);\n\n    return (\n      <>\n        {isLoading ? (\n          <li className=\"lvl2 header\">\n            <a>Laddar...</a>\n          </li>\n        ) : error ? (\n          <li className=\"lv12\">\n            <a>Kunde inte ladda kurser.</a>\n          </li>\n         ) : (\n          visibleCourses.map(({name, id}) => (\n            <li key={id} className=\"lvl2\">\n              <a href={this.getCourseUrl(id)}>{name}</a>\n            </li>\n          )\n        ))\n        }\n\t\t\t</>\n    );\n  }\n}","import * as React from 'react';\nimport { RemoveItem } from '../course-builder/sub-components/remove-item';\nimport { findDOMNode } from 'react-dom';\nimport $ from 'jquery';\n\ninterface Props {\n  dialogs: React.Component[];\n  popDialog: ()=>void;\n}\n\nexport class Dialogs extends React.Component<Props> {\n  lastDiv: HTMLDivElement | null;\n\n  constructor(props: Props) {\n    super(props);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {\n      // A dialog was closed. Now focus the last dialog:\n      $(findDOMNode(this.lastDiv)).find(':input').first().focus();\n    }\n  }\n\n  render () {\n    this.lastDiv = null;\n    const {dialogs, popDialog} = this.props;\n    $('body').attr('aria-disabled', dialogs.length > 0);\n    $('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');\n\n    return dialogs.length > 0 && <div>\n      {dialogs.map((dialog, idx) => {\n        let div: HTMLDivElement;\n        function onKeyPress(ev: React.KeyboardEvent<HTMLDivElement>) {\n          if (ev.which === 13 && (!ev.target || (ev.target as HTMLElement).tagName !== 'TEXTAREA')) {\n            $(findDOMNode(div)).find('.btn-default').click();\n          }\n          ev.stopPropagation();\n        }\n        function onKeyDown(ev) {\n          if (ev.which === 27) { // Escape\n            popDialog();\n            ev.stopPropagation();\n            return;\n          }\n          if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S\n            const domNode = findDOMNode(div);\n            ev.preventDefault();\n            const defaultButton = $(domNode).find('.btn-default');\n            defaultButton.click();\n            ev.stopPropagation();\n          }\n        }\n        return <div key={idx}>\n      <div className=\"darken\" />\n      <div className=\"modal-page-wrap\">\n        <div className=\"modal-page\" ref={elem => {\n          div = elem;\n          if (idx === dialogs.length - 1) this.lastDiv = elem;\n        }}\n            tabIndex={0}\n            aria-disabled={idx < dialogs.length - 1}\n            onKeyPress={onKeyPress}\n            onKeyDown={onKeyDown}>\n          {dialog}\n          <RemoveItem onClick={popDialog} />\n          <div className=\"stopFloats\"></div>\n        </div>\n      </div>\n    </div>})}\n  </div>;\n  }\n}\n","import * as React from 'react';\nimport { FormField } from './form-field';\n\ninterface Props {\n  label: any;\n  id: string;\n  value: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  children?;\n  onChange: (value: string) => void;\n}\n\nexport class TextInput extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <FormField label={this.props.label}>\n        <div className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n            <input type=\"text\" autoFocus={this.props.autoFocus} id={this.props.id} size={35} value={this.props.value}\n              onChange={ev => this.props.onChange(ev.target.value)}\n              placeholder={this.props.placeholder} />\n          </div>\n          {!!this.props.children && <div className=\"horizontalItem\">\n            {this.props.children}\n          </div>}\n        </div>\n      </FormField>\n    );\n  }\n}\n\n","import * as React from 'react';\nimport { FormField } from './form-field';\n\ninterface Props {\n  label: any;\n  id: string;\n  value: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  rows?: number;\n  children?;\n  onChange: (value: string) => void;\n}\n\nexport class TextAreaFormField extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <FormField label={this.props.label}>\n        <div className=\"align-horizontal\">\n          <div className=\"horizontalItem top\">\n            <textarea autoFocus={this.props.autoFocus} id={this.props.id} cols={35} rows={this.props.rows || 5} value={this.props.value}\n              onChange={ev => this.props.onChange(ev.target.value)}\n              placeholder={this.props.placeholder} />\n          </div>\n          {!!this.props.children && <div className=\"horizontalItem\">\n            {this.props.children}\n          </div>}\n        </div>\n      </FormField>\n    );\n  }\n}\n\n","import * as React from 'react';\n\ninterface Props {\n  label: any;\n  children: any;\n}\n\nfunction findId(node) {\n  const recucheck = new Set();\n  return (function findId(node){\n    if (typeof node === 'string') return null;\n    if (recucheck.has(node)) {\n      debugger;\n      return;\n    }\n    recucheck.add(node);\n    if (node.props) {\n      if (node.props.id) return node.props.id;\n      if (node.props.children) {\n        return findId(node.props.children);\n      }\n      return;\n    }\n    if (node.length) {\n      for (let i=0;i<node.length; ++i) {\n        const child = node[i];\n        if (child) {\n          const childId = findId(child);\n          if (childId) return childId;\n          //console.log(child);\n        }\n      }\n    }\n  })(node);\n}\n\nexport class FormField extends React.Component<Props> {\n  constructor (props: Props) {\n    super(props);\n  }\n\n  render() {\n    return <>\n        <label className=\"kclabel\" htmlFor={findId(this.props.children)}>{this.props.label}</label>\n        {this.props.children}\n    </>\n  }\n}\n","/* REFACTOR: Move this component outside coursebuilder!\n   This is a general-purpose component\n*/\n\nimport * as React from 'react';\n\ninterface Props {\n  title: string | JSX.Element;\n  className?: string;\n  headerClassName?: string;\n  contentClassName?: string;\n  headerOpen?: boolean;\n  onOpenClose?: (becameOpen: boolean) => void;\n  children;\n}\n\ninterface State {\n  headerOpen: boolean;\n}\n\nexport class OpenCloseBox extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      headerOpen: props.headerOpen || false\n    };\n  }\n\n  componentWillReceiveProps (nextProps: Props) {\n    if (nextProps.headerOpen !== this.props.headerOpen) {\n      this.setState({headerOpen: nextProps.headerOpen});\n    }\n  }\n\n  render() {\n    const { title, className, children, headerClassName, contentClassName } = this.props;\n    const { headerOpen } = this.state;\n\n    return <div className={(className||'') + \" openClose\" + (headerOpen ? \" open\" : \"\")}>\n      <div className={\"openHeader\" + (headerClassName ? \" \" + headerClassName : \"\")}\n        onClick={() => {\n          if (this.props.onOpenClose) this.props.onOpenClose(!this.state.headerOpen);\n          this.setState({ headerOpen: !this.state.headerOpen });\n        }} >\n        {title}\n      </div>\n      <div className={\"openContent\" + (contentClassName ? \" \" + contentClassName : \"\")}>\n        {children}\n      </div>\n    </div>;\n  }\n}\n","import * as React from 'react';\nimport { L } from '../../utils/utils';\nimport $ from 'jquery';\n\ninterface Props {\n    text: string;\n    tag?: 'input' | 'textarea'\n    eager?: boolean;\n    onChange: (newName: string) => void;\n    placeholder?: string; // If text is empty, this will be the placeholder\n    clickAdvertiseText?: string;\n    maxChars?: number;\n    readOnly?: boolean;\n}\n\ninterface State {\n    editMode: boolean;\n    runtimeStyle: Object;\n    text: string | null;\n}\n\n/** \n * Makes a text element (such as an A or P tag) possible to replace with an input element of the same CSS style, for example by clicking on it.\n * \n*/\nexport class RenameableText extends React.Component<Props,State> {\n    label: HTMLElement;\n    input: HTMLInputElement | HTMLTextAreaElement;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            editMode: false,\n            runtimeStyle: null,\n            text: props.text || \"\"\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.text !== nextProps.text) {\n            this.setState({text: nextProps.text || \"\"});\n        }\n    }\n\n    render() {\n        const text = this.state.text || \"\";\n        return <div\n                className={\"renameable-text\" + (text ? \"\" : \" unnamed\") + (this.props.readOnly ? \" disabled\" : \"\")}\n                tabIndex={!this.state.editMode && 0}\n                onFocus={(e)=>{this.rename()}}\n                style={{width: \"100%\"}}\n            >\n            <div\n                ref={label => this.label = label}                \n                style={{\n                    display: this.state.editMode ? 'none' : ''\n                }}\n            >\n                {text || this.props.clickAdvertiseText}\n            </div>\n            {this.props.tag === 'textarea' ?\n                <textarea ref={input => this.input = input}\n                    maxLength={this.props.maxChars}\n                    style={{...this.state.runtimeStyle, display: this.state.editMode ? '' : 'none'}}\n                    onFocus={ev=>$(ev.target).select()}\n                    onBlur={this.onBlur.bind(this)}\n                    value={text}\n                    onKeyDown={this.onKeyDown.bind(this)}\n                    onChange={this.onChange.bind(this)}\n                    tabIndex={this.state.editMode && 0}\n                    placeholder={this.props.placeholder}\n                /> : \n                <input ref={input => this.input = input}\n                    type=\"text\"\n                    maxLength={this.props.maxChars}\n                    style={{...this.state.runtimeStyle, display: this.state.editMode ? '' : 'none'}}\n                    onFocus={ev=>$(ev.target).select()}\n                    onBlur={this.onBlur.bind(this)}\n                    value={text}\n                    onKeyDown={this.onKeyDown.bind(this)}\n                    onChange={this.onChange.bind(this)}\n                    tabIndex={this.state.editMode ? 0 : undefined}\n                    placeholder={this.props.placeholder}\n                />\n            }\n        </div>\n    }\n\n    onKeyDown(e: KeyboardEvent) {\n        if (e.keyCode === 27) { // ESC\n            this.input.value = this.props.text || \"\";\n            this.input.blur();\n            e.stopPropagation();\n        } else if (e.keyCode === 13) { // ENTER\n            this.propagateOnChange(this.input.value);\n            this.setState({ editMode: false, text: this.input.value });\n        }\n    }\n\n    onBlur(e: Event) {\n        this.propagateOnChange(this.input.value);\n        this.setState({ editMode: false, text: this.input.value });\n    }\n\n    propagatedOnChange: string;\n\n    propagateOnChange(newValue) {\n        if (this.propagatedOnChange != newValue) {\n            this.propagatedOnChange = newValue;\n            this.props.onChange(newValue);\n        }\n    }\n\n    onChange(e: Event) {\n        this.setState({ text: this.input.value });\n        if (this.props.eager) this.propagateOnChange(this.input.value);\n    }\n\n    rename(txt?: string) {\n        if (this.state.editMode || this.props.readOnly) return;\n        txt = txt || this.state.text || \"\";\n        const label = $(this.label);\n        this.setState({\n            text: txt,\n            editMode: true,\n            runtimeStyle: {\n                textAlign: label.css('textAlign'),\n                fontSize: label.css('font-size'),\n                paddingTop: label.css('paddingTop'),\n                paddingBottom: label.css('paddingBottom'),\n                paddingLeft: label.css('paddingLeft'),\n                paddingRight: label.css('paddingRight'),\n                marginTop: label.css('marginTop'),\n                marginBottom: label.css('marginBottom'),\n                marginLeft: label.css('marginLeft'),\n                marginRight: label.css('marginRight'),\n                borderRadius: label.css('borderRadius'),\n                backgroundColor: label.css('backgroundColor'),\n                lineHeight: label.css('lineHeight'),\n                fontWeight: label.css('fontWeight'),\n                outLine: 0,\n                borderStyle: 'none',\n                height: \"100%\",\n                width: \"100%\",\n                boxSizing: \"border-box\",\n            }\n        }, ()=>$(this.input).focus());\n    }\n}\n","import * as React from 'react';\n\ninterface Props {\n  learningGoal?: string;\n  onSave: (learningGoal: string) => void;\n}\n\ninterface State {\n  learningGoal: string;\n}\n\nexport class AddCustomGoal extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props)\n    this.state = {\n      learningGoal: props.learningGoal || ''\n    }\n  }\n\n  render() {\n    const {learningGoal} = this.state;\n    const {onSave} = this.props;\n\n    return <div>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n          <h2>Lägg till eget lärandemål</h2>\n          <hr />\n          <div className=\"align-horizontal\">\n            <div className=\"horizontalItem top\">Mål:</div>\n            <div className=\"horizontalItem top\">\n              <input type=\"text\" tabIndex={1} size={50} autoFocus\n                value={learningGoal}\n                onChange={e => this.setState({learningGoal: e.target.value})} />\n            </div>\n            <div className=\"horizontalItem top spaced\" />\n          </div>\n          <br /></div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={()=>onSave(learningGoal)}>Spara</button>\n      </div>\n    </div>\n  }\n}\n\n","import * as React from 'react';\nimport { TextInput } from '../utility-components/form-field-text-input';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\n\ninterface Props {\n  isTask: boolean\n  onSave: (name: string, description: string, url: string) => void;\n}\n\ninterface State {\n  name: string;\n  description: string;\n  url: string;\n}\n\nexport class AddCustomTask extends React.Component<Props,State> {\n  constructor(props: Props) {\n    super(props)\n    this.state = {\n      name: '',\n      description: '',\n      url: ''\n    }\n  }\n\n  render() {\n    const { name, description, url } = this.state;\n    const { isTask, onSave } = this.props;\n\n    return <div>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n        <h2>Lägg till eget arbetsmål</h2>\n        <hr />\n        <TextInput\n          label=\"Namn\"\n          id=\"AddCustomTask:name\"\n          placeholder=\"Ange namn...\"\n          value={name}\n          autoFocus\n          onChange={name => this.setState({name})} />\n\n        <TextAreaFormField\n          rows={7}\n          label=\"Beskrivning\"\n          id=\"AddCustomTask:description\"\n          placeholder=\"Lägg till en beskrivning...\"\n          value={description}\n          onChange={description=>this.setState({description})} />\n\n        <TextInput\n          label=\"Länk\"\n          id=\"AddCustomTask:url\"\n          placeholder=\"http://www...\"\n          value={url}\n          onChange={name => this.setState({url})} />\n\n      </div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={() => onSave(name, description, url)}>Spara</button>\n      </div>\n    </div>\n  }\n}\n\n","import * as React from 'react';\nimport { TextInput } from '../utility-components/form-field-text-input';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { createUUID } from 'kedbackend/client';\n\ntype Props = {\n  // Edit Mode\n  mode: 'add';\n  userTask: UserTask;\n  closeDialog;\n} | {\n  mode: 'edit';\n  userTask: UserTask;\n  subTask: UserSubTask;\n  closeDialog: ()=>void;\n}\n\ninterface State {\n  name: string;\n  description: string;\n  url: string;\n}\n\nexport class AddOrEditSubTask extends React.Component<Props,State> {\n  constructor (props: Props) {\n    super(props);\n    if (props.mode === 'edit') {\n      const {subTask} = props;\n      this.state = {\n        name: subTask.name || '',\n        description: subTask.description || '',\n        url: subTask.url || ''\n      };\n    } else {  \n      this.state = {\n        name: '',\n        description: '',\n        url: ''\n      };\n    }\n  }\n\n  save() {\n    // Update repo:\n    const {props} = this;\n    const {userTask, closeDialog} = props;\n    const {name, description, url} = this.state;\n    if (props.mode === 'edit') {\n      // Edit existing:\n      userTasksRepo.update([userTask], ut => {\n        const {subTasks} = ut;\n        if (subTasks) {\n          ut.subTasks = subTasks.map(st =>\n            st.id === props.subTask.id ? {...st, name, description, url} :\n            {...st}\n          );\n        }\n      });\n    } else {\n      // Create new task\n      const newSubTask = {\n        id: createUUID(),\n        name,\n        description,\n        url\n      };\n\n      // Update repo:\n      userTasksRepo.update([userTask], ut => {\n        if (!ut.subTasks) {\n          ut.subTasks = [];\n        }\n        ut.subTasks = ut.subTasks.concat(newSubTask);\n      });\n    }\n\n    // Close dialog\n    closeDialog();    \n  }\n\n  delete() {\n    // Update repo:\n    const props = this.props;  \n    if (props.mode !== 'edit') {\n      throw new Error(\"Can only delete in edit mode\");\n    }\n    userTasksRepo.update([props.userTask], ut => {\n      if (ut.subTasks) {\n        ut.subTasks = ut.subTasks.filter(t => t.id !== props.subTask.id);\n      }\n    });\n\n    // Close dialog:\n    props.closeDialog();\n  }\n\n  render() {\n    const {name, description, url} = this.state;\n    const {props} = this;\n    const isEditMode = props.mode === 'edit';\n    \n    return <>\n      <div className=\"sv-html-portlet sv-portlet sv-skip-spacer\">\n        <h2>{isEditMode ? 'Redigera underuppgift' : 'Lägg till underuppgift'}</h2>\n        <hr />\n        <TextInput\n          autoFocus\n          label=\"Underuppgiftens namn\"\n          id=\"AddUserSubTask:name\"\n          placeholder=\"\"\n          value={this.state.name}\n          onChange={name => this.setState({name})}\n            />\n        <TextAreaFormField\n          label=\"Beskrivning\"\n          id=\"AddUserSubTask:description\"\n          rows={7}\n          placeholder=\"\"\n          value={this.state.description}\n          onChange={description => this.setState({description})}\n            />\n        <TextInput\n          label=\"Länk\"\n          id=\"AddUserSubTask:url\"\n          placeholder=\"\"\n          value={this.state.url}\n          onChange={url => this.setState({url})}\n            />\n        <br />\n      </div>\n      <div className=\"sv-html-portlet sv-portlet\">\n        {\n          props.mode === 'edit' && <button className=\"btn btn-warning btn-large pull-right\"\n          onClick={ev => this.delete()}>\n          {\"Ta bort underuppgift\"}</button>}\n        <button\n          tabIndex={1}\n          className=\"btn btn-large btn-default\"\n          onClick={()=>this.save()}>Spara</button>\n      </div>\n    </>\n  }\n}\n\n","import * as React from 'react';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { RenameableText } from '../utility-components/renameable-text';\nimport { L } from '../../utils/utils';\nimport { getTaskType } from './get-task-type';\nimport ReactDatePicker, { ReactDatePickerProps } from 'react-datepicker';\nimport '../../globals/moment-sv-locale';\nimport {TextInput} from '../utility-components/form-field-text-input';\nimport moment from 'moment';\nimport { FormField } from '../utility-components/form-field';\nimport { AddOrEditSubTask } from './add-or-edit-sub-task';\nimport { createUUID } from 'kedbackend/client';\nimport update from 'react-addons-update';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { TextAreaFormField } from '../utility-components/form-field-textarea';\n\ninterface Props {\n  userTask: UserTask;\n  onUpdate: (updater: (userTask: UserTask) => void) => void;\n  onDelete: (userTaskId: string) => void;\n  openDialog: (dialog) => void;\n  closeDialog: ()=>void;\n}\n\ninterface State {\n  userTask: UserTask;\n  name: string;\n  description?: string;\n  deadline?: string;\n  url: string;\n  subTasks?: UserSubTask[];\n  showCalendar?: boolean;\n}\n\nexport class EditUserTask extends React.Component<Props,State> {\n  datePicker: any;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTask: props.userTask,\n      name: props.userTask.name,\n      description: props.userTask.description,\n      url: props.userTask.url,\n      deadline: props.userTask.deadline,\n      subTasks: props.userTask.subTasks\n    }\n    this.onUserTasksChanged = this.onUserTasksChanged.bind(this);\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onUserTasksChanged);\n  }\n\n  onUserTasksChanged(userTasks: UserTask[]) {\n    const myUserTask = userTasks.find(ut => ut.id === this.props.userTask.id);\n    if (!myUserTask) {\n      this.props.closeDialog();\n      return;\n    }\n    this.setState({\n      userTask: myUserTask,\n      subTasks: myUserTask.subTasks\n    });\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onUserTasksChanged);\n  }\n\n  isModified() {\n    // Don't count subtask changes! They live their own life and is maintained\n    // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks\n    // to be persisted right away. May click away this dialog.\n    // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner\n    // when clicking the subtask for example!\n\n    const {deadline, description, name, url, userTask} = this.state;\n    return (\n      deadline !== userTask.deadline ||\n      description !== userTask.description ||\n      name !== userTask.name ||\n      url !== userTask.url);\n  }\n\n  addSubTask(): any {\n    this.props.openDialog(<AddOrEditSubTask\n      mode=\"add\"\n      userTask={this.state.userTask}\n      closeDialog={this.props.closeDialog}\n    />);\n  }\n\n  editSubTask(subTask: UserSubTask) {\n    this.props.openDialog(<AddOrEditSubTask\n      mode=\"edit\"\n      subTask={subTask}\n      userTask={this.state.userTask}\n      closeDialog={this.props.closeDialog}\n    />);\n  }\n  \n  render() {\n    const { name, description, url, deadline, subTasks, showCalendar, userTask } = this.state;\n    const { id, courseName } = userTask;\n    const { onUpdate, onDelete } = this.props;\n    const isModified = this.isModified();\n\n    const taskType = getTaskType(userTask);\n    const isCustomTask = taskType === 'customTask';\n    const expired = moment(userTask.deadline) < moment();\n\n    return <div className=\"editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer\">\n      <h2>{isCustomTask ? `Redigera arbetsmål` : `Redigera uppgift`}</h2>\n      <hr />\n      <TextInput\n        autoFocus\n        label={isCustomTask ? \"Arbetsmålets namn\" : \"Uppgiftens namn\"}\n        id=\"EditUserTask:name\"\n        placeholder={isCustomTask ? \"Vad ska du göra?\" : \"Ange uppgiftens namn...\"}\n        value={name}\n        onChange={name => this.setState({name})} />\n      \n      {isCustomTask && <>\n        <TextAreaFormField\n          rows={5}\n          label=\"Beskrivning\"\n          id=\"EditUserTask:description\"\n          placeholder=\"Lägg till en beskrivning...\"\n          value={description}\n          onChange={description=>this.setState({description})} />\n\n        <TextInput\n          label=\"Länk\"\n          id=\"EdutUserTask:url\"\n          placeholder=\"http(s)://...\"\n          value={url}\n          onChange={url => this.setState({url})} >\n\n        </TextInput></>}\n\n        <FormField label=\"Ange deadline\">\n          {(deadline || showCalendar) ?\n            <div className=\"align-horizontal\">\n              <div className=\"horizontalItem top\">\n                <ReactDatePicker ref={elem => this.datePicker = elem}\n                  id=\"EditUserTask:deadline\"\n                  selected={deadline && moment(deadline)}\n                  autoFocus={showCalendar}\n                  dateFormat=\"YYYY-MM-DD\"\n                  className={expired ? \"expired\" : undefined}\n                  locale={\"sv\"}\n                  popperPlacement={isCustomTask ? \"top-start\" : \"bottom-start\"}\n                  onBlur={()=>this.setState({showCalendar: false})}\n                  onChange={value=>{\n                    this.setState({\n                      deadline: value && value.format(\"YYYY-MM-DD\"),\n                      showCalendar: false\n                    });\n                  }}\n                />\n              </div>\n              <div className=\"horizontalItem top\">\n                <a className=\"deleteDate\" href=\"#\" title=\"Ta bort deadline\" onClick={ev=>{\n                  ev.preventDefault();\n                  this.setState({deadline: null, showCalendar: false});\n                }}></a>\n              </div>\n            </div> :\n            <div className=\"top\" ref={()=>{this.datePicker = null}}>\n                <a className=\"btn\" onClick={ev => {\n                  if (this.datePicker) {\n                    this.datePicker.setOpen(true);\n                  }\n                  this.setState({\n                    showCalendar: true\n                  });\n                }}>\n                <i className=\"fa fa-calendar\" aria-hidden=\"true\"></i> Ange deadline...\n              </a>              \n            </div>}\n        </FormField>\n      <FormField label=\"Underuppgifter\">\n        <div className=\"learningGoalTasks\">\n          <div className=\"taskContainer\">\n\n              {subTasks && subTasks.map(subTask => <div key={subTask.id} className=\"align-horizontal\">\n                <div className=\"horizontalItem top\"><a\n                  onClick={()=>this.editSubTask(subTask)}\n                  href=\"#\">{subTask.name}</a></div>\n              </div>)}\n          </div>\n        </div>\n        <div className=\"align-horizontal\">\n          <div className=\"top\">\n            <button id=\"EditUserTask:addSubTask\" className=\"btn\"\n              onClick={()=>this.addSubTask()}>\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i> Lägg till underuppgift\n            </button>\n          </div>\n        </div>\n      </FormField>\n      <div className=\"divider large\" />\n      <div className=\"align-horizontal\">\n        <div className=\"horizontalButton top\">\n          <button tabIndex={1}\n            className=\"btn btn-default\"\n            onClick={()=>{\n              isModified ? onUpdate(userTask => {\n                userTask.name = name;\n                userTask.description = description;\n                userTask.url = url;\n                userTask.deadline = deadline;\n              }) : this.props.closeDialog();\n            }}> Spara </button>\n        </div>\n        <div className=\"horizontalButton top\">\n          <button tabIndex={1}\n            className=\"btn\"\n            onClick={()=>{\n              this.props.closeDialog();\n            }}> Avbryt </button>\n        </div>\n        <div className=\"confirm top pull-right\">\n          <button\n            tabIndex={1}\n            className=\"btn btn-warning\"\n            onClick={()=>{\n              onDelete(id);\n            }}>{isCustomTask ?\n              \" Ta bort arbetsmål\" :\n              \" Ta bort den här uppgiften\"\n          }</button>\n        </div>\n      </div>\n                  \n      {/*<div className=\"btn btn-warning btn-large pull-right\" onClick={ev => onDelete(id)}>\n        {L`Ta bort arbetsmål`}</div>\n      {isModified &&\n        <div\n          className=\"btn btn-large btn-default\"\n          tabIndex={0}\n          onClick={()=>onUpdate(userTask => {\n            userTask.name = name;\n            userTask.description = description;\n            userTask.url = url;\n          })}> Spara</div>}*/}\n    </div>\n  }\n}\n\n","import { UserTask } from \"kedbackend/models\";\n\nexport function getTaskType (userTask: UserTask) : 'courseBuilderTask' | 'siteVisionTask' | 'customTask' {\n  return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?\n    'courseBuilderTask' :\n    userTask.siteVisionPageId ?\n      'siteVisionTask' :\n      'customTask';\n}\n","export {WeekPlanner} from './weekplanner';\n","import { UserTask } from 'kedbackend/models';\nimport { UserTasksBoxProps } from './user-tasks-box';\nimport { arrayToMap, arrayToLookup, compareProp, L } from \"../../utils/utils\";\n\nexport interface VirtualLearningGoal {\n  name: string;\n  allTasks: UserTask[];\n  step?: number;\n  url?: string;\n  tasks: UserTask[];\n}\n\nexport function refine(tasks: UserTask[]) {\n  const result = [] as Partial<UserTasksBoxProps>[];\n  const mapper = {} as { [name: string]: UserTasksBoxProps };\n  const tasksPerCourse = arrayToLookup(tasks, t => t.courseName || '');\n  for (const courseName of Object.keys(tasksPerCourse).sort().filter(x => x).concat(tasksPerCourse[''] ?\n    [''] : [])) {\n    const courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];\n    const tasksPerLearningGoal = arrayToLookup(courseTasks, t => t.learningGoal);\n    const resultLearningGoals: VirtualLearningGoal[] = [];\n    for (const learningGoal of Object.keys(tasksPerLearningGoal)) {\n      const lgTasks = tasksPerLearningGoal[learningGoal].sort(compareProp(\"dateTime\"));\n      const learningGoalTask = lgTasks\n        .filter(t => t.name == null) // If name is undefined or null, this represents a learning goal\n        [0];\n      const url = learningGoalTask && learningGoalTask.url;\n      resultLearningGoals.push({\n        name: learningGoal,\n        allTasks: lgTasks,\n        url,\n        step: lgTasks.map(t => t.step).filter(step => step)[0],\n        tasks: lgTasks.filter(t => t.name)\n      });\n    }\n    result.push({\n      courseName,\n      learningGoals: resultLearningGoals\n    });\n  }\n  return result;\n}\n","import * as React from 'react';\nimport { UserTask, Task, UserSubTask } from 'kedbackend/models';\nimport { OpenCloseBox } from '../utility-components/open-close-box';\nimport { L } from '../../utils/utils';\nimport { preserveImpersonationQuery } from '../../access-control';\nimport { courseNameToCssClass } from '../calendar/course-name-to-css-class';\nimport { getTaskType } from './get-task-type';\nimport moment from 'moment';\nimport { VirtualLearningGoal } from './refiner';\nimport { Features } from '../../features';\n\nexport interface UserTasksBoxProps {\n  courseName: string;\n  learningGoals: VirtualLearningGoal[],\n  viewCourseUrl: string;\n  openCourses?: { [path: string]: boolean };\n  setIsOpen?: (courseName: string, isOpen: boolean) => void;\n  setTaskDone?: (task: UserTask, done: boolean) => void;\n  setSubTaskDone: (task: UserTask, subTask: UserSubTask, done: boolean) => void;\n  addOwnTask?: (courseName: string, learningGoalName: string) => void;\n  editTask: (task: UserTask) => void;\n  editSubTask: (task: UserTask, subTask: UserSubTask) => void;\n  removeLearningGoal: (lg: VirtualLearningGoal)=>void;\n};\n\nexport class UserTasksBox extends React.Component<UserTasksBoxProps> {\n  constructor(props: UserTasksBoxProps) {\n    super(props);\n  }\n\n  render() {\n    const {\n      courseName,\n      learningGoals\n    } = this.props;\n    const isOpen = !!this.props.openCourses[courseName];\n    const features = new Features();\n\n    return <OpenCloseBox\n      title={<h5>{courseName || L`Egna lärandemål`}</h5>}\n      headerOpen={isOpen}\n      className={courseName && courseNameToCssClass('wp-course-', courseName)}\n      onOpenClose={becameOpen => this.props.setIsOpen(courseName, becameOpen)}>\n      {learningGoals.map(lg =>\n        <div key={lg.name} className=\"learningGoalContainer\">\n          {lg.step && <div className=\"stepIndicator\">{lg.step}</div>}\n          <div className=\"align-horizontal\">\n            <div className=\"learningGoalText horizontalItem top\">{lg.name}</div>\n            <div className=\"horizontalItem\">\n              &nbsp;<a\n                className=\"trash\"\n                href=\"#\"\n                title=\"Ta bort lärandemålet och dess uppgifter\"\n                onClick={ev=>{\n                  ev.preventDefault();\n                  this.props.removeLearningGoal(lg);\n                }}\n              >\n                <i className=\"fa fa-trash\" />\n              </a>\n            </div>\n          </div>\n\n          <div className=\"learningGoalTasks\">\n            <div className=\"taskContainer\">\n              {lg.tasks.map(userTask => {\n                const isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';\n\n                const taskType = getTaskType(userTask);\n                const expired = moment(userTask.deadline).startOf('day') < moment().startOf('day');\n\n                return <div key={userTask.id} style={isWorking ? { opacity: 0.5 } : {}}>\n                  <div className=\"align-horizontal\">\n                    <div className=\"horizontalItem top\">\n                      <div className={\"checkBox\" + (userTask.done ? \" checked\" : \"\")}\n                        onClick={ev => !isWorking && this.props.setTaskDone(userTask, !userTask.done)}>\n                      </div>\n                    </div>\n                    <div className=\"horizontalItem top\">\n                      {taskType === 'courseBuilderTask' ?\n                        <a href={getTaskUrl(userTask, this.props.viewCourseUrl)}>{userTask.name}</a> :\n                        taskType === 'siteVisionTask' ?\n                          <a href={userTask.url}>{userTask.name}</a> :\n                          <a\n                            className={features.EditUserTasksViaPenOnly && !userTask.url ? \"link-less\": \"\"}\n                            onClick={features.EditUserTasksViaPenOnly ?\n                              undefined :\n                              ev=>{\n                                ev.preventDefault();\n                                this.props.editTask(userTask);\n                              }}\n                            href={userTask.url}\n                            target={(userTask.url+'').toLowerCase().startsWith(location.host.toLowerCase()) ?\n                              \"_self\" :\n                              \"_blank\"}\n                          >{userTask.name}</a>}\n                      {userTask.deadline && <div className={\"dateSet\" + (expired ? ' expired' : '')}>\n                        <i title={moment(userTask.deadline).format(\"YYYY-MM-DD\")} className=\"fa fa-calendar\" aria-hidden=\"true\"\n                          /*style={{cursor: 'pointer'}} */\n                          onClick={()=>{}}></i>\n                      </div>}\n                    </div>\n                    {\n                      features.EditUserTasksViaPenOnly ?\n                      <div className=\"horizontalItem top taskEdit\">\n                        <a className=\"editItem\" onClick={() => this.props.editTask(userTask)} />\n                      </div> : undefined\n                    }\n                  </div>\n                  {userTask.subTasks && <div className=\"subtasks\">\n                    {userTask.subTasks.map(subTask =>\n                      <div key={subTask.id} >\n                        <div className=\"horizontalItem top\">\n                          <div\n                            className={\"checkBox\" + (subTask.done ? \" checked\" : \"\")}\n                            onClick={ev =>\n                              !isWorking &&\n                              this.props.setSubTaskDone(userTask, subTask, !subTask.done)}>\n                          </div>\n                        </div>\n                        <div className=\"horizontalItem top\">\n                          <a\n                            href={subTask.url || undefined}\n                            target={(userTask.url+'').toLowerCase().startsWith(location.host.toLowerCase()) ?\n                            \"_self\" :\n                            \"_blank\"}\n                            className={\n                              subTask.url ?\n                                undefined :\n                                'link-less'\n                          }>{subTask.name}</a>\n                        </div>\n                        <div className=\"horizontalItem top taskEdit\">\n                          <a className=\"editItem\" onClick={() => this.props.editSubTask(userTask, subTask)} />\n                        </div>\n                      </div>)}\n                  </div>}\n                </div>\n              })}\n            </div>\n          </div>\n\n          <div className=\"learningGoalTools\">\n            <div className=\"btn addOwnGoal\"\n              onClick={() => this.props.addOwnTask(this.props.courseName, lg.name)}>\n              <i className=\"fa fa-plus\" aria-hidden=\"true\"></i> {L`Eget arbetsmål`}\n            </div>\n          </div>\n          <br />\n        </div>\n      )}\n    </OpenCloseBox>\n  }\n}\n\nfunction getTaskUrl(userTask: UserTask, viewCourseUrl: string) {\n  if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {\n    const courseUrl = preserveImpersonationQuery(viewCourseUrl, { courseId: userTask.course[0].id });\n    return `${courseUrl}#/task/${userTask.task[0].id}`;\n  }\n  return userTask.url;\n}\n","import moment from 'moment';\nimport { localMoment } from '../../globals/moment-sv-locale';\n\ntype Moment = moment.Moment;\n\nexport class WeekPlannerPersistedState {\n  static EXPIRATION_HOURS = 12;\n  static VERSION = 2;\n\n  user: string;\n  lastWrite: number;\n  weekDate: number;\n  openCourses: { [path: string]: boolean }\n\n  constructor (userOrCopy: string | WeekPlannerPersistedState) {\n    if (typeof userOrCopy === 'string') {\n      this.user = userOrCopy;\n      this.lastWrite = Date.now();\n      this.weekDate = localMoment().startOf('week').valueOf();\n      this.openCourses = {};\n    } else {\n      Object.assign(this, userOrCopy);\n    }\n  }\n\n  static async load(user: string) {\n    const cookie = localStorage.getItem('WeekPlannerPersistedState2');\n    const storedData = cookie && (JSON.parse(cookie) as WeekPlannerPersistedState);\n    const state = new WeekPlannerPersistedState(user);\n    if (storedData) Object.assign(state, storedData);\n\n    return state.user === user && !state.isExpired(moment()) ?\n      state : new WeekPlannerPersistedState(user);\n  }\n\n  async save() {\n    this.lastWrite = Date.now();\n    const json = JSON.stringify(this);\n    localStorage.setItem('WeekPlannerPersistedState2', json);\n  }\n\n  isExpired (asOf: Moment) {\n      return moment(this.lastWrite)\n        .isBefore(\n            asOf.add(\n                0-WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours')\n        );\n  }\n}\n","import * as React from 'react';\nimport { UserTasksBox } from './user-tasks-box';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport { createUUID, HttpError } from \"kedbackend/client\";\nimport { refine, VirtualLearningGoal } from './refiner';\nimport env from '../../globals/KED.env';\nimport { userTasksRepo } from '../../repos/user-tasks-repo';\nimport { L, compareProp } from '../../utils/utils';\nimport moment from 'moment';\n//import { CustomGoal } from '../../contracts/ked-models';\nimport { TSON } from '../../utils/tson';\nimport { WeekPlannerPersistedState } from './weekplanner-persisted-state';\nimport { RemoveItem } from '../course-builder/sub-components/remove-item';\nimport { Dialogs } from '../utility-components/dialogs';\nimport { AddCustomGoal } from './add-custom-goal';\nimport { AddCustomTask } from './add-custom-task';\nimport { EditUserTask } from './edit-user-task';\nimport { Spinner } from '../course-builder/sub-components/spinner';\nimport { OpenCloseBox } from '../utility-components/open-close-box';\nimport { PendingJob } from '../../utils/pending-job';\nimport { AddOrEditSubTask } from './add-or-edit-sub-task';\nimport { getAdjustedWeek, KEDWeek } from '../../utils/weekutil';\n\ninterface Props {\n  viewCourseUrl: string;\n}\n\ninterface State {\n  weekDate: number;\n  dialogs: any[];\n  userTasks: UserTask[];\n  openCourses: { [path: string]: boolean }\n  strategy?: string;\n  assessment?: string;\n  weekTextsUT: UserTask | null;\n  saving: boolean;\n  isLoading: boolean;\n}\n\nexport class WeekPlanner extends React.Component<Props,State> {\n  weekTextsSavingJob: PendingJob;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      userTasks: [],\n      weekDate: Date.now(),\n      openCourses: {},\n      dialogs: [],\n      saving: false,\n      weekTextsUT: null,\n      isLoading: true\n    }\n    this.onChange = this.onChange.bind(this);\n    this.weekTextsSavingJob = new PendingJob(()=>this.saveWeekTexts());\n  }\n\n  componentDidMount() {\n    userTasksRepo.subscribe(this.onChange);\n  }\n\n  componentWillUnmount() {\n    userTasksRepo.unsubscribe(this.onChange);\n    this.weekTextsSavingJob.stop();\n  }\n\n  onChange(userTasks: UserTask[], persisted: WeekPlannerPersistedState, weekTextsUT: UserTask) {\n    const newState : Partial<State> = {\n      userTasks,\n      weekDate: persisted.weekDate,\n      openCourses: persisted.openCourses,\n      weekTextsUT,\n      isLoading: false\n    }\n    if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {\n      // Changing week. Reset to new week's values\n      newState.strategy = weekTextsUT.weekTexts.strategy;\n      newState.assessment = weekTextsUT.weekTexts.assessment;\n    }\n    this.setState(newState as any); // React's use of Pick instead of Partial makes things complex here.\n  }\n\n  isWeekTextsEdited() {\n    const { strategy, assessment, weekTextsUT } = this.state;\n    return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);\n  }\n\n  private async saveWeekTexts() {\n    console.log(\"Saving texts...\");\n    const { strategy, assessment, weekTextsUT } = this.state;\n    if (this.isWeekTextsEdited()) {\n      await userTasksRepo.upsert(weekTextsUT, ut => {\n        ut.weekTexts = { strategy, assessment };\n      });\n    }\n  }\n\n  prevWeek() {\n    //this.saveWeekTexts();\n    userTasksRepo.changeWeek(moment(this.state.weekDate).add(-1, 'week').toDate());\n  }\n\n  nextWeek() {\n    //this.saveWeekTexts();\n    userTasksRepo.changeWeek(moment(this.state.weekDate).add(1, 'week').toDate());\n  }\n\n  openDialog(dialog) {\n    this.setState({ dialogs: [...this.state.dialogs, dialog] });\n  }\n\n  openAddGoalDialog() {\n    this.openDialog(<AddCustomGoal\n      onSave={async (learningGoal: string) => {\n        if (!learningGoal) throw new Error (L`Lärandemålet kan inte vara tomt`);\n        if (!this.state.saving) {\n          this.setState({ saving: true });\n          try {\n            await this.addCustomGoal(learningGoal);\n          } finally {\n            this.setState({ saving: false });\n          }\n          this.closeDialog();\n        }\n      }} />);\n  }\n\n  openAddOwnTaskDialog(courseName: string, learningGoalName: string) {\n    this.openDialog(<AddCustomTask\n      isTask={!courseName}\n      onSave={async (name: string, description: string, url: string) => {\n        if (!name) throw new Error (L`Namnet kan inte vara tomt`);\n        if (!this.state.saving) {\n          this.setState({ saving: true });\n          try {\n            await this.addCustomTask(courseName, learningGoalName, name, description, url);\n          } finally {\n            this.setState({ saving: false });\n          }\n          this.closeDialog();\n        }\n      }} />);\n  }\n\n  editTask(userTask: UserTask) {\n    this.openDialog(<EditUserTask\n      userTask={userTask}\n      onUpdate={async (updater: (ut: UserTask) => void) => {\n        const test = {...userTask};\n        updater(test);\n        if (!test.name) throw new Error (L`Namnet får inte vara tomt`);\n        this.closeDialog();\n        await userTasksRepo.update([userTask], updater);\n      }}\n      onDelete={async id => {\n        this.closeDialog();\n        await userTasksRepo.delete([id]);\n      }}\n      openDialog={dialog=>this.openDialog(dialog)}\n      closeDialog={()=>this.closeDialog()}\n    />);\n  }\n\n  editSubTask(userTask: UserTask, subTask: UserSubTask) {\n    this.openDialog(<AddOrEditSubTask\n      mode=\"edit\"\n      userTask={userTask}\n      subTask={subTask}\n      closeDialog={()=>this.closeDialog()}\n    />);\n  }\n\n  closeDialog() {\n    this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });\n  }\n\n\n\n  async addCustomGoal(learningGoal: string) {\n    let latestTimeStamp = Math.max.apply(\n      Math.max,\n      [this.state.weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n    await userTasksRepo.insert([{\n      id: createUUID(),\n      learningGoal,\n      dateTime: latestTimeStamp + 2000\n    }]);\n\n    await userTasksRepo.setWeekPlannerBoxOpen(\"\", true);\n  }\n\n  async removeLearningGoal(learningGoal: VirtualLearningGoal) {\n    if (learningGoal.tasks.length > 0) {\n      if (!confirm(`Ta bort lärandemål samt ${learningGoal.tasks.length} uppgifter?`)) {\n        return;\n      }\n    }\n    await userTasksRepo.delete(learningGoal.allTasks.map(t => t.id));\n  }\n\n  async addCustomTask(courseName: string, learningGoal: string, name: string, description: string, url: string) {\n    let latestTimeStamp = Math.max.apply(\n      Math.max,\n      [this.state.weekDate].concat(this.state.userTasks.map(t => t.dateTime)));\n\n    /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>\n      ut.name == null &&\n      !ut.courseName &&\n      ut.learningGoal === learningGoal);\n\n    if (emptyLearningGoalPlaceholder) {\n      // Hijack learning-goal placeholder and make it the real task.\n      // This will make the learning goal disappear once this task\n      // is deleted.\n      await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {\n        Object.assign(ut, { name, description, url });\n      });\n    } else {*/\n      // Add another task to same learning-goal\n      await userTasksRepo.insert([{\n        id: createUUID(),\n        dateTime: latestTimeStamp + 2000,\n        courseName,\n        learningGoal,\n        name,\n        description,\n        url\n      }]);\n    //}\n  }\n\n  setIsOpen(courseName: string, isOpen: boolean) {\n    userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);\n  }\n\n  async setTaskDone(task: UserTask, done: boolean) {\n    await userTasksRepo.setTaskDoneState(task, done);\n  }\n\n  async setSubTaskDone(task: UserTask, subTask: UserSubTask, done: boolean) {\n    await userTasksRepo.setSubTaskDoneState(task, subTask.id, done);\n  }\n\n  async copyFromPreviousWeek() {\n    const { userTasks, openCourses, weekDate } = this.state;\n    const prevWeekNo = getAdjustedWeek (moment(weekDate).add(-1, 'week'));\n    const prevKEDWeek = KEDWeek(moment(weekDate).year(), prevWeekNo);\n    // Read last week's goals and tasks\n    let prevTasks = await env.kedBackendClient.list<UserTask>(\"usertasks\", {\n      from: prevKEDWeek.notBefore,\n      to: prevKEDWeek.notAfter,\n      role: \"USER\",\n      include: [\"task\", \"course\", \"acl\"],\n      flags: [\"includeIdsOnly\"]\n    });\n    prevTasks = prevTasks\n      .filter(prevTask => !prevTask.done)  // Don't copy done tasks\n      .filter(prevTask => !!prevTask.name) // Don't copy empty learning goals\n      .filter(prevTask => !userTasks.some(taskOfCurrentWeek =>\n        taskOfCurrentWeek.name === prevTask.name &&\n        taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&\n        taskOfCurrentWeek.courseName === prevTask.courseName)); // Ignore identical tasks (already copied)\n\n    // Now create copies but place them in the current week.\n    let latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(userTasks.map(t => t.dateTime)));\n\n    const copies = prevTasks.sort(compareProp(\"dateTime\")).map(task => {\n      const copy: UserTask = { ...task, dateTime: latestTimeStamp += 1000 };\n      copy.id = createUUID();\n      if (copy.subTasks) {\n        copy.subTasks = copy.subTasks.filter(st => !st.done);\n      }\n      delete copy.$etag;\n      return copy;\n    });\n\n    // Store it\n    await userTasksRepo.insert(copies);\n  }\n\n  render() {\n    const weekNumber = moment(this.state.weekDate).week();\n    //console.log(\"Weekydate: \"  + new Date(this.state.weekDate) + \" which is week no \" + weekNumber);\n    const currentWeek = moment().week();\n    const taskSets = refine(this.state.userTasks);\n    const { dialogs, weekTextsUT, strategy, assessment, isLoading } = this.state;\n    const isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');\n    const isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);\n    const isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);\n    const enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);\n    return <div>\n      <div className={`ked_boxed weekPlanner${weekNumber === currentWeek ? \" currentWeek\" : \"\"}`}\n        onKeyDown={ev => {\n          if (ev.which === 83 && ev.ctrlKey) {\n            ev.preventDefault();\n            if (!isSaving && this.isWeekTextsEdited()) {\n              this.weekTextsSavingJob.triggerChange(0);\n            }\n          }\n        }}>\n        <div className={`weekSelect`}>\n          <div className=\"horizontalItem\">\n            <p>{L`Vecka ${weekNumber}`}</p>\n          </div>\n          <div className=\"horizontalItem\">\n            <div className=\"btn-group\">\n              <button className=\"btn\" onClick={() => this.prevWeek()}>\n                <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n              </button>\n              <button className=\"btn\" onClick={() => this.nextWeek()}>\n                <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <h4>{L`Loggbok`}</h4>\n        {taskSets.length > 0 && <hr />}\n\n        {taskSets.map(props =>\n          <UserTasksBox\n            key={props.courseName}\n            {...props}\n            courseName={props.courseName}\n            learningGoals={props.learningGoals}\n            viewCourseUrl={this.props.viewCourseUrl}\n            openCourses={this.state.openCourses}\n            addOwnTask={(courseName: string, learningGoalName: string) => this.openAddOwnTaskDialog(courseName, learningGoalName)}\n            setIsOpen={this.setIsOpen.bind(this)}\n            setTaskDone={this.setTaskDone.bind(this)}\n            setSubTaskDone={this.setSubTaskDone.bind(this)}\n            editTask={task => this.editTask(task)}\n            editSubTask={(task, subTask) => this.editSubTask(task, subTask)}\n            removeLearningGoal={lg => this.removeLearningGoal(lg)} />)}\n\n        <hr />\n\n        {isLoading ? <Spinner /> : <div>\n          <div className=\"btn\" onClick={ev => this.openAddGoalDialog()}>\n            <i className=\"fa fa-list-alt\" aria-hidden=\"true\"></i> {L`Eget lärandemål`}\n\n          </div>\n          <div className=\"btn\" onClick={ev => this.copyFromPreviousWeek()}>\n            <i className=\"fa fa-clone\" aria-hidden=\"true\"></i> {L`Kopiera ej klara från föregående vecka`}\n          </div>\n          <OpenCloseBox\n            title={<h5>{L`Strategi & Utvärdering`}</h5>}\n            headerOpen={this.state.openCourses[\"StratUtv\"]}\n            onOpenClose={becameOpen => this.setIsOpen(\"StratUtv\", becameOpen)}\n          >\n            <h3>Strategi</h3>\n            <p>Hur jag ska göra för att lära mig.</p>\n            <hr/>\n            <textarea\n              className=\"weekplanner-textarea\"\n              value={strategy}\n              onChange={ev => {\n                this.setState({strategy: ev.target.value});\n                this.weekTextsSavingJob.triggerChange(500);\n              }} />\n\n            <h3>Utvärdering</h3>\n            <p>Reflektion kring din arbetsinsats och dina valda strategier under veckan.\n              Utvärdera i förhållande till dina mål.</p>\n            <hr/>\n            <textarea\n              className=\"weekplanner-textarea\"\n              value={assessment}\n              onChange={ev => {\n                this.setState({assessment: ev.target.value})\n                this.weekTextsSavingJob.triggerChange(500);\n              } }/>\n            <div\n              className=\"btn\"\n              tabIndex={0}\n              style={enableSaveButton ? {} : {opacity: 0.5}}\n              onClick={()=>!isSaving && this.weekTextsSavingJob.triggerChange(0)}>\n                <i className=\"fa fa-floppy-o\" aria-hidden=\"true\" />\n                  {enableSaveButton ? \" Spara\" : \" Sparad\"}\n            </div>\n        </OpenCloseBox>\n\n        </div>}\n      </div>\n      <Dialogs\n        dialogs={dialogs}\n        popDialog={() => {\n            this.setState(\n              ({dialogs}) => ({ dialogs: dialogs.slice(0, dialogs.length - 1) }));\n          }\n        } />\n    </div>\n  }\n}\n","import { User } from '../contracts/ked-models';\nimport { parseQueryString } from '../utils/query-string';\nimport env from '../globals/KED.env';\n\nexport class Features {\n  EditUserTasksViaPenOnly?: boolean;\n  SubTasks?: boolean;\n  AssignmentTasks?: boolean;\n\n  constructor () {\n    const user = env.currentUser!;\n    const query = parseQueryString(location.search, {toLower: true});\n    const features = ((query.features||'').split(',') as string[])\n      .map(feature => feature.toLowerCase()); // Can be used on forwards...\n\n    this.EditUserTasksViaPenOnly =\n      user.schoolType !== 'Grundskolor' && query.schooltype !== \"Grundskolor\";\n    this.SubTasks =\n      user.schoolType !== 'Grundskolor' && query.schooltype !== \"Grundskolor\";\n    this.AssignmentTasks = !!query.testversion;\n  }\n}\n","export * from './features';\n","/* These scripts assume some of the global vars have already been set:\n  * KED.cfg\n  * KED.env.currentUser\n\n  The rest will be set here (client side)\n*/\nimport './set-bearer-providers';\nimport './set-ked-backend-client';\nimport './set-eds-client';\n","import { parseQueryString, generateQueryString, splitUrlAndQuery } from \"../utils/query-string\";\nimport { KedBackendClientWeb, WebServerBearerProvider, isomorphic, storage } from 'kedbackend/clientweb';\nimport { BearerProvider, KedBearerProvider } from 'kedbackend/client';\nimport cfg from '../globals/KED.cfg';\nimport env from '../globals/KED.env';\nimport { User } from \"../contracts/ked-models\";\nimport { IMPERSONATION_QUERY_PARAMS } from \"../access-control/index\";\nimport { cherryPickProps } from \"../utils/utils\";\n\nfunction getMergedTokenPath(tokenPath: string, locationSearch: string, scopes: string[]) {\n  // Merge configured query params of token path with params given to current page\n  const currentQuery = parseQueryString(locationSearch);\n  const impersonationProps = cherryPickProps(currentQuery, IMPERSONATION_QUERY_PARAMS);\n  const [tokenPathWithoutQuery, tokenQueryString] = splitUrlAndQuery(tokenPath);\n  const tokenPathQuery = parseQueryString(tokenQueryString);\n  return tokenPathWithoutQuery + generateQueryString({\n    ...tokenPathQuery,\n    ...impersonationProps,\n    scopes: scopes.join(',')\n  });\n}\n\nfunction getTokenId(mergedTokenPath: string, userEmail: string) {\n  return mergedTokenPath + \"/\" + userEmail;\n}\n\nfunction saveUserInfo(user: User, tokenId: string) {\n  env.currentUser = user;\n  sessionStorage.setItem(\"userInfo\" + tokenId, JSON.stringify(user));\n}\n\nfunction loadUserInfo(tokenId: string) {\n  const storedSessionUser = sessionStorage.getItem(\"userInfo\" + tokenId);\n  if (storedSessionUser) {\n    env.currentUser = JSON.parse(storedSessionUser);\n  }\n}\n\nfunction createBearerProvider(mergedTokenPath: string, userEmail: string) {\n  const tokenId = getTokenId(mergedTokenPath, userEmail);\n  return new WebServerBearerProvider(mergedTokenPath, responseText => {\n    const res = JSON.parse(responseText) as { ok: boolean, error?: string, token?: string, user?: User };\n    if (!res.ok) throw new Error(res.error);\n    if (res.user) {\n      saveUserInfo(res.user, tokenId);\n    }\n    return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };\n  }, tokenId);\n}\n\nfunction createGoogleTokenProvider(mergedTokenPath: string, userEmail: string) {\n  const tokenId = getTokenId(mergedTokenPath, userEmail);\n  return new WebServerBearerProvider(mergedTokenPath, responseText => {\n    const res = JSON.parse(responseText) as { ok: boolean, error?: string, token?: string, user?: User };\n    if (!res.ok) throw new Error(res.error);\n    return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };\n  }, tokenId);\n}\n\nfunction createTestTokenProvider(tokenUrl: string, user: User, scopes: string[]) {\n  return new KedBearerProvider(\n    isomorphic,\n    storage,\n    tokenUrl + user.mail + location.search,\n    cfg.KED_CLIENT_ID,\n    cfg.KED_CLIENT_SECRET,\n    tokenUrl, {\n      email: user.mail.toLowerCase(),\n      roles: user.roles,\n      school: user.school,\n      schoolType: user.schoolType,\n      scopes\n    });\n}\n\n// env.currentUser.mail is set by SiteVision server initially.\n// A response from /api/token may change the mail attribute of the current\n// user, so env.currentUser.mail may be different after getting a response.\n// However, the initial value is valuable always in order to distinguish the case\n// when one normal user logs out and another user logs in.\nconst initialUserEmail = env.currentUser && env.currentUser.mail; // Initial value of mail. May change.\nif (initialUserEmail) {\n  // KED\n  if (cfg.KED_TOKEN_PATH) {\n    //\n    //\n    // Production / SiteVision proxied /api/token to request tokens from:\n    //\n    //\n    const mergedTokenPath = getMergedTokenPath(\n      cfg.KED_TOKEN_PATH,\n      location.search, [\n        \"kedbackend\",\n        \"EDS\",\n      ]);\n    env.bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);\n    loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));\n\n    // Google\n    const googleMergedPath = getMergedTokenPath(\n      cfg.KED_TOKEN_PATH,\n      location.search, [\n        \"https://www.googleapis.com/auth/calendar.readonly\",\n      ]);\n    env.googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);\n  } else if (cfg.KED_TOKEN_URL && cfg.KED_CLIENT_ID && cfg.KED_CLIENT_SECRET) {\n    //\n    //\n    // Test - go directly to KEDAUTH server to retrieve tokens\n    //\n    //\n    env.bearerProvider = createTestTokenProvider(cfg.KED_TOKEN_URL, env.currentUser, [\n      \"kedbackend\",\n      \"EDS\",\n    ]);\n    env.googleTokenProvider = createTestTokenProvider(cfg.KED_TOKEN_URL + \"/google\", env.currentUser, [\n      \"https://www.googleapis.com/auth/calendar.readonly\",\n    ]);\n  } else {\n    throw new Error(`Missing configuration parameter KED_TOKEN_PATH`);\n  }\n}\n","import env from '../globals/KED.env';\nimport cfg from '../globals/KED.cfg';\nimport { isomorphic } from 'kedbackend/clientweb';\nimport { EdsClient } from '../apis/edsclient';\n\nenv.edsClient = new EdsClient (\n  isomorphic,\n  cfg.EDS_API_URL,\n  env.bearerProvider);\n\n","import env from '../globals/KED.env';\nimport cfg from '../globals/KED.cfg';\nimport { KedBackendClientWeb } from 'kedbackend/clientweb';\n\nenv.kedBackendClient = new KedBackendClientWeb (\n  cfg.KED_API_URL,\n  env.bearerProvider);\n\n","import KED from './KED';\n\n/* This default configuration is used as a fallback.\nNormally both test pages and production pages will override these configrations\n*/\n/*const defaultConfiguration = {\n  // Environment\n  ENVIRONMENT: 'development' as 'production' | 'development' | 'test',\n  // Authentication Server:\n  KED_TOKEN_URL: 'https://kedauthtest.azurewebsites.net/token',\n  KED_TOKEN_PATH: '/api/token.Skript.portlet?sv.contenttype=application/json',\n  KED_CLIENT_ID: 'devclient',\n  KED_CLIENT_SECRET: '4fRdfQpWtJqjTWf',\n  // Services:\n  KED_API_URL: 'https://kedbackendtest.azurewebsites.net/api/',  \n  EDS_API_URL: 'https://edsportalowinapi.azurewebsites.net/api/'\n}*/\n\nexport interface IKedConfiguration {\n  ENVIRONMENT: 'production' | 'development' | 'test';\n  KED_TOKEN_URL: string;\n  KED_TOKEN_PATH: string;\n  KED_CLIENT_ID: string;\n  KED_CLIENT_SECRET: string;\n  KED_API_URL: string;\n  EDS_API_URL: string;\n};\n\nif (!KED.cfg) KED.cfg = {};\n\nexport default KED.cfg as IKedConfiguration;\n","import {User, LearningModuleTasks} from '../contracts/ked-models';\nimport { KedBackendClient, BearerProvider } from 'kedbackend/client';\nimport {UserTask} from 'kedbackend/models';\nimport {KedRepo} from '../repos/ked-repo';\nimport {EdsClient} from '../apis/edsclient';\nimport KED from './ked';\n\nexport interface Env {\n    currentUser?: User;\n    learningModuleTasks?: LearningModuleTasks;\n    bearerProvider?: BearerProvider;\n    googleTokenProvider?: BearerProvider;\n    kedBackendClient?: KedBackendClient;\n    edsClient?: EdsClient;\n    userTasksRepo?;\n    hiddenCoursesRepo?;\n}\n\nif (!KED.env) KED.env = {};\n\nexport default KED.env as Env;\n","\nexport const KED_NAMESPACE = \"KED\";\n\ndeclare var KED: any;\n\nvar result = typeof KED === 'undefined' ? {} : KED;\n\nif (typeof window !== 'undefined' && typeof KED === 'undefined') {\n    window[KED_NAMESPACE] = result;\n}\n\nexport default result;\n","\nexport const KED_NAMESPACE = \"KED\";\n\ndeclare var KED: any;\n\nvar result = typeof KED === 'undefined' ? {} : KED;\n\nif (typeof window !== 'undefined' && typeof KED === 'undefined') {\n    window[KED_NAMESPACE] = result;\n}\n\nexport default result;\n","import moment from 'moment';\n\nmoment.updateLocale('sv', {\n    months : 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),\n    monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),\n    weekdays : 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),\n    weekdaysShort : 'sön_mån_tis_ons_tor_fre_lör'.split('_'),\n    weekdaysMin : 'sö_må_ti_on_to_fr_lö'.split('_'),\n    longDateFormat : {\n        LT : 'HH:mm',\n        LTS : 'HH:mm:ss',\n        L : 'YYYY-MM-DD',\n        LL : 'D MMMM YYYY',\n        LLL : 'D MMMM YYYY [kl.] HH:mm',\n        LLLL : 'dddd D MMMM YYYY [kl.] HH:mm',\n        lll : 'D MMM YYYY HH:mm',\n        llll : 'ddd D MMM YYYY HH:mm'\n    },\n    calendar : {\n        sameDay: '[Idag] LT',\n        nextDay: '[Imorgon] LT',\n        lastDay: '[Igår] LT',\n        nextWeek: '[På] dddd LT',\n        lastWeek: '[I] dddd[s] LT',\n        sameElse: 'L'\n    },\n    relativeTime : {\n        future : 'om %s',\n        past : 'för %s sedan',\n        s : 'några sekunder',\n        ss : '%d sekunder',\n        m : 'en minut',\n        mm : '%d minuter',\n        h : 'en timme',\n        hh : '%d timmar',\n        d : 'en dag',\n        dd : '%d dagar',\n        M : 'en månad',\n        MM : '%d månader',\n        y : 'ett år',\n        yy : '%d år'\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(e|a)/,\n    ordinal : function (number) {\n        var b = number % 10,\n            output = (~~(number % 100 / 10) === 1) ? 'e' :\n            (b === 1) ? 'a' :\n            (b === 2) ? 'a' :\n            (b === 3) ? 'e' : 'e';\n        return number + output;\n    },\n    week : {\n        dow : 1, // Monday is the first day of the week.\n        doy : 4  // The week that contains Jan 4th is the first week of the year.\n    }\n});\n\nexport const localMoment = function () {\n    return moment.apply(this, arguments).locale('sv');\n}\n","import { KedRepo } from './ked-repo';\nimport { UserHiddenCourse, School, Course } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { EDSCourse } from '../contracts/eds';\nimport { showError, flatten, compareProp, arrayToMap } from '../utils/utils';\nimport { createUUID } from 'kedbackend/client';\nimport { EDSPeriod } from '../apis/edsclient';\nimport { getSchoolMoment } from '../utils/school-moment';\nimport moment from 'moment';\nexport let hiddenCoursesRepo = env.hiddenCoursesRepo as HiddenCoursesRepo;\n\n\nexport interface CourseWithHiddenState {\n  id: string;\n  name: string;\n  description?: string;\n  visible: boolean;\n  defaultVisible: boolean;\n}\n\nexport type HiddenCoursesSubscriber = (courses: CourseWithHiddenState[]) => void;\n\nexport interface SubscriberOptions {\n  fullCourse: boolean;\n}\n\nclass HiddenCoursesRepo {\n  result: CourseWithHiddenState[] | null = null;\n  subscribers: {subscriber: HiddenCoursesSubscriber, options: SubscriberOptions}[] = [];\n  fullCourse: boolean = false;\n  kedCoursesPromise: Promise<Partial<Course>[]>;\n  edsCoursesPromise: Promise<EDSCourse[]>;\n  userHiddenCoursesPromise: Promise<UserHiddenCourse[]>;\n  kedRepo: KedRepo<UserHiddenCourse>;\n\n  constructor() {\n    this.kedRepo = new KedRepo<UserHiddenCourse>({\n      getClient: () => env.kedBackendClient,\n      optimistic: true,\n      table: \"userhiddencourses\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async () => ({role: \"USER\"}),\n    });\n\n    const initPromise = this.init();\n\n    Promise.all([\n      initPromise,\n      this.kedCoursesPromise,\n      this.edsCoursesPromise\n    ]).catch(err => showError(err));\n  }\n\n  async init() {\n    // Wait till we have a currentUser that is accurate also for impersonated users.\n    const bearerPromise = env.bearerProvider ? env.bearerProvider.getBearer() : Promise.resolve({});\n\n    // In parallell, we request:\n    //  1) KEDBackend: Schools.activeCourses\n    //  2) EDS.getActiveAcourses()\n    //  3) (via subscription): KEDBackend: userHiddenCourses\n\n    this.kedCoursesPromise = bearerPromise.then(()=>this.listKedCourses());\n    this.edsCoursesPromise = bearerPromise.then(()=>this.listEDSCourses());\n    let resolveUserHiddenCoursesPromise: (x: UserHiddenCourse[])=>void;\n    let userHiddenCoursesResolved = false;\n    this.userHiddenCoursesPromise = new Promise(resolve => resolveUserHiddenCoursesPromise = x => {\n      if (userHiddenCoursesResolved) {\n        this.userHiddenCoursesPromise = Promise.resolve(x);\n      } else {\n        userHiddenCoursesResolved = true;\n        resolve(x);\n      }\n    });\n    await bearerPromise;\n\n    this.kedRepo.mem.subscribe(async userHiddenCourses => {\n      // Change or initial value ready to be notified out.\n      // But first, check we have all the related data responses we need.\n      const [activeCourses, edsActiveCourses] = await Promise.all([\n        this.kedCoursesPromise, \n        this.edsCoursesPromise]);\n      \n      // Refine the three results into a single result\n      this.result = await this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses);\n      // Notify our subscribers:\n      this.subscribers.forEach(subscriber => this.notifySubscriber(subscriber.subscriber, subscriber.options));\n      resolveUserHiddenCoursesPromise(userHiddenCourses);\n    });\n  }\n\n  async listKedCourses() {\n    const fullCourse = this.fullCourse;\n    console.log(\"FullCourse: \"+ fullCourse);\n    const schools = await env.kedBackendClient.list<School>('schools', {\n      role: \"USER\", // Workaround from showing activated templates among courses of the school\n      name: env.currentUser.school,\n      include: \"activeCourses\",\n      flags: fullCourse ? [] : [\"includeIdsAndNamesOnly\"],\n      cacheBust: env.currentUser.username\n    });\n    const activeCourses = flatten(schools.map(school => school.activeCourses)).sort(compareProp(\"name\"))\n    return activeCourses;\n  }\n\n  listEDSCourses(): Promise<EDSCourse[] | null> {\n    const periodName = new EDSPeriod(getSchoolMoment(moment())).period;\n    return env.currentUser.roles.indexOf('EMPLOYEE') === -1 ?\n      // STUDENTs should, by default, only show courses that is listed in EDS\n      env.edsClient.getActiveCourses({periodName}) :\n      // EMPLOYEEs should, by default, show all courses on school - no need to query EDS\n      null;\n  }\n\n  async createCoursesList(\n    edsActiveCourses: EDSCourse[] | null,\n    userHiddenCourses: UserHiddenCourse[],\n    activeCourses: Partial<Course>[]) : Promise<CourseWithHiddenState[]>\n  {\n    const hiddenCoursesMap = arrayToMap(userHiddenCourses.filter(hc => !hc.show), hc => hc.name);\n    const visibleCoursesMap = arrayToMap(userHiddenCourses.filter(hc => hc.show), hc => hc.name);\n\n    const isStudent = env.currentUser.roles.some(role => role === 'STUDENT');\n\n    const edsCourseMap = edsActiveCourses ?\n      arrayToMap(edsActiveCourses, c => c.name.substr(0, 20)) :\n      {};\n\n    const result = await Promise.all(activeCourses.map(async ({id, name, description, modifiedBy}) => {\n\n      const edsCourse = edsCourseMap[name.substr(0, 20)];\n\n      const defaultVisible = isStudent ?\n        edsCourse != null : // Course name also listed in EDS\n        true; // Teachers not dependent on EDS listing\n\n      const visible = defaultVisible ?\n        !hiddenCoursesMap[id] : // Visible unless user has overridden that.\n        !!visibleCoursesMap[id]; // Hidden unless user has overridden that.\n      \n      if (!this.fullCourse && name.length >= 20) {\n        // name could be truncated. Resolve the full name.\n        if (edsCourse) {\n          // Resolve full course name from EDS.\n          name = edsCourse.name;\n        } else if (visible) {\n          // No EDS to fallback to. Unless we wanna print course name as \"THE Partial name\" + \"...\",\n          // we must query the full course here from kedbackend:\n          const fullCourse = await env.kedBackendClient.get(\"courses\", id);\n          name = fullCourse.name;\n        }\n      }\n\n      // Resolve description:\n      if (modifiedBy && modifiedBy.name && !description) {\n        description = `${modifiedBy.name}s version`;\n      }\n\n      return {\n        id,\n        name,\n        description,\n        visible,\n        defaultVisible\n      };\n    }));\n\n    return result;\n  }\n\n  async hideCourse(c: CourseWithHiddenState) {\n    const overrides = this.kedRepo.mem.items.filter(hc => hc.name === c.id);\n    if (c.defaultVisible) {\n      await this.kedRepo.insert([{\n        id: createUUID(),\n        name: c.id\n      }]);\n    } else {\n      await this.kedRepo.delete(overrides.map(ov => ov.id));      \n    }\n  }\n\n  async showCourse(c: CourseWithHiddenState) {\n    const overrides = this.kedRepo.mem.items.filter(hc => hc.name === c.id);\n    if (c.defaultVisible) {\n      await this.kedRepo.delete(overrides.map(ov => ov.id));\n    } else {\n      await this.kedRepo.insert([{\n        id: createUUID(),\n        name: c.id,\n        show: true\n      }]);\n    }\n  }\n\n  notifySubscriber = (subscriber: HiddenCoursesSubscriber, options: SubscriberOptions) => {\n    try {\n      subscriber(options.fullCourse ? this.result : this.result.filter(c => c.visible));\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async subscribe (subscriber: HiddenCoursesSubscriber, options: SubscriberOptions) {\n    if (!this.fullCourse && options.fullCourse) {\n      // The subscriber demands full courses\n      // Need to query that before notifying\n      // Also affect state for future internal notification\n      this.fullCourse = options.fullCourse;\n      this.kedCoursesPromise = this.listKedCourses(); // Redo this call, now loading full courses\n      // Wait for all outstanding fetch() calls to complete:\n      const [activeCourses, edsActiveCourses, userHiddenCourses] = await Promise.all([\n        this.kedCoursesPromise, \n        this.edsCoursesPromise,\n        this.userHiddenCoursesPromise]);\n      // Assemble result:\n      this.result = await this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses);\n    }\n    await this.userHiddenCoursesPromise; // So we know that this.result is there.\n    this.notifySubscriber(subscriber, options);\n    this.subscribers.push({subscriber, options});\n  }\n\n  unsubscribe (subscriber: HiddenCoursesSubscriber) {\n    this.subscribers = this.subscribers.filter(s => s.subscriber !== subscriber);\n  }\n}\n\nif (!hiddenCoursesRepo) {\n  hiddenCoursesRepo = env.hiddenCoursesRepo = new HiddenCoursesRepo();\n}\n","import { Repo, RepoCommunicator} from './repo';\nimport { KedBackendClient, ListOptions, BatchRunner, createUUID } from 'kedbackend/client';\nimport { Document} from 'kedbackend/models';\n\nexport interface KedRepoOptions<T extends Document> {\n  getClient: ()=>KedBackendClient;\n  getQueryOptions: ()=>Promise<ListOptions>;\n  optimistic: boolean;\n  table: string;\n  user: string;\n}\n\nexport class KedRepo<T extends Document> {\n  mem: Repo<T>;\n  options: KedRepoOptions<T>;\n  \n  constructor(options: KedRepoOptions<T>) {\n    const {table, getClient, getQueryOptions} = options;\n    this.mem = new Repo<T>({query: async ()=>{\n      const queryOptions = await getQueryOptions();\n      return await getClient().list<T>(table, {\n        ...queryOptions,\n        cacheBust: this.getCacheBust()});\n    }});\n    this.options = options;\n  }\n\n  private getCacheBust() {\n    const {table, user} = this.options;\n    const cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);\n    return cacheBust || this.regenerateCacheBust();\n  }\n\n  private regenerateCacheBust() {\n    const {table, user} = this.options;\n    const cacheBust = createUUID();\n    localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);\n    return cacheBust;\n  }\n\n  async upsert(item: T, updater: (item: T) => void) {\n    if (!item.$etag) {\n      // Items without $etag cannot be retrieved from server, so it should be inserted.\n      const updatedItem = Object.assign({}, item);\n      updater(updatedItem);\n      return await this.insert([updatedItem]);\n    } else {\n      // We have an $etag, so we can expect it to live on the server.\n      // However, take care of the unlikely situation that it was deleted from server,\n      // and if so, insert it again.\n      await this.update([item], updater).catch(e => {\n        if (e.name === \"http404\" || e.name === \"http403\") {\n          const updatedItem = Object.assign({}, item);\n          updater(updatedItem);\n          return this.insert([updatedItem]);\n        }\n        return Promise.reject(e);\n      });\n    }\n  }\n\n  async update(items: T[], updater: (item: T) => void) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    const modifiedItems: T[] = items.map(item => {\n      const memRepoItem = this.mem.items.find(it => it.id === item.id);\n      item = Object.assign({}, memRepoItem || item);\n      updater(item);\n      return item;\n    });\n    if (optimistic) await this.mem.update(modifiedItems.map(x => Object.assign({}, x, {$meta: 'updating'})));\n    const res = await client.do (br => modifiedItems.forEach(item => br.put(table, item)))\n    .catch(e => e.name === \"http409\" ? // conflict\n      // Get a fresh version from server:\n      client.list<T>(table, {ids: items.map(item => item.id)}, {cache: 'no-cache'}).then(freshItems => {\n        // Update local version:\n        const modifiedItems = freshItems.map(freshItem => {\n          // Clone the fresh item\n          const modified = Object.assign({}, freshItem);\n          // Re-run the updater on the clone:\n          updater(modified);\n          return modified;\n        });\n        // Re-do the the put operation towards the server.\n        return client.do(br => modifiedItems.forEach(item => br.put(table, item)));\n      }) :\n      // Other unexpected error:\n      Promise.resolve(optimistic &&\n        this.mem.update(items)) // Undo optimistic update\n      .then(()=>{\n        return Promise.reject(e); // Reject with the error no matter.\n      }));\n    this.regenerateCacheBust();\n    modifiedItems.forEach(item => {\n      item.$etag = res.newEtags[item.id];\n      item.$meta = undefined;\n    });\n    await this.mem.update(modifiedItems); // Ensures new etag is is applied on next action.\n  }\n\n  stripGraphs (items: T[], graphs: string[]) {\n    return items.map(item => {\n      const clone = Object.assign({}, item);\n      graphs.forEach(graph => {\n        if (item[graph]) {\n          clone[graph] = (item[graph] as {id:string}[]).map (doc => ({id: doc.id}));\n        }\n      });\n      return clone;\n    });\n  }\n\n  async insert(items: T[]) {\n    const {getClient, optimistic, table, getQueryOptions} = this.options;\n    const client = getClient();\n    const queryOptions = await getQueryOptions();\n    const graphs = [].concat(queryOptions.include);\n    // Give IDs to each item:\n    items = items.map(item => item.id ? item : Object.assign({}, item, {id: createUUID()}));\n    const stripped = this.stripGraphs(items, graphs);\n    if (optimistic) await this.mem.insert(stripped.map(x => Object.assign({}, x, {$meta: 'adding'})));\n    const br = new BatchRunner();\n    for (const item of stripped) {\n      // Also add links to all foreign related items:\n      for (const graph of graphs) {\n        const foreignItems: Document[] = item[graph];\n        if (foreignItems) {\n          foreignItems.forEach(doc => {\n            br.link2(table, item.id, graph, doc.id);\n          });\n        }\n      }\n      br.add(table, item);\n    }\n    const res = await client.batch(br.mutationRequests).catch(e => {\n      if (optimistic) this.mem.delete(items.map(item => item.id));\n      return Promise.reject(e);\n    })\n    this.regenerateCacheBust();\n    items.forEach(item => item.$etag = res.newEtags[item.id]);\n    if (optimistic)\n      await this.mem.update(items); // Update with new $etag.\n    else\n      await this.mem.insert(items);\n  }\n\n  async delete (ids: string[]) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    if (optimistic) await this.mem.update(ids\n      .map(id => this.mem.items.find(x => x.id === id))\n      .filter(x => x)\n      .map(x => Object.assign({}, x, {$meta: 'deleting'})));\n    const res = await client.do (br => ids.forEach(id => br.delete(table, id))).catch(async e => {\n      if (optimistic) {\n        await this.mem.update(ids\n          .map(id => this.mem.items.find(x => x.id === id))\n          .filter(x => x)\n          .map(x => {\n            x = Object.assign({}, x);\n            delete x.$meta;\n            return x;\n          }));\n      }\n      throw e;\n    });\n    this.regenerateCacheBust();\n    await this.mem.delete(ids);\n  }\n}\n","import {KedRepo} from './ked-repo';\nimport { KGTermPlannerWeekPlan } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { getTermStartAndEnd } from '../utils/school-moment';\nimport moment from 'moment';\n\nclass KGTermPlannerRepo extends KedRepo<KGTermPlannerWeekPlan> {\n  constructor() {\n    const now = Date.now();\n    const [termStart, termEnd] = getTermStartAndEnd(moment(now));\n    super({\n      getClient() { return env.kedBackendClient; },\n      optimistic: true,\n      table: \"weekplans\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async ()=>{\n        return {\n          from: termStart.valueOf(),\n          to: termEnd.valueOf(),\n          role: \"USER\"\n        }\n      }\n    });\n  }\n}\n\nexport const termPlannerRepo = new KGTermPlannerRepo();\n\n","import { KedRepo } from './ked-repo';\nimport { KSTermPlannerWeekPlan } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { getTermStartAndEnd } from '../utils/school-moment';\nimport moment from 'moment';\n\nclass KSTermPlannerRepo extends KedRepo<KSTermPlannerWeekPlan> {\n  now: number;\n\n  async nextTerm() {\n    this.now = moment(this.now).add(6, 'months').valueOf();\n    await this.mem.refreshFromServer();\n  }\n\n  async prevTerm() {\n    this.now = moment(this.now).add(-6, 'months').valueOf();\n    await this.mem.refreshFromServer();\n  }\n\n  constructor() {\n    super({\n      getClient() { return env.kedBackendClient; },\n      optimistic: true,\n      table: \"weekplans-ks\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async () => {\n        const [termStart, termEnd] = getTermStartAndEnd(moment(this.now || Date.now()));\n        return {\n          from: termStart.valueOf(),\n          to: termEnd.valueOf(),\n          role: \"USER\"\n        }\n      }\n    });\n    this.now = Date.now();    \n  }\n}\n\nexport const termPlannerRepoKS = new KSTermPlannerRepo();\n","\n\nexport interface RepoCommunicator<T extends {id: string}> {\n  query(): Promise<T[]>;\n}\n\ntype Subscriber<T> = (items:T[]) => any;\n\nexport class Repo<T extends {id: string}> {\n  listPromise: Promise<void>;\n  items: T[];\n  subscribers: Subscriber<T>[];\n\n  constructor(public comm: RepoCommunicator<T>) {\n    this.listPromise = null;\n    this.items = null;\n    this.subscribers = [];\n  }\n\n  subscribe(subscriber: Subscriber<T>) {\n    return this.ensureHasData().then(()=>{\n      subscriber(this.items);\n      this.subscribers.push(subscriber);\n    });\n  }\n\n  unsubscribe(subscriber: Subscriber<T>) {\n    this.subscribers = this.subscribers.filter (s => s !== subscriber);\n  }\n\n  notifySubscribers() {\n    this.subscribers.forEach(s => s(this.items));\n  }\n\n  ensureHasData() {\n    if (!this.listPromise) this.refreshFromServer();\n    return this.listPromise;\n  }\n\n  refreshFromServer() {\n    this.listPromise = this.comm.query().then(items => {\n      this.items = items;\n      this.notifySubscribers();\n    });\n    return this.listPromise;\n  }\n  \n  async update(item: T | T[]) {\n    await this.ensureHasData();\n    const items = Array.isArray(item) ? item : [item];\n    this.items = this.items.map(it => {\n      const item = items.find(({id}) => it.id === id);\n      return item ?\n        Object.assign({}, item) :\n        it;\n    });\n    this.notifySubscribers();\n  }\n\n  insert(item: T | T[]) {\n    return this.ensureHasData().then(()=>{\n      this.items = this.items.concat(item);\n      this.notifySubscribers();\n    });\n  }\n\n  delete(id: string | string[]) {\n    const ids = Array.isArray(id) ? id : [id];\n    return this.ensureHasData().then(()=>{\n      this.items = this.items.filter(it => !ids.some(id => it.id === id));\n      this.notifySubscribers();\n    });\n  }\n}\n","import {KedRepo} from './ked-repo';\nimport { UserTask, UserSubTask } from 'kedbackend/models';\nimport env from '../globals/KED.env';\nimport { WeekPlannerPersistedState } from \"../components/weekplanner/weekplanner-persisted-state\";\nimport moment from 'moment';\nimport { createUUID, DocumentAccess } from 'kedbackend/client';\nimport { getAdjustedWeek, KEDWeek } from '../utils/weekutil';\n\nexport let userTasksRepo = env.userTasksRepo as UserTasksRepo;\n\nclass UserTasksRepo extends KedRepo<UserTask> {\n  persistedState: WeekPlannerPersistedState | null;\n\n  constructor() {\n    super({\n      getClient() { return env.kedBackendClient; },\n      optimistic: true,\n      table: \"usertasks\",\n      user: env.currentUser ? env.currentUser.mail : \"\",\n      getQueryOptions: async () => {\n        const userEmail = env.currentUser ? env.currentUser.mail : \"\";\n        if (!this.persistedState)\n          this.persistedState = await WeekPlannerPersistedState.load(userEmail);\n        const { weekDate } = this.persistedState;\n        const weekNumber = moment(weekDate).week();\n        const kedWeek = KEDWeek(moment(weekDate).year(), weekNumber);\n        /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]\n          .map(m => m.toDate().getTime());*/\n        \n          return {\n            from: kedWeek.notBefore,\n            to: kedWeek.notAfter,\n            role: \"USER\",\n            include: [\"task\", \"course\"],\n            flags: [\"includeIdsOnly\"],\n          };\n        }\n    });\n    this.persistedState = null;\n  }\n\n  async updatePersistedState(stateChanges: Partial<WeekPlannerPersistedState>) {\n    Object.assign(this.persistedState, stateChanges);\n    await this.persistedState.save();\n    this.mem.notifySubscribers();\n  }\n\n  async setTaskDoneState(userTask: UserTask, done: boolean) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    const modifiedItem = Object.assign({}, userTask, {done});\n    if (optimistic) await this.mem.update(Object.assign({}, modifiedItem, {$meta: 'updating'}));\n    // Now make sure to change the state for other weeks as well:\n    const similarTasks = await client.list<UserTask>('usertasks', {\n      name: userTask.name,\n      role: \"USER\",\n      include: [\"task\",\"course\"],\n      flags: [\"includeIdsOnly\"],\n      from: moment(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),\n      to: moment(this.persistedState.weekDate).add(3, 'weeks').valueOf()\n    }, {\n      cache: 'no-cache'\n    });\n    const identicalTasks = similarTasks.filter(t =>\n      t.courseName === userTask.courseName &&\n      t.learningGoal === userTask.learningGoal &&\n      (!userTask.task || t.task.map(t=>t.id).join('') === userTask.task.map(t=>t.id).join('')) &&\n      (!userTask.course || t.course.map(c=>c.id).join('') === userTask.course.map(c=>c.id).join('')));\n    await this.update(identicalTasks, t => t.done = done);\n  }\n\n  async setSubTaskDoneState (userTask: UserTask, subTaskId: string, done: boolean) {\n    const {getClient, optimistic, table} = this.options;\n    const client = getClient();\n    await this.update([userTask],\n      t => t.subTasks && t.subTasks.filter(st => st.id === subTaskId)\n        .forEach(st => st.done = done));\n  }\n\n  async setWeekPlannerBoxOpen(courseName: string, isOpen: boolean) {\n    const openCourses = { ...this.persistedState.openCourses };\n    if (isOpen)\n      openCourses[courseName] = true;\n    else\n      delete openCourses[courseName];\n    await this.updatePersistedState({openCourses});\n  }\n\n  async changeWeek(weekDate: Date) {\n    let persistedState = this.persistedState;\n    if (!persistedState) {\n      persistedState = await WeekPlannerPersistedState.load(env.currentUser.mail);\n    }\n    const newPersisted = new WeekPlannerPersistedState(persistedState);\n    newPersisted.weekDate = moment(weekDate).startOf('week').valueOf();\n    newPersisted.save();\n    this.persistedState = newPersisted;\n    await this.mem.refreshFromServer();\n  }\n\n  subscribe(subscriber: (userTasks: UserTask[], persistedState: WeekPlannerPersistedState, weekTextsUT: UserTask) => void) {\n    const proxySubscriber = (userTasks: UserTask[]) => {\n      subscriber(\n        userTasks.filter(ut => !ut.weekTexts),\n        this.persistedState,\n        userTasks.filter(ut => !!ut.weekTexts)[0] || {\n          id: createUUID(),\n          dateTime: this.persistedState.weekDate,\n          weekTexts: {assessment:'', strategy:''},\n          acl: [\n            // Default ACL: Let user self have full control over this item:\n            new DocumentAccess(\"email\", env.currentUser.mail, \"S\"),\n            // Additional ACL: Let employees on same school have read access to it.\n            // This currently only applies to tasks that refer to course tasks (not own tasks!)\n            new DocumentAccess(\"schoolRole\", `${env.currentUser.school}/EMPLOYEE`, \"R\")\n          ].map(ac => ac.toString())\n        });\n    };\n    proxySubscriber[\"subscriber\"] = subscriber;\n    this.mem.subscribe(proxySubscriber);\n  }\n\n  unsubscribe(subscriber: (userTasks: UserTask[], persistedState: WeekPlannerPersistedState, weekTextsUT: UserTask) => void) {\n    this.mem.subscribers = this.mem.subscribers.filter (s => s[\"subscriber\"] !== subscriber);\n  }\n  \n}\n\nif (!userTasksRepo) {\n  userTasksRepo = env.userTasksRepo = new UserTasksRepo();\n  userTasksRepo.mem.ensureHasData();\n}\n","import * as React from 'react';\nimport moment from 'moment';\nimport { Calendar } from '../components/calendar';\nimport { KSGoals } from '../components/ks-goals/goals';\nimport { LatestAssessments } from '../components/latest-assessments/latest-assessments';\nimport { KGTermPlanner } from '../components/kg-termplanner';\nimport { KSTermPlanner } from '../components/ks-termplanner2/termplanner';\nimport env from '../globals/KED.env';\nimport { WeekPlanner } from '../components/weekplanner';\nimport { LearningTasks } from '../components/learning-tasks';\nimport { MyCourses } from '../components/my-courses/my-courses';\nimport { ListCourses } from '../components/list-courses/list-courses';\n\nexport const components = {\n  LatestAssessments: {\n    component: LatestAssessments,\n    props: () => ({\n      locale: navigator.language,\n      limit: 15\n    })\n  },\n  KSGoals: {\n    component: KSGoals,\n    props: () => ({\n\n    })\n  },\n  KSTermPlanner: {\n    component: KSTermPlanner,\n    props: () => ({\n      initialDate: new Date(),\n      userEmail: env.currentUser.mail,\n      locale: 'sv'\n    })\n  },\n  KGTermPlanner: {\n    component: KGTermPlanner,\n    props: () => ({})\n  },\n  WeekPlanner: {\n    component: WeekPlanner,\n    props: () => ({\n      viewCourseUrl: 'http://svt.se'\n    })\n  },\n  Calendar: {\n    component: Calendar,\n    props: () => ({\n      locale: \"sv\",\n      firstDay: moment().startOf('week').weekday(0),\n      numDays: 5,\n      initialStartHour: 7,\n      initialEndHour: 18,\n      initialZoom: 0.75\n    })\n  },\n  /*CourseOverview: {\n    component: CourseOverview,\n    props: ()=>({\n      locale: navigator.language,\n    })\n  },*/\n  LearningTasks: {\n    component: LearningTasks,\n    props: () => ({\n      apiPath: localStorage.getItem('selectedLearningModuleUrl'),\n      pageId: \"dummy\"\n    })\n  },\n  MyCourses: {\n    component: MyCourses,\n    props: ()=> ({\n      viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'\n    })\n  },\n  ListCourses: {\n    component: ListCourses,\n    props: () => ({\n      viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'\n    })\n  }\n};\n","import cfg from '../globals/KED.cfg';\nimport env from '../globals/KED.env';\n\n/* Contains ENV-based config, replaced using rollup-plugin-replace by its corresponding\n * ENV-variables.\n *\n * See \n*/\ndeclare var process;\n\ncfg.ENVIRONMENT = process.env.ENVIRONMENT; // \"production\", \"development\" or \"test\"\ncfg.KED_TOKEN_PATH = null ; // Must be null in test environment for set-bearer-providers.ts to work accordingly!\ncfg.KED_TOKEN_URL = process.env.KED_TOKEN_URL; // \"https://kedauthtest.azurewebsites.net/token\"\ncfg.KED_CLIENT_ID = process.env.KED_CLIENT_ID; // \"devclient\", \"testclient\", \"...\"\ncfg.KED_CLIENT_SECRET = process.env.KED_CLIENT_SECRET;\ncfg.KED_API_URL = process.env.KED_API_URL; // \"https://kedbackendtest.azurewebsites.net/api/\"\ncfg.EDS_API_URL = process.env.EDS_API_URL; // \"https://edsportalowinapi.azurewebsites.net/api/\"\n\nimport { users } from './data/users';\nimport { parseQueryString } from '../utils/query-string';\nconst username = parseQueryString (location.search).user;\nif (username) {\n  const user = users.find(u => u.username === username);\n  if (user) {\n    env.currentUser = user;\n  }\n}\n\nconst { role, school } = parseQueryString(location.search);\nif (env.currentUser) {\n  if (role) {\n    env.currentUser.roles = role.split(',');\n  }\n  if (school) {\n    env.currentUser.school = school;\n  }\n}\n","import { LearningModuleTasks } from '../../contracts/ked-models';\n\nexport const learningModules: LearningModuleTasks[] = [{\n    moduleName: \"Steg 22\",\n    subject: {\n        name: \"Spanska\",\n        course: {\n            name: \"Spanska\",\n            url: \"/steg/spanska.4.4ae4e9d2159ef4e0120ad6d3.html\"\n        }\n    },\n    commonTasks: [],\n    learningGoals: [{\n        name: \"Aktiviteter i hemmet\",\n        tasks: [{\n            name: \"Aktiviteter i hemmet hos en peruansk familj\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/aktiviteterihemmethosenperuanskfamilj.4.4ae4e9d2159ef4e0120adb40.html\"\n        }, {\n            name: \"Uppgift till aktiviteter i hemmet\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/uppgifttillaktiviteterihemmet.4.4ae4e9d2159ef4e0120af887.html\"\n        }]\n    }, {\n        name: \"Familjeliv\",\n        tasks: [{\n            name: \"Vad pågår i din familj nu?\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/familjeliv/vadpagaridinfamiljnu.4.4ae4e9d2159ef4e0120b25e9.html\"\n        }, {\n            name: \"Uppgift familjeliv\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/familjeliv/uppgiftfamiljeliv.4.4ae4e9d2159ef4e0120af73a.html\"\n        }]\n    }, {\n        name: \"Samtal om familjeliv\",\n        tasks: [{\n            name: \"Samtalsdokument familjeliv\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalsdokumentfamiljeliv.4.4ae4e9d2159ef4e01209fe03.html\"\n        }, {\n            name: \"Samtalskarta-familjeliv\",\n            url: \"/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalskartafamiljeliv.4.4ae4e9d2159ef4e0120af6fd.html\"\n        }]\n    }\n    ]\n}, {\n    moduleName: \"Teknik\",\n    subject: {\n        name: \"Teknik\",\n        course: {\n            name: \"Tråd 5\",\n            url: \"/kurser/arskurs8/trad5.19.2d4f4005159f895477a15cc.html\"\n        }\n    },\n    commonTasks: [{\n        name: \"Tryck \",\n        url: \"/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/tryck.4.4ae4e9d2159ef4e01209dcde.html\"\n    }, {\n        name: \"Diskussionsfrågor till industriella revolutionen\",\n        url: \"/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/diskussionsfragortillindustriellarevolutionen.4.4ae4e9d2159ef4e0120a6fab.html\"\n    }, {\n        name: \"Hur fungerar en ångmaskin\",\n        url: \"/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/hurfungerarenangmaskin.4.4ae4e9d2159ef4e0120a1309.html\"\n    }, {\n        name: \"Ångmaskinens betydelse\",\n        url: \"/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/angmaskinensbetydelse.4.4ae4e9d2159ef4e0120a3deb.html\"\n    }],\n    learningGoals: [{\n        name: \"Identifiera och analysera ångmaskinen utifrån ändamålsenlighet och funktion,\"\n    }, {\n        name: \"använda teknikområdets begrepp och uttrycksform\"\n    }, {\n        name: \"värdera konsekvenser av ångmaskinen för individ, samhälle och miljö, och\"\n    }, {\n        name: \"analysera drivkrafter bakom teknikutveckling runt ångmaskinen och hur tekniken har förändratsöver tid.\"\n    }]\n}]\n\n","export const learningPageUrls = [\n  \"testdata/learning-tasks/amnesintegrerad.json\",\n  \"testdata/learning-tasks/loopad.json\",\n  \"testdata/learning-tasks/steg-larandemal.json\",\n  \"testdata/learning-tasks/steg-matte.json\",\n  \"testdata/learning-tasks/vanlig-kurs.json\"\n];\n","import {User} from '../../contracts/ked-models';\n\nexport const users : User[] = [{\n    displayName: \"Administratör\",\n    mail: \"vemendo@kedschools.com\",\n    roles: ['ADMIN','EMPLOYEE'],\n    school: 'KED',\n    username: \"admin\"\n},{\n    displayName: \"David\",\n    mail: \"david.fahlander@vemendo.se\",\n    roles: ['ADMIN','EMPLOYEE'],\n    school: 'KED',\n    username: \"david\"\n},{\n    displayName: \"Test-Live-Elev1\",\n    mail: \"ubw6757@edu.kunskapsgymnasiet.se\",\n    roles: ['STUDENT'],\n    school: 'Uppsala',\n    username: \"ubw6757@edu.kunskapsgymnasiet.se\"\n},{\n    displayName: \"Test-Live-Elev2\",\n    mail: \"ums4302@edu.kunskapsgymnasiet.se\",\n    roles: ['STUDENT'],\n    school: 'Uppsala',\n    username: \"ums4302@edu.kunskapsgymnasiet.se\"\n},{\n    displayName: \"Test-Live-Elev3\",\n    mail: \"uhh3460@edu.kunskapsgymnasiet.se\",\n    roles: ['STUDENT'],\n    school: 'Uppsala',\n    username: \"uhh3460@edu.kunskapsgymnasiet.se\"\n},{\n    displayName: \"Test-Live-Elev4(fel goals issue)\",\n    mail: \"umt6826@edu.kunskapsskolan.se\",\n    roles: [\"STUDENT\"],\n    school: \"Uppsala\",\n    username: \"umt6826@edu.kunskapsskolan.se\"\n},{\n    displayName: \"Test-Live-Elev5(future abilities)\",\n    mail: \"ujg3833@edu.kunskapsskolan.se\",\n    roles: [\"STUDENT\"],\n    school: \"Uppsala\",\n    username: \"ujg3833@edu.kunskapsskolan.se\"\n},{\n    displayName: \"Test-Live-Elev6(future abilities)\",\n    mail: \"ujt1363@edu.kunskapsskolan.se\",\n    roles: [\"STUDENT\"],\n    school: \"Uppsala\",\n    username: \"ujt1363@edu.kunskapsskolan.se\"\n},{\n    displayName: \"Test-Live-Lärare1\",\n    mail: \"rickard.albertsson@kunskapsgymnasiet.se\",\n    roles: ['EMPLOYEE'],\n    school: 'Uppsala',\n    username: \"rickard.albertsson@kunskapsgymnasiet.se\"\n},{\n    displayName: \"EDSTestUserGymnasium\",\n    mail: \"uhh3200@edu.kunskapsgymnasiet.se\",\n    //mail: \"UHH3200@EDU.KUNSKAPSGYMNASIET.SE\",\n    roles: [\"STUDENT\"],\n    username: \"EDSTestUser1\",\n    school: \"KED\",\n    schoolType: \"Gymnasium\"\n},{\n    displayName: \"vemendo.elev@kedschools.com\",\n    mail: \"vemendo.elev@kedschools.com\",\n    roles: [\"STUDENT\"],\n    username: \"vemendo.elev@kedschools.com\",\n    school: \"KED\",\n    schoolType: \"Gymnasium\"\n},{\n    displayName: \"Medarbetare Nacka\",\n    mail: \"medarbetare.nacka@kunskapsskolan.se\",\n    roles: [\"EMPLOYEE\"],\n    username: \"medarbetare.nacka/KS\",\n    school: \"Nacka\",\n    schoolType: \"Grundskolor\"\n},{\n    displayName: \"Medarbetare Globen\",\n    mail: \"medarbetare.globen@kunskapsgymnasiet.se\",\n    roles: [\"EMPLOYEE\"],\n    username: \"medarbetare.globen/KS\",\n    school: \"Globen\",\n    schoolType: \"Gymnasium\"\n},{\n    displayName: \"Elev Globen\",\n    mail: \"elev.globen@edu.kunskapsgymnasiet.se\",\n    schoolGrade: 2,\n    roles: ['STUDENT'],\n    username: \"elev.globen\",\n    school: \"Globen\",\n    schoolType: \"Gymnasium\"\n},{\n    displayName: \"Elev Borås\",\n    mail: \"elev.boras@edu.kunskapsskolan.se\",\n    schoolGrade: 7,\n    roles: ['STUDENT'],\n    username: \"elev.boras\",\n    school: \"Borås\",\n    schoolType: \"Grundskolor\"\n},{\n    displayName: \"Elev Borlänge\",\n    mail: \"elev.borlange@edu.kunskapsskolan.se\",\n    schoolGrade: 9,\n    roles: ['STUDENT'],\n    username: 'elev.borlange/KS',\n    school: 'Borlänge',\n    schoolType: \"Gymnasium\"\n},{\n    displayName: \"Roll-lös\",\n    mail: \"none@kunskapsskolan.se\",\n    username: \"none\",\n    roles: []\n}];\n\n","// <Initialization>\nimport './configure'; // Emulate server-side script\nimport '../global-setters/set-all'; // Client-side initialization\n// </Initialization>\n\nimport env from '../globals/KED.env';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { User } from '../contracts/ked-models';\nimport { learningModules } from './data/learningModules';\nimport { learningPageUrls } from './data/learningModules2';\nimport { users } from './data/users';\nimport { WeekPlanner } from '../components/weekplanner';\nimport { components } from './components';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport {KedBackendClientWebTest} from 'kedbackend/clientwebtest';\nimport { ChooseUser } from './utils/choose-user';\n\ninterface State {\n  selectedComponent: string,\n  selectedLearningModule: number,\n  selectedLearningModuleUrl: string\n}\n\nexport default class TestPage extends React.Component<{},State> {\n  componentArea: HTMLElement;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedComponent: localStorage.getItem(\"selectedComponent\") || Object.keys(components)[0],\n      selectedLearningModule: parseInt(localStorage.getItem(\"selectedLearningModule\") || \"0\"),\n      selectedLearningModuleUrl: localStorage.getItem(\"selectedLearningModuleUrl\") || \"\"\n    }\n  }\n\n  componentDidUpdate() {\n    console.log(\"component did update\")\n    this.renderTestComponent();\n  }\n\n  componentDidMount() {\n    this.renderTestComponent();\n  }\n\n  renderTestComponent() {\n    env.learningModuleTasks = learningModules[this.state.selectedLearningModule];\n    $(this.componentArea).html(\"\");\n\n    if (env.currentUser) {\n      ReactDOM.render((React as any).createElement(\n        components[this.state.selectedComponent].component,\n        components[this.state.selectedComponent].props(),\n        null), this.componentArea);\n    }\n  }\n\n  render() {\n    return env.currentUser ? <div className=\"test-page\">\n      <div className=\"header\">\n        <div className=\"test-selects\">\n          <form>\n            <h4>\n              Testsida för komponenter till nya startsidan\n            </h4>\n            <table><tbody><tr>\n            <td><label htmlFor=\"testComponent\">Komponent</label></td>\n            <td><select id=\"testComponent\" value={this.state.selectedComponent} onChange={ev => {\n              this.setState({ selectedComponent: ev.target.value });\n              localStorage.setItem(\"selectedComponent\", ev.target.value);\n              window.location.reload();\n            }}>\n              {Object.keys(components).map(c => <option key={c} value={c}>{c}</option>)}\n            </select>\n            </td></tr>\n\n            {this.state.selectedComponent === 'LearningGoalsAndTasks' && <tr><td><label htmlFor=\"testLearningModule\">Kursmodul</label></td>\n            <td><select id=\"testLearningModule\" value={this.state.selectedLearningModule} onChange={\n              ev => {\n                localStorage.setItem(\"selectedLearningModule\", ev.target.value);\n                window.location.reload();\n              }\n            }>\n              {learningModules.map((lm, i) =>\n                <option key={i} value={i}>{\n                  lm.subject.course.name + \"/\" +\n                  lm.subject.name + \"/\" +\n                  lm.moduleName}</option>)\n              }\n            </select></td></tr>}\n            {this.state.selectedComponent === 'LearningTasks' && <tr><td><label htmlFor=\"testLearningModuleUrl\">Kursmodul</label></td>\n            <td><select id=\"testLearningModuleUrl\" value={this.state.selectedLearningModuleUrl} onChange={\n              ev => {\n                localStorage.setItem(\"selectedLearningModuleUrl\", ev.target.value);\n                window.location.reload();\n              }\n            }>\n              {learningPageUrls.map((url, i) =>\n                <option key={i} value={url}>{url}</option>)\n              }\n            </select></td></tr>}\n            </tbody>\n            </table>\n          </form>\n        </div>\n      </div>\n      <hr />\n      <div className=\"componentRow\">\n        <div className=\"componentArea\" ref={div => this.componentArea = div}>\n        </div>\n        <div className=\"week-planner\">\n          {this.state.selectedComponent === 'LearningTasks' &&\n            <WeekPlanner viewCourseUrl=\"http://www.svt.se/nyheter\" />\n          }\n        </div>\n      </div>\n    </div> : <ChooseUser />\n  }\n}\n","import * as React from 'react';\nimport { users } from '../data/users';\n\nexport function ChooseUser() {\n  let select;\n  return <div className=\"sv-layout\">\n    <h2>Välj användare</h2>\n    <table className=\"login-table\"><thead><tr>\n      <th>Namn</th>\n      <th>Roller</th>\n      <th>E-post</th>\n      <th>Skola</th>\n    </tr></thead>\n      <tbody>\n        {users.map(({ username, displayName, mail, school, roles }) =>\n          <tr key={mail} onClick={() => location.search = `?user=${username}`}>\n            <td>{displayName}</td>\n            <td style={roles.length === 0 ? { fontStyle: 'italic' } : {}}>{roles.length === 0 ? \"saknar roller\" : roles.join(', ')}</td>\n            <td>{mail}</td>\n            <td style={school ? {} : { fontStyle: 'italic' }}>{school || \"saknar skola\"}</td>\n          </tr>\n        )}\n      </tbody></table>\n  </div>\n};\n","\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\n\n","\nexport class PendingJob {\n  private timeoutId = null;\n  private cancelled = false;\n  private pending = false;\n  private isJobExecuting = false;\n  private jobCallback: ()=>Promise<any>;\n  \n  constructor(callback: ()=>Promise<any>) {\n    this.jobCallback = callback;\n  }\n\n  triggerChange(throttle: number): any {\n    if (this.cancelled) return;\n    this.pending = true;\n    if (this.timeoutId !== null)\n      clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(()=>this.launchJob(), throttle);\n  }\n\n  stop() {\n    if (this.timeoutId !== null)\n      clearTimeout(this.timeoutId);\n    this.timeoutId = null;\n    this.cancelled = true;\n  }\n\n  private async launchJob() {\n    if (this.cancelled) return;\n    if (!this.pending) return;\n    if (this.isJobExecuting) return;\n    this.timeoutId = null;\n    try {\n      this.isJobExecuting = true;\n      this.pending = false;\n      await this.jobCallback();\n    } finally {\n      this.isJobExecuting = false;\n    }\n    if (this.pending)\n      await this.launchJob();\n  }\n}\n","export interface ParseQueryStringOptions {\n  toLower?: boolean;\n}\n\nexport function parseQueryString(locationSearch: string, options?: ParseQueryStringOptions): { [key: string]: string } {\n  const {toLower} = (options || {}) as ParseQueryStringOptions;\n  const result = {};\n  if (locationSearch && locationSearch.length > 1)\n    locationSearch.substr(1)\n      .split('&')\n      .map(part => part.split('=').map(s => decodeURIComponent(s.trim())))\n      .forEach(([key, value]) => result[toLower ? key.toLowerCase() : key] = value);\n  return result;\n}\n\nfunction encodeParams(params: {[key: string]:string}) {\n  return Object.keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`).join('&');\n}\n\nexport function generateQueryString(params: {[key: string]:string}) {\n  return \"?\" + encodeParams(params);\n}\n\nexport function parseHashQueryString(locationHash: string, options?: ParseQueryStringOptions) {\n  return parseQueryString(locationHash, options);\n}\n\nexport function generateHashQueryString(params: {[key: string]:string}) {\n  return \"#\" + encodeParams(params);\n}\n\nexport function splitUrlAndQuery (urlWithPossibleQuery: string) {\n  const pQuery = urlWithPossibleQuery.indexOf('?');\n  return pQuery >= 0 ?\n    [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :\n    [urlWithPossibleQuery, \"\"];\n}\n","import moment from 'moment';\nimport { Term, AcademicYear } from '../contracts/ked-models';\n\nexport interface SchoolMoment {\n  academicYear: AcademicYear;\n  term: Term;\n  week?: number;\n}\n\nexport function getFirstAndLastWeekOfTerm(term: Term) {\n  return term === 'AT' ?\n    [32, 51] :\n    [1, 25];\n}\n\nexport function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {\n  return now.month() >= 7 ? // 7 = August in JS Dates and in moment as well!\n    [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31\n    [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31\n}\n\nexport function getSchoolMoment(m: moment.Moment): SchoolMoment {\n  const thisYear = m.year();\n  const isAutumn = m.month() >= 7;\n  const [autumnYear, springYear] = isAutumn ?\n    [thisYear, thisYear + 1] :\n    [thisYear - 1, thisYear];\n  const academicYear = '' + autumnYear + '/' + springYear;\n  const term = isAutumn ? 'AT' : 'ST';\n  const week = m.week();\n  return { academicYear, term, week };\n}\n\nexport function addYear(aYear: AcademicYear, numYearsToAdd: number): AcademicYear {\n  return aYear.split('/')\n    .map(yearStr => parseInt(yearStr) + numYearsToAdd)\n    .map(year => '' + year)\n    .join('/');\n}\n\nexport function nextAcademicYear(aYear: AcademicYear): AcademicYear {\n  return addYear(aYear, 1);\n}\n\nexport function prevAcademicYear(aYear: AcademicYear): AcademicYear {\n  return addYear(aYear, -1);\n}\n","import moment from 'moment';\nimport { SchoolMoment, getSchoolMoment, addYear } from './school-moment';\nimport { AcademicYear, Term } from '../contracts/ked-models';\n\ntype Moment = moment.Moment;\n\nfunction isSchoolMoment(obj: Date | SchoolMoment): obj is SchoolMoment {\n  return 'academicYear' in obj;\n}\n\nexport class SchoolTerm {\n  academicYear: AcademicYear;\n  term: Term;\n\n  constructor(dateOrSchoolMoment: Date | SchoolMoment) {\n    const schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?\n      dateOrSchoolMoment : getSchoolMoment(moment(dateOrSchoolMoment));\n    this.academicYear = schoolMoment.academicYear;\n    this.term = schoolMoment.term;\n  }\n\n  get year() {\n    return parseInt(this.academicYear\n        .split('/')[this.term === 'AT' ? 0 : 1]);\n  }\n\n  nextTerm() {\n    return new SchoolTerm(this.term === 'AT' ?\n      {\n        term: 'ST',\n        academicYear: this.academicYear\n      } :\n      {\n        term: 'AT',\n        academicYear: addYear(this.academicYear, 1)\n      });\n  }\n\n  prevTerm() {\n    return new SchoolTerm(this.term === 'AT' ?\n      {\n        term: 'ST',\n        academicYear: addYear(this.academicYear, -1)\n      } :\n      {\n        term: 'AT',\n        academicYear: this.academicYear\n      });\n    \n  }\n\n  toLocaleString(locales: string[], shortYear?: boolean) {\n    let year = this.term === 'AT' ?\n      this.academicYear.split('/')[0]:\n      this.academicYear.split('/')[1];\n\n    if (shortYear)\n      year = year.substr(2);\n\n    for (let locale of locales) {\n      switch (locale.split('-')[0].split('_')[0].toLowerCase()) {\n        case 'en':\n          return `${this.term === 'AT' ? \"AT\" : \"ST\"} ${year}`;\n        case 'sv':\n          return `${this.term === 'AT' ? \"HT\" : \"VT\"} ${year}`;\n      }\n    }\n  }\n}\n","import $ from 'jquery';\n\nexport function tableWalk(tableElem: HTMLTableElement) {\n    $(tableElem).keydown(ev => {\n        const target = $(ev.target);\n\n        if (ev.which === 13 && !target.is('textarea')) {\n            var tabables = $(tableElem)\n                .find('[tabIndex=0]:visible:not([type=checkbox])').toArray() as any[];\n\n            var i = tabables.indexOf(ev.target);\n            if (i !== -1) {\n                var nextElement = tabables[(i + 1) % tabables.length];\n                $(nextElement).focus();\n            }\n        } else if (ev.which == 38 || ev.which == 40) { // up or down\n            var isUp = (ev.which == 38);\n            var td = target.closest('td,th');\n            var tr = td.closest('tr');\n            var index = tr.children().toArray().indexOf(td[0]);\n            let allTrs = $(tableElem).find('tr').toArray();\n            let trIndex = allTrs.indexOf(tr[0]);\n            var nextTr;\n            if (isUp && trIndex > 0 && (!target.is('textarea') || target[0].selectionStart === 0)) {\n                nextTr = $(allTrs[trIndex - 1]);\n            } else if (!isUp && trIndex > -1 && trIndex < allTrs.length - 1 && (!target.is('textarea') || target[0].selectionEnd === target.val().length)) {\n                nextTr = $(allTrs[trIndex + 1]);\n            }\n            if (nextTr) {\n                nextTr.children().eq(index).find('[tabIndex=0]').focus();\n                ev.stopPropagation();\n                ev.preventDefault();\n            }\n        } else if (ev.which === 37 || ev.which === 39) { // left or right\n            if (target.is(':input')) {\n                const {selectionStart, selectionEnd, value} = target[0];\n                if (selectionStart === selectionEnd) {\n                    var tabables = $(tableElem)\n                        .find('[tabIndex=0]:visible:not([type=checkbox])').toArray() as any[];\n\n                    var i = tabables.indexOf(ev.target);\n                    if (i !== -1 && i > 0 && ev.which === 37 && selectionStart === 0) { // left\n                        let prevElement = tabables[i - 1];\n                        $(prevElement).focus();\n                        ev.stopPropagation();\n                        ev.preventDefault();\n                    } else if (i !== -1 && i < tabables.length - 1 && ev.which === 39 && selectionEnd === value.length) { // right\n                        let nextElement = tabables[i + 1];\n                        $(nextElement).focus();\n                        ev.stopPropagation();\n                        ev.preventDefault();\n                    }\n                }\n            }\n        }\n    });\n}\n","\nexport function capitalizeFirst (str) {\n    for (let i=0, l=str.length; i<l; ++i) {\n        if (str.charCodeAt(i) < 0x2000) {\n            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);\n        }\n    }\n    return str;\n}\n\nexport function extend(obj, extension) {\n    if (typeof extension !== 'object') return obj;\n    Object.keys(extension).forEach(key => {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\n\nexport function clone<T,E> (obj : T, extension?: E) {\n    let clone = {};\n    Object.getOwnPropertyNames(obj).forEach(key => {\n        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));\n    });\n    if (extension) extend(clone, extension);\n    return clone as (T & E);\n}\n\nconst concat = [].concat;\nexport function flatten<T> (a : (T | T[])[]) {\n    return concat.apply([], a) as T[];\n}\n\nexport function compareProp(prop:string) {\n    return (a,b) => {\n        const aProp = a[prop], bProp = b[prop];\n        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;\n    }\n}\n\nexport function compareProps(props: string | string[], locales?: string | string[], options?: Intl.CollatorOptions) {\n    props = Array.isArray(props) ? props : [props];\n\n    const localeCompare = (a,b) =>\n        typeof a === 'string' ?\n            a.localeCompare(b, locales, options) :\n            a < b ? -1 : a > b ? 1 : 0;\n\n    return props\n        .map(prop => (a,b) => localeCompare(a[prop], b[prop]))\n        .reduce((cmp1, cmp2) =>\n            (a,b) => cmp1(a,b) || cmp2(a,b));\n}\n\nexport function L(text, ...args) {\n    let first = text[0];\n    return buildMessage(text, args);\n}\n\nfunction buildMessage (text, args) {\n    let rv = text[0];\n    for (let i=1, l=text.length; i<l; ++i) {\n        rv += args[i-1] + text[i];\n    }\n    return rv;\n}\n\nexport class TC<T> {\n    constructor(template: T) {\n        extend(this, template);\n    }\n}\n\nexport function dateTimeReviver (key, value) {\n    var a;\n    if (typeof value === 'string') {\n        a = /\\/Date\\((\\d*)\\)\\//.exec(value);\n        if (a) {\n            return new Date(+a[1]);\n        }\n    }\n    return value;\n}\n\nexport function showInfo (msg) {\n    var event = new CustomEvent('info', { 'detail': msg });\n    window.dispatchEvent(event);\n}\n\nexport function showError (errMsg: string | Error) {\n    const msg = typeof errMsg === 'string' ? errMsg : errMsg.message;\n    var event = new CustomEvent('customerror', { 'detail': msg });\n    console.error(errMsg);\n    window.dispatchEvent(event);\n}\n\nexport function maxLength(str: string, maxLen: number) {\n    return str.length > maxLen ?\n        str.substr(0, maxLen - 3) + \"...\" :\n        str;\n}\n\nexport function arrayToLookup<T>(a: T[], keyAccessor: (item: T) => string | number) {\n    const result : {[key: string] : T[]} = {};\n    for (let i=0, l=a.length; i<l; ++i) {\n        const item = a[i];\n        const key = keyAccessor(item);\n        let array = result[key];\n        if (array) array.push(item);\n        else result[key] = [item];\n    }\n    return result;\n}\n\nexport function arrayToMap<T>(a: T[], keyAccessor: (item: T) => string | number) {\n    const result : {[key: string] : T} = {};\n    for (let i=0, l=a.length; i<l; ++i) {\n        const item = a[i];\n        const key = keyAccessor(item);\n        result[key] = item;\n    }\n    return result;\n}\n\nexport function cherryPickProps<T> (obj: T, propsToPick: string[]): Partial<T> {\n    const result = {};\n    for (const param of propsToPick) {\n      if (param in obj) result[param] = obj[param];\n    }\n    return result as Partial<T>;\n}\n\nexport function distinct<T> (a: T[], keyAccessor: (item: T) => any) {\n    const map = arrayToMap(a, keyAccessor);\n    return Object.keys(map).map(key => map[key]);\n}\n","import moment, { Moment } from \"moment\";\n\nexport function KEDWeek (year: number, week: number) {\n  const m = moment(new Date(year, 1, 1)).locale('sv').week(week);\n  const res = {\n    year,\n    week,\n    notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),\n    notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()\n  };\n  return res;\n}\n\nexport function getAdjustedWeek(m: Moment) {\n  const clone = m.clone().locale('sv');\n  return m.weekday() >= 5 ? // Lördag 00:00 / Söndag 00:00?\n      m.week() + 1 : // Tillhör nästa vecka\n      m.week();\n}\n\n/*export function getWeekLimits (m: Moment) {\n  const clonedSwedish = m.clone().locale('sv');\n  const limits = {\n    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),\n    notAfter: clonedSwedish.startOf('week').add(5, 'days')\n  };\n}\n*/\n","module.exports = jQuery;","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}